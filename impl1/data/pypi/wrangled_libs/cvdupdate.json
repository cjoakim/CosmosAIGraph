{
  "classifiers": [
    "license :: osi approved :: apache software license",
    "operating system :: os independent",
    "programming language :: python :: 3"
  ],
  "description": "<p align=\"center\">a tool to download and update clamav databases and database patch files\nfor the purposes of hosting your own database mirror.\n<p align=\"center\"><em>copyright (c) 2021-2022 cisco systems, inc. and/or its affiliates. all rights reserved.</em></p>\n\n<p align=\"center\">\n<a href=\"https://pypi.org/project/cvdupdate/\">\n  <img src=\"https://badge.fury.io/py/cvdupdate.svg\" alt=\"pypi version\" height=\"18\">\n</a>\n<img alt=\"pypi - python version\" src=\"https://img.shields.io/pypi/pyversions/cvdupdate\" height=\"18\">\n<a href=\"https://discord.gg/6vnaqwnvgw\"><img src=\"https://img.shields.io/discord/636023333074370595.svg?logo=discord\" height=\"18\"/></a>\n<a href=\"https://twitter.com/clamav\"><img src=\"https://abs.twimg.com/favicons/twitter.ico\" width=\"18\" height=\"18\"></a>\n</p>\n\n## about\n\nthis tool downloads the latest clamav databases along with the latest database patch files.\n\nthis project replaces the `clamdownloader.pl` perl script by frederic vanden poel, formerly provided here: https://www.clamav.net/documents/private-local-mirrors\n\nrun this tool as often as you like, but it will only download new content if there is new content to download. if you somehow manage to download too frequently (eg: by using `cvd clean all` and `cvd update` repeatedly), then the official database server may refuse your download request, and one or more databases may go on cool-down until it's safe to try again.\n\n## requirements\n\n- python 3.6 or newer.\n- an internet connection with dns enabled.\n- the following python packages.  these will be installed automatically if you use `pip`, but may need to be installed manually otherwise:\n  - `click` v7.0 or newer\n  - `coloredlogs` v10.0 or newer\n  - `colorama`\n  - `requests`\n  - `dnspython` v2.1.0 or newer\n  - `rangehttpserver`\n\n## installation\n\nyou may install `cvdupdate` from pypi using `pip`, or you may clone the project git repository and use `pip` to install it locally.\n\ninstall `cvdupdate` from pypi:\n\n```bash\npython3 -m pip install --user cvdupdate\n```\n\n## basic usage\n\nuse the `--help` option with any `cvd` command to get help.\n\n```bash\ncvd --help\n```\n\n> _tip_: you may not be able to run the `cvd` or `cvdupdate` shortcut directly if your python scripts directory is not in your `path` environment variable. if you run into this issue, and do not wish to add the python scripts directory to your path, you can run cvd-update like this:\n>\n> ```bash\n> python -m cvdupdate --help\n> ```\n\n(optional) you may wish to customize where the databases are stored:\n\n```bash\ncvd config set --dbdir <your www path>\n```\n\nrun this to download the latest database and associated cdiff patch files:\n\n```bash\ncvd update\n```\n\ndownloaded databases will be placed in `~/.cvdupdate/database` unless you customized it to use a different directory.\n\nnewly downloaded databases will replace the previous database version, but the cdiff patch files will accumulate up to a configured maximum before it starts deleting old cdiffs (default: 30 cdiffs). you can configure it to keep more cdiffs by manually editing the config (default: `~/.cvdupdate/config.json`). the same behavior applies for cvd-update log rotation.\n\nrun this to serve up the database directory on `http://localhost:8000` so you can test it with freshclam.\n\n```bash\ncvd serve\n```\n\n> _disclaimer_: the `cvd serve` feature is not intended for production use, just for testing. you probably want to use a more robust http server for production work.\n\ninstall clamav if you don't already have it and, in another terminal window, modify your `freshclam.conf` file. replace:\n```\ndatabasemirror database.clamav.net\n```\n\n... with:\n```\ndatabasemirror http://localhost:8000\n```\n\n> _tip_: a default install on linux/unix places `freshclam.conf` in `/usr/local/etc/freshclam.conf`. if one does not exist, you may need to create it using `freshclam.conf.sample` as a template.\n\nnow, run `freshclam -v` or `freshclam.exe -v` to see what happens. you should see freshclam successfully update it's own database directory from your private database server.\n\nrun `cvd update` as often as you need.  maybe put it in a `cron` job.\n\n> _tip_: each command supports a `--verbose` (`-v`) mode, which often provides more details about what's going on under the hood.\n\n### cron example\n\ncron is a popular choice to automate frequent tasks on linux / unix systems.\n\n1. open a terminal running as the user which you want cvd-update to run under, do the following:\n\n   ```bash\n   crontab -e\n   ```\n\n2. press `i` to insert new text, and add this line:\n\n   ```bash\n   30 */4 * * * /bin/sh -c \"~/.local/bin/cvd update &> /dev/null\"\n   ```\n\n   or instead of `~/`, you can do this, replacing `username` with your user name:\n\n   ```bash\n   30 */4 * * * /bin/sh -c \"/home/username/.local/bin/cvd update &> /dev/null\"\n   ```\n\n3. press <escape>, then type `:wq` and press <enter> to write the file to disk and quit.\n\n**about these settings**:\n\ni selected `30 */4 * * *` to run at minute 30 past every 4th hour. cvd-update uses a dns check to do version checks before it attempts to download any files, just like freshclam. running cvd-update more than once a day should not be an issue.\n\ncvd-update will write logs to the `~/.cvdupdate/logs` directory, which is why i directed `stdout` and `stderr` to `/dev/null` instead of a log file. you can use the `cvd config set` command to customize the log directory if you like, or redirect `stdout` and `stderr` to a log file if you prefer everything in one log instead of separate daily logs.\n\n## optional functionality\n\n### using a custom dns server\n\ndns is required for cvd-update to function properly (to gather the txt record containing the current definition database version). you can select a specific nameserver to ensure said nameserver is used when querying the txt record containing the current database definition version available\n\n1. set the nameserver in the config. eg:\n\n   ```bash\n   cvd config set --nameserver 208.67.222.222\n   ```\n\n2. set the environment variable `cvdupdate_nameserver`. eg:\n\n   ```bash\n   cvdupdate_nameserver=\"208.67.222.222\" cvd update\n   ```\n\nthe environment variable will take precedence over the nameserver config setting.\n\nnote:  both options can be used to provide a comma-delimited list of nameservers to utilize for resolution.\n\n### using a proxy\n\ndepending on your type of proxy, you may be able to use cvd-update with your proxy by running cvd-update like this:\n\nfirst, set a custom domain name server to use the proxy:\n\n```bash\ncvd config set --nameserver <proxy_ip>\n```\n\nthen run cvd-update like this:\n\n```bash\nhttp_proxy=http://<proxy_ip>:<proxy_port> https_proxy=http://<proxy_ip>:<proxy_port> cvd update -v\n```\n\nor create a script to wrap the cvd-update call. something like:\n\n```bash\n#!/bin/bash\nhttp_proxy=http://<proxy_ip>:<proxy_port>\nexport http_proxy\nhttps_proxy=http://<proxy_ip>:<proxy_port>\nexport https_proxy\ncvd update -v\n```\n\n> _disclaimer_: cvd-update doesn't support proxies that require authentication at this time. if your network admin allows it, you may be able to work around it by updating your proxy to allow http requests through unauthenticated if the user-agent matches your specific cvd-update user agent. the cvd-update user-agent follows the form `cvdupdate/<version> (<uuid>)` where the `uuid` is unique to your installation and can be found in the `~/.cvdupdate/state.json` file (or `~/.cvdupdate/config.json` for cvdupdate <=1.0.2). see https://github.com/cisco-talos/cvdupdate/issues/9 for more details.\n>\n> adding support for proxy authentication is a ripe opportunity for a community contribution to the project.\n\n## files and directories created by cvd-update\n\nthis tool is to creates the following directories:\n - `~/.cvdupdate`\n - `~/.cvdupdate/logs`\n - `~/.cvdupdate/databases`\n\nthis tool creates the following files:\n - `~/.cvdupdate/config.json`\n - `~/.cvdupdate/state.json`\n - `~/.cvdupdate/databases/<database>.cvd`\n - `~/.cvdupdate/databases/<database>-<version>.cdiff`\n - `~/.cvdupdate/logs/<date>.log`\n\n> _tip_: you can set custom `database` and `logs` directories with the `cvd config set` command. it is likely you will want to customize the `database` directory to point to your http server's `www` directory (or equivalent). bare in mind that if you already downloaded the databases to the old directory, you may want to move them to the new directory.\n\n> _important_: if you want to use a custom config path, you'll have to use it in every command. if you're fine with having it go in `~/.cvdupdate/config.json`, don't worry about it.\n\n## additional usage\n\n### get familiar with the tool\n\nfamiliarize yourself with the various commands using the `--help` option.\n\n```bash\ncvd --help\ncvd config --help\ncvd update --help\ncvd clean --help\n```\n\nprint out the current list of databases.\n\n```bash\ncvd list -v\n```\n\nprint out the config to see what it looks like.\n\n```bash\ncvd config show\n```\n\n### do an update\n\ndo an update, use \"verbose mode\" to so you can get a feel for how it works.\n\n```bash\ncvd update -v\n```\n\nlist out the databases again:\n\n```bash\ncvd list -v\n```\n\nthe print out the config again so you can see what's changed.\n\n```bash\ncvd config show\n```\n\nand maybe take a peek in the database directory as well to see it for yourself.\n\n```bash\nls ~/.cvdupdate/database\n```\n\nhave a look at the logs if you wish.\n\n```bash\nls ~/.cvdupdate/logs\n\ncat ~/.cvdupdate/logs/*\n```\n\n### serve it up, test out freshclam\n\ntest out your mirror with freshclam on the same computer.\n\nthis tool includes a `--serve` feature that will host the current database directory on http://localhost (default port: 8000).\n\nyou can test it by running `freshclam` or `freshclam.exe` locally, where you've configured `freshclam.conf` with:\n\n```\ndatabasemirror http://localhost:8000\n```\n\n## contribute\n\nwe'd love your help. there are many ways to contribute!\n\n### community\n\njoin the clamav community on the [clamav discord chat server](https://discord.gg/sgaxa5q).\n\n### report issues\n\nif you find an issue with cvd-update or the cvd-update documentation, please submit an issue to our [github issue tracker](https://github.com/cisco-talos/cvdupdate/issues).  before you submit, please check to if someone else has already reported the issue.\n\n### development\n\nif you find a bug and you're able to craft a fix yourself, consider submitting the fix in a [pull request](https://github.com/cisco-talos/cvdupdate/pulls). your help will be greatly appreciated.\n\nif you want to contribute to the project and don't have anything specific in mind, please check out our [issue tracker](https://github.com/cisco-talos/cvdupdate/issues).  perhaps you'll be able to fix a bug or add a cool new feature.\n\n_by submitting a contribution to the project, you acknowledge and agree to assign cisco systems, inc the copyright for the contribution. if you submit a significant contribution such as a new feature or capability or a large amount of code, you may be asked to sign a contributors license agreement comfirming that cisco will have copyright license and patent license and that you are authorized to contribute the code._\n\n#### development set-up\n\nthe following steps are intended to help users that wish to contribute to development of the cvd-update project get started.\n\n1. create a fork of the [cvd-update git repository](https://github.com/cisco-talos/cvdupdate), and then clone your fork to a local directory.\n\n    for example:\n\n    ```bash\n    git clone https://github.com/<your username>/cvdupdate.git\n    ```\n\n2. make sure cvd-update is not already installed.  if it is, remove it.\n\n    ```bash\n    python3 -m pip uninstall cvdupdate\n    ```\n\n3. use pip to install cvd-update in \"edit\" mode.\n\n    ```bash\n    python3 -m pip install -e --user ./cvdupdate\n    ```\n\nonce installed in \"edit\" mode, any changes you make to your clone of the cvd-update code will be immediately usable simply by running the `cvdupdate` / `cvd` commands.\n\n### conduct\n\nthis project has not selected a specific code-of-conduct document at this time. however, contributors are expected to behave in professional and respectful manner. disrespectful or inappropriate behavior will not be tolerated.\n\n## license\n\ncvd-update is licensed under the apache license, version 2.0 (the \"license\"). you may not use the cvd-update project except in compliance with the license.\n\na copy of the license is located [here](license), and is also available online at [apache.org](http://www.apache.org/licenses/license-2.0).\n\nunless required by applicable law or agreed to in writing, software\ndistributed under the license is distributed on an \"as is\" basis,\nwithout warranties or conditions of any kind, either express or implied.\nsee the license for the specific language governing permissions and\nlimitations under the license.\n",
  "docs_url": null,
  "keywords": "",
  "license": "",
  "name": "cvdupdate",
  "package_url": "https://pypi.org/project/cvdupdate/",
  "project_url": "https://pypi.org/project/cvdupdate/",
  "project_urls": {
    "Homepage": "https://github.com/Cisco-Talos/cvdupdate"
  },
  "release_url": "https://pypi.org/project/cvdupdate/1.1.1/",
  "requires_dist": [
    "click (>=7.0)",
    "coloredlogs (>=10.0)",
    "colorama",
    "requests",
    "dnspython (>=2.1.0)",
    "rangehttpserver"
  ],
  "requires_python": "",
  "summary": "clamav private database mirror updater tool",
  "version": "1.1.1",
  "releases": [],
  "developers": [
    "clamav-bugs@external.cisco.com",
    "the_clamav_team"
  ],
  "kwds": "clamav cvdupdate pypi pyversions py",
  "license_kwds": "",
  "libtype": "pypi",
  "id": "pypi_cvdupdate",
  "homepage": "https://github.com/cisco-talos/cvdupdate",
  "release_count": 8,
  "dependency_ids": [
    "pypi_click",
    "pypi_colorama",
    "pypi_coloredlogs",
    "pypi_dnspython",
    "pypi_rangehttpserver",
    "pypi_requests"
  ]
}