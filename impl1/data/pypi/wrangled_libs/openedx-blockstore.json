{
  "classifiers": [
    "development status :: 3 - alpha",
    "framework :: django",
    "framework :: django :: 3.2",
    "intended audience :: developers",
    "license :: osi approved :: gnu affero general public license v3 or later (agplv3+)",
    "natural language :: english",
    "programming language :: python :: 3",
    "programming language :: python :: 3.8"
  ],
  "description": "==========\nblockstore\n==========\n\n|status-badge| |license-badge| |ci-badge|\n\n-------\npurpose\n-------\n\nblockstore is a system for storing versioned, reusable educational content for open edx.\n\nit is designed as a replacement for `modulestore <https://github.com/openedx/edx-platform/tree/master/xmodule/modulestore>`_. it is meant to be a lower-level service than the modulestore, and is designed around the concept of storing small, reusable pieces of content, rather than large, fixed content structures such as courses. for open edx, blockstore is designed to facilitate a much greater level of content re-use than is currently possible, enable new adaptive learning features, and enable delivery of learning content in new ways (not just large traditional courses).\n\n.. list-table:: comparison\n   :widths: 20 40 40\n   :header-rows: 1\n\n   * - system\n     - modulestore\n     - blockstore\n   * - goal\n     - designed to store courses consisting of a hierarchy of xmodules (and later, xblocks)\n     - designed around the concept of storing small, reusable pieces of content which are simply files. can be used for content libraries, courses, or any other purpose.\n   * - stores data in\n     - mongodb\n     - s3 (or similar)\n   * - stores xblock data as\n     - json field data, with \"settings\" and \"content\" fields separated in different documents\n     - `olx <https://edx.readthedocs.io/projects/edx-open-learning-xml/en/latest/what-is-olx.html>`_\n   * - content re-use\n     - very limited support\n     - built in support\n   * - focus\n     - includes deeply integrated xmodule runtime, increasing complexity\n     - not aware of xblocks; xblock runtime is implemented `separately <https://github.com/openedx/edx-platform/blob/master/openedx/core/djangoapps/xblock/runtime/blockstore_runtime.py>`_\n   * - associated xblock runtime (lms)\n     -  `lmsmodulesystem <https://github.com/openedx/edx-platform/blob/db32ff2cdf678fa8edd12c9da76a76eef0478614/lms/djangoapps/lms_xblock/runtime.py#l137>`_\n     -  `blockstorexblockruntime <https://github.com/openedx/edx-platform/blob/7dc60db1d9832ae9382e08d2a686626995010338/openedx/core/djangoapps/xblock/runtime/blockstore_runtime.py#l28>`_\n   * - image/pdf/other asset files used for each xblock are stored\n     - in mongodb at the course level (contentstore/gridfs)\n     - alongside each xblock's olx file. associated with the individual xblock, not the course.\n\nblockstore was originally developed by harvard's  `labxchange <https://www.labxchange.org/>`_ and the `amgen foundation <https://www.amgen.com/responsibility/amgen-foundation/>`_, along with `edx <https://www.edx.org>`_.\n\n--------------\ncurrent status\n--------------\n\nas of **april 2022** (\"master\" version of open edx) or the **nutmeg** named release of open edx, blockstore is included as a django app within open edx platform. see `moving blockstore into edx-platform <decisions/0002-app-not-service.rst>`_ for an explanation of this. prior to those versions, blockstore was only available as an independent application, and was not included in any open edx installations by default.\n\nblockstore is used to power the **content libraries v2** feature of open edx. it is *not* directly used for course functionality, nor for the \"v1\" content libraries feature.\n\n--------------\ndesign details\n--------------\n\nsee `design <design.rst>`_ for an overview of blockstore's design as it exists today. see `\"blockstore design\" <https://openedx.atlassian.net/wiki/spaces/ac/pages/737149430/blockstore+design>`_ on the wiki for historical context.\n\n---------------\ngetting started\n---------------\n\nthe easiest way to try out the \"content libraries v2\" feature along with blockstore is to use the tutor devstack and\n`the library-authoring mfe tutor plugin <https://github.com/openedx/frontend-app-library-authoring/tree/master/tutor-contrib-library-authoring-mfe#readme>`_. see that plugin's readme for details.\n\n-------------------------\nrunning integration tests\n-------------------------\n\nopen edx includes some integration tests for blockstore, which run by default as part of the test suite. to run them manually, from a studio/cms shell, run these commands:\n\n.. code::\n\n   python -wd -m pytest --ds=cms.envs.test openedx/core/lib/blockstore_api/ openedx/core/djangolib/tests/test_blockstore_cache.py openedx/core/djangoapps/content_libraries/tests/\n   python -wd -m pytest --ds=lms.envs.test openedx/core/lib/blockstore_api/ openedx/core/djangolib/tests/test_blockstore_cache.py openedx/core/djangoapps/content_libraries/tests/\n\nto run these integration tests while using elasticsearch, add ``edxapp_enable_elasticsearch_for_tests=1`` to the beginning of the above commands. to run these integration tests while using a specific container's version of elasticsearch, also add ``edxapp_test_elasticsearch_host`` with a specific container name on the above commands:\n\n.. code::\n\n   edxapp_enable_elasticsearch_for_tests=1 edxapp_test_elasticsearch_host=edx.devstack.elasticsearch710 python -wd -m pytest ...\n\n-------------------\nusing in production\n-------------------\n\nby default, blockstore is run as an app inside of open edx. enable it using the waffle switch `blockstore.use_blockstore_app_api <https://edx.readthedocs.io/projects/edx-platform-technical/en/latest/featuretoggles.html#featuretoggle-blockstore.use_blockstore_app_api>`_.\n\nif you need to run blockstore as a separate service (e.g. for scalability or performance reasons), you can deploy blockstore in production using `the blockstore ansible role <https://github.com/openedx/configuration/tree/master/playbooks/roles/blockstore>`_.\n\n-------------------------------------------------------\ndevelopment in devstack\n-------------------------------------------------------\n\nif you want to develop blockstore as a local python package installed in edx-platform, use the following steps:\n\n#. prerequisite: have an open edx `devstack <https://github.com/openedx/devstack>`_ properly installed and working. your devstack must use the nutmeg release of open edx (or newer) or be tracking the ``master`` branch of ``edx-platform``.\n\n#. to run blockstore as an app inside of open edx, enable it by activating the waffle switch `blockstore.use_blockstore_app_api <https://edx.readthedocs.io/projects/edx-platform-technical/en/latest/featuretoggles.html#featuretoggle-blockstore.use_blockstore_app_api>`_ in lms or studio admin.\n\n#. clone this repo in the ``src/`` directory, a sibling directory of your devstack folder.\n\n#. in your devstack directory, run the following commands in order:\n\n   .. code::\n\n      # bring up the lms +studio containers\n      make dev.up.large-and-slow\n      # bring up the studio shell\n      make dev.shell.studio\n      # unistall the pypi blockstore\n      pip uninstall openedx-blockstore #you will need to confirm the unistall with \"y\".\n      #install your local blockstore.\n      pip install -e /edx/src/blockstore/  \n      exit\n\n      # do the same in the lms\n      make dev.shell.lms\n      # unistall the pypi blockstore\n      pip uninstall openedx-blockstore #you will need to confirm the unistall with \"y\".\n      #install your local blockstore.\n      pip install -e /edx/src/blockstore/  \n      exit\n\n      #restart the servers to bring in changes.\n      make dev.restart-devserver.lms dev.restart-devserver.studio\n\n      # you can see that your env is now installed openedx-blockstore from a local directory ``/edx/src/blockstore`` by running:\n      make dev.shell.lms\n      pip list\n\n\nseeing your changes will sometimes require running make requirements and then restarting the container.\n\nyou're probably also going to want to create a collection and organization for using content libraries from the devstack command line, using:\n\n   .. code::\n\n       # create a \"collection\" that new content libraries / xblocks can be created within:\n        docker exec -t edx.devstack.lms bash -c \"source ~/.bashrc && echo \\\"from blockstore.apps.bundles.models import collection; coll, _ = collection.objects.get_or_create(title='devstack content collection', uuid='11111111-2111-4111-8111-111111111111')\\\" | ./manage.py lms shell\"\n       # create an \"organization\":\n       docker exec -t edx.devstack.lms bash -c \"source /edx/app/edxapp/edxapp_env && echo \\\"from organizations.models import organization; organization.objects.get_or_create(short_name='developerinc', defaults={'name': 'developerinc', 'active': true})\\\" | python /edx/app/edxapp/edx-platform/manage.py lms shell\"\n\nthe library authoring mfe will want to know about that collection id `using a env variable. <https://github.com/openedx/frontend-app-library-authoring/blob/d590aa2eb54c94b39d94f2ba12a6b458082c2e5e/.env#l19>`_\n\nthen restart studio and the lms (``make dev.restart-devserver.lms dev.restart-devserver.studio``).\n\nyou then can begin setting up the `library authoring mfe <https://github.com/openedx/frontend-app-library-authoring/>`_ to use the feature of blockstore for content libraries v2.\n\n-------------------------------------------------------\nrunning and testing as a separate service\n-------------------------------------------------------\n\nblockstore was initially developed as an independently deployed application, which runs in a separate container/proccess from the lms. it is still possible to run blockstore that way, both in production and development.\n\nto run it as an independent application in development:\n\n#. prerequisite: have an open edx `devstack <https://github.com/openedx/devstack>`_ properly installed and working. your devstack must use the nutmeg release of open edx (or newer) or be tracking the ``master`` branch of ``edx-platform``.\n\n#. clone this repo and ``cd`` into it.\n\n#. to start the django development server inside a docker container, run this on\n   your host machine:\n\n   .. code::\n\n      make easyserver\n\n   blockstore is now running at http://localhost:18250/ . now we need to configure studio/lms to work with it.\n\n#. run these commands on your host computer:\n\n   .. code::\n\n      # create a service user for the edx-platform to use when authenticating and making api calls\n      docker exec -t edx.devstack.blockstore bash -c \"source ~/.bashrc && echo \\\"from django.contrib.auth import get_user_model; from rest_framework.authtoken.models import token; user = get_user_model(); edxapp_user, _ = user.objects.get_or_create(username='edxapp'); token.objects.get_or_create(user=edxapp_user, key='edxapp-insecure-devstack-key')\\\" | ./manage.py shell\"\n      # configure the lms and studio to use the key\n      docker exec -t edx.devstack.lms bash -c \"grep blockstore_api_auth_token /edx/app/edxapp/edx-platform/lms/envs/private.py || echo blockstore_api_auth_token = \\'edxapp-insecure-devstack-key\\' >> /edx/app/edxapp/edx-platform/lms/envs/private.py\"\n      docker exec -t edx.devstack.studio bash -c \"grep blockstore_api_auth_token /edx/app/edxapp/edx-platform/cms/envs/private.py || echo blockstore_api_auth_token = \\'edxapp-insecure-devstack-key\\' >> /edx/app/edxapp/edx-platform/cms/envs/private.py\"\n      # create a \"collection\" that new content libraries / xblocks can be created within:\n      docker exec -t edx.devstack.blockstore bash -c \"source ~/.bashrc && echo \\\"from blockstore.apps.bundles.models import collection; coll, _ = collection.objects.get_or_create(title='devstack content collection', uuid='11111111-2111-4111-8111-111111111111')\\\" | ./manage.py shell\"\n      # create an \"organization\":\n      docker exec -t edx.devstack.lms bash -c \"source /edx/app/edxapp/edxapp_env && echo \\\"from organizations.models import organization; organization.objects.get_or_create(short_name='developerinc', defaults={'name': 'developerinc', 'active': true})\\\" | python /edx/app/edxapp/edx-platform/manage.py lms shell\"\n\n   then restart studio and the lms (``make dev.restart-devserver.lms dev.restart-devserver.studio``).\n\n#. now you should be able to use blockstore in studio.\n\n   to edit blockstore content libraries in studio, you'll need to install either `the content libraries v2 frontend <https://github.com/openedx/frontend-app-library-authoring/>`_ or `ramshackle <https://github.com/open-craft/ramshackle/>`_. alternatively, you can use the `content libraries v2 rest api <https://github.com/openedx/edx-platform/blob/master/openedx/core/djangoapps/content_libraries/urls.py>`_ to create content programmatically.\n\n   to use blockstore library content in a course, open your course in studio. in its advanced settings, add ``library_sourced`` to the list of \"advanced block types\". in the \"unit edit view\" in studio, find the green \"add new component\" buttons. click advanced > library sourced content. edit the new library sourced content xblock to enter the xblock id of the library content that you'd like to use. it should be similar to ``lb:developerinc:mylibrary:1`` (note: ``lb:`` is short for \"library block\" and should not be confused with the ``lib:`` prefix used to identify a library).\n\n#. optional: to log in to blockstore in your web browser directly, you'll need to configure sso with your devstack. most people won't need to do this, but it's helpful for debugging or development.\n\n   #. go to http://localhost:18000/admin/oauth2_provider/application/ and add a new application\n   #. set \"client id\" to ``blockstore-sso-key``\n   #. set \"redirect uris\" to ``http://localhost:18250/complete/edx-oauth2/``\n   #. set \"client type\" to \"confidential\"\n   #. set \"authorization grant type\" to \"authorization code\"\n   #. set \"name\" to ``blockstore-sso``\n   #. check \"skip authorization\"\n   #. press \"save and continue editing\"\n   #. go to http://localhost:18000/admin/oauth_dispatch/applicationaccess/\n   #. click \"add application access +\", choose application: ``blockstore-sso`` and set scopes to ``user_id``, then hit \"save\"\n   #. copy ``blockstore/settings/private.py.example`` to ``blockstore/settings/private.py``\n   #. in ``private.py``, set ``social_auth_edx_oauth2_secret`` to the random \"client secret\" value.\n   #. now you can login at http://localhost:18250/login/\n\n#. optional: if running an open edx devstack under a project name different\n   than the default (support for which was introduced\n   [here](https://github.com/openedx/devstack/pull/532)), simply export\n   ``openedx_project_name`` and substitute the container names in the commands\n   above accordingly.\n\n#. optional: to run the unit tests in this mode:\n\n   #. get into the blockstore container: ``make blockstore-shell``\n   #. and then run ``make test``\n\n#. optional: to run the integration tests in this mode:\n\n   open edx includes some integration tests for blockstore. to run them with a separate blockstore instance, first start an isolated test version of blockstore by running ``make testserver`` from the ``blockstore`` repo root directory on your host computer. then, from ``make dev.shell.studio``, run these commands:\n\n   #. ``edxapp_run_blockstore_tests=1 python -wd -m pytest --ds=cms.envs.test openedx/core/lib/blockstore_api/ openedx/core/djangolib/tests/test_blockstore_cache.py openedx/core/djangoapps/content_libraries/tests/``\n   #. ``edxapp_run_blockstore_tests=1 python -wd -m pytest --ds=lms.envs.test openedx/core/lib/blockstore_api/ openedx/core/djangolib/tests/test_blockstore_cache.py openedx/core/djangoapps/content_libraries/tests/``\n\n------------\ngetting help\n------------\n\nask questions and discuss this project on `slack <https://openedx.slack.com/messages/general/>`_ or the `open edx community discussion forum <https://discuss.openedx.org/>`_.\n\n------------\ncontributing\n------------\n\ncontributions are welcome. please read `how to contribute <https://github.com/openedx/.github/blob/master/contributing.md>`_ for details.\n\n----------------------------\nthe open edx code of conduct\n----------------------------\n\nall community members are expected to follow the `open edx code of conduct`_.\n\n.. _open edx code of conduct: https://openedx.org/code-of-conduct/\n\n------\npeople\n------\n\nthe assigned maintainers for this component and other project details may be\nfound in `backstage`_. backstage pulls this data from the ``catalog-info.yaml``\nfile in this repo.\n\n.. _backstage: https://backstage.openedx.org/catalog/default/component/blockstore\n\n\n-------------------------\nreporting security issues\n-------------------------\n\nplease do not report security issues in public. please email security@edx.org.\n\n\n.. |ci-badge| image:: https://github.com/openedx/blockstore/workflows/ci/badge.svg?branch=master\n    :target: https://github.com/openedx/blockstore/actions\n    :alt: test suite status\n\n.. |status-badge| image:: https://img.shields.io/badge/status-maintained-brightgreen\n    :alt: maintained\n\n.. |license-badge| image:: https://img.shields.io/github/license/openedx/blockstore.svg\n    :target: https://github.com/openedx/blockstore/blob/master/license\n    :alt: license\n\n\nchange log\n----------\n\n..\n   all enhancements and patches to blockstore will be documented\n   in this file.  it adheres to the structure of https://keepachangelog.com/ ,\n   but in restructuredtext instead of markdown (for ease of incorporation into\n   sphinx documentation and the pypi description).\n\n   this project adheres to semantic versioning (https://semver.org/).\n\n.. there should always be an \"unreleased\" section for changes pending release.\n\nunreleased\n~~~~~~~~~~\n\n*\n\n[1.4.0] - 2023-08-07\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nadded\n_______\n\n* added support for django 4.2\n\n\n[1.3.1] - 2023-03-06\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nchanged\n_______\n\n* adds migration file that was missing from v1.3.0.\n\n\n[1.3.0] - 2023-02-06\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nadded\n_____\n\n* adds support for installing this package as a wheel (``pip install openedx-blockstore``) rather than having to use editable mode (``pip install -e ./blockstore``).\n\nchanged\n_______\n\n* fixes a bug where a new bundle's collection could not be set via django admin.\n* various configuration and build tooling fixes. see commit log of 1.2.0...1.3.0 for full details.\n\n\n\n[1.2.0] - 2021-01-25\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nadded\n_____\n\n* adds api unit tests to improve test coverage.\n\nchanged\n_______\n\n* updates the python api to use the models directly.\n\n[1.1.0] - 2021-10-25\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nadded\n_____\n\n* move apps/api to apps/rest_api.\n* copy edx-platform/openedx/core/lib/blockstore_api to blockstore/apps/api.\n  this code has been copied over so it is easier to review the python api\n  implementation in development.\n* make code into an installable package.\n\n\n\n",
  "docs_url": null,
  "keywords": "python edx",
  "license": "agpl 3.0",
  "name": "openedx-blockstore",
  "package_url": "https://pypi.org/project/openedx-blockstore/",
  "project_url": "https://pypi.org/project/openedx-blockstore/",
  "project_urls": {
    "Homepage": "https://github.com/openedx/blockstore"
  },
  "release_url": "https://pypi.org/project/openedx-blockstore/1.4.0/",
  "requires_dist": [
    "djangorestframework",
    "django",
    "edx-auth-backends",
    "edx-api-doc-tools",
    "drf-nested-routers",
    "sqlparse",
    "django-filter",
    "edx-django-utils",
    "edx-django-release-util",
    "mysqlclient",
    "attrs",
    "django-environ",
    "django-waffle",
    "pytz"
  ],
  "requires_python": ">=3.8",
  "summary": "blockstore is a storage system for learning content in open edx.",
  "version": "1.4.0",
  "releases": [],
  "developers": [],
  "kwds": "modulestore contentstore storing blockstore blockstore_api",
  "license_kwds": "agpl 3.0",
  "libtype": "pypi",
  "id": "pypi_openedx_blockstore",
  "homepage": "https://github.com/openedx/blockstore",
  "release_count": 4,
  "dependency_ids": [
    "pypi_attrs",
    "pypi_django",
    "pypi_django_environ",
    "pypi_django_filter",
    "pypi_django_waffle",
    "pypi_djangorestframework",
    "pypi_drf_nested_routers",
    "pypi_edx_api_doc_tools",
    "pypi_edx_auth_backends",
    "pypi_edx_django_release_util",
    "pypi_edx_django_utils",
    "pypi_mysqlclient",
    "pypi_pytz",
    "pypi_sqlparse"
  ]
}