{
  "classifiers": [
    "development status :: 4 - beta",
    "environment :: console",
    "intended audience :: developers",
    "license :: osi approved :: apache software license",
    "operating system :: macos :: macos x",
    "operating system :: microsoft :: windows",
    "programming language :: python",
    "programming language :: python :: 3.5",
    "programming language :: python :: 3.6",
    "programming language :: python :: 3.7"
  ],
  "description": "<!--- spdx-license-identifier: apache-2.0 -->\r\n#\r\n\r\n![onnxmltools_logo_main](docs/onnxmltools_logo_main.png)\r\n\r\n| linux                                                                                                                                                                                                                          | windows                                                                                                                                                                                                                        |\r\n|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| [![build status](https://dev.azure.com/onnxmltools/onnxmltools/_apis/build/status/onnxmltools-linux-conda-ci?branchname=master)](https://dev.azure.com/onnxmltools/onnxmltools/_build/latest?definitionid=3?branchname=master) | [![build status](https://dev.azure.com/onnxmltools/onnxmltools/_apis/build/status/onnxmltools-win32-conda-ci?branchname=master)](https://dev.azure.com/onnxmltools/onnxmltools/_build/latest?definitionid=3?branchname=master) |\r\n\r\n## introduction\r\n\r\nonnxmltools enables you to convert models from different machine learning toolkits into [onnx](https://onnx.ai). currently the following toolkits are supported:\r\n\r\n* tensorflow (a wrapper of [tf2onnx converter](https://github.com/onnx/tensorflow-onnx/))\r\n* scikit-learn (a wrapper of [skl2onnx converter](https://github.com/onnx/sklearn-onnx/))\r\n* apple core ml\r\n* spark ml (experimental)\r\n* lightgbm\r\n* libsvm\r\n* xgboost\r\n* h2o\r\n* catboost\r\n\r\npytorch has its builtin onnx exporter check [here](https://pytorch.org/docs/stable/onnx.html) for details.\r\n\r\n## install\r\n\r\nyou can install latest release of onnxmltools from [pypi](https://pypi.org/project/onnxmltools/):\r\n\r\n```bash\r\npip install onnxmltools\r\n```\r\n\r\nor install from source:\r\n\r\n```bash\r\npip install git+https://github.com/microsoft/onnxconverter-common\r\npip install git+https://github.com/onnx/onnxmltools\r\n```\r\n\r\nif you choose to install `onnxmltools` from its source code, you must set the environment variable `onnx_ml=1` before installing the `onnx` package.\r\n\r\n## dependencies\r\n\r\nthis package relies on onnx, numpy, and protobuf. if you are converting a model from scikit-learn, core ml, keras, lightgbm, sparkml, xgboost, h2o, catboost or libsvm, you will need an environment with the respective package installed from the list below:\r\n\r\n1. scikit-learn\r\n2. coremltools (version 3.1 or lower)\r\n3. keras (version 2.0.8 or higher) with the corresponding tensorflow version\r\n4. lightgbm\r\n5. sparkml\r\n6. xgboost\r\n7. libsvm\r\n8. h2o\r\n9. catboost\r\n\r\nonnxmltools is tested with python **3.7+**.\r\n\r\n# examples\r\n\r\nif you want the converted onnx model to be compatible with a certain onnx version, please specify the target_opset parameter upon invoking the convert function. the following keras model conversion example demonstrates this below. you can identify the mapping from onnx operator sets (referred to as opsets) to onnx releases in the [versioning documentation](https://github.com/onnx/onnx/blob/master/docs/versioning.md#released-versions).\r\n\r\n## keras to onnx conversion\r\n\r\nnext, we show an example of converting a keras model into an onnx model with `target_opset=7`, which corresponds to onnx release version 1.2.\r\n\r\n```python\r\nimport onnxmltools\r\nfrom keras.layers import input, dense, add\r\nfrom keras.models import model\r\n\r\n# n: batch size, c: sub-model input dimension, d: final model's input dimension\r\nn, c, d = 2, 3, 3\r\n\r\n# define a sub-model, it will become a part of our final model\r\nsub_input1 = input(shape=(c,))\r\nsub_mapped1 = dense(d)(sub_input1)\r\nsub_model1 = model(inputs=sub_input1, outputs=sub_mapped1)\r\n\r\n# define another sub-model, it will become a part of our final model\r\nsub_input2 = input(shape=(c,))\r\nsub_mapped2 = dense(d)(sub_input2)\r\nsub_model2 = model(inputs=sub_input2, outputs=sub_mapped2)\r\n\r\n# define a model built upon the previous two sub-models\r\ninput1 = input(shape=(d,))\r\ninput2 = input(shape=(d,))\r\nmapped1_2 = sub_model1(input1)\r\nmapped2_2 = sub_model2(input2)\r\nsub_sum = add()([mapped1_2, mapped2_2])\r\nkeras_model = model(inputs=[input1, input2], outputs=sub_sum)\r\n\r\n# convert it! the target_opset parameter is optional.\r\nonnx_model = onnxmltools.convert_keras(keras_model, target_opset=7)\r\n```\r\n\r\n## coreml to onnx conversion\r\n\r\nhere is a simple code snippet to convert a core ml model into an onnx model.\r\n\r\n```python\r\nimport onnxmltools\r\nimport coremltools\r\n\r\n# load a core ml model\r\ncoreml_model = coremltools.utils.load_spec('example.mlmodel')\r\n\r\n# convert the core ml model into onnx\r\nonnx_model = onnxmltools.convert_coreml(coreml_model, 'example model')\r\n\r\n# save as protobuf\r\nonnxmltools.utils.save_model(onnx_model, 'example.onnx')\r\n```\r\n\r\n## h2o to onnx conversion\r\n\r\nbelow is a code snippet to convert a h2o mojo model into an onnx model. the only prerequisite is to have a mojo model saved on the local file-system.\r\n\r\n```python\r\nimport onnxmltools\r\n\r\n# convert the core ml model into onnx\r\nonnx_model = onnxmltools.convert_h2o('/path/to/h2o/gbm_mojo.zip')\r\n\r\n# save as protobuf\r\nonnxmltools.utils.save_model(onnx_model, 'h2o_gbm.onnx')\r\n```\r\n\r\n# testing model converters\r\n\r\n*onnxmltools* converts models into the onnx format which\r\ncan be then used to compute predictions with the\r\nbackend of your choice.\r\n\r\n## checking the operator set version of your converted onnx model\r\n\r\nyou can check the operator set of your converted onnx model using [netron](https://github.com/lutzroeder/netron), a viewer for neural network models. alternatively, you could identify your converted model's opset version through the following line of code.\r\n\r\n```python\r\nopset_version = onnx_model.opset_import[0].version\r\n```\r\n\r\nif the result from checking your onnx model's opset is smaller than the `target_opset` number you specified in the onnxmltools.convert function, be assured that this is likely intended behavior. the onnxmltools converter works by converting each operator to the onnx format individually and finding the corresponding opset version that it was most recently updated in. once all of the operators are converted, the resultant onnx model has the maximal opset version of all of its operators.\r\n\r\nto illustrate this concretely, let's consider a model with two operators, abs and add. as of december 2018, [abs](https://github.com/onnx/onnx/blob/master/docs/operators.md#abs) was most recently updated in opset 6, and [add](https://github.com/onnx/onnx/blob/master/docs/operators.md#add) was most recently updated in opset 7. therefore, the converted onnx model's opset will always be 7, even if you request `target_opset=8`. the converter behavior was defined this way to ensure backwards compatibility.\r\n\r\ndocumentation for the [onnx model format](https://github.com/onnx/onnx) and more examples for converting models from different frameworks can be found in the [onnx tutorials](https://github.com/onnx/tutorials) repository.\r\n\r\n## test all existing converters\r\n\r\nall converter unit test can generate the original model and converted model to automatically be checked with\r\n[onnxruntime](https://pypi.org/project/onnxruntime/) or\r\n[onnxruntime-gpu](https://pypi.org/project/onnxruntime-gpu/).\r\nthe unit test cases are all the normal python unit test cases, you can run it with pytest command line, for example:\r\n\r\n```bash\r\npython -m pytest --ignore .\\tests\\\r\n```\r\n\r\nit requires *onnxruntime*, *numpy* for most models,\r\n*pandas* for transforms related to text features, and\r\n*scipy* for sparse features. one test also requires\r\n*keras* to test a custom operator. that means\r\n*sklearn* or any machine learning library is requested.\r\n\r\n## add a new converter\r\n\r\nonce the converter is implemented, a unit test is added\r\nto confirm that it works. at the end of the unit test, function\r\n*dump_data_and_model* or any equivalent function must be called\r\nto dump the expected output and the converted model.\r\nonce these file are generated, a corresponding test must\r\nbe added in *tests_backend* to compute the prediction\r\nwith the runtime.\r\n\r\n# license\r\n\r\n[apache license v2.0](license)\r\n",
  "docs_url": null,
  "keywords": "",
  "license": "apache license v2.0",
  "name": "onnxmltools",
  "package_url": "https://pypi.org/project/onnxmltools/",
  "project_url": "https://pypi.org/project/onnxmltools/",
  "project_urls": {
    "Homepage": "https://github.com/onnx/onnxmltools"
  },
  "release_url": "https://pypi.org/project/onnxmltools/1.12.0/",
  "requires_dist": [
    "numpy",
    "onnx"
  ],
  "requires_python": "",
  "summary": "converts machine learning models to onnx",
  "version": "1.12.0",
  "releases": [],
  "developers": [
    "onnx",
    "onnx-technical-discuss@lists.lfaidata.foundation"
  ],
  "kwds": "onnxmltools_logo_main onnxmltools onnx_model onnx_ml coremltools",
  "license_kwds": "apache license v2.0",
  "libtype": "pypi",
  "id": "pypi_onnxmltools",
  "homepage": "https://github.com/onnx/onnxmltools",
  "release_count": 20,
  "dependency_ids": [
    "pypi_numpy",
    "pypi_onnx"
  ]
}