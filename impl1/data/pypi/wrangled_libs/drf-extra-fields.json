{
  "classifiers": [
    "environment :: web environment",
    "framework :: django",
    "intended audience :: developers",
    "license :: osi approved :: bsd license",
    "operating system :: os independent",
    "programming language :: python",
    "programming language :: python :: 3",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "topic :: internet :: www/http",
    "topic :: internet :: www/http :: dynamic content"
  ],
  "description": "drf-extra-fields\n================\n\nextra fields for django rest framework\n\n[![build status](https://github.com/hipo/drf-extra-fields/actions/workflows/tests.yml/badge.svg?branch=master)](https://github.com/hipo/drf-extra-fields/actions)\n[![codecov](https://codecov.io/gh/hipo/drf-extra-fields/branch/master/graph/badge.svg)](https://codecov.io/gh/hipo/drf-extra-fields)\n[![pypi version](https://img.shields.io/pypi/v/drf-extra-fields.svg)](https://pypi.org/project/drf-extra-fields)\n[![python versions](https://img.shields.io/pypi/pyversions/drf-extra-fields.svg)](https://pypi.org/project/drf-extra-fields)\n\nlatest changes\n==============\n- **v3.7.0**\n  - `psycopg` (psycopg 3) is now supported and it's used automatically instead of `psycopg2` if available.\n- **v3.6.0**\n  - file objects without an actual file-system path can now be used in `base64imagefield`, `base64filefield` and `hybridimagefield`\n- **v3.5.0**\n  - development environment fixes & improvements.\n  - since `python 3.6` support is ended, the codebase is refactored/modernized for `python 3.7`.\n  - `webp` is added to default `allowed_types` of the `base64imagefield`.\n  - deprecated `imghdr` library is replaced with `filetype`.\n  - unintended `pillow` dependency is removed.\n- **v3.4.0**\n  - :warning: **backward incompatible** :warning:\n    - support for `django 3.0` and `django 3.1` is ended.\n  - `django 4.0` is now supported.\n- **v3.3.0**\n  - :warning: **backward incompatible** :warning:\n    - support for `python 3.6` is ended.\n- **v3.2.1**\n  - a typo in the `python_requires` argument of `setup.py` that prevents installation for `python 3.6` is fixed.\n- **v3.2.0**\n  - :warning: **backward incompatible** :warning:\n    - support for `python 3.5` is ended.\n  - `python 3.9` and `python 3.10` are now supported.\n  - `django 3.2` is now supported.\n- **v3.1.1**\n  - `psycopg2` dependency is made optional.\n- **v3.1.0**\n  - **possible breaking change**:\n    -  in this version we have changed file class used in `base64filefield` from `contentfile` to `simpleuploadedfile` (you may see the change [here](https://github.com/hipo/drf-extra-fields/pull/149/files#diff-5f77bcb61083cd9c026f6dfb3b77bf8fa824c45e620cdb7826ad713bde7b65f8l72-r85)).\n  - `child_attrs` property is added to [rangefields](https://github.com/hipo/drf-extra-fields#rangefield).\n\nusage\n================\n\ninstall the package\n\n```bash\npip install drf-extra-fields\n```\n\n**note:**\n- **this package renamed as \"drf-extra-fields\", earlier it was named as django-extra-fields.**\n- install version 0.1 for django rest framework 2.*\n- install version 0.3 or greater for django rest framework 3.*\n\nfields:\n----------------\n\n\n## base64imagefield\n\nan image representation for base64imagefield\n\ninherited from `imagefield`\n\n\n**signature:** `base64imagefield()`\n\n - it takes a base64 image as a string.\n - a base64 image:  `data:image/gif;base64,r0lgodlhaqabaiaaaaaaap///yh5baeaaaaalaaaaaabaaeaaaibraa7`\n - base64imagefield accepts the entire string or just the part after base64, `r0lgodlhaqabaiaaaaaaap///yh5baeaaaaalaaaaaabaaeaaaibraa7`\n - it takes the optional parameter `represent_in_base64` (`false` by default), if set to `true` it will allow for base64-encoded downloads of an `imagefield`.\n - you can inherit the `base64imagefield` class and set allowed extensions (`allowed_types` list), or customize the validation messages (`invalid_file_message`, `invalid_type_message`)\n\n\n**example:**\n\n```python\n# serializer\n\nfrom drf_extra_fields.fields import base64imagefield\n\nclass uploadedbase64imageserializer(serializers.serializer):\n    file = base64imagefield(required=false)\n    created = serializers.datetimefield()\n\n# use the serializer\nfile = 'r0lgodlhaqabaiaaap///////yh5baekaaealaaaaaabaaeaaaictaeaow=='\nserializer = uploadedbase64imageserializer(data={'created': now, 'file': file})\n```\n\n\n## base64filefield\n\na file representation for base64filefield\n\ninherited from `filefield`\n\n\n**signature:** `base64filefield()`\n\n - it takes a base64 file as a string.\n - other options like for `base64imagefield`\n - you have to provide your own full implementation of this class. you have to implement file validation in `get_file_extension` method and set `allowed_types` list.\n\n\n**example:**\n\n```python\nclass pdfbase64file(base64filefield):\n    allowed_types = ['pdf']\n\n    def get_file_extension(self, filename, decoded_file):\n        try:\n            pypdf2.pdffilereader(io.bytesio(decoded_file))\n        except pypdf2.utils.pdfreaderror as e:\n            logger.warning(e)\n        else:\n            return 'pdf'\n```\n\n\n## pointfield\n\npoint field for geodjango\n\n\n**signature:** `pointfield()`\n\n - it takes a dictionary contains latitude and longitude keys like below\n\n    {\n     \"latitude\": 49.8782482189424,\n     \"longitude\": 24.452545489\n    }\n - it takes the optional parameter `str_points` (false by default), if set to true it serializes the longitude/latitude\n values as strings\n - it takes the optional parameter `srid` (none by default), if set the point created object will have its srid attribute set to the same value.\n\n**example:**\n\n```python\n# serializer\n\nfrom drf_extra_fields.geo_fields import pointfield\n\nclass pointfieldserializer(serializers.serializer):\n    point = pointfield(required=false)\n    created = serializers.datetimefield()\n\n# use the serializer\npoint = {\n    \"latitude\": 49.8782482189424,\n    \"longitude\": 24.452545489\n    }\nserializer = pointfieldserializer(data={'created': now, 'point': point})\n```\n\n\n# rangefield\n\nthe range fields map to django's postgresql specific [range fields](https://docs.djangoproject.com/en/stable/ref/contrib/postgres/fields/#range-fields).\n\neach accepts an optional parameter `child_attrs`, which allows passing parameters to the child field.\n\nfor example, calling `integerrangefield(child_attrs={\"allow_null\": true})` allows deserializing data with a null value for `lower` and/or `upper`:\n\n```python\nfrom rest_framework import serializers\nfrom drf_extra_fields.fields import integerrangefield\n\n\nclass rangeserializer(serializers.serializer):\n    ranges = integerrangefield(child_attrs={\"allow_null\": true})\n\n\nserializer = rangeserializer(data={'ranges': {'lower': 0, 'upper': none}})\n\n```\n\n## integerrangefield\n\n```python\nfrom rest_framework import serializers\nfrom drf_extra_fields.fields import integerrangefield\n\n\nclass rangeserializer(serializers.serializer):\n    ranges = integerrangefield()\n\n\nserializer = rangeserializer(data={'ranges': {'lower': 0, 'upper': 1}})\n\n```\n\n## floatrangefield\n\n```python\nfrom rest_framework import serializers\nfrom drf_extra_fields.fields import floatrangefield\n\n\nclass rangeserializer(serializers.serializer):\n    ranges = floatrangefield()\n\n\nserializer = rangeserializer(data={'ranges': {'lower': 0., 'upper': 1.}})\n\n```\n\n## decimalrangefield\n\n```python\nfrom rest_framework import serializers\nfrom drf_extra_fields.fields import decimalrangefield\n\n\nclass rangeserializer(serializers.serializer):\n    ranges = decimalrangefield()\n\n\nserializer = rangeserializer(data={'ranges': {'lower': 0., 'upper': 1.}}, )\n\n```\n\n## daterangefield\n\n```python\nimport datetime\n\nfrom rest_framework import serializers\nfrom drf_extra_fields.fields import daterangefield\n\n\nclass rangeserializer(serializers.serializer):\n    ranges = daterangefield()\n\n\nserializer = rangeserializer(data={'ranges': {'lower': datetime.date(2015, 1, 1), 'upper': datetime.date(2015, 2, 1)}})\n\n```\n\n## datetimerangefield\n\n```python\nimport datetime\n\nfrom rest_framework import serializers\nfrom drf_extra_fields.fields import datetimerangefield\n\n\nclass rangeserializer(serializers.serializer):\n    ranges = datetimerangefield()\n\n\nserializer = rangeserializer(data={'ranges': {'lower': datetime.datetime(2015, 1, 1, 0), 'upper': datetime.datetime(2015, 2, 1, 0)}})\n\n```\n\n## presentableprimarykeyrelatedfield\n\nrepresents related object with a serializer.\n\n`presentation_serializer` could also be a string that represents a dotted path of a serializer, this is useful when you want to represent a related field with the same serializer.\n\n```python\nfrom drf_extra_fields.relations import presentableprimarykeyrelatedfield\n\nclass userserializer(serializers.modelserializer):\n    class meta:\n        model = user\n        fields = (\n            'id',\n            \"username\",\n        )\n\nclass postserializer(serializers.modelserializer):\n    user = presentableprimarykeyrelatedfield(\n        queryset=user.objects.all(),\n        presentation_serializer=userserializer,\n        presentation_serializer_kwargs={\n            'example': [\n                'of',\n                'passing',\n                'kwargs',\n                'to',\n                'serializer',\n            ]\n        },\n        read_source=none\n    )\n    class meta:\n        model = post\n        fields = (\n            \"id\",\n            \"title\",\n            \"user\",\n        )\n```\n\n**serializer data:**\n```\n{\n    \"user\": 1,\n    \"title\": \"test\"\n}\n```\n\n**serialized data with primarykeyrelatedfield:**\n```\n{\n    \"id\":1,\n    \"user\": 1,\n    \"title\": \"test\"\n}\n```\n\n**serialized data with presentableprimarykeyrelatedfield:**\n```\n{\n    \"id\":1,\n    \"user\": {\n        \"id\": 1,\n        \"username\": \"test\"\n    },\n    \"title\": \"test\"\n}\n```\n\n\n## presentableslugrelatedfield\n\nrepresents related object retrieved using slug with a serializer.\n\n```python\nfrom drf_extra_fields.relations import presentableslugrelatedfield\n\nclass categoryserializer(serializers.modelserializer):\n    class meta:\n        model = category\n        fields = (\n            \"id\",\n            \"slug\",\n            \"name\"\n        )\n\nclass productserializer(serializers.modelserializer):\n    category = presentableslugrelatedfield(\n        slug_field=\"slug\",\n        queryset=category.objects.all(),\n        presentation_serializer=categoryserializer,\n        presentation_serializer_kwargs={\n            'example': [\n                'of',\n                'passing',\n                'kwargs',\n                'to',\n                'serializer',\n            ]\n        },\n        read_source=none\n    )\n    class meta:\n        model = product\n        fields = (\n            \"id\",\n            \"name\",\n            \"category\",\n        )\n```\n\n**serializer data:**\n```\n{\n    \"category\": \"vegetables\",\n    \"name\": \"tomato\"\n}\n```\n\n**serialized data with slugrelatedfield:**\n```\n{\n    \"id\": 1,\n    \"name\": \"tomato\",\n    \"category\": \"vegetables\"\n}\n```\n\n**serialized data with presentableslugrelatedfield:**\n```\n{\n    \"id\": 1,\n    \"name\": \"tomato\",\n    \"category\": {\n        \"id\": 1,\n        \"slug\": \"vegetables\",\n        \"name\": \"vegetables\"\n    }\n}\n```\n\n### read_source parameter\nthis parameter allows you to use different `source` for read operations and doesn't change field name for write operations. this is only used while representing the data. \n\n## hybridimagefield\na django-rest-framework field for handling image-uploads through raw post data, with a fallback to multipart form data.\n\nit first tries base64imagefield. if it fails then tries imagefield.\n\n```python\nfrom rest_framework import serializers\nfrom drf_extra_fields.fields import hybridimagefield\n\n\nclass hybridimageserializer(serializers.serializer):\n    image = hybridimagefield()\n```\n\ndrf-yasg fix for base64 fields:\n----------------\nthe [drf-yasg](https://github.com/axnsan12/drf-yasg) project seems to generate wrong documentation on base64imagefield or base64filefield. it marks those fields as readonly. here is the workaround code for correct the generated document. (more detail on issue [#66](https://github.com/hipo/drf-extra-fields/issues/66))\n\n```python\nclass pdfbase64filefield(base64filefield):\n    allowed_types = ['pdf']\n\n    class meta:\n        swagger_schema_fields = {\n            'type': 'string',\n            'title': 'file content',\n            'description': 'content of the file base64 encoded',\n            'read_only': false  # <-- fix\n        }\n\n    def get_file_extension(self, filename, decoded_file):\n        try:\n            pypdf2.pdffilereader(io.bytesio(decoded_file))\n        except pypdf2.utils.pdfreaderror as e:\n            logger.warning(e)\n        else:\n            return 'pdf'\n```\n\n\n## lowercaseemailfield\nan enhancement over django-rest-framework's emailfield to allow case-insensitive serialization and deserialization of e-mail addresses.\n\n```python\nfrom rest_framework import serializers\nfrom drf_extra_fields.fields import lowercaseemailfield\n\n\nclass emailserializer(serializers.serializer):\n    email = lowercaseemailfield()\n\n```\n\ncontribution\n=================\n\n**tests**\n- make sure that you add the test for contributed field to test/test_fields.py\nand run with command before sending a pull request:\n\n```bash\n$ pip install tox  # if not already installed\n$ tox\n```\n\nor, if you prefer using docker (recommended):\n\n```bash\ntools/run_development.sh\ntox\n```\n\n**readme**\n- make sure that you add the documentation for the field added to readme.md\n\n\nlicense\n====================\n\ncopyright drf extra fields hipo\n\nlicensed under the apache license, version 2.0 (the \"license\");\nyou may not use this file except in compliance with the license.\nyou may obtain a copy of the license at\n\n    http://www.apache.org/licenses/license-2.0\n\nunless required by applicable law or agreed to in writing, software\ndistributed under the license is distributed on an \"as is\" basis,\nwithout warranties or conditions of any kind, either express or implied.\nsee the license for the specific language governing permissions and\nlimitations under the license.\n",
  "docs_url": null,
  "keywords": "",
  "license": "apache-2.0",
  "name": "drf-extra-fields",
  "package_url": "https://pypi.org/project/drf-extra-fields/",
  "project_url": "https://pypi.org/project/drf-extra-fields/",
  "project_urls": {
    "Homepage": "https://github.com/Hipo/drf-extra-fields"
  },
  "release_url": "https://pypi.org/project/drf-extra-fields/3.7.0/",
  "requires_dist": [
    "Django >=2.2",
    "djangorestframework >=3.9.2",
    "filetype >=1.2.0",
    "Pillow >=6.2.1 ; extra == 'base64imagefield'"
  ],
  "requires_python": ">=3.7",
  "summary": "additional fields for django rest framework.",
  "version": "3.7.0",
  "releases": [],
  "developers": [
    "hipo",
    "pypi@hipolabs.com"
  ],
  "kwds": "drf_extra_fields django fields badge swagger_schema_fields",
  "license_kwds": "apache-2.0",
  "libtype": "pypi",
  "id": "pypi_drf_extra_fields",
  "homepage": "https://github.com/hipo/drf-extra-fields",
  "release_count": 12,
  "dependency_ids": [
    "pypi_django",
    "pypi_djangorestframework",
    "pypi_filetype",
    "pypi_pillow"
  ]
}