{
  "classifiers": [],
  "description": "# sumo logic collectd plugin\n\na [collectd](https://collectd.org/) output plugin to send carbon 2.0-formatted metrics to sumo logic.\n\n## get started\n\n### 1. python version\n\nsumo logic collectd plugin is built on top of [collectd-python plugin](https://collectd.org/documentation/manpages/collectd-python.5.shtml).\nthe minimum required version for running the plugin is python version 2.6.\nyou can download and install the desired python version from [python download page](https://www.python.org/downloads/).\n\n### 2. install collectd on your machine\n\nif collectd is already installed, you can skip this step.\notherwise, follow the instructions in the [collectd download](https://collectd.org/download.shtml) site for download and installation.\nfor additional details, see [first steps](https://collectd.org/wiki/index.php/first_steps) section in the collectd wiki.\n\n#### macos\n\n```sh\nbrew install collectd\n```\n\n#### debian / ubuntu\n\n```sh\nsudo apt-get install collectd\n```\n\n### 3. download and install sumo logic collectd plugin\n\n#### option 1: install as a library\n\n```sh\nsudo pip install sumologic_collectd_metrics\n```\n\nall required dependencies will be automatically installed with library installation.\n\n#### option 2: install with source code\n\nthe sumo logic collectd plugin source code can be saved in a directory anywhere on your system.\ndownload it from [python package index](https://pypi.python.org/pypi/sumologic_collectd_metrics),\nor:\n\n```sh\ngit clone https://github.com/sumologic/sumologic-collectd-plugin.git\n```\n\nsumo logic collectd plugin uses [requests](http://docs.python-requests.org/en/master/)\nand [retry](https://pypi.python.org/pypi/retrying) libraries for sumbitting https requests.\nif they are not installed. install them using pip:\n\n```sh\nsudo pip install requests\nsudo pip install retry\n```\n\n### 4. create an http metrics source in sumo logic\n\ncreate a [sumo logic account](https://www.sumologic.com/) if you don't currently have one.\n\nfollow these instructions for [setting up an http source](https://help.sumologic.com/send-data/sources/02sources-for-hosted-collectors/http-source/zgenerate-a-new-url-for-an-http-source)\nin sumo logic.\nbe sure to obtain the url endpoint after creating an http source.\n\n### 5. configure sumo logic collectd plugin\n\nsumo logic collectd plugin supports the following parameters.\nto configure the plugin, modify collectd's configuration file named `collectd.conf` (e.g. `/etc/collectd/collectd.conf`).\n\n#### required parameters\n\nthe parameters below are required and must be specified in the module\nconfig.\n\n| name                                                                                                                                   | description                                                                                                                                                                                                                              | type   | required |\n| -------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | -------- |\n| [url](https://help.sumologic.com/send-data/sources/02sources-for-hosted-collectors/http-source/zgenerate-a-new-url-for-an-http-source) | the url to send metrics to. this should be given when [creating the http source](https://help.sumologic.com/send-data/sources/02sources-for-hosted-collectors/http-source/zgenerate-a-new-url-for-an-http-source) on sumo logic web app. | string | true     |\n\n#### basic parameters\n\nthe parameters below are not strictly required. it is recommended to set\nthese parameters as they prove to be extremely useful to categorize your\nmetrics and search by them.\n\n| name                     | description                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | type                                                       | required |\n| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------- | -------- |\n| sourcename               | name of the metrics source. `_sourcename` can be used to search metrics from this source. it will override the default configured in the the sumo logic source configuration.                                                                                                                                                                                                                                                                                                  | string                                                     | false    |\n| sourcehost               | name of metrics host. `_sourcehost` can be used to search metrics from this host. it will override the default configured in the the sumo logic source configuration.                                                                                                                                                                                                                                                                                                          | string                                                     | false    |\n| sourcecategory           | category of the collected metrics. `_sourcecategory` can be used to search metrics from this category. it will override the default configured in the the sumo logic source configuration.                                                                                                                                                                                                                                                                                     | string                                                     | false    |\n| dimensions               | key value pairs that contribute to identifying a metric. collectd data have intrinsic dimensions with keys as `host`, `plugin`, `plugin_instance`, `type`, `type_instance`, `ds_name`, `ds_type`. the additional dimensions specified here can help separating metrics collected from this collectd instance with metircs collected from other collectd instances. dimensions cannot contain [reserved symbols](#reserved-symbols) and [reserved keywords](#reserved-keywords) | srings in the format of `\"key1\"=\"val1\", \"key2\"=\"val2\"` ... | false    |\n| metadata                 | key value pairs that do not contribute to identifying a metric. metadata are primarily used to assist in searching metrics. collectd data may have internal metadata. the additional metadata specified here can be used to enrich the existing metadata set. metadata cannot contain [reserved symbols](#reserved-symbols) and [reserved keywords](#reserved-keywords)                                                                                                        | srings in the format of `\"key1\"=\"val1\", \"key2\"=\"val2\"` ... | false    |\n| addmetricdimension       | if set to `true` adds new dimension named `metric` to every data point which consists of `type` and `type_instance` concatenated using `metricdimensionseparator`. by default it is set to `true`.                                                                                                                                                                                                                                                                             | boolean                                                    | false    |\n| metricdimensionseparator | string used to concatenate `type` and `type_instance` while creating `metric` dimension. see `addmetricdimension` option. by default it is `.`.                                                                                                                                                                                                                                                                                                                                | string                                                     | false    |\n\n#### additional parameters\n\nfor additional configuration parameters, see [advanced parameters](#advanced-parameters) below.\n\n#### example configuration\n\nan example configuration for the plugin is shown below (code to be added to `collectd.conf` under `collectd_root/etc`):\n\n```aconf\nloadplugin python\n<plugin python>\n    # uncomment and update the following line if sumologic collectd plugin installed with source code\n    # modulepath \"/path/to/sumologic-collectd-plugin\"\n    logtraces true\n    interactive false\n    import \"sumologic_collectd_metrics\"\n\n    <module \"sumologic_collectd_metrics\">\n        url \"https://<deployment>.sumologic.com/receiver/v1/http/<source_token>\"  # url must be specified\n        # uncomment and update the following lines to override the default metadata configured in the the sumo logic source configuration\n        # sourcename \"my_source\"\n        # sourcehost \"my_host\"\n        # sourcecategory \"my_category\"\n        # uncomment and update the following lines to add additional key=value pairs\n        # dimensions \"my_dim_key1\"=\"my_dim_val1\", \"my_dim_key2\"=\"my_dim_val2\"\n        # metadata \"my_meta_key1\"=\"my_meta_val1\", \"my_meta_key2\"=\"my_meta_val2\"\n    </module>\n</plugin>\n```\n\n#### other recommended modules\n\nit is recommeded to setup the following two plugins in `collectd.conf`.\nthe functionalities of the two plugins are explained in collectd wiki\n[plugin:logfile](https://collectd.org/wiki/index.php/plugin:logfile)\nand [plugin:csv](https://collectd.org/wiki/index.php/plugin:csv):\n\n```aconf\nloadplugin logfile\n<plugin logfile>\n    loglevel \"info\"\n    file \"/var/log/collectd.log\"\n    timestamp true\n    printseverity true\n</plugin>\n\nloadplugin csv\n<plugin csv>\n    datadir \"/usr/local/var/lib/collectd/csv\"\n</plugin>\n```\n\nthe following pulgins, if enabled in `collectd.conf`, enable collecting\n[cpu](https://collectd.org/wiki/index.php/plugin:cpu),\n[memory](https://collectd.org/wiki/index.php/plugin:memory),\n[disk](https://collectd.org/wiki/index.php/plugin:disk),\n[network](https://collectd.org/wiki/index.php/plugin:interface)\nmetrics from the system:\n\n```aconf\nloadplugin cpu\nloadplugin memory\nloadplugin disk\nloadplugin interface\n```\n\na list of all collectd plugins is awailable in collectd wiki [table of\nplugins](https://collectd.org/wiki/index.php/table_of_plugins)\n\n#### reserved symbols\n\nequal sign and space are reserved symbols.\n\n```console\n\"=\" \" \"\n```\n\n#### reserved keywords\n\nfollowing terms are reserved for sumo logic internal use only:\n\n```console\n\"_sourcehost\", \"_sourcename\", \"_sourcecategory\", \"_collectorid\", \"_collector\", \"_source\", \"_sourceid\", \"_contenttype\", \"_rawname\"\n```\n\n### 6. start sending metrics\n\nstart sending metrics by running collectd, e.g. (command will differ\ndepending on collectd installation):\n\n```sh\nsudo service collectd start\n```\n\n#### view logs\n\nif `logfile` plugin is installed, then you can view logs by tailling collectd.log\nfile, e.g. (command can be different depending on collectd installation):\n\n```sh\ntail -f /var/log/collectd.log\n```\n\n#### data model\n\nthe sumo logic collectd plugin will send metrics using the [carbon 2.0](http://metrics20.org/implementations/) format, defined as:\n\n```console\ndimensions  metadata value timestamp\n```\n\n`dimensions` and `metadata` are key/value pairs of strings separated by two spaces.\n`dimensions` uniquely identifying a metric, while `metadata` do not contribute to identifying a metric.\ninstead, they are used to categorize metrics for searching.\n`value` is a double number.\n`timestamp` is a 10-digit unix epoch timestamp.\n\nexample data before compression:\n\n```console\nhost=my_mac plugin=cpu plugin_instance=1 type=cpu type_instance=user ds_name=value ds_type=derive  meta_key1=meta_val1 5991.000000 1502148249\nhost=my_mac plugin=cpu plugin_instance=0 type=cpu type_instance=user ds_name=value ds_type=derive  meta_key1=meta_val1 98722.000000 1502148249\n```\n\n#### naming schema\n\ncollectd uses a very powerful naming schema to identify each statistics value.\nit has been proven very generic and flexible, but may be confusing at first, especially to new users.\nyou can read more about it by following this wiki [collectd naming schema](https://collectd.org/wiki/index.php/naming_schema).\n\n#### compression\n\nmetrics are batched and compressed before they are sent.\nthe default compression algorithm is `\"deflate\"`.\nthe algorithm is explained in more detail in [an explanation of the deflate algorithm](https://zlib.net/feldspar.html).\nalternatively, you can specify `\"gzip\"` for gzip compression and `\"none\"` for no compression.\n\n#### error handling\n\nsumo logic collectd plugin retries on exceptions by default.\nwhen all retries fail, the request is either scheduled for a future attempt or dropped based on the buffer status.\nby default, 1000 requests are buffered.\nif the buffer becomes full, then requests failed after all retries will be dropped.\notherwise, it is put back to the processing queue for the next run.\n\n### 7. view metrics\n\nto view the metrics sent by the collectd plugin, log into sumo logic and open a metrics tab.\nquery for metrics using either dimensions or metadata, e.g.:\n\n```console\n_sourcename=my_source _sourcehost=my_host _sourcecategory=my_category plugin=cpu\n```\n\nyou should be able to see metrics displayed in the main graph.\n\n## advanced topics\n\n### advanced parameters\n\nyou can configure the sumo logic collectd plugin by overriding default\nvalues for plugin parameters.\n\n| name                  | description                                                                                                                                                                                                                                                                                                                                                                          | type                 | default | unit   |\n| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------- | ------- | ------ |\n| maxbatchsize          | sumo logic collectd plugin batches metrics before sending them over https. maxbatchsize defines the upper limit of metrics per batch.                                                                                                                                                                                                                                                | positive integer     | 5000    | na     |\n| maxbatchinterval      | sumo logic collectd plugin batches metrics before sending them through https. maxbatchinterval defines the upper limit of duration to construct a batch.                                                                                                                                                                                                                             | positive integer     | 1       | second |\n| httppostinterval      | sumo logic collectd plugin schedules https post requests at fixed intervals. httppostinterval defines the frequency for the scheduler to run. if no metrics batch is available at the time, the sceduler immediately returns. if multiple metrics batches are available, then the oldest batch is picked to be sent.                                                                 | positive float       | 0.1     |        |\n| maxrequeststobuffer   | sumo logic collectd plugin buffers failed and delayed metrics batch requests. maxrequeststobuffer specifies the maximum number of these requests to buffer. after the buffer becomes full, the request with oldest metrics batch will be dropped to make space for new metrics batch.|positive integer                                                                               | positive integer     | 1000    | na     |\n| retryinitialdelay     | sumo logic collectd plugin retries on recoverable exceptions. retryinitialdelay specifies the initial delay before a retry is scheduled. more information can be found in the retry library                                                                                                                                                                                          | non-negative integer | 0       | second |\n| retrymaxattempts      | sumo logic collectd plugin retries on recoverable exceptions. retrymaxattempts specifies the upper limit of retries before the current retry logic fails. the metric batch is then either put back for the next run (when metrics buffer specified by maxrequeststobuffer is not full), or dropped (when metrics buffer is full). more information can be found in the retry library | positive integer     | 10      | na     |\n| retrymaxdelay         | sumo logic collectd plugin retries on recoverable exceptions. retrymaxdelay specifies the upper limit of delay before the current retry logic fails. then the metric batch either is put back for the next run (when metrics buffer specified by maxrequeststobuffer is not full), or dropped (when metrics buffer is full). more information can be found in the retry library      | positive integer     | 100     | second |\n| retryjittermin        | sumo logic collectd plugin retries on recoverable exceptions. retryjittermin specifies the minimum extra seconds added to delay between attempts. more information can be found in the retry library                                                                                                                                                                                 | non-negative integer | 0       | second |\n| retryjittermax        | sumo logic collectd plugin retries on recoverable exceptions. retryjittermax specifies the maximum extra seconds added to delay between attempts. more information can be found in the retry library                                                                                                                                                                                 | non-negative integer | 10      | second |\n| enableinternalmetrics | enable the plugin's internal metrics. see [plugin internal metrics](#plugin-internal-metrics)                                                                                                                                                                                                                                                                                        | boolean              | false   | na     |\n| signalfxstatsdtags    | enable extracting metadata from metrics using signalfx' extension to the statsd protocol. see: https://docs.signalfx.com/en/latest/integrations/agent/monitors/collectd-statsd.html#adding-dimensions-to-statsd-metrics                                                                                                                                                              | boolean              | false   | na     |\n\n### plugin architecture\n\n```console\ncollectd        metricsconverter                    metricsbatcher         metricsbuffer                               metricssender\n--------        --------------------------          --------------         ------------------------                    -----------------\n                                                                                                       batch to send   \nraw data   ->   metric in carbon 2.0 format    ->   metrics batch     ->   buffered metrics batches         ->         request scheduler\n                                                                                                            <-\n                                                                                                       failed batch\n```\n\n### plugin internal metrics\n\nif the `enableinternalmetrics` configuration option is set to true, the plugin emits metrics describing its own internal state.\n\nthe following metrics are available:\n\n| name             | type  | description                                                                                                  |\n|------------------|-------|--------------------------------------------------------------------------------------------------------------|\n| received_metrics | gauge | the number of metrics values received from collectd.                                                         |\n| sent_metrics     | gauge | the number of metrics values successfully sent to sumo.                                                      |\n| sent_batches     | gauge | the number of metrics batches successfully sent to sumo.                                                     |\n| dropped_metrics  | gauge | the number of metrics values dropped during processing due to various faults, typically buffers being full.  |\n| dropped_batches  | gauge | the number of metrics batches dropped during processing due to various faults, typically buffers being full. |\n| batch_queue_size | gauge | the number of batches in the sending queue.                                                                  |\n\n## tls 1.2 requirement\n\nsumo logic only accepts connections from clients using tls version 1.2 or greater.\nto utilize the content of this repo, ensure that it's running in an execution environment that is configured to use tls 1.2 or greater.\n\n## license\n\nthe sumo logic collectd output plugin is published under the apache software license, version 2.0.\nplease visit http://www.apache.org/licenses/license-2.0.txt for details.\n\n\n",
  "docs_url": null,
  "keywords": "",
  "license": "apache software license, version 2.0",
  "name": "sumologic-collectd-metrics",
  "package_url": "https://pypi.org/project/sumologic-collectd-metrics/",
  "project_url": "https://pypi.org/project/sumologic-collectd-metrics/",
  "project_urls": {
    "Homepage": "https://github.com/SumoLogic/sumologic-collectd-plugin"
  },
  "release_url": "https://pypi.org/project/sumologic-collectd-metrics/4.1.1/",
  "requires_dist": [
    "requests",
    "retry"
  ],
  "requires_python": "",
  "summary": "a collectd output plugin to send carbon 2.0-formatted metrics to sumo logic.",
  "version": "4.1.1",
  "releases": [],
  "developers": [
    "sumo_logic",
    "support@sumologic.com"
  ],
  "kwds": "sumologic_collectd_metrics sumo collectd sumologic statsd",
  "license_kwds": "apache software license, version 2.0",
  "libtype": "pypi",
  "id": "pypi_sumologic_collectd_metrics",
  "homepage": "https://github.com/sumologic/sumologic-collectd-plugin",
  "release_count": 8,
  "dependency_ids": [
    "pypi_requests",
    "pypi_retry"
  ]
}