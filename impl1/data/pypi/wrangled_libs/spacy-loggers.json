{
  "classifiers": [],
  "description": "<a href=\"https://explosion.ai\"><img src=\"https://explosion.ai/assets/img/logo.svg\" width=\"125\" height=\"125\" align=\"right\" /></a>\n\n# spacy-loggers: logging utilities for spacy\n\n[![pypi version](https://img.shields.io/pypi/v/spacy-loggers.svg?style=flat-square&logo=pypi&logocolor=white)](https://pypi.python.org/pypi/spacy-loggers)\n\nstarting with spacy v3.2, alternate loggers are moved into a separate package\nso that they can be added and updated independently from the core spacy\nlibrary.\n\n`spacy-loggers` currently provides loggers for:\n\n- [weights & biases](https://www.wandb.com)\n- [mlflow](https://www.mlflow.org/)\n- [clearml](https://www.clear.ml/)\n- [pytorch](https://pytorch.org/)\n- [cupy](https://github.com/cupy/cupy)\n\n`spacy-loggers` also provides additional utility loggers to facilitate interoperation\nbetween individual loggers.\n\nif you'd like to add a new logger or logging option, please submit a pr to this\nrepo!\n\n## setup and installation\n\n`spacy-loggers` should be installed automatically with spacy v3.2+, so you\nusually don't need to install it separately. you can install it with `pip` or\nfrom the conda channel `conda-forge`:\n\n```bash\npip install spacy-loggers\n```\n\n```bash\nconda install -c conda-forge spacy-loggers\n```\n\n# loggers\n\n## wandblogger\n\n### installation\n\nthis logger requires `wandb` to be installed and configured:\n\n```bash\npip install wandb\nwandb login\n```\n\n### usage\n\n`spacy.wandblogger.v5` is a logger that sends the results of each training step\nto the dashboard of the [weights & biases](https://www.wandb.com/) tool. to use\nthis logger, weights & biases should be installed, and you should be logged in.\nthe logger will send the full config file to w&b, as well as various system\ninformation such as memory utilization, network traffic, disk io, gpu\nstatistics, etc. this will also include information such as your hostname and\noperating system, as well as the location of your python executable.\n\n`spacy.wandblogger.v4` and below automatically call the [default console logger](https://spacy.io/api/top-level#consolelogger).\nhowever, starting with `spacy.wandblogger.v5`, console logging must be activated\nthrough the use of the [chainlogger](#chainlogger). this allows the user to configure\nthe console logger's parameters according to their preferences.\n\n**note** that by default, the full (interpolated)\n[training config](https://spacy.io/usage/training#config) is sent over to the\nw&b dashboard. if you prefer to **exclude certain information** such as path\nnames, you can list those fields in \"dot notation\" in the\n`remove_config_values` parameter. these fields will then be removed from the\nconfig before uploading, but will otherwise remain in the config file stored\non your local system.\n\n### example config\n\n```ini\n[training.logger]\n@loggers = \"spacy.wandblogger.v5\"\nproject_name = \"monitor_spacy_training\"\nremove_config_values = [\"paths.train\", \"paths.dev\", \"corpora.train.path\", \"corpora.dev.path\"]\nlog_dataset_dir = \"corpus\"\nmodel_log_interval = 1000\n```\n\n| name                   | type                  | description                                                                                                                                                                                                                      |\n| ---------------------- | --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `project_name`         | `str`                 | the name of the project in the weights & biases interface. the project will be created automatically if it doesn't exist yet.                                                                                                    |\n| `remove_config_values` | `list[str]`           | a list of values to exclude from the config before it is uploaded to w&b (default: `[]`).                                                                                                                                        |\n| `model_log_interval`   | `optional[int]`       | steps to wait between logging model checkpoints to the w&b dasboard (default: `none`). added in `spacy.wandblogger.v2`.                                                                                                          |\n| `log_dataset_dir`      | `optional[str]`       | directory containing the dataset to be logged and versioned as a w&b artifact (default: `none`). added in `spacy.wandblogger.v2`.                                                                                                |\n| `entity`               | `optional[str]`       | an entity is a username or team name where you're sending runs. if you don't specify an entity, the run will be sent to your default entity, which is usually your username (default: `none`). added in `spacy.wandblogger.v3`.  |\n| `run_name`             | `optional[str]`       | the name of the run. if you don't specify a run name, the name will be created by the `wandb` library (default: `none`). added in `spacy.wandblogger.v3`.                                                                        |\n| `log_best_dir`         | `optional[str]`       | directory containing the best trained model as saved by spacy (by default in `training/model-best`), to be logged and versioned as a w&b artifact (default: `none`). added in `spacy.wandblogger.v4`.                            |\n| `log_latest_dir`       | `optional[str]`       | directory containing the latest trained model as saved by spacy (by default in `training/model-latest`), to be logged and versioned as a w&b artifact (default: `none`). added in `spacy.wandblogger.v4`.                        |\n| `log_custom_stats`     | `optional[list[str]]` | a list of regular expressions that will be applied to the info dictionary passed to the logger (default: `none`). statistics and metrics that match these regexps will be automatically logged. added in `spacy.wandblogger.v5`. |\n\n## mlflowlogger\n\n### installation\n\nthis logger requires `mlflow` to be installed and configured:\n\n```bash\npip install mlflow\n```\n\n### usage\n\n`spacy.mlflowlogger.v2` is a logger that tracks the results of each training step\nusing the [mlflow](https://www.mlflow.org/) tool. to use\nthis logger, mlflow should be installed. at the beginning of each model training\noperation, the logger will initialize a new mlflow run and set it as the active\nrun under which metrics and parameters wil be logged. the logger will then log\nthe entire config file as parameters of the active run. after each training step,\nthe following actions are performed:\n\n- the final score is logged under the metric `score`.\n- individual component scores are logged under their default names.\n- loss values of different components are logged with the `loss_` prefix.\n- if the final score is higher than the previous best score (for the current run),\n  the model artifact is additionally uploaded to mlflow. this action is only performed\n  if the `output_path` argument is provided during the training pipeline initialization phase.\n\nby default, the tracking api writes data into files in a local `./mlruns` directory.\n\n`spacy.mlflowlogger.v1` and below automatically call the [default console logger](https://spacy.io/api/top-level#consolelogger).\nhowever, starting with `spacy.mlflowlogger.v2`, console logging must be activated\nthrough the use of the [chainlogger](#chainlogger). this allows the user to configure\nthe console logger's parameters according to their preferences.\n\n**note** that by default, the full (interpolated)\n[training config](https://spacy.io/usage/training#config) is sent over to\nmlflow. if you prefer to **exclude certain information** such as path\nnames, you can list those fields in \"dot notation\" in the\n`remove_config_values` parameter. these fields will then be removed from the\nconfig before uploading, but will otherwise remain in the config file stored\non your local system.\n\n### example config\n\n```ini\n[training.logger]\n@loggers = \"spacy.mlflowlogger.v2\"\nexperiment_id = \"1\"\nrun_name = \"with_fast_alignments\"\nnested = false\nremove_config_values = [\"paths.train\", \"paths.dev\", \"corpora.train.path\", \"corpora.dev.path\"]\n```\n\n| name                   | type                       | description                                                                                                                                                                                                                       |\n| ---------------------- | -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `run_id`               | `optional[str]`            | unique id of an existing mlflow run to which parameters and metrics are logged. can be omitted if `experiment_id` and `run_id` are provided (default: `none`).                                                                    |\n| `experiment_id`        | `optional[str]`            | id of an existing experiment under which to create the current run. only applicable when `run_id` is `none` (default: `none`).                                                                                                    |\n| `run_name`             | `optional[str]`            | name of new run. only applicable when `run_id` is `none` (default: `none`).                                                                                                                                                       |\n| `nested`               | `bool`                     | controls whether run is nested in parent run. `true` creates a nested run (default: `false`).                                                                                                                                     |\n| `tags`                 | `optional[dict[str, any]]` | a dictionary of string keys and values to set as tags on the run. if a run is being resumed, these tags are set on the resumed run. if a new run is being created, these tags are set on the new run (default: `none`).           |\n| `remove_config_values` | `list[str]`                | a list of values to exclude from the config before it is uploaded to mlflow (default: `[]`).                                                                                                                                      |\n| `log_custom_stats`     | `optional[list[str]]`      | a list of regular expressions that will be applied to the info dictionary passed to the logger (default: `none`). statistics and metrics that match these regexps will be automatically logged. added in `spacy.mlflowlogger.v2`. |\n\n## clearmllogger\n\n### installation\n\nthis logger requires `clearml` to be installed and configured:\n\n```bash\npip install clearml\nclearml-init\n```\n\n### usage\n\n`spacy.clearmllogger.v2` is a logger that tracks the results of each training step\nusing the [clearml](https://www.clear.ml/) tool. to use\nthis logger, clearml should be installed and you should have initialized (using the command above).\nthe logger will send all the gathered information to your clearml server, either [the hosted free tier](https://app.clear.ml)\nor the open source [self-hosted server](https://github.com/allegroai/clearml-server). this logger captures the following information, all of which is visible in the clearml web ui:\n\n- the full spacy config file contents.\n- code information such as git repository, commit id and uncommitted changes.\n- full console output.\n- miscellaneous info such as time, python version and hardware information.\n- output scalars:\n  - the final score is logged under the scalar `score`.\n  - individual component scores are grouped together on one scalar plot (filterable using the web ui).\n  - loss values of different components are logged with the `loss_` prefix.\n\nin addition to the above, the following artifacts can also be optionally captured:\n\n- best model directory (zipped).\n- latest model directory (zipped).\n- dataset used to train.\n  - versioned using clearml data and linked to under configuration -> user properties on the web ui.\n\n`spacy.clearmllogger.v1` and below automatically call the [default console logger](https://spacy.io/api/top-level#consolelogger).\nhowever, starting with `spacy.clearmllogger.v2`, console logging must be activated\nthrough the use of the [chainlogger](#chainlogger). this allows the user to configure\nthe console logger's parameters according to their preferences.\n\n**note** that by default, the full (interpolated)\n[training config](https://spacy.io/usage/training#config) is sent over to\nclearml. if you prefer to **exclude certain information** such as path\nnames, you can list those fields in \"dot notation\" in the\n`remove_config_values` parameter. these fields will then be removed from the\nconfig before uploading, but will otherwise remain in the config file stored\non your local system.\n\n### example config\n\n```ini\n[training.logger]\n@loggers = \"spacy.clearmllogger.v2\"\nproject_name = \"hello clearml!\"\ntask_name = \"my spacy task\"\nmodel_log_interval = 1000\nlog_best_dir = training/model-best\nlog_latest_dir = training/model-last\nlog_dataset_dir = corpus\nremove_config_values = [\"paths.train\", \"paths.dev\", \"corpora.train.path\", \"corpora.dev.path\"]\n```\n\n| name                   | type                  | description                                                                                                                                                                                                                        |\n| ---------------------- | --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `project_name`         | `str`                 | the name of the project in the clearml interface. the project will be created automatically if it doesn't exist yet.                                                                                                               |\n| `task_name`            | `str`                 | the name of the clearml task. a task is an experiment that lives inside a project. can be non-unique.                                                                                                                              |\n| `remove_config_values` | `list[str]`           | a list of values to exclude from the config before it is uploaded to clearml (default: `[]`).                                                                                                                                      |\n| `model_log_interval`   | `optional[int]`       | steps to wait between logging model checkpoints to the clearml dasboard (default: `none`). will have no effect without also setting `log_best_dir` or `log_latest_dir`.                                                            |\n| `log_dataset_dir`      | `optional[str]`       | directory containing the dataset to be logged and versioned as a [clearml dataset](https://clear.ml/docs/latest/docs/clearml_data/clearml_data/) (default: `none`).                                                                |\n| `log_best_dir`         | `optional[str]`       | directory containing the best trained model as saved by spacy (by default in `training/model-best`), to be logged and versioned as a clearml artifact (default: `none`)                                                            |\n| `log_latest_dir`       | `optional[str]`       | directory containing the latest trained model as saved by spacy (by default in `training/model-last`), to be logged and versioned as a clearml artifact (default: `none`)                                                          |\n| `log_custom_stats`     | `optional[list[str]]` | a list of regular expressions that will be applied to the info dictionary passed to the logger (default: `none`). statistics and metrics that match these regexps will be automatically logged. added in `spacy.clearmllogger.v2`. |\n\n## pytorchlogger\n\n### installation\n\nthis logger requires `torch` to be installed:\n\n```bash\npip install torch\n```\n\n### usage\n\n`spacy.pytorchlogger.v1` is different from the other loggers above in that it does not act as a bridge between spacy and\nan external framework. instead, it is used to query pytorch-specific metrics and make them available to other loggers.\ntherefore, it's primarily intended to be used with [chainlogger](#chainlogger).\n\nwhenever a logging checkpoint is reached, it queries statistics from the pytorch backend and stores them in\nthe dictionary passed to it. downstream loggers can thereafter lookup the statistics and log them to their\npreferred framework.\n\nthe following pytorch statistics are currently supported:\n\n- [cuda memory statistics](https://pytorch.org/docs/stable/generated/torch.cuda.memory_stats.html#torch.cuda.memory_stats)\n\n### example config\n\n```ini\n[training.logger]\n@loggers = \"spacy.chainlogger.v1\"\nlogger1 = {\"@loggers\": \"spacy.pytorchlogger.v1\", \"prefix\": \"pytorch\", \"device\": \"0\", \"cuda_mem_metric\": \"current\"}\n# alternatively, you can use any other logger that provides the `log_custom_stats` parameter.\nlogger2 = {\"@loggers\": \"spacy.lookuplogger.v1\", \"patterns\": [\"pytorch\"]}\n```\n\n| name              | type  | description                                                                                                                                                     |\n| ----------------- | ----- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `prefix`          | `str` | all metric names are prefixed with this string using dot notation, e.g: `<prefix>.<metric>` (default: `pytorch`).                                               |\n| `device`          | `int` | the identifier of the cuda device (default: `0`).                                                                                                               |\n| `cuda_mem_pool`   | `str` | one of the memory pool values specified in the pytorch docs: `all`, `large_pool`, `small_pool` (default: `all`).                                                |\n| `cuda_mem_metric` | `str` | one of the memory metric values specified in the pytorch docs: `current`, `peak`, `allocated`, `freed`. to log all metrics, use `all` instead (default: `all`). |\n\n## cupylogger\n\n### installation\n\nthis logger requires `cupy` to be installed:\n\n```bash\npip install cupy\n```\n\n### usage\n\nsimilar to `pytorchlogger`, `spacy.cupylogger.v1` does not act as a bridge between spacy and an external framework\nbut rather is used with the [chainlogger](#chainlogger) to facilitate the flow of metrics to other loggers.\nthe `cupylogger` queries statistics from the cupy backend and stores them in the info dictionary passed to it. downstream\nloggers can thereafter lookup the statistics and log them to their preferred framework.\n\nthe following cupy statistics are currently supported:\n\n- [cuda memory pool statistics](https://docs.cupy.dev/en/stable/user_guide/memory.html)\n\n### example config\n\n```ini\n[training.logger]\n@loggers = \"spacy.chainlogger.v1\"\nlogger1 = {\"@loggers\": \"spacy.cupylogger.v1\", \"prefix\": \"cupy\"}\n# alternatively, you can use any other logger that provides the `log_custom_stats` parameter.\nlogger2 = {\"@loggers\": \"spacy.lookuplogger.v1\", \"patterns\": [\"cupy\"]}\n```\n\n| name     | type  | description                                                                                                      |\n| -------- | ----- | ---------------------------------------------------------------------------------------------------------------- |\n| `prefix` | `str` | all metric names are prefixed with this string using dot notation, e.g: `<prefix>.<metric>` (default: `\"cupy\"`). |\n\n# utility loggers\n\n## chainlogger\n\n### usage\n\nthis logger can be used to daisy-chain multiple loggers and execute them in-order. loggers that are executed earlier in the chain\ncan pass information to those that come later by adding it to the dictionary that is passed to them.\n\ncurrently, up to 10 loggers can be chained together.\n\n### example config\n\n```ini\n[training.logger]\n@loggers = \"spacy.chainlogger.v1\"\nlogger1 = {\"@loggers\": \"spacy.pytorchlogger.v1\"}\nlogger2 = {\"@loggers\": \"spacy.consolelogger.v1\", \"progress_bar\": \"true\"}\n```\n\n| name       | type                 | description                                        |\n| ---------- | -------------------- | -------------------------------------------------- |\n| `logger1`  | `optional[callable]` | the first logger in the chain (default: `none`).   |\n| `logger2`  | `optional[callable]` | the second logger in the chain (default: `none`).  |\n| `logger3`  | `optional[callable]` | the third logger in the chain (default: `none`).   |\n| `logger4`  | `optional[callable]` | the fourth logger in the chain (default: `none`).  |\n| `logger5`  | `optional[callable]` | the fifth logger in the chain (default: `none`).   |\n| `logger6`  | `optional[callable]` | the sixth logger in the chain (default: `none`).   |\n| `logger7`  | `optional[callable]` | the seventh logger in the chain (default: `none`). |\n| `logger8`  | `optional[callable]` | the eighth logger in the chain (default: `none`).  |\n| `logger9`  | `optional[callable]` | the ninth logger in the chain (default: `none`).   |\n| `logger10` | `optional[callable]` | the tenth logger in the chain (default: `none`).   |\n\n## lookuplogger\n\n### usage\n\nthis logger can be used to lookup statistics in the info dictionary and print them to `stdout`. it is primarily\nintended to be used as a tool when developing new loggers.\n\n### example config\n\n```ini\n[training.logger]\n@loggers = \"spacy.chainlogger.v1\"\nlogger1 = {\"@loggers\": \"spacy.pytorchlogger.v1\", \"prefix\": \"pytorch\"}\nlogger2 = {\"@loggers\": \"spacy.lookuplogger.v1\", \"patterns\": [\"^[pp]ytorch\"]}\n```\n\n| name       | type        | description                                                                                          |\n| ---------- | ----------- | ---------------------------------------------------------------------------------------------------- |\n| `patterns` | `list[str]` | a list of regular expressions. if a statistic's name matches one of these, it's printed to `stdout`. |\n\n## bug reports and other issues\n\nplease use [spacy's issue tracker](https://github.com/explosion/spacy/issues) to report a bug, or open a new thread on the\n[discussion board](https://github.com/explosion/spacy/discussions)\nfor any other issue.\n",
  "docs_url": null,
  "keywords": "",
  "license": "mit",
  "name": "spacy-loggers",
  "package_url": "https://pypi.org/project/spacy-loggers/",
  "project_url": "https://pypi.org/project/spacy-loggers/",
  "project_urls": {
    "Homepage": "https://github.com/explosion/spacy-loggers"
  },
  "release_url": "https://pypi.org/project/spacy-loggers/1.0.5/",
  "requires_dist": [],
  "requires_python": ">=3.6",
  "summary": "logging utilities for spacy",
  "version": "1.0.5",
  "releases": [],
  "developers": [
    "contact@explosion.ai",
    "explosion"
  ],
  "kwds": "pytorchlogger mlflowlogger logger3 logger monitor_spacy_training",
  "license_kwds": "mit",
  "libtype": "pypi",
  "id": "pypi_spacy_loggers",
  "homepage": "https://github.com/explosion/spacy-loggers",
  "release_count": 6,
  "dependency_ids": []
}