{
  "classifiers": [
    "development status :: 4 - beta",
    "framework :: pytest",
    "intended audience :: developers",
    "license :: osi approved :: mit license",
    "operating system :: os independent",
    "programming language :: python",
    "programming language :: python :: 3",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "programming language :: python :: implementation :: cpython",
    "topic :: software development :: testing"
  ],
  "description": "# pytest-socket\n\n[![pypi current version](https://img.shields.io/pypi/v/pytest-socket.svg)](https://pypi.python.org/pypi/pytest-socket)\n[![python support](https://img.shields.io/pypi/pyversions/pytest-socket.svg)](https://pypi.python.org/pypi/pytest-socket)\n[![tests](https://github.com/miketheman/pytest-socket/workflows/python%20tests/badge.svg)](https://github.com/miketheman/pytest-socket/actions?query=workflow%3a%22python+tests%22)\n[![pre-commit.ci status](https://results.pre-commit.ci/badge/github/miketheman/pytest-socket/main.svg)](https://results.pre-commit.ci/latest/github/miketheman/pytest-socket/main)\n[![maintainability](https://api.codeclimate.com/v1/badges/1608a75b1c3a20211992/maintainability)](https://codeclimate.com/github/miketheman/pytest-socket/maintainability)\n[![fossa status](https://app.fossa.io/api/projects/git%2bgithub.com%2fmiketheman%2fpytest-socket.svg?type=shield)](https://app.fossa.io/projects/git%2bgithub.com%2fmiketheman%2fpytest-socket?ref=badge_shield)\n[![code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)\n\na plugin to use with pytest to disable or restrict `socket` calls during\ntests to ensure network calls are prevented.\n\n---\n\n## features\n\n- disables all network calls flowing through python\\'s `socket` interface.\n\n## requirements\n\n- [pytest](https://github.com/pytest-dev/pytest) 3.6.3 or greater\n\n## installation\n\nyou can install `pytest-socket` via [pip](https://pypi.python.org/pypi/pip/)\nfrom [pypi](https://pypi.python.org/pypi):\n\n```console\n$ pip install pytest-socket\n```\n\nor add to your `pyproject.toml` for [poetry](https://python-poetry.org/):\n\n```ini\n[tool.poetry.dev-dependencies]\npytest-socket = \"*\"\n```\n\n## usage\n\nrun `pytest --disable-socket`, tests should fail on any access to `socket` or\nlibraries using socket with a `socketblockederror`.\n\nto add this flag as the default behavior, add this section to your\n[`pytest.ini`](https://docs.pytest.org/en/6.2.x/customize.html#pytest-ini):\n\n```ini\n[pytest]\naddopts = --disable-socket\n```\n\nor add this to your [`setup.cfg`](https://docs.pytest.org/en/6.2.x/customize.html#setup-cfg):\n\n```ini\n[tool:pytest]\naddopts = --disable-socket\n```\n\nor update your [`conftest.py`](https://docs.pytest.org/en/6.2.x/writing_plugins.html#conftest-py-plugins) to include:\n\n```python\nfrom pytest_socket import disable_socket\n\ndef pytest_runtest_setup():\n    disable_socket()\n```\n\nto enable unix sockets during the test run (e.g. for async), add this option:\n\n```ini\n[pytest]\naddopts = --disable-socket --allow-unix-socket\n```\n\nto enable specific tests use of `socket`, pass in the fixture to the test or\nuse a marker:\n\n```python\ndef test_explicitly_enable_socket(socket_enabled):\n    assert socket.socket(socket.af_inet, socket.sock_stream)\n\n\n@pytest.mark.enable_socket\ndef test_explicitly_enable_socket_with_mark():\n    assert socket.socket(socket.af_inet, socket.sock_stream)\n```\n\nto allow only specific hosts per-test:\n\n```python\n@pytest.mark.allow_hosts(['127.0.0.1'])\ndef test_explicitly_enable_socket_with_mark():\n    assert socket.socket.connect(('127.0.0.1', 80))\n```\n\nor for whole test run\n\n```ini\n[pytest]\naddopts = --allow-hosts=127.0.0.1,127.0.1.1\n```\n\n### frequently asked questions\n\nq: why is network access disabled in some of my tests but not others?\n\na: pytest's default fixture scope is \"function\", which `socket_enabled` uses.\nif you create another fixture that creates a socket usage that has a \"higher\"\ninstantiation order, such as at the module/class/session, then the higher order\nfixture will be resolved first, and won't be disabled during the tests.\nread more in [this excellent example](https://github.com/miketheman/pytest-socket/issues/45#issue-679835420)\nand more about [pytest fixture order here](https://docs.pytest.org/en/stable/fixture.html#fixture-instantiation-order).\n\nthis behavior may change in the future, as we learn more about pytest\nfixture order, and what users expect to happen.\n\n## contributing\n\ncontributions are very welcome. tests can be run with\n[pytest](https://github.com/pytest-dev/pytest), please ensure the\ncoverage at least stays the same before you submit a pull request.\n\n## license\n\ndistributed under the terms of the\n[mit](http://opensource.org/licenses/mit) license, \"pytest-socket\" is\nfree and open source software\n\n[![fossa status](https://app.fossa.io/api/projects/git%2bgithub.com%2fmiketheman%2fpytest-socket.svg?type=large)](https://app.fossa.io/projects/git%2bgithub.com%2fmiketheman%2fpytest-socket?ref=badge_large)\n\n## issues\n\nif you encounter any problems, please [file an issue](https://github.com/miketheman/pytest-socket/issues)\nalong with a detailed description.\n\n## references\n\nthis [pytest](https://github.com/pytest-dev/pytest) plugin was generated with\n[cookiecutter](https://github.com/audreyr/cookiecutter) along with\n[\\@hackebrot](https://github.com/hackebrot)\\'s\n[cookiecutter-pytest-plugin](https://github.com/pytest-dev/cookiecutter-pytest-plugin)\ntemplate.\n\nthis plugin came about due to the efforts by\n[\\@hangtwenty](https://github.com/hangtwenty) solving a [stackoverflow\nquestion](https://stackoverflow.com/a/30064664), then converted into a\npytest plugin by [\\@miketheman](https://github.com/miketheman).\n",
  "docs_url": null,
  "keywords": "",
  "license": "mit",
  "name": "pytest-socket",
  "package_url": "https://pypi.org/project/pytest-socket/",
  "project_url": "https://pypi.org/project/pytest-socket/",
  "project_urls": {
    "Bug Tracker": "https://github.com/miketheman/pytest-socket/issues",
    "Change Log": "https://github.com/miketheman/pytest-socket/blob/main/CHANGELOG.md",
    "Homepage": "https://pypi.org/project/pytest-socket/",
    "Repository": "https://github.com/miketheman/pytest-socket"
  },
  "release_url": "https://pypi.org/project/pytest-socket/0.6.0/",
  "requires_dist": [
    "pytest (>=3.6.3)"
  ],
  "requires_python": ">=3.7,<4.0",
  "summary": "pytest plugin to disable socket calls during tests",
  "version": "0.6.0",
  "releases": [],
  "developers": [
    "mike_fiedler",
    "miketheman@gmail.com"
  ],
  "kwds": "pytest_socket pytest_runtest_setup pytest test_explicitly_enable_socket test_explicitly_enable_socket_with_mark",
  "license_kwds": "mit",
  "libtype": "pypi",
  "id": "pypi_pytest_socket",
  "homepage": "https://pypi.org/project/pytest-socket/",
  "release_count": 13,
  "dependency_ids": [
    "pypi_pytest"
  ]
}