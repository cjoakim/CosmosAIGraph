{
  "classifiers": [
    "development status :: 5 - production/stable",
    "intended audience :: developers",
    "license :: osi approved :: mit license",
    "programming language :: python",
    "programming language :: python :: 3",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9"
  ],
  "description": "# azure monitor opentelemetry distro client library for python\n\nthe azure monitor distro of [opentelemetry python][ot_sdk_python] provides multiple installable components available for an opentelemetry azure monitor monitoring solution. it allows you to instrument your python applications to capture and report telemetry to azure monitor via the azure monitor exporters.\n\nthis distro automatically installs the following libraries:\n\n* [azure monitor opentelemetry exporters][azure_monitor_opentelemetry_exporters]\n* a subset of opentelemetry [instrumentations][ot_instrumentations] that are officially supported as listed below.\n\n## officially supported instrumentations\n\nopentelemetry instrumentations allow automatic collection of requests sent from underlying instrumented libraries. the following is a list of opentelemetry instrumentations that come bundled in with the azure monitor distro. these instrumentations are enabled by default. see the [usage](#usage) section below for how to opt-out of these instrumentations.\n\n| instrumentation | supported library name | supported versions |\n| --------------- | ---------------------- | ------------------ |\n| [azure core tracing opentelemetry][azure_core_tracing_opentelemetry_plugin] | `azure_sdk` | |\n| [opentelemetry django instrumentation][ot_instrumentation_django] | [django][pypi_django] | [link][ot_instrumentation_django_version]\n| [opentelemetry fastapi instrumentation][ot_instrumentation_fastapi] | [fastapi][pypi_fastapi] | [link][ot_instrumentation_fastapi_version]\n| [opentelemetry flask instrumentation][ot_instrumentation_flask] | [flask][pypi_flask] | [link][ot_instrumentation_flask_version]\n| [opentelemetry psycopg2 instrumentation][ot_instrumentation_psycopg2] | [psycopg2][pypi_psycopg2] | [link][ot_instrumentation_psycopg2_version]\n| [opentelemetry requests instrumentation][ot_instrumentation_requests] | [requests][pypi_requests] | [link][ot_instrumentation_requests_version]\n| [opentelemetry urllib instrumentation][ot_instrumentation_urllib] | [urllib][pypi_urllib] | all\n| [opentelemetry urllib3 instrumentation][ot_instrumentation_urllib3] | [urllib3][pypi_urllib3] | [link][ot_instrumentation_urllib3_version]\n\nif you would like to add support for another opentelemetry instrumentation, please submit a feature [request][distro_feature_request]. in the meantime, you can use the opentelemetry instrumentation manually via it's own apis (i.e. `instrument()`) in your code. see [this][samples_manual] for an example.\n\n## key concepts\n\nthis package bundles a series of opentelemetry and azure monitor components to enable the collection and sending of telemetry to azure monitor. for manual instrumentation, use the `configure_azure_monitor` function. automatic instrumentation is not yet supported.\n\nthe [azure monitor opentelemetry exporters][azure_monitor_opentelemetry_exporters] are the main components in accomplishing this. you will be able to use the exporters and their apis directly through this package. please go the exporter documentation to understand how opentelemetry and azure monitor components work in enabling telemetry collection and exporting.\n\ncurrently, all instrumentations available in opentelemetry are in a beta state, meaning they are not stable and may have breaking changes in the future. efforts are being made in pushing these to a more stable state.\n\n## getting started\n\n### prerequisites\n\nto use this package, you must have:\n\n* azure subscription - [create a free account][azure_sub]\n* azure monitor - [how to use application insights][application_insights_namespace]\n* opentelemetry sdk - [opentelemetry sdk for python][ot_sdk_python]\n* python 3.7 or later - [install python][python]\n\n### install the package\n\ninstall the azure monitor opentelemetry distro with [pip][pip]:\n\n```bash\npip install azure-monitor-opentelemetry\n```\n\n### usage\n\nyou can use `configure_azure_monitor` to set up instrumentation for your app to azure monitor. `configure_azure_monitor` supports the following optional arguments. all pass-in parameters take priority over any related environment variables.\n\n| parameter | description | environment variable |\n|-------------------|----------------------------------------------------|----------------------|\n| `connection_string` | the [connection string][connection_string_doc] for your application insights resource. the connection string will be automatically populated from the `applicationinsights_connection_string` environment variable if not explicitly passed in. | `applicationinsights_connection_string` |\n| `logger_name` | the name of the [python logger][python_logger] under which telemetry is collected. | `n/a` |\n| `instrumentation_options` | a nested dictionary that determines which instrumentations to enable or disable. instrumentations are referred to by their [library names](#officially-supported-instrumentations). for example, `{\"azure_sdk\": {\"enabled\": false}, \"flask\": {\"enabled\": false}, \"django\": {\"enabled\": true}}` will disable azure core tracing and the flask instrumentation but leave django and the other default instrumentations enabled. the `otel_python_disabled_instrumentations` environment variable explained below can also be used to disable instrumentations. | `n/a` |\n\n\nyou can configure further with [opentelemetry environment variables][ot_env_vars] such as:\n| environment variable | description |\n|-------------|----------------------|\n| [otel_service_name][ot_spec_service_name], [otel_resource_attributes][ot_spec_resource_attributes] | specifies the opentelemetry [resource][ot_spec_resource] associated with your application. |\n| `otel_logs_exporter` | if set to `none`, disables collection and export of logging telemetry. |\n| `otel_metrics_exporter` | if set to `none`, disables collection and export of metric telemetry. |\n| `otel_traces_exporter` | if set to `none`, disables collection and export of distributed tracing telemetry. |\n| `otel_blrp_schedule_delay` | specifies the logging export interval in milliseconds. defaults to 5000. |\n| `otel_bsp_schedule_delay` | specifies the distributed tracing export interval in milliseconds. defaults to 5000. |\n| `otel_traces_sampler_arg` | specifies the ratio of distributed tracing telemetry to be [sampled][application_insights_sampling]. accepted values are in the range [0,1]. defaults to 1.0, meaning no telemetry is sampled out. |\n| `otel_python_disabled_instrumentations` | specifies which of the supported instrumentations to disable. disabled instrumentations will not be instrumented as part of `configure_azure_monitor`. however, they can still be manually instrumented with `instrument()` directly. accepts a comma-separated list of lowercase [library names](#officially-supported-instrumentations). for example, set to `\"psycopg2,fastapi\"` to disable the psycopg2 and fastapi instrumentations. defaults to an empty list, enabling all supported instrumentations. |\n| `otel_experimental_resource_detectors` | an experimental opentelemetry environment variable used to specify resource detectors to be used to generate resource attributes. this is an experimental feature and the name of this variable and its behavior can change in a non-backwards compatible way. defaults to \"azure_app_service,azure_vm\" to enable the [azure resource detectors][ot_resource_detector_azure] for azure app service and azure vm. to add or remove specific resource detectors, set the environment variable accordingly. see the [opentelemetry python resource detector documentation][ot_python_resource_detectors] for more. |\n\n#### azure monitor opentelemetry exporter configurations\n\nyou can pass azure monitor opentelemetry exporter configuration parameters directly into `configure_azure_monitor`. see additional [configuration related to exporting here][exporter_configuration_docs].\n\n```python\n...\nconfigure_azure_monitor(\n   connection_string=\"<your-connection-string>\",\n   disable_offline_storage=true,\n)\n...\n```\n\n### examples\n\nsamples are available [here][samples] to demonstrate how to utilize the above configuration options.\n\n### monitoring in azure functions\n\n#### trace correlation\n\ntracked incoming requests coming into your python application hosted in azure functions will not be automatically correlated with telemetry being tracked within it. you can manually achieve trace correlation by extract the `tracecontext` directly as shown below:\n\n```python\n\nimport azure.functions as func\n\nfrom azure.monitor.opentelemetry import configure_azure_monitor\nfrom opentelemetry import trace\nfrom opentelemetry.propagate import extract\n\n# configure azure monitor collection telemetry pipeline\nconfigure_azure_monitor()\n\ndef main(req: func.httprequest, context) -> func.httpresponse:\n   ...\n   # store current tracecontext in dictionary format\n   carrier = {\n      \"traceparent\": context.trace_context.traceparent,\n      \"tracestate\": context.trace_context.tracestate,\n   }\n   tracer = trace.get_tracer(__name__)\n   # start a span using the current context\n   with tracer.start_as_current_span(\n      \"http_trigger_span\",\n      context=extract(carrier),\n   ):\n      ...\n\n```\n\n#### logging issues\n\nthe azure functions worker itself sends logging telemetry itself without the use of the azure monitor sdk (the call to `configure_azure_monitor()`). this will cause you to possibly experience duplicate telemetry entries when sending logging telemetry. our recommendation to customers is to use solely the sdk as it will allow much more rich telemetry and features than using the built in one provided by the azure functions worker. you can turn off the azure functions telemetry logger by clearing the list of handlers of your logger.\n\n```python\n...\nroot_logger = logging.getlogger()\nfor handler in root_logger.handlers[:]:\n    root_logger.removehandler(handler)\n...\n```\n\nbe sure to call the above before any loggers or the call to `configure_azure_monitor()` is setup.\n\nyou may also disable logging through [azure functions configuration](https://learn.microsoft.com/azure/azure-functions/configure-monitoring?tabs=v2#configure-log-levels).\n\nv2.x+\n```\n...\n{\n  \"logging\": {\n    ...\n    \"loglevel\": {\n      \"default\": \"none\",\n      ...\n    }\n  }\n}\n...\n```\n\nv1.x\n```\n...\n{\n  \"logger\": {\n    \"categoryfilter\": {\n      \"defaultlevel\": \"none\",\n      ...\n    }\n  }\n}\n...\n```\n\n## troubleshooting\n\nthe exporter raises exceptions defined in [azure core](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/core/azure-core/readme.md#azure-core-library-exceptions).\n\n## next steps\n\ncheck out the [documentation][azure_monitor_enable_docs] for more.\n\n## contributing\n\nthis project welcomes contributions and suggestions.  most contributions require you to agree to a\ncontributor license agreement (cla) declaring that you have the right to, and actually do, grant us\nthe rights to use your contribution. for details, visit https://cla.microsoft.com.\n\nwhen you submit a pull request, a cla-bot will automatically determine whether you need to provide\na cla and decorate the pr appropriately (e.g., label, comment). simply follow the instructions\nprovided by the bot. you will only need to do this once across all repos using our cla.\n\nthis project has adopted the [microsoft open source code of conduct](https://opensource.microsoft.com/codeofconduct/).\nfor more information see the [code of conduct faq](https://opensource.microsoft.com/codeofconduct/faq/) or\ncontact [opencode@microsoft.com](mailto:opencode@microsoft.com) with any additional questions or comments.\n\n### additional documentation\n\n* [azure portal][azure_portal]\n* [official azure monitor docs][azure_monitor_enable_docs]\n* [opentelemetry python official docs][ot_python_docs]\n\n<!-- links -->\n[azure_core_tracing_opentelemetry_plugin]: https://github.com/azure/azure-sdk-for-python/tree/main/sdk/core/azure-core-tracing-opentelemetry\n[azure_core_tracing_opentelemetry_plugin_sample]: https://github.com/azure/azure-sdk-for-python/tree/main/sdk/monitor/azure-monitor-opentelemetry/samples/tracing/azure_core.py\n[azure_monitor_enable_docs]: https://learn.microsoft.com/azure/azure-monitor/app/opentelemetry-enable?tabs=python\n[azure_monitor_opentelemetry_exporters]: https://github.com/azure/azure-sdk-for-python/tree/main/sdk/monitor/azure-monitor-opentelemetry-exporter#microsoft-opentelemetry-exporter-for-azure-monitor\n[azure_portal]: https://portal.azure.com\n[azure_sub]: https://azure.microsoft.com/free/\n[application_insights_namespace]: https://learn.microsoft.com/azure/azure-monitor/app/app-insights-overview\n[application_insights_sampling]: https://learn.microsoft.com/azure/azure-monitor/app/sampling\n[connection_string_doc]: https://learn.microsoft.com/azure/azure-monitor/app/sdk-connection-string\n[distro_feature_request]: https://github.com/azure/azure-sdk-for-python/issues/new\n[exporter_configuration_docs]: https://github.com/azure/azure-sdk-for-python/tree/main/sdk/monitor/azure-monitor-opentelemetry-exporter#configuration\n[ot_env_vars]: https://opentelemetry.io/docs/reference/specification/sdk-environment-variables/\n[ot_instrumentations]: https://github.com/open-telemetry/opentelemetry-python-contrib/tree/main/instrumentation\n[ot_metric_reader]: https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/metrics/sdk.md#metricreader\n[ot_python_docs]: https://opentelemetry.io/docs/instrumentation/python/\n[ot_sdk_python]: https://github.com/open-telemetry/opentelemetry-python\n[ot_sdk_python_metric_reader]: https://opentelemetry-python.readthedocs.io/en/stable/sdk/metrics.export.html#opentelemetry.sdk.metrics.export.metricreader\n[ot_sdk_python_view_examples]: https://github.com/open-telemetry/opentelemetry-python/tree/main/docs/examples/metrics/views\n[ot_instrumentation_django]: https://github.com/open-telemetry/opentelemetry-python-contrib/tree/main/instrumentation/opentelemetry-instrumentation-django\n[ot_instrumentation_django_version]: https://github.com/open-telemetry/opentelemetry-python-contrib/blob/main/instrumentation/opentelemetry-instrumentation-django/src/opentelemetry/instrumentation/django/package.py#l16\n[ot_instrumentation_fastapi]: https://github.com/open-telemetry/opentelemetry-python-contrib/tree/main/instrumentation/opentelemetry-instrumentation-fastapi\n[ot_instrumentation_fastapi_version]: https://github.com/open-telemetry/opentelemetry-python-contrib/blob/main/instrumentation/opentelemetry-instrumentation-fastapi/src/opentelemetry/instrumentation/fastapi/package.py#l16\n[ot_instrumentation_flask]: https://github.com/open-telemetry/opentelemetry-python-contrib/tree/main/instrumentation/opentelemetry-instrumentation-flask\n[ot_instrumentation_flask_version]: https://github.com/open-telemetry/opentelemetry-python-contrib/blob/main/instrumentation/opentelemetry-instrumentation-flask/src/opentelemetry/instrumentation/flask/package.py#l16\n[ot_instrumentation_psycopg2]: https://github.com/open-telemetry/opentelemetry-python-contrib/tree/main/instrumentation/opentelemetry-instrumentation-psycopg2\n[ot_instrumentation_psycopg2_version]: https://github.com/open-telemetry/opentelemetry-python-contrib/blob/main/instrumentation/opentelemetry-instrumentation-psycopg2/src/opentelemetry/instrumentation/psycopg2/package.py#l16\n[ot_instrumentation_requests]: https://github.com/open-telemetry/opentelemetry-python-contrib/tree/main/instrumentation/opentelemetry-instrumentation-requests\n[ot_instrumentation_requests_version]: https://github.com/open-telemetry/opentelemetry-python-contrib/blob/main/instrumentation/opentelemetry-instrumentation-requests/src/opentelemetry/instrumentation/requests/package.py#l16\n[ot_instrumentation_urllib]: https://github.com/open-telemetry/opentelemetry-python-contrib/tree/main/instrumentation/opentelemetry-instrumentation-urllib3\n[ot_instrumentation_urllib3]: https://github.com/open-telemetry/opentelemetry-python-contrib/tree/main/instrumentation/opentelemetry-instrumentation-urllib3\n[ot_instrumentation_urllib3_version]: https://github.com/open-telemetry/opentelemetry-python-contrib/blob/main/instrumentation/opentelemetry-instrumentation-urllib3/src/opentelemetry/instrumentation/urllib3/package.py#l16\n[ot_python_resource_detectors]: https://opentelemetry-python.readthedocs.io/en/latest/sdk/environment_variables.html#opentelemetry.sdk.environment_variables.otel_experimental_resource_detectors\n[ot_resource_detector_azure]: https://pypi.org/project/opentelemetry_resource_detector_azure/\n[ot_spec_resource]: https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/resource/sdk.md#resource-sdk\n[ot_spec_resource_attributes]: https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/resource/sdk.md#specifying-resource-information-via-an-environment-variable\n[ot_spec_service_name]: https://github.com/open-telemetry/semantic-conventions/blob/main/docs/resource/readme.md#service\n[ot_spec_view]: https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/metrics/sdk.md#view\n[pip]: https://pypi.org/project/pip/\n[pypi_django]: https://pypi.org/project/django/\n[pypi_fastapi]: https://pypi.org/project/fastapi/\n[pypi_flask]: https://pypi.org/project/flask/\n[pypi_psycopg2]: https://pypi.org/project/psycopg2/\n[pypi_requests]: https://pypi.org/project/requests/\n[pypi_urllib]: https://docs.python.org/3/library/urllib.html\n[pypi_urllib3]: https://pypi.org/project/urllib3/\n[python]: https://www.python.org/downloads/\n[python_logger]: https://docs.python.org/3/library/logging.html#logger-objects\n[python_logging_level]: https://docs.python.org/3/library/logging.html#levels\n[samples]: https://github.com/azure/azure-sdk-for-python/tree/main/sdk/monitor/azure-monitor-opentelemetry/samples\n[samples_manual]: https://github.com/azure/azure-sdk-for-python/tree/main/sdk/monitor/azure-monitor-opentelemetry/samples/tracing/manual.py\n",
  "docs_url": null,
  "keywords": "azure,azure sdk",
  "license": "mit license",
  "name": "azure-monitor-opentelemetry",
  "package_url": "https://pypi.org/project/azure-monitor-opentelemetry/",
  "project_url": "https://pypi.org/project/azure-monitor-opentelemetry/",
  "project_urls": {
    "Homepage": "https://github.com/microsoft/ApplicationInsights-Python/tree/main/azure-monitor-opentelemetry"
  },
  "release_url": "https://pypi.org/project/azure-monitor-opentelemetry/1.1.1/",
  "requires_dist": [
    "azure-core<2.0.0,>=1.24.0",
    "azure-core-tracing-opentelemetry~=1.0.0b10",
    "azure-monitor-opentelemetry-exporter~=1.0.0b18",
    "opentelemetry-instrumentation-django~=0.41b0",
    "opentelemetry-instrumentation-fastapi~=0.41b0",
    "opentelemetry-instrumentation-flask~=0.41b0",
    "opentelemetry-instrumentation-psycopg2~=0.41b0",
    "opentelemetry-instrumentation-requests~=0.41b0",
    "opentelemetry-instrumentation-urllib~=0.41b0",
    "opentelemetry-instrumentation-urllib3~=0.41b0",
    "opentelemetry-resource-detector-azure~=0.1.0"
  ],
  "requires_python": ">=3.7",
  "summary": "microsoft azure monitor opentelemetry distro client library for python",
  "version": "1.1.1",
  "releases": [],
  "developers": [
    "ascl@microsoft.com",
    "microsoft_corporation"
  ],
  "kwds": "azure_monitor_opentelemetry_exporters opentelemetry_resource_detector_azure azure_core_tracing_opentelemetry_plugin configure_azure_monitor azure_core_tracing_opentelemetry_plugin_sample",
  "license_kwds": "mit license",
  "libtype": "pypi",
  "id": "pypi_azure_monitor_opentelemetry",
  "homepage": "https://github.com/microsoft/applicationinsights-python/tree/main/azure-monitor-opentelemetry",
  "release_count": 11,
  "dependency_ids": [
    "pypi_azure_core",
    "pypi_azure_core_tracing_opentelemetry",
    "pypi_azure_monitor_opentelemetry_exporter",
    "pypi_opentelemetry_instrumentation_django",
    "pypi_opentelemetry_instrumentation_fastapi",
    "pypi_opentelemetry_instrumentation_flask",
    "pypi_opentelemetry_instrumentation_psycopg2",
    "pypi_opentelemetry_instrumentation_requests",
    "pypi_opentelemetry_instrumentation_urllib",
    "pypi_opentelemetry_instrumentation_urllib3",
    "pypi_opentelemetry_resource_detector_azure"
  ]
}