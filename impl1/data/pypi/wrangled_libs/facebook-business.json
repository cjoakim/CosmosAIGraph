{
  "classifiers": [],
  "description": "# facebook business sdk for python\n\n[![pypi](https://img.shields.io/pypi/v/facebook-business)](https://pypi.org/project/facebook-business/)\n[![build status](https://img.shields.io/github/actions/workflow/status/facebook/facebook-python-business-sdk/ci.yml)](https://github.com/facebook/facebook-python-business-sdk/actions/workflows/ci.yml)\n[![license](https://img.shields.io/badge/license-facebook%20platform-blue.svg?style=flat-square)](https://github.com/facebook/facebook-python-business-sdk/blob/main/license.txt)\n\n### introduction\n\nthe facebook <a href=\"https://developers.facebook.com/docs/business-sdk\" target=\"_blank\">business sdk</a> is a one-stop-shop to help our partners better serve their businesses. partners are using multiple facebook api's to serve the needs of their clients. adopting all these api's and keeping them up to date across the various platforms can be time consuming and ultimately prohibitive. for this reason facebook has developed the business sdk bundling many of its apis into one sdk to ease implementation and upkeep. the business sdk is an upgraded version of the marketing api sdk that includes the marketing api as well as many facebook apis from different platforms such as pages, business manager, instagram, etc.\n\n## quick start\n\nbusiness sdk <a href=\"https://developers.facebook.com/docs/business-sdk/getting-started\" target=\"_blank\">getting started guide</a>\n\npython is currently the most popular language for our third-party developers. `facebook_business` is a python package that provides an interface between your python application and <a href=\"https://developers.facebook.com/docs/business-sdk/reference\" target=\"_blank\">facebook's apis within the business sdk</a>. this tutorial covers the basic knowledge needed to use the sdk and provides some exercises for the reader.\n\n**note**: ``facebook_business`` package is compatible with python 2 and 3!\n\n## pre-requisites\n\n### register an app\n\nto get started with the sdk, you must have an app\nregistered on <a href=\"https://developers.facebook.com/\" target=\"_blank\">developers.facebook.com</a>.\n\nto manage the marketing api, please visit your\n<a href=\"https://developers.facebook.com/apps/<your app id>/dashboard\"> app dashboard </a>\nand add the <b>marketing api</b> product to your app.\n\n**important**: for security, it is recommended that you turn on 'app secret\nproof for server api calls' in your app's settings->advanced page.\n\n### obtain an access token\n\nwhen someone connects with an app using facebook login and approves the request\nfor permissions, the app obtains an access token that provides temporary, secure\naccess to facebook apis.\n\nan access token is an opaque string that identifies a user, app, or page.\n\nfor example, to access the marketing api, you need to generate a user access token\nfor your app and ask for the ``ads_management`` permission; to access pages api,\nyou need to generate a page access token for your app and ask for the ``manage_page`` permission.\n\nrefer to our\n<a href=\"https://developers.facebook.com/docs/facebook-login/access-tokens\" target=\"_blank\">\naccess token guide</a> to learn more.\n\nfor now, we can use the\n<a href=\"https://developers.facebook.com/tools/explorer\" target=\"_blank\">graph explorer</a>\nto get an access token.\n\n## install package\n\nthe easiest way to install the sdk is via ``pip`` in your shell.\n\n**note**: for python 3, use ``pip3`` and ``python3`` instead.\n\n**note**: use ``sudo`` if any of these complain about permissions. (this might\nhappen if you are using a system installed python.)\n\nif you don't have pip:\n\n```\neasy_install pip\n```\n\nnow execute when you have pip:\n\n```\npip install facebook_business\n```\n\nif you care for the latest version instead of a possibly outdated version in the\n<a href=\"https://pypi.python.org\" target=\"_blank\">pypi.python.org</a> repository,\n<a href=\"https://github.com/facebook/facebook-python-business-sdk\">check out the\nrepository from github or download a release tarball</a>. once you've got the\npackage downloaded and unzipped, install it:\n\n```\npython setup.py install\n```\n\ngreat, now you are ready to use the sdk!\n\n## bootstrapping\n\n### create test.py\ncreate a test.py file with the contents below (assuming your system is using python 2.7 and installed under /opt/homebrew. update to your proper python location.):\n\n```python\nimport sys\nsys.path.append('/opt/homebrew/lib/python2.7/site-packages') # replace this with the place you installed facebookads using pip\nsys.path.append('/opt/homebrew/lib/python2.7/site-packages/facebook_business-3.0.0-py2.7.egg-info') # same as above\n\nfrom facebook_business.api import facebookadsapi\nfrom facebook_business.adobjects.adaccount import adaccount\n\nmy_app_id = 'your-app-id'\nmy_app_secret = 'your-appsecret'\nmy_access_token = 'your-page-access-token'\nfacebookadsapi.init(my_app_id, my_app_secret, my_access_token)\nmy_account = adaccount('act_<your-adaccount-id>')\ncampaigns = my_account.get_campaigns()\nprint(campaigns)\n```\n\n### test your install\ntest your install with the following command:\n```python\npython test.py\n```\nyou should see the result in your terminal window. if it complains about an expired token, repeat the process for requesting a page access token described in the prerequisites section above.\n\n**note**: we shall use the objects module throughout the rest of the tutorial. you can\nalso use the individual class files under adobjects directly.\n\n\n## understanding crud\n\nthe sdk implements a crud (create, read, update, delete) design. objects\nrelevant to exploring the graph are located in the objects module of the\nfacebook_business package.\n\nall objects on the graph are instances of ``abstractobject``. some objects can\nbe directly queried and thus are instances of ``abstractcrudobject`` (a subclass\nof ``abstractobject``). both these abstract classes are located in\n``facebook_business.adobjects``.\n\nthere is and additional folder ``adobjects`` under facebook_business. under this you will see a file for every ad object\nin our marketing api. these files are autogenerated from our api and therefore\nare close in parity with what api has to offer. based on what crud operations can be\nperformed on each object, you will see the presence of the following methods in them:\n\n* ``api_get``\n* ``api_update``\n* ``api_delete``\n* ``create_xxx``\n* ``get_xxx``\n\nfor example, campaign has all these methods but adaccount does not. read the\nmarketing api documentation for more information about\n<a href=\"https://developers.facebook.com/docs/marketing-api/reference\" target=\"_blank\">how different ad\nobjects are used</a>.\n\nthere are some deprecated function in ``abstractcrudobject``, like\n* ``remote_create``\n* ``remote_read``\n* ``remote_update``\n* ``remote_delete``\n\nplease try to stop use them since we may plan to deprecated them soon.\n\n## exploring the graph\n\nthe way the sdk abstracts the api is by defining classes that represent objects\non the graph. these class definitions and their helpers are located in\n``facebook_business.adobjects``.\n\n### initializing objects\n\nlook at ``abstractobject``'s and ``abstractcrudobject``'s ``__init__`` method\nfor more information. most objects on the graph subclass from one of the two.\n\nwhen instantiating an ad object, you can specify its id if it already exists by\ndefining ``fbid`` argument. also, if you want to interact with the\napi using a specific api object instead of the default, you can specify the\n``api`` argument.\n\n### edges\n\nlook at the methods of an object to see what associations over which we can\niterate. for example an ``user`` object has a method ``get_ad_accounts`` which\nreturns an iterator of ``adaccount`` objects.\n\n### ad account\n\nmost ad-related operations are in the context of an ad account. you can go to\n<a href=\"https://www.facebook.com/ads/manage\">ads manager</a> to see accounts\nfor which you have permission. most of you probably have a personal account.\n\nlet's get all the ad accounts for the user with the given access token. i only\nhave one account so the following is printed:\n\n```python\n>>> from facebook_business.adobjects.user import user\n>>> me = adobjects.user(fbid='me')\n>>> my_accounts = list(me.get_ad_accounts())\n>>> print(my_accounts)\n[{   'account_id': u'17842443', 'id': u'act_17842443'}]\n>>> type(my_accounts[0])\n<class 'facebook_business.adobjects.adaccount'>\n```\n\n**warning**: we do not specify a keyword argument ``api=api`` when instantiating\nthe ``user`` object here because we've already set the default api when\nbootstrapping.\n\n**note**: we wrap the return value of ``get_ad_accounts`` with ``list()``\nbecause ``get_ad_accounts`` returns an ``edgeiterator`` object (located in\n``facebook_business.adobjects``) and we want to get the full list right away instead of\nhaving the iterator lazily loading accounts.\n\nfor our purposes, we can just pick an account and do our experiments in its\ncontext:\n\n```python\n>>> my_account = my_accounts[0]\n```\n\nor if you already know your account id:\n\n```python\n>>> my_account = adobjects.adaccount('act_17842443')\n```\n\n## create\n\nlet's create a campaign. it's in the context of the account, i.e. its parent\nshould be the account.\n\n```python\n\nfields = [\n]\nparams = {\n  adobjects.campaign.field.name : 'conversions campaign',\n  adobjects.campaign.field.configured_status: adobjects.campaign.status.paused,\n}\ncampaign = adaccount(id).create_campaign(fields, params)\n```\n\nthen we specify some details about the campaign. to figure out what properties\nto define, you should look at the available fields of the object (located in\n``campaign.field``) and also look at the ad object's documentation (e.g.\n<a href=\"https://developers.facebook.com/docs/marketing-api/reference/ad-campaign-group\">\ncampaign</a>).\n\n**note**: to find out the fields, look at the individual class file under adobjects\ndirectory.\n\nif there's an error, an exception will be raised. possible exceptions and their\ndescriptions are listed in ``facebook_business.exceptions``.\n\n## read\n\nwe can also read properties of an object from the api assuming that the object\nis already created and has a node path. accessing properties of an object is\nsimple since ``abstractobject`` implements the ``collections.mutablemapping``.\nyou can access them just like accessing a key of a dictionary:\n\n```python\n>>> print(my_account)\n{'account_id': u'17842443', 'id': u'act_17842443'}\n>>> my_account = my_account.api_get(fields=[adobjects.adaccount.field.amount_spent])\n>>> print(my_account[adobjects.adaccount.field.amount_spent])\n{'amount_spent': 21167, 'account_id': u'17842443', 'id': u'act_17842443'}\n```\n\n## update\n\nto update an object, we can modify its properties and then call the\n``api_update`` method to sync the object with the server. let's correct the\ntypo \"campain\" to \"campaign\":\n\n```python\n>>> campaign.api_update(fields=[], params={adobjects.campaign.field.name:\"potato campaign\"})\n```\n\nyou can see the results in ads manager.\n\n## delete\n\nif we decide we don't want the campaign we created anymore:\n\n```python\ncampaign.api_delete()\n```\n\n## useful arguments\n\n### multiple access tokens\n\nthroughout the docs, the method facebookadsapi.init is called before making any api calls. this\nmethod set up a default facebookadsapi object to be used everywhere. that simplifies the usage\nbut it's not feasible when a system using the sdk will make calls on behalf of multiple users.\n\nthe reason why this is not feasible is because each user should have its own facebooksession, with its own\naccess token, rather than using the same session for every one. each session should be used to create a\nseparate facebookadsapi object. see example below:\n\n\n```python\nmy_app_id = '<app_id>'\nmy_app_secret = '<app_secret>'\nmy_access_token_1 = '<access_token_1>'\nmy_access_token_2 = '<access_token_2>'\nproxies = {'http': '<http_proxy>', 'https': '<https_proxy>'} # add proxies if needed\n\nsession1 = facebooksession(\n    my_app_id,\n    my_app_secret,\n    my_access_token_1,\n    proxies,\n)\n\nsession2 = facebooksession(\n    my_app_id,\n    my_app_secret,\n    my_access_token_2,\n    proxies,\n)\n\napi1 = facebookadsapi(session1)\napi2 = facebookadsapi(session2)\n```\nin the sdk examples, we always set a single facebookadsapi object as the default one.\nhowever, working with multiples access_tokens, require us to use multiples apis. we may set a default\napi for a user, but, for the other users,  we shall use its the api object as a param. in the example below,\nwe create two adusers, the first one using the default api and the second one using its api object:\n\n```python\nfacebookadsapi.set_default_api(api1)\n\nme1 = aduser(fbid='me')\nme2 = aduser(fbid='me', api=api2)\n```\nanother way to create the same objects from above would be:\n\n```python\nme1 = aduser(fbid='me', api=api1)\nme2 = aduser(fbid='me', api=api2)\n```\nfrom here, all the following workflow for these objects remains the same. the only exceptions are\nthe classmethods calls, where we now should pass the api we want to use as the last parameter\non every call. for instance, a call to the aduser.get_by_ids method should be like this:\n\n```python\nsession = facebooksession(\n my_app_id,\n my_app_secret,\n my_access_token_1,\n proxies,\n)\n\napi = facebookadsapi(session1)\naduser.get_by_ids(ids=['<uid_1>', '<uid_2>'], api=api)\n```\n### crud\n\nall crud calls support a ``params`` keyword argument which takes a dictionary\nmapping parameter names to values in case advanced modification is required. you\ncan find the list of parameter names as attributes of\n``{your object class}.field``. under the field class there may be other classes\nwhich contain, as attributes, valid fields of the value of one of the parent\nproperties.\n\n``api_update`` and ``create_xxx`` support a ``files`` keyword argument\nwhich takes a dictionary mapping file reference names to binary opened file\nobjects.\n\n``api_get`` supports a ``fields`` keyword argument which is a convenient way\nof specifying the 'fields' parameter. ``fields`` takes a list of fields which\nshould be read during the call. the valid fields can be found as attributes of\nthe class field.\n\n### edges\n\nwhen initializing an ``edgeiterator`` or when calling a method such as\n``adaccount.get_ad_campaigns``:\n\n* you can specify a ``fields`` argument which takes a list of fields to read for\nthe objects being read.\n* you can specify a ``params`` argument that can help you specify or filter the\nedge more precisely.\n\n## batch calling\n\nit is efficient to group together large numbers of calls into one http request.\nthe sdk makes this process simple. you can group together calls into an instance\nof ``facebookadsapibatch`` (available in facebook_business.api). to easily get one\nfor your api instance:\n\n```python\nmy_api_batch = api.new_batch()\n```\n\ncalls can be added to the batch instead of being executed immediately:\n\n```python\ncampaign.api_delete(batch=my_api_batch)\n```\n\nonce you're finished adding calls to the batch, you can send off the request:\n\n```python\nmy_api_batch.execute()\n```\n\nplease follow <a href=\"https://developers.facebook.com/docs/graph-api/making-multiple-requests\">\nbatch call guidelines in the marketing api documentation</a>. there are optimal\nnumbers of calls per batch. in addition, you may need to watch out that for rate\nlimiting as a batch call simply improves network performance and each call does\ncount individually towards rate limiting.\n\n## exceptions\n\nsee ``facebook_business.exceptions`` for a list of exceptions which may be thrown by\nthe sdk.\n\n## tests\n\n### unit tests\n\nthe unit tests don't require an access token or network access. run them\nwith your default installed python as follows:\n\n```\npython -m facebook_business.test.unit\n```\n\nyou can also use tox to run the unit tests with multiple python versions:\n\n```\nsudo apt-get install python-tox  # debian/ubuntu\nsudo yum install python-tox      # fedora\ntox --skip-missing-interpreters\n```\n\nyou can increase interpreter coverage by installing additional versions of\npython. on ubuntu you can use the\n[deadsnakes ppa](https://launchpad.net/~fkrull/+archive/ubuntu/deadsnakes).\non other distributions you can\n[build from source](https://www.python.org/downloads/) and then use\n`sudo make altinstall` to avoid conflicts with your system-installed\nversion.\n\n## examples\n\nexamples of usage are located in the ``examples/`` folder.\n\n\n## debug\n\nif this sdk is not working as expected, it may be either a sdk issue or api issue.\n\nthis can be identified by constructing a raw curl request and seeing if the response is as expected\n\nfor example:\n\n```python\nfrom facebook_business.adobjects.page import page\nfrom facebook_business.api import facebookadsapi\n\nfacebookadsapi.init(access_token=access_token, debug=true)\npage = page(page_id).api_get(fields=fields,params=params)\n```\n\nwhen running this code, this curl request will be printed to the console as:\n```\ncurl -x 'get' -h 'accept: */*' -h 'accept-encoding: gzip, deflate' -h 'connection: keep-alive' -h 'user-agent: fbbizsdk-python-v3.3.1' 'https://graph.facebook.com/v3.3/<pageid>/?access_token=<access_token>&fields=name%2cbirthday%2cphone'\n```\n\n## sdk codegen\nour sdk is autogenerated from [sdk codegen](https://github.com/facebook/facebook-business-sdk-codegen). if you want to learn more about how our sdk code is generated, please check this repository.\n\n## issue\nsince we want to handle bugs more efficiently, we've decided to close issue reporting in github and move to our dedicated bug reporting channel.\nif you encounter a bug with business sdk (python), please report the issue at [our developer bug reporting channel](https://developers.facebook.com/support/bugs/).\n\n## license\nfacebook business sdk for python is licensed under the license file in the root directory of this source tree.\n",
  "docs_url": null,
  "keywords": "",
  "license": "license.txt",
  "name": "facebook-business",
  "package_url": "https://pypi.org/project/facebook-business/",
  "project_url": "https://pypi.org/project/facebook-business/",
  "project_urls": {
    "Download": "https://github.com/facebook/facebook-python-business-sdk/tarball/18.0.5",
    "Homepage": "https://github.com/facebook/facebook-python-business-sdk"
  },
  "release_url": "https://pypi.org/project/facebook-business/18.0.5/",
  "requires_dist": [
    "requests >=2.3.0",
    "six >=1.7.3",
    "curlify >=2.1.0",
    "pycountry >=19.8.18",
    "enum34 ; python_version < \"3.4\"",
    "aiohttp ; python_version >= \"3.5.3\""
  ],
  "requires_python": "",
  "summary": "facebook business sdk",
  "version": "18.0.5",
  "releases": [],
  "developers": [
    "facebook",
    "shuotian@meta.com"
  ],
  "kwds": "facebook_business facebookadsapi facebookads facebookadsapibatch facebook",
  "license_kwds": "license.txt",
  "libtype": "pypi",
  "id": "pypi_facebook_business",
  "homepage": "https://github.com/facebook/facebook-python-business-sdk",
  "release_count": 89,
  "dependency_ids": [
    "pypi_aiohttp",
    "pypi_curlify",
    "pypi_enum34",
    "pypi_pycountry",
    "pypi_requests",
    "pypi_six"
  ]
}