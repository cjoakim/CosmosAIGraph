{
  "classifiers": [
    "development status :: 5 - production/stable",
    "framework :: django",
    "framework :: django :: 3.2",
    "framework :: django :: 4.0",
    "intended audience :: developers",
    "license :: osi approved :: gnu affero general public license v3",
    "natural language :: english",
    "programming language :: python :: 3",
    "programming language :: python :: 3.8"
  ],
  "description": "###################\nlti consumer xblock\n###################\n\n| |status-badge| |license-badge| |ci-badge| |codecov-badge| |pypi-badge|\n\npurpose\n*******\n\nthis xblock implements the consumer side of the lti specification enabling\nintegration of third-party lti provider tools.\n\ngetting started\n***************\n\ninstallation\n============\n\nfor details regarding how to deploy this or any other xblock in the lms instance, see the `installing-the-xblock`_ documentation.\n\n.. _installing-the-xblock: https://edx.readthedocs.io/projects/xblock-tutorial/en/latest/edx_platform/devstack.html#installing-the-xblock\n\ninstalling in docker devstack\n-----------------------------\n\nassuming that your ``devstack`` repo lives at ``~/code/devstack``\nand that ``edx-platform`` lives right alongside that directory, you'll want\nto checkout ``xblock-lti-consumer`` and have it live in ``~/code/src/xblock-lti-consumer``.\nthis will make it so that you can access it inside an lms container shell\nand easily make modifications for local testing.\n\n**you will have to run the below instructions twice, once for the lms and once for studio.\notherwise you will be using different versions of the xblock in the two containers.**\n\nrun ``make dev.shell.lms`` or ``make dev.shell.studio`` from your ``devstack`` directory to enter a running container.\nonce in there, you can do the following to have your devstack pointing at a local development\nversion of ``xblock-lti-consumer``:\n\n.. code:: bash\n\n    $ pushd /edx/src/xblock-lti-consumer\n    $ virtualenv venv/\n    $ source venv/bin/activate\n    $ make install\n    $ make test  # optional, if you want to see that everything works\n    $ deactivate\n    $ pushd  # should take you back to /edx/app/edxapp/edx-platform\n    $ pip uninstall -y lti_consumer_xblock\n    $ pip install -e /edx/src/xblock-lti-consumer\n\nenabling in studio\n------------------\n\nyou can enable the lti consumer xblock in studio through the\nadvanced settings.\n\n1. from the main page of a specific course, navigate to\n   ``settings ->    advanced settings`` from the top menu.\n2. check for the ``advanced_modules`` policy key, and add\n   ``\"lti_consumer\"`` to the policy value list.\n3. click the \"save changes\" button.\n\ndeveloping\n===========\n\none time setup\n--------------\n.. code:: bash\n\n  # clone the repository\n  git clone git@github.com:openedx/xblock-lti-consumer.git\n  cd xblock-lti-consumer\n\n  # set up a virtualenv using virtualenvwrapper with the same name as the repo and activate it\n  mkvirtualenv -p python3.8 xblock-lti-consumer\n\n\nevery time you develop something in this repo\n---------------------------------------------\n.. code:: bash\n\n  # activate the virtualenv\n  workon xblock-lti-consumer\n\n  # grab the latest code\n  git checkout master\n  git pull\n\n  # install/update the dev requirements\n  make install\n\n  # run the tests (to verify the status before you make any changes)\n  make test\n\n  # make a new branch for your changes\n  git checkout -b <your_github_username>/<short_description>\n\n  # using your favorite editor, edit the code to make your change.\n  vim ...\n\n  # changes to style rules should be made to the sass files, compiled to css,\n  # and committed to the git repository.\n  make compile-sass\n\n  # run your new tests\n  pytest ./path/to/new/tests\n\n  # run quality checks\n  make quality\n\n  # add a changelog entry to changelog.rst\n\n  # commit all your changes\n  git commit ...\n  git push\n\n  # open a pr and ask for review.\n\npackage requirements\n--------------------\n\nsetup.py contains a list of package dependencies which are required for this xblock package.\nthis list is what is used to resolve dependencies when an upstream project is consuming\nthis xblock package. requirements.txt is used to install the same dependencies when running\nthe tests for this package.\n\ndownloading translations from transifex\n---------------------------------------\n\nif you want to download translations from transifex install\n`transifex client <https://docs.transifex.com/client/installing-the-client/>`_ and run this command while\ninside project root directory:\n\n.. code:: bash\n\n    $ tx pull -f --mode=reviewed\n\nfurther development info\n------------------------\n\nsee the `developer guide`_ for implementation details and other developer concerns.\n\n.. _developer guide: ./docs/developing.rst\n\ntesting\n*******\n\nunit testing\n============\n\n* to run all of the unit tests at once, run `make test`\n* to run tests on individual files in development, run `python ./test.py -k=[name of test file without .py]`\n* for example, if you want to run the tests in test_permissions.py, run `python ./test.py -k=test_permissions`\n* to run a specific test in a file, run something like `python ./test.py -k=test_permissions.testclass.test_function`\n\ntesting against an lti provider\n===============================\n\nlti 1.1\n-------\n\nhttp://lti.tools/saltire/ provides a \"test tool provider\" service that allows\nyou to see messages sent by an lti consumer.\n\nwe have some useful documentation on how to set this up here:\nhttp://edx.readthedocs.io/projects/open-edx-building-and-running-a-course/en/latest/exercises_tools/lti_component.html#lti-authentication-information\n\n1. in studio advanced settings, set the value of the \"lti passports\" field to \"test:test:secret\" -\n   this will set the oauth client key and secret used to send a message to the test lti provider.\n2. create an lti consumer problem in a course in studio (after enabling it in \"advanced_modules\"\n   as seen above).  make a unit, select \"advanced\", then \"lti consumer\".\n3. click edit and fill in the following fields:\n   ``lti id``: \"test\"\n   ``lti url``: \"https://lti.tools/saltire/tp\"\n4. click save.  the unit should refresh and you should see \"passed\" in the \"verification\" field of\n   the message tab in the lti tool provider emulator.\n5. click the \"publish\" button.\n6. view the unit in your local lms.  if you get an ``importerror: no module named lti_consumer``, you\n   should ``docker-compose restart lms`` (since we previously uninstalled the lti_consumer to get the\n   tests for this repo running inside an lms container).  from here, you can see the contents of the\n   messages that we are sending as an lti consumer in the \"message parameters\" part of the \"message\" tab.\n\n\nlti 1.3\n-------\n\nims global provides a reference implementation of lti 1.3 that can be used to test the xblock.\n\non lti 1.3 the authentication mechanism used is oauth2 using the client credentials grant, this means\nthat to configure the tool, the lms needs to know the keyset url or public key of the tool, and the tool\nneeds to know the lms's one.\n\ninstructions:\n\n#. set up a local tunnel (using `ngrok` or a similar tool) to get a url accessible from the internet.\n#. add the following settings to `edx-platform/lms/envs/private.py` and `edx-platform/cms/envs/private.py`:\n\n    * lti_base=\"http://localhost:18000\"\n    * lti_api_base=\"http://<your_ngrok>.ngrok.io\"\n\n#. create a new course, and add the `lti_consumer` block to the advanced modules list.\n#. in the course, create a new unit and add the lti block.\n\n   * set ``lti version`` to ``lti 1.3``.\n   * set the ``tool launch url`` to ``https://lti-ri.imsglobal.org/lti/tools/``\n\n#. in studio, you'll see a few parameters being displayed in the preview:\n\n.. code::\n\n    client id: f0532860-cb34-47a9-b16c-53deb077d4de\n    deployment id: 1\n    # note that these are lms urls\n    keyset url: http://1234.ngrok.io/api/lti_consumer/v1/public_keysets/88e45ecbd-7cce-4fa0-9537-23e9f7288ad9\n    access token url: http://1234.ngrok.io/api/lti_consumer/v1/token/8e45ecbd-7cce-4fa0-9537-23e9f7288ad9\n    oidc callback url: http://localhost:18000/api/lti_consumer/v1/launch/\n\n\n#. set up a tool in the ims global reference implementation (https://lti-ri.imsglobal.org/lti/tools/).\n\n   * click on ``add tool`` at the top of the page (https://lti-ri.imsglobal.org/lti/tools).\n   * add the parameters and urls provided by the block, and generate a private key on https://lti-ri.imsglobal.org/keygen/index and paste it there (don't close the tab, you'll need the public key later).\n\n#. go back to studio, and edit the block adding its settings (you'll find them by scrolling down https://lti-ri.imsglobal.org/lti/tools/ until you find the tool you just created):\n\n.. code::\n\n    tool launch url: https://lti-ri.imsglobal.org/lti/tools/[tool_id]/launches\n    tool initiate login url: https://lti-ri.imsglobal.org/lti/tools/[tool_id]/login_initiations\n    tool public key: public key from key page.\n\n#. publish block, log into lms and navigate to the lti block page.\n#. click ``send request`` and verify that the lti launch was successful.\n\n\nlti advantage features\n----------------------\n\nthis xblock supports lti 1.3 and the following lti avantage services:\n\n* deep linking (lti-dl)\n* assignments and grades services (lti-ags)\n* names and roles provisioning services (lti-nrp)\n\nto enable lti-ags, you need to set **lti assignment and grades service** in studio to\nallow tools to send back grades. there's two grade interaction models implemented:\n\n* **allow tools to submit grades only (declarative)(default)**: enables lti-ags and\n  creates a single fixed lineitem that the tools can send grades too.\n* **allow tools to manage and submit grades (programmatic)**: enables lti-ags and\n  enables full access to lti-ags endpoints. tools will be able to create, manage and\n  delete multiple lineitems, and set multiple grades per student per problem.\n  *in this implementation, the tool is responsible for managing grades and linking them in the lms.*\n\nto enable lti-dl and its capabilities, you need to set these settings in the block:\n\n1. locate the **deep linking** setting and set it to **true (enabled)**.\n2. set **deep linking launch url** setting. you can retrieve it from the tool you\u2019re integrating with.\n   if it\u2019s not provided, try using the same value as in the lti 1.3 tool launch url.\n\nto enable lti-nrps, you set **enable lti nrps** to **true** in the block settings on studio.\n\n\nlti 1.1/1.2 basic outcomes service 1.1\n--------------------------------------\n\nthis xblock supports `lti 1.1/1.2 basic outcomes service 1.0 <http://www.imsglobal.org/spec/lti-bo/v1p1/>`_. please see these\n`lti 1.1/1.2 basic outcomes service 1.0 instructions <https://github.com/openedx/xblock-lti-consumer/tree/master/docs/basic_outcomes_service.rst>`_\nfor testing the lti 1.1/1.2 basic outcomes service 1.1 implementation.\n\nlti 2.0 result service 2.0\n--------------------------\n\nthis xblock supports `lti 2.0 result service 2.0 <https://www.imsglobal.org/lti/model/uml/purl.imsglobal.org/vocab/lis/v2/outcomes/result/service.html>`_.\nplease see the `lti 2.0 result service 2.0 instructions <https://github.com/openedx/xblock-lti-consumer/tree/master/docs/result_service.rst>`_\nfor testing the lti 2.0 result service 2.0 implementation.\n\nlti reusable configuration\n**************************\n\nthe lti consumer xblock supports configuration reusability via plugins.\nit is compatible with both lti 1.1 and lti 1.3.\nall values (including the access token and keyset url for lti 1.3)\nare shared across the xblocks with the same external configuration id.\nthis eliminates the need to have a tool deployment for each xblock.\n\nhow to setup\n============\n\n1. install and setup the `openedx-ltistore`_ plugin on the lms and studio.\n2. go to lms admin -> waffle_utils -> waffle flag course override\n   (http://localhost:18000/admin/waffle_utils/waffleflagcourseoverridemodel/).\n3. create a waffle flag course override with these values:\n    - waffle flag: lti_consumer.enable_external_config_filter\n    - course id: <your course id>\n    - override choice: force on\n    - enabled: true\n4. create a new external lti configuration and use it in the xblock.\n   this is explained in the readme of the `openedx-ltistore`_ repository.\n\n.. _openedx-ltistore: https://github.com/open-craft/openedx-ltistore\n\ngetting help\n************\n\nif you're having trouble, we have discussion forums at\nhttps://discuss.openedx.org where you can connect with others in the\ncommunity.\n\nour real-time conversations are on slack. you can request a `slack\ninvitation`_, then join our `community slack workspace`_.\n\nfor anything non-trivial, the best path is to open an issue in this\nrepository with as many details about the issue you are facing as you\ncan provide.\n\nhttps://github.com/openedx/xblock-lti-consumer/issues\n\nfor more information about these options, see the `getting help`_ page.\n\n.. _slack invitation: https://openedx.org/slack\n.. _community slack workspace: https://openedx.slack.com/\n.. _getting help: https://openedx.org/getting-help\n\nlicense\n*******\n\nthe code in this repository is licensed under the agpl v3 license unless\notherwise noted.\n\nplease see `license.txt <license.txt>`_ for details.\n\ncontributing\n************\n\ncontributions are very welcome.\nplease read `how to contribute <https://openedx.org/r/how-to-contribute>`_ for details.\n\nthis project is currently accepting all types of contributions, bug fixes,\nsecurity fixes, maintenance work, or new features.  however, please make sure\nto have a discussion about your new feature idea with the maintainers prior to\nbeginning development to maximize the chances of your change being accepted.\nyou can start a conversation by creating a new issue on this repo summarizing\nyour idea.\n\nthe open edx code of conduct\n****************************\n\nall community members are expected to follow the `open edx code of conduct`_.\n\n.. _open edx code of conduct: https://openedx.org/code-of-conduct/\n\npeople\n******\n\nthe assigned maintainers for this component and other project details may be\nfound in `backstage`_. backstage pulls this data from the ``catalog-info.yaml``\nfile in this repo.\n\n.. _backstage: https://backstage.openedx.org/catalog/default/component/xblock-lti-consumer\n\nreporting security issues\n*************************\n\nplease do not report security issues in public. please email security@openedx.org.\n\n.. |ci-badge| image:: https://github.com/openedx/xblock-lti-consumer/workflows/python%20ci/badge.svg?branch=master\n    :target: https://github.com/openedx/xblock-lti-consumer/actions?query=workflow%3a%22python+ci%22\n    :alt: test suite status\n\n.. |codecov-badge| image:: https://codecov.io/github/openedx/xblock-lti-consumer/coverage.svg?branch=master\n    :target: https://codecov.io/github/openedx/xblock-lti-consumer?branch=master\n    :alt: code coverage\n\n.. |status-badge| image:: https://img.shields.io/badge/status-maintained-brightgreen\n    :alt: maintained\n\n.. |license-badge| image:: https://img.shields.io/github/license/openedx/xblock-lti-consumer.svg\n    :target: https://github.com/openedx/edx-rest-api-client/blob/master/license\n    :alt: license\n\n.. |pypi-badge| image:: https://img.shields.io/pypi/v/lti-consumer-xblock.svg\n    :target: https://pypi.python.org/pypi/lti-consumer-xblock/\n    :alt: pypi\n",
  "docs_url": null,
  "keywords": "lti consumer xblock",
  "license": "",
  "name": "lti-consumer-xblock",
  "package_url": "https://pypi.org/project/lti-consumer-xblock/",
  "project_url": "https://pypi.org/project/lti-consumer-xblock/",
  "project_urls": {
    "Homepage": "https://github.com/openedx/xblock-lti-consumer"
  },
  "release_url": "https://pypi.org/project/lti-consumer-xblock/9.8.1/",
  "requires_dist": [
    "XBlock",
    "attrs",
    "bleach >=6.0.0",
    "django",
    "django-config-models",
    "django-filter",
    "django-statici18n",
    "edx-ccx-keys",
    "edx-opaque-keys",
    "jsonfield",
    "lazy",
    "lxml",
    "mako",
    "oauthlib",
    "openedx-django-pyfs",
    "openedx-filters",
    "pycryptodomex",
    "pyjwkest"
  ],
  "requires_python": "",
  "summary": "this xblock implements the consumer side of the lti specification.",
  "version": "9.8.1",
  "releases": [],
  "developers": [
    "open_edx_project",
    "oscm@edx.org"
  ],
  "kwds": "lti_consumer_xblock xblock xblocks lti_consumer edx_platform",
  "license_kwds": "",
  "libtype": "pypi",
  "id": "pypi_lti_consumer_xblock",
  "homepage": "https://github.com/openedx/xblock-lti-consumer",
  "release_count": 95,
  "dependency_ids": [
    "pypi_attrs",
    "pypi_bleach",
    "pypi_django",
    "pypi_django_config_models",
    "pypi_django_filter",
    "pypi_django_statici18n",
    "pypi_edx_ccx_keys",
    "pypi_edx_opaque_keys",
    "pypi_jsonfield",
    "pypi_lazy",
    "pypi_lxml",
    "pypi_mako",
    "pypi_oauthlib",
    "pypi_openedx_django_pyfs",
    "pypi_openedx_filters",
    "pypi_pycryptodomex",
    "pypi_pyjwkest",
    "pypi_xblock"
  ]
}