{
  "classifiers": [
    "development status :: 4 - beta",
    "environment :: console",
    "intended audience :: customer service",
    "intended audience :: developers",
    "intended audience :: information technology",
    "intended audience :: system administrators",
    "license :: osi approved :: bsd license",
    "natural language :: english",
    "operating system :: posix :: linux",
    "programming language :: python :: 3 :: only",
    "topic :: documentation",
    "topic :: software development :: documentation",
    "topic :: software development :: testing",
    "topic :: utilities"
  ],
  "description": "rundoc <img height=\"60px\" src=\"https://raw.githubusercontent.com/eclecticiq/rundoc/master/logo.svg?sanitize=true\">\n==================================================\n[![chat on freenode](https://img.shields.io/badge/chat-on%20freenode-brightgreen.svg)](https://webchat.freenode.net/?channels=%23rundoc&uio=mte9mtk117)\n[![pypi version](https://badge.fury.io/py/rundoc.svg)](https://badge.fury.io/py/rundoc)\n[![license](https://img.shields.io/badge/license-bsd%203--clause-blue.svg)](https://opensource.org/licenses/bsd-3-clause)\n[![documentation status](https://readthedocs.org/projects/rundoc/badge/?version=latest)](http://rundoc.readthedocs.io/en/latest/?badge=latest)\n\na command-line utility that runs code blocks from documentation written in markdown.\n\noverview\n-------------------------\n\nthis utility allows you to run your markdown files as if they were scripts. every code snippet with code highlighting tag is run with interpreter defined by the tag.\n\n### why do this?\n\nwe had a very long installation documentation for our project and needed a quick way of testing it. that's how rundoc is born. it is now a general purpose tool that can be used for multiple purposes like executing a tutorial documentation, using docs as a script, etc.\n\ninstallation\n-------------------------\n\n### install from pypi (recommend)\n`pip3 install rundoc`\n\n### install from git (latest master)\n`pip3 install -u git+https://github.com/eclecticiq/rundoc.git`\n\nusage\n-------------------------\n\nrundoc collects fenced code blocks from input markdown file and executes them in same order as they appear in the file. interpreter is specified by the highlight tag of the code block.\n\nexample of fenced code block in markdown file:\n\n    ```bash\n    for x in `seq 0 10`; do\n        echo $x\n        sleep 1\n    done\n    ```\n\ninterpreter will be automatically selected using the highlight tag of the code block (in above example `bash`). code is piped to the interpreter through stdin. if highlight tag is not specified, rundoc will ignore that code block.\n\nrundoc can save json file after execution, which contains all code blocks and their outputs. you can also replay all the actions by running this output file.\n\n**<span style=\"color: red;\">warning: each code block is treated as separate step and is run in fresh interpreter session!</span>** variables that you exported in the code block will **not** be passed to next code block. you can specify global variables in `env` code block (see *[environment variables](#environment-variables)* below).\n\n### run markdown file\n\nexecute code blocks in *input.md* file:\n\n```bash\nrundoc run input.md\n```\n\nrundoc will execute all fenced code blocks that contain highlight tag.\n\nget a prompt \n\n- you will be prompted before executing each code block with ability to modify the input.\n- when done reviewing/modifying the code block, press *return* to execute it and move to the next one.\n- program will exit when last code block is finished executing or when you press **ctrl+c**.\n\n#### get prompts\n\nsince version `0.3.0`, rundoc will just run everything by default, prompting you only for missing variables at the beginning. you can use single or multiple `-a` options to enable more prompts:\n\n- `-a` - ask (prompt) for all variables.\n- `-aa` - also ask to modify code block on failure and start over at that step.\n- `-aaa` - also prompt with each code block before executing it.\n\n```bash\nrundoc run -aaa input.md\n```\n\nthe above will show each code block and allow you to modify it and press \\<return\\> to run it.\n\n#### breakpoints\n\nyou can force the prompt on specific steps using `-b` or `--breakpoint` option followed by a step number. you can use this option multiple times to add multiple breakpoints. when used, rundoc will stop at the selected steps and prompt user to modify code regardless of the `--ask` setting.\n\n#### pause\n\nif you need to add a delay between codeblocks, you can add `-p` or `--pause` option to specify number of seconds for the puase. (this option does nothing in conjunction with `-aaa`):\n\n```bash\nrundoc run -p 2 input.md\n```\n\nsome step fails first couple of times but it's normal? that may happen and you would just want to retry that step a couple of times. to do so use `-r` or `--retry` option followed by max number of retries and rundoc will run the same step again until it succeeds or reaches max retries in which case it will exit:\n\n```bash\nrundoc run -r 10 input.md\n```\n\nbut you don't want it to retry right away, correct? you can specify a delay between each try with `-p` (capital p) or `--retry-pause` option followed by number of seconds:\n\n```bash\nrundoc run -r 10 -p 2 input.md\n```\n\n#### start from specific step\n\nyou can start at specified step using `-s` or `--step` option:\n\n```bash\nrundoc run -s5 input.md\n```\n\nthis is useful when your n-th code block fails and rundoc exits and you want to continue from that step.\n\n#### save output\n\noutput can be saved as a json file containing these fields:\n\n- `env` (dict): dictionary of set environment variables for the session\n- `code_blocks` (list): list of code blocks that contains the following\n    - `code` (str): original code\n    - `interpreter` (str): interpreter used for this code block\n    - `tags` (str): tags as they appear in markdown file\n    - `runs` (list): list of run attempts\n        - `output` (str): merged stdout and stderr of the code block execution\n        - `retcode` (int): exit code of the code block\n        - `time_start` (float): timestamp when execution started (seconds from epoch)\n        - `time_stop` (float): timestamp when execution finished (seconds from epoch)\n        - `user_code` (str): code that user actually executed with prompt\n\nto save output use `-o` or `--output` option when running rundoc:\n\n```bash\nrundoc run input.md -o output.json\n```\n\n#### tags\n\nby default, rundoc executes all fenced code blocks that have highlithing tag set in markdown file. if you want to limit execution to subset of the code blocks, use tags. tags can be specified with `-t` or `--tags` option followed by hash (#) separated list of tags:\n\n```bash\nrundoc run -t bash#python3 input.md\n```\n\nthis will execute only those code blocks that have at least one of the specified highlight tags: in this example only `bash` and `python` code blocks.\n\nif you want to further isolate code blocks of the same highlight tag, you can use rundoc tag syntax, e.g.:\n\n    ```bash#custom-branch#v2#test\n    echo \"custom-tagged code block\"\n    ```\n\nin this syntax, multiple tags are applied to same code block and are separated with hash symbol `#`. in the example above there are 4 tags: `bash`, `custom-branch`, `v2` and `test`. first tag always defines the interpreter. if any of it's tags is specified by `-t` or `--tags` option, it will be executed. code blocks that do not contain at least one of the specified tags will be skipped.\n\n#### more tags\n\nin addition to `-t` or `--tags` option, you can also use the following 2 options to furthere fine-tune your code block filtering:\n\n- `-t` or `--must-have-tags` - same as `--tags` but it requires all listed tags to be present in the markdown code block or it will be skipped. the order of tags is not important.\n- `-n`, or `--must-not-have-tags` - same as `--tags` but it requres that **none** of the listed tags is present in the markdown code block. it is used to filter out unwanted ones.\n\nyou can use any of the tags features individually or combine them.\n\n#### environment variables\n\ndefine required environment variables anywhere in the documentaion with a special code block tagged as `env` or `environment` at the beginning:\n\n    ```env#version5\n    var1=\n    var2=\n    var3=default_value_3\n    var4=default_value_4\n    ```\n\n- as in example above, define variables one on each line.\n- when you run the docs with `-a` option, you will be prompted for all of those.\n- empty values (e.g. `var1` and `var2` in example) will try to collect actual values from your system environment, so if `var1` was exported before you ran the docs, it will collect it's value as the default value and will not prompt you for it if `-a` option was not used.\n- all variables will be passed to env for every code block that's being executed.\n- if you use rundoc with tag option `-t`, environment blocks will be filtered in the same way as code blocks.\n- code blocks will only be selected if no tags are specified on execution **or** any of the selected code blocks contains at least one of the env's tags (in the above case `version5`).\n\n#### secrets\n\nyou can define required credentials or other secrets anywhere in the documentaion as a special code block tagged as `secret` or `secrets` at the beginning:\n\n    ```secrets#production\n    username=\n    password=\n    ```\n\nsecrets behave just as `env` blocks with one single difference: they are never saved in the output file and are **expected to be empty in markdown file** so that user must provide them during execution. if you want to use rundoc as part of automation and can't input secrets by hand, you can always export them beforehand and use `-i` option (see next section).\n\n#### action tags\n\naction tags are special tags that are used as a first tag instead of interpreter. code blocks with these tags are not going to be executed, but will be used to perform specific actions, like creating a file.\n\nto get a list of available action tags and their usage in current version run: `rundoc action-tags`. new action tags will be included often in new versions of rundoc.\n\n#### force variable collection\n\nyou can force rundoc to check if any of the variables defined with `env` tag is already exported in your current system environment and use it's value instead of the one defined in markdown file. to do this use `-i` or `--inherit-env` option when running rundoc. the list of variables that is presented to you when you run rundoc and that will be used in the session will now contain values defined in the system environment.\n\n```bash\nexport var2=system_value_2\nexport var3=system_value_3\nrundoc run input.md -i\n```\n\n### single session\n\nby default, all code blocks are run in separate interpreter sessions. if you define a function or set a variable in one code block, it will not be available in next one.  \nto work around this use `--single-session` option followed by the name of the interpreter. all code blocks will be merged into a single step.  \nnote that only one interpreter type can be run per markdown file if you use single session option.\n\n```\nrundoc run input.md --single-session bash\n```\n\n### replay\n\nto replay all code blocks found in output of `run` command, just use `replay` command like so:\n\n```bash\nrundoc replay output.json\n```\n\nthe above command will just turn last runs of each code block into a new code block and run them. it will ignore all run tries that did not succeed at first. last run may have original command or user modified one and replay does not care about that, it just runs the last command it finds in each code block.\n\nyou can still use `-aaa`, `-p`, `-s`, `-o`, `-r`, and `-p` options with `replay` command:\n\n```bash\nrundoc replay -s 2 -p 1 -r 20 -p 5 output.json -o replay_output.json\n```\n\ntips and tricks\n-------------------------\n\n### color output\n\nare you using light terminal background and can't see sh\\*t? use rundoc with `--light` option and save your eyesight!\n\n### list tags\n\nyou can list all unique tags that appear in the file and their counts by using `list-tags` command:\n\n```bash\nrundoc list-tags input.md\n```\n\n### list code blocks\n\nwouldn't it be great to be able to list all code blocks that are going to be executed before actually using `run` command? you can! to print json file similar to output but without actually running anything you can use `list-blocks` command:\n\n```bash\nrundoc list-blocks -t bash -t tag1#tag2#tag3 -n tag4#tag5 input.md\n```\n\nor add `--pretty` option to have human readable output:\n\n```bash\nrundoc list-blocks -t bash -t tag1#tag2#tag3 -n tag4#tag5 input.md --pretty\n```\n\nsimilar projects\n-------------------------\n\nlist of similar projects that i found:\n\n- [codedown](https://github.com/earldouglas/codedown)\n- [rundoc](https://github.com/schneems/rundoc) (i was not aware of this one when i named my project, honest!)\n- [gfm-code-blocks](https://github.com/jonschlinkert/gfm-code-blocks)\n\nif you bump into more, let me know.",
  "docs_url": null,
  "keywords": "",
  "license": "bsd",
  "name": "rundoc",
  "package_url": "https://pypi.org/project/rundoc/",
  "project_url": "https://pypi.org/project/rundoc/",
  "project_urls": {
    "Download": "https://gitlab.com/nul.one/rundoc/-/archive/0.4.5/rundoc-0.4.5.tar.gz",
    "Homepage": "https://gitlab.com/nul.one/rundoc"
  },
  "release_url": "https://pypi.org/project/rundoc/0.4.5/",
  "requires_dist": [],
  "requires_python": ">=3.4.6",
  "summary": "a command-line utility that runs code blocks from markdown files.",
  "version": "0.4.5",
  "releases": [],
  "developers": [
    "predrag_mandic",
    "rundoc@eclecticiq.com"
  ],
  "kwds": "badge rundoc freenode svg 20freenode",
  "license_kwds": "bsd",
  "libtype": "pypi",
  "id": "pypi_rundoc",
  "homepage": "https://gitlab.com/nul.one/rundoc",
  "release_count": 52,
  "dependency_ids": []
}