{
  "classifiers": [
    "development status :: 5 - production/stable",
    "intended audience :: developers",
    "license :: osi approved :: apache software license",
    "operating system :: os independent",
    "programming language :: python",
    "programming language :: python :: 3",
    "programming language :: python :: implementation :: cpython",
    "topic :: database",
    "topic :: software development :: libraries",
    "topic :: software development :: libraries :: python modules"
  ],
  "description": "# couchbase python client\npython client for [couchbase](https://couchbase.com)\n>**note:** this is the documentation for the 4.x version of the client. this is mostly compatible with the older 3.x version. please refer to the *release32* branch for the older 3.x version.\n\n\n# contents<a id=\"contents\"></a>\n- [prerequisites](#prerequisites)\n- [installing](#installing)\n- [building](#building)\n- [using the sdk](#using-the-sdk)\n- [building documentation](#building-documentation)\n- [testing](#testing)\n- [contributing](#contributing)\n- [support & additional resources](#support-additional-resources)\n- [license](#license)\n- [appendix](#appendix)\n\n# prerequisites<a id=\"prerequisites\"></a>\n\n- [couchbase server](http://couchbase.com/download)\n- you may need a c++ compiler supporting c++ 17 and python development files, unless a\n  binary wheel is available for your platform. with the 4.0.2 release, wheels are available on windows, macos and linux (via manylinux) for python 3.7 - 3.10.\n- cmake (version >= 3.18), unless a binary wheel is available for your platform.\n- git, unless a binary wheel is available for your platform.\n- openssl is now required for the 4.x python sdk.\n- if using the twisted framework and the txcouchbase api, twisted >= 21.7.0 is required.\n\n## debian and ubuntu<a id=\"pre-deb-ubuntu\"></a>\n\nfirst-time setup:\n```console\n$ sudo apt install git-all python3-dev python3-pip python3-setuptools cmake build-essential libssl-dev\n```\n\n>**note:** we have provided *dockerfiles* to demonstrate steps to achieve a working setup for various linux platforms. see the [dockerfiles folder](https://github.com/couchbase/couchbase-python-client/tree/master/examples/dockerfiles) in the python sdk examples folder for details.\n\nsee [debian and ubuntu](#install-deb-ubuntu) install section to install sdk.\n\n## rhel and centos<a id=\"pre-rhel-centos\"></a>\n\nfirst-time setup:\n```console\n$ sudo yum install git-all gcc gcc-c++ python3-devel python3-pip python3-setuptools cmake openssl-devel\n```\n\n>:exclamation:**important**:exclamation:<br>some of the defaults for older operating systems like centos/rhel 7 and 8 have defaults to do not meet the 4.x python sdk [minimum requirements](prerequisites). be sure to update to the minimum requirements prior to installing the sdk.  most notably be sure to check the following:\n>- the default python version might be less than 3.7.  if so, the python version _will_ need to be udpated.\n>- the default openssl version might be less than 1.1.1.  if so, the openssl version _will_ need to be updated.\n>- the gcc version must provide c++17 support.  if the installed gcc version does not support c++17, gcc _will_ need to be updated.\n>- the installed cmake version might be less than 3.17.  if so, the cmake version _will_ need to be updated.  check out the steps [here](https://idroot.us/install-cmake-centos-8/) to update cmake.\n\n>**note:** we have provided *dockerfiles* to demonstrate steps to achieve a working setup for various linux platforms. see the [dockerfiles folder](https://github.com/couchbase/couchbase-python-client/tree/master/examples/dockerfiles) in the python sdk examples folder for details.\n\nsee [rhel and centos](#install-rhel-centos) install section to install sdk.\n\n## mac os<a id=\"pre-macos\"></a>\n\nit is not recommended to use the vendor-supplied python that ships with os x. best practice is to use a python virtual environment such as pyenv or venv (after another version of python that is not vendor-supplied has been installed) to manage multiple versions of python.\n\n>:exclamation:**important**:exclamation:<br>there can be a problem when using the python (3.8.2) that ships with xcode on catalina.    it is advised to install python with one of the following:\n>- [pyenv](#macos-pyenv)\n>- [homebrew](#macos-homebrew)\n>- install python via [python.org](https://www.python.org/downloads)\n\n### pyenv<a id=\"macos-pyenv\"></a>\n\nsee detailed walk through in [appendix](#appendix-pyenv).  also, see pyenv install [docs](https://github.com/pyenv/pyenv#homebrew-on-macos) for further details.\n\n>**note:** if using pyenv, make sure the python interpreter is the pyenv default, or a virtual environment has been activiated.  otherwise cmake might not be able to find the correct version of python3 to use when building.\n\n### homebrew<a id=\"macos-homebrew\"></a>\n\nsee homebrew install [docs](https://brew.sh/) for further details.\n\nget the latest packages:\n```console\n$ brew update\n```\n\ninstall python:\n```console\n$ brew install python\n```\n\nupdate path:\n\n- **zsh:**\n    ```console\n    $ echo 'export path=\"/usr/local/bin:\"$path' >> ~/.zshrc\n    ```\n- **bash:**\n    ```console\n    $ echo 'export path=\"/usr/local/bin:\"$path' >> ~/.bash_profile\n    ```\n\ninstall openssl:\n```console\n$ brew install openssl@1.1\n```\n\nto get openssl to be found by cmake on macos, find where openssl was\ninstalled via homebrew:\n\n```\nbrew info openssl@1.1\n```\n\nthis will show you how to get it seen by pkg-config. to check that it\nworked, do this:\n\n```\npkg-config --modversion openssl\n```\n\nsee [mac os](#install-macos) install section to install sdk.\n\n## windows<a id=\"pre-windows\"></a>\n\nwheels are available on windows for python 3.7, 3.8, 3.9 and 3.10.\n\nbest practice is to use a python virtual environment such as venv or pyenv (checkout the [pyenv-win](https://github.com/pyenv-win/pyenv-win) project) to manage multiple versions of python.\n\nif wanting to install from source, see the [windows building](#building-windows) section for details.\n\nsee [windows install](#install-windows) section to install sdk.\n\n# installing<a id=\"installing\"></a>\n[back to contents](#contents)\n\nyou can always get the latest supported release version from [pypi](https://pypi.org/project/couchbase/).\n\n>**note:** if you have a recent version of *pip*, you may use the latest development version by issuing the following incantation:\n>```console\n>pip install git+https://github.com/couchbase/couchbase-python-client.git\n>```\n\n>**note:** the python client installer relies on pep517 which older versions of pip do not support. if you experience issues installing it is advised to upgrade your pip/setuptools installation as follows:<br>\n>```console\n>python3 -m pip install --upgrade pip setuptools wheel\n>```\n\n\n## debian and ubuntu<a id=\"install-deb-ubuntu\"></a>\n\nfirst, make sure the [prerequisites](#pre-deb-ubuntu) have been installed.\n\ninstall the sdk:\n```console\n$ python3 -m pip install couchbase\n```\n\n## rhel and centos<a id=\"install-rhel-centos\"></a>\n\nfirst, make sure the [prerequisites](#pre-rhel-centos) have been installed.\n\ninstall the sdk:\n```console\n$ python3 -m pip install couchbase\n```\n\n## mac os<a id=\"install-macos\"></a>\n\nfirst, make sure the [prerequisites](#pre-macos) have been installed.\n\ninstall the sdk:\n```console\n$ python -m pip install couchbase\n```\n\n\n## windows<a id=\"install-windows\"></a>\n\nfirst, make sure the [prerequisites](#pre-windows) have been installed.\n\n>**note:** commands assume user is working within a virtual environment.  for example, the following commands have been executed after downloading and installing python from [python.org](https://www.python.org/downloads/):<br>\n>-```c:\\users\\administrator\\appdata\\local\\programs\\python\\python39\\python -m venv c:\\python\\python39```<br>\n>-```c:\\python\\python39\\scripts\\activate```\n\ninstall the sdk (if using python 3.7, 3.8, 3.9 or 3.10):\n```console\npython -m pip install couchbase\n```\n\n### alternative installation methods<a id=\"install-windows-alt\"></a>\n\nin order to successfully install with the following methods, ensure a proper build system is in place (see the [windows building](#building-windows) section for details).\n\n#### source install (i.e. no wheel)\n\nfirst, ensure all the [requirements](#building-windows) for a build system are met.\n\ninstall the sdk:\n```console\npython -m pip install couchbase --no-binary couchbase\n```\n\n#### local install\n\nfirst, ensure all the [requirements](#building-windows) for a build system are met.\n\nclone this python sdk repository:\n```console\ngit clone --depth 1 --branch <tag_name> --recurse-submodules https://github.com/couchbase/couchbase-python-client.git\n```\n\n>where tag_name is equal to the latest release.<br>\nexample: ```git clone --depth 1 --branch 4.0.0 --recurse-submodules https://github.com/couchbase/couchbase-python-client.git```\n\nmove into the directory created after cloning the python sdk repository:\n```console\ncd couchbase-python-client\n```\n\n>**note:** if the ```--recurse-submodules``` option was not used when cloning the python sdk repository, run (after moving into the cloned repository directory) ```git submodule update --init --recursive``` to recursively update and initialize the submodules.\n\ninstall the sdk from source:\n```console\npython -m pip install .\n```\n\n## anaconda/miniconda<a id=\"install-anaconda\"></a>\n\nto use the sdk within the anaconda/miniconda platform, make sure the prerequisites for the desired operating system are met:\n- [debian and ubuntu](#pre-deb-ubuntu)\n- [rhel and centos](#pre-rhel-centos)\n- [mac os](#pre-macos)\n- [windows](#pre-windows)\n\nin the *anaconda prompt*, create a new environment:\n```console\n(base) c:\\users\\user1>conda create -n test_env python=3.9\n```\n\nactivate the environment\n```console\n(base) c:\\users\\user1>conda activate test_env\n```\n\ninstall the sdk:\n```console\n(test_env) c:\\users\\user1>python -m pip install couchbase\n```\n\n>**note:** if using windows, and no wheel is available, see the [alternative install methods windows](#install-windows-alt) section.  the same process should work within the anaconda/miniconda platform.\n\n# building<a id=\"building\"></a>\n[back to contents](#contents)\n\n>**note:** this section only applies to building from source.\n\n## build system setup\n### linux<a id=\"building-linux\"></a>\n\nmake sure the prerequisites have been installed:\n- [debian and ubuntu](#pre-deb-ubuntu)\n- [rhel and centos](#pre-rhel-centos)\n\n### mac os<a id=\"building-macos\"></a>\nfirst, make sure the [prerequisites](#pre-macos) have been installed.\n\ninstall cmake:\n```console\n$ brew install cmake\n```\n\ninstall command line developer tools:\n```\n$ xcode-select --install\n```\n\n>**note:** it is possible that installing or updating to the the latest version of [xcode](https://developer.apple.com/download) is needed.\n\nif setuptools is not installed:\n```console\n$ python -m pip install setuptools\n```\n\n### windows<a id=\"building-windows\"></a>\n#### requirements\n- download and install [git](https://git-scm.com/downloads)\n- download and install [visual studio 2019](https://visualstudio.microsoft.com/downloads/)\n    + check *desktop development with c++* prior to installing\n- download and install [cmake](https://cmake.org/download/) >= v 3.18\n- download and install [python](https://www.python.org/downloads/)\n\n#### vs2019 notes\n\nif seeing issues when trying to build (steps in [](#)), some things to check/try:\n- try running the build commands within the *developer command prompt for vs2019*\n- make sure *msbuild* can find the correct *vctargetspath*\n    + it is possible the *vctargetspath* environment variable needs to be set.  the below example is based on a typical path, but the actual setting should match that of your current environment setup.\n        * ```set vctargetspath=c:\\program files (x86)\\microsoft visual studio\\2019\\community\\msbuild\\microsoft\\vc\\v160```\n- make sure *cmake* is picking up the correct generator\n    + it is possible the *cmake_generator* environment variable needs to be set\n        * ```set cmake_generator=visual studio 16 2019```\n\n## build the python sdk\nclone this python sdk repository:\n```console\ngit clone --depth 1 --recurse-submodules https://github.com/couchbase/couchbase-python-client.git\n```\n\n>**note:** if the ```--recurse-submodules``` option was not used when cloning the python sdk repository, run (after moving into the cloned repository directory) ```git submodule update --init --recursive``` to recursively update and initialize the submodules.\n\nmove into the directory created after cloning the python sdk repository:\n```console\ncd couchbase-python-client\n```\n\nthe following will compile the module locally:\n```console\npython setup.py build_ext --inplace\n```\n\nyou can also modify the environment ```cflags``` and ```ldflags``` variables.\n\n>:exclamation:**warning:** if you do not intend to install this module, ensure you set the ```pythonpath``` environment variable to this directory before running any scripts depending on it. failing to do so may result in your script running against an older version of this module (if installed), or throwing an exception stating that the ```couchbase``` module could not be found.\n\n## install\n```console\npip install .\n```\n\n>:exclamation:**warning:** if you are on linux/mac os you may need to remove the build directory: ```rm -rf ./build``` before installing with pip: ```pip3 install .```.\n\n# using the sdk<a id=\"using-the-sdk\"></a>\n[back to contents](#contents)\n\n## connecting<a id=\"sdk-connecting\"></a>\n\nsee [official documentation](https://docs.couchbase.com/python-sdk/current/howtos/managing-connections.html) for further details on connecting.\n\n```python\n# needed for any cluster connection\nfrom couchbase.cluster import cluster\nfrom couchbase.auth import passwordauthenticator\n\n# options for a cluster and sql++ (n1ql) queries\nfrom couchbase.options import clusteroptions, queryoptions\n\n# get a reference to our cluster\ncluster = cluster.connect('couchbase://localhost', clusteroptions(\n  passwordauthenticator('administrator', 'password')))\n```\n\n>**note:** the authenticator is always required.\n\n## basic operations<a id=\"sdk-basic-ops\"></a>\n\nsee official documentation for further details on [working with data](https://docs.couchbase.com/python-sdk/current/howtos/kv-operations.html).\n\nbuilding upon the example code in the [connecting](#sdk-connecting) section:\n\n```python\n# get a reference to our bucket\ncb = cluster.bucket('travel-sample')\n\n# get a reference to the default collection\ncb_coll = cb.default_collection()\n\n# get a document\nresult = cb_coll.get('airline_10')\nprint(result.content_as[dict])\n\n# using sql++ (a.k.a n1ql)\ncall_sign = 'cbs'\nsql_query = 'select value name from `travel-sample` where type = \"airline\" and callsign = $1'\nquery_res = cluster.query(sql_query, queryoptions(positional_parameters=[call_sign]))\nfor row in query_res:\n    print(row)\n```\n\n## async operations<a id=\"sdk-async-ops\"></a>\nthe python couchbase sdk supports asynchronous i/o through the use of the asyncio (python standard library) or the twisted async framework.\n\n### asyncio\n\nto use asyncio, import ```acouchbase.cluster``` instead of ```couchbase.cluster```.  the ```acouchbase``` api offers an api similar to the ```couchbase``` api.\n\n```python\nfrom acouchbase.cluster import cluster, get_event_loop\nfrom couchbase.options import clusteroptions\nfrom couchbase.auth import passwordauthenticator\n\n\nasync def write_and_read(key, value):\n    cluster = await cluster.connect('couchbase://localhost',\n                      clusteroptions(passwordauthenticator('administrator', 'password')))\n    cb = cluster.bucket('default')\n    await cb.on_connect()\n    cb_coll = cb.default_collection()\n    await cb_coll.upsert(key, value)\n    result = await cb_coll.get(key)\n    return result\n\nloop = get_event_loop()\nrv = loop.run_until_complete(write_and_read('foo', 'bar'))\nprint(rv.content_as[str])\n```\n### twisted\n\nto use with twisted, import ```txcouchbase.cluster``` instead of ```couchbase.cluster```.  the ```txcouchbase``` api offers an api similar to the ```couchbase``` api.\n\n>**note:** the minimum required twisted version is 21.7.0.\n\n>:exclamation:**warning:** the 4.x sdk introduced a breaking change where the txcouchbase package must be imported _prior_ to importing the reactor (see example below).  this is so that the asyncio reactor can be installed.\n\n\n```python\n# important -- the txcouchbase import must occur prior to importing the reactor\nimport txcouchbase\nfrom twisted.internet import reactor, defer\n\nfrom txcouchbase.cluster import txcluster\nfrom couchbase.options import clusteroptions\nfrom couchbase.auth import passwordauthenticator\n\n\ndef after_upsert(res, key, d):\n    print('set key.  result cas: ', res.cas)\n    # trigger get_document callback\n    d.callback(key)\n\ndef upsert_document(key, doc):\n    d = defer.deferred()\n    res = cb.upsert(key, doc)\n    res.addcallback(after_upsert, key, d)\n    return d\n\ndef on_get(res, _type=str):\n    print('got res: \\n', res.content_as[_type])\n    reactor.stop()\n\ndef get_document(key):\n    res = cb.get(key)\n    res.addcallback(on_get)\n\n\n# create a cluster object\ncluster = txcluster('couchbase://localhost',\n                    clusteroptions(passwordauthenticator('administrator', 'password')))\n\n# create a bucket object\nbucket = cluster.bucket('default')\n# create a collection object\ncb = bucket.default_collection()\n\nd = upsert_document('testdoc_1', {'id': 1, 'type': 'testdoc', 'info': 'fake document'})\nd.addcallback(get_document)\n\nreactor.run()\n```\n# building documentation<a id=\"building-documentation\"></a>\n[back to contents](#contents)\n\nthe documentation is using sphinx and a number of extensions.  to build the documentation be sure to\n``pip install`` the sphinx_requirements.txt.\n\n```console\npython3 -m pip install -r sphinx_requirements.txt\n```\n\nto build the documentation, go into the docs directory and run:\n```console\nmake html\n```\nthe html output can be found in docs/build/html/.\n\nalternatively, you can also build the documentation from the top-level directory:\n```console\npython setup.py build_sphinx\n```\n\nonce built, the docs will be in in build/sphinx/html.  you can open the index.html file with the following command:\n```console\nopen docs/build/sphinx/html/index.html\n```\n\n# testing<a id=\"testing\"></a>\n[back to contents](#contents)\n\nfor running the tests, be sure to ``pip install`` the dev_requirements.txt.  the couchbase python sdk uses pytest for the test suite.\n\n```console\npython3 -m pip install -r dev_requirements.txt\n```\n\nthe tests need a running couchbase instance. for this, a test_config.ini file must be present, containing various connection parameters. the default test_config.ini file may be found in the tests directory. you may modify the values of the test_config.ini file as needed.\n\nto run the tests for the blocking api (i.e. couchbase api):\n```console\npython -m pytest -m pycbc_couchbase -p no:asyncio -v -p no:warnings\n```\n\nto run the tests for the asyncio api (i.e. acouchbase api):\n```console\npython -m pytest -m pycbc_acouchbase --asyncio-mode=strict -v -p no:warnings\n```\n\n# contributing<a id=\"contributing\"></a>\n[back to contents](#contents)\n\nwe welcome contributions from the community!  please see follow the steps outlined [here](https://github.com/couchbase/couchbase-python-client/blob/master/contributing.md) to get started.\n\nthe python sdk uses pre-commit in order to handle linting, formatting and verifying the code base.\npre-commit can be installed either by installing the development requirements:\n\n```\npython3 -m pip install -r dev_requirements.txt\n```\n\nor by installing pre-commit separately\n```\npython3 -m pip install pre-commit\n```\n\nto run pre-commit, use the following:\n```\npre-commit run --all-files\n```\n\n# license\n[back to contents](#contents)\n\nthe couchbase python sdk is licensed under the apache license 2.0.\n\nsee [license](https://github.com/couchbase/couchbase-python-client/blob/master/license) for further details.\n\n# support & additional resources<a id=\"support-additional-resources\"></a>\n[back to contents](#contents)\n\nif you found an issue, please file it in our [jira](https://issues.couchbase.com/projects/pycbc/issues/).\n\nthe couchbase discord server is a place where you can collaborate about all things couchbase. connect with others from the community, learn tips and tricks, and ask questions.  [join discord and contribute](https://discord.com/invite/sq5qbpzuth).\n\nyou can ask questions in our [forums](https://forums.couchbase.com/).\n\nthe [official documentation](https://docs.couchbase.com/python-sdk/current/hello-world/start-using-sdk.html) can be consulted as well for general couchbase concepts and offers a more didactic approach to using the sdk.\n\n# appendix<a id=\"appendix\"></a>\n[back to contents](#contents)\n\n### mac os pyenv install<a id=\"appendix-pyenv\"></a>\nsee pyenv install [docs](https://github.com/pyenv/pyenv#homebrew-on-macos) for further details.\n\nget the latest packages:\n```console\n$ brew update\n```\n\nfor tls/ssl support:\n```console\n$ brew install openssl@1.1\n```\n\ninstall pyenv:\n```console\n$ brew install pyenv\n```\n\n>**note:** it is possible that xcode might need to be reinstalled.  try **one** of the following:<br>\n>- use command ```xcode-select --install```\n>- install the latest version of [xcode](https://developer.apple.com/download)\n\nfor *zsh*, run the following commands to update *.zprofile* and *.zshrc*.  see pyenv install [docs](https://github.com/pyenv/pyenv#homebrew-on-macos) for further details on other shells.\n\n```console\n$ echo 'eval \"$(pyenv init --path)\"' >> ~/.zprofile\n```\n\n```console\n$ echo 'eval \"$(pyenv init -)\"' >> ~/.zshrc\n```\n\n>**note:** you need to restart your login session for changes to take affect.  on macos, restarting terminal windows should suffice.\n\ninstall python version:\n```console\n$ pyenv install 3.9.7\n```\n\nset local shell to installed python version:\n```console\n$  pyenv local 3.9.7\n```\n\nto use virtualenvwrapper with pyenv, install pyenv-virtualenvwrapper:\n```console\n$ brew install pyenv-virtualenvwrapper\n```\n\nto setup a virtualenvwrapper in your pyenv shell, run either ```pyenv virtualenvwrapper``` or ```pyenv virtualenvwrapper_lazy```\n\n>**note:** if issues with ```pyenv virtualenvwrapper```, using ```python -m pip install virtualenvwrapper``` should accomplish the same goal.\n\nmake a virtualenv:\n```console\n$ mkvirtualenv python-3.9.7-test\n```\n\ninstall the sdk:\n```console\n$ python -m pip install couchbase\n```\n\n### run individual pre-commit commands<a id=\"appendix-precommit\"></a>\nto run pre-commit hooks separately, use the following.\n\n#### autopep8\n```\npre-commit run autopep8 --all-files\n```\n\n#### bandit\n```\npre-commit run bandit --all-files\n```\n\n#### clang-format\n```\npre-commit run clang-format --all-files\n```\n\n#### flake8\n```\npre-commit run flake8 --all-files\n```\n\n#### isort\n```\npre-commit run isort --all-files\n```\n\n#### trailing whitespace\n```\npre-commit run trailing-whitespace --all-files\n```\n",
  "docs_url": "https://pythonhosted.org/couchbase/",
  "keywords": "couchbase,nosql,pycouchbase,libcouchbase",
  "license": "apache license 2.0",
  "name": "couchbase",
  "package_url": "https://pypi.org/project/couchbase/",
  "project_url": "https://pypi.org/project/couchbase/",
  "project_urls": {
    "Homepage": "https://github.com/couchbase/couchbase-python-client"
  },
  "release_url": "https://pypi.org/project/couchbase/4.1.9/",
  "requires_dist": [],
  "requires_python": ">=3.7",
  "summary": "python client for couchbase",
  "version": "4.1.9",
  "releases": [],
  "developers": [
    "couchbase",
    "pythonpackage@couchbase.com"
  ],
  "kwds": "pycbc_couchbase couchbase pycouchbase libcouchbase pycbc_acouchbase",
  "license_kwds": "apache license 2.0",
  "libtype": "pypi",
  "id": "pypi_couchbase",
  "homepage": "https://github.com/couchbase/couchbase-python-client",
  "release_count": 129,
  "dependency_ids": []
}