{
  "classifiers": [
    "environment :: web environment",
    "intended audience :: developers",
    "license :: osi approved :: zope public license",
    "programming language :: python :: 3",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "programming language :: python :: implementation :: cpython",
    "programming language :: python :: implementation :: pypy",
    "topic :: internet :: www/http",
    "topic :: software development :: testing"
  ],
  "description": "``zope.testbrowser`` readme\n===========================\n\n.. image:: https://img.shields.io/pypi/v/zope.testbrowser.svg\n        :target: https://pypi.org/project/zope.testbrowser/\n        :alt: latest version\n\n.. image:: https://github.com/zopefoundation/zope.testbrowser/actions/workflows/tests.yml/badge.svg\n        :target: https://github.com/zopefoundation/zope.testbrowser/actions/workflows/tests.yml\n\n\n.. image:: https://readthedocs.org/projects/zopetestbrowser/badge/?version=latest\n        :target: http://zopetestbrowser.readthedocs.org/en/latest/\n        :alt: documentation status\n\n``zope.testbrowser`` provides an easy-to-use programmable web browser\nwith special focus on testing.  it is used in zope, but it's not zope\nspecific at all.  for instance, it can be used to test or otherwise\ninteract with any web site.\n\ndocumentation is available at: https://zopetestbrowser.readthedocs.org\n\n\n=======\nchanges\n=======\n\n6.0 (2023-03-27)\n----------------\n\n- drop support for python 2.7, 3.5, 3.6.\n\n- drop support for deprecated ``python setup.py test``.\n\n- add support for python 3.11.\n\n- do not break in ``mechrepr`` when using ``<input type=\"date\">``.\n\n\n5.6.1 (2022-01-21)\n------------------\n\n- ensure all objects have consistent resolution orders.\n\n\n5.6.0 (2022-01-21)\n------------------\n\n- add support for python 3.9 and 3.10.\n\n\n5.5.1 (2019-11-12)\n------------------\n\n- stop sending a ``referer`` header when ``browser.open`` or\n  ``browser.post`` is called directly.  see `issue 87\n  <https://github.com/zopefoundation/zope.testbrowser/issues/87>`_.\n\n- add error checking to the setters for ``listcontrol.displayvalue`` and\n  ``checkboxlistcontrol.displayvalue``: in line with the old\n  ``mechanize``-based implementation, these will now raise\n  ``itemnotfounderror`` if any of the given values are not found, or\n  ``itemcounterror`` on trying to set more than one value on a single-valued\n  control.  see `issue 44\n  <https://github.com/zopefoundation/zope.testbrowser/issues/44>`_.\n\n- fix attributeerror in `add_file` when trying to add to a control which is\n  not a file upload.\n\n5.5.0 (2019-11-11)\n------------------\n\n- fix a bug where ``browser.goback()`` did not invalidate caches, so\n  subsequent queries could use data from the wrong response.  see `issue 83\n  <https://github.com/zopefoundation/zope.testbrowser/issues/83>`_.\n\n- support telling the browser not to follow redirects by setting\n  ``browser.follow_redirects`` to false.  see `issue 79\n  <https://github.com/zopefoundation/zope.testbrowser/issues/79>`_.\n\n\n5.4.0 (2019-11-01)\n------------------\n\n- fix a bug where browser.reload() would not follow redirects or raise\n  exceptions for bad http statuses.  see `issue 75\n  <https://github.com/zopefoundation/zope.testbrowser/issues/75>`_.\n\n- add python 3.8 support.  see `issue 80\n  <https://github.com/zopefoundation/zope.testbrowser/issues/80>`_.\n\n\n5.3.3 (2019-07-02)\n------------------\n\n- fix a bug where clicking the selected radio button would unselect it.  see\n  `issue 68 <https://github.com/zopefoundation/zope.testbrowser/issues/68>`_.\n\n- fix another incompatibility with beautifulsoup4 >= 4.7 that could result\n  in a syntaxerror from browser.getlink().  see `issue 61\n  <https://github.com/zopefoundation/zope.testbrowser/issues/61>`_.\n\n\n5.3.2 (2019-02-06)\n------------------\n\n- fix an incompatibility with beautifulsoup4 >= 4.7 that could result\n  in a syntaxerror from browser.getcontrol().  see `issue 61\n  <https://github.com/zopefoundation/zope.testbrowser/issues/61>`_.\n\n- fix a bug where you couldn't set a cookie expiration date when your locale\n  was not english.  see `issue 65\n  <https://github.com/zopefoundation/zope.testbrowser/issues/65>`_.\n\n- fix narrative doctests that started failing on january 1st, 2019 due to a\n  hardcoded \"future\" date.  see `issue 62\n  <https://github.com/zopefoundation/zope.testbrowser/issues/62>`_.\n\n\n5.3.1 (2018-10-23)\n------------------\n\n- fix a ``deprecationwarning`` on python 3. see `issue 51\n  <https://github.com/zopefoundation/zope.testbrowser/issues/51>`_.\n\n\n5.3.0 (2018-10-10)\n------------------\n\n- add support for python 3.7.\n\n- drop support for python 3.3 and 3.4.\n\n- drop support for pystone as python 3.7 dropped pystone. so\n  ``browser.lastrequestpystones`` no longer exists. rename\n  ``.browser.pystonetimer`` to ``.browser.timer``.\n\n- fix ``mechrepr`` of checkboxlistcontrol to always return a native str.\n  (https://github.com/zopefoundation/zope.testbrowser/pull/46).\n\n- add ``mechrepr`` to input fields having the type ``email``.\n  (https://github.com/zopefoundation/zope.testbrowser/pull/47).\n\n\n5.2.4 (2017-11-24)\n------------------\n\n- fix form submit with get method if the form action contains a query string\n  (https://github.com/zopefoundation/zope.testbrowser/pull/42).\n\n- restore ignoring hidden elements when searching by label\n  (https://github.com/zopefoundation/zope.testbrowser/pull/41).\n\n\n5.2.3 (2017-10-18)\n------------------\n\n- fix ``mechrepr`` on controls to always return a native str\n  (https://github.com/zopefoundation/zope.testbrowser/issues/38).\n\n\n5.2.2 (2017-10-10)\n------------------\n\n- restore raising of attributeerror when trying to set value of a\n  read only control.\n\n- fix selecting radio and select control options by index\n  (https://github.com/zopefoundation/zope.testbrowser/issues/31).\n\n\n5.2.1 (2017-09-01)\n------------------\n\n- exclude version 2.0.27 of `webtest` from allowed versions as it breaks some\n  tests.\n\n- adapt tests to version 2.0.28 of `webtest` but keeping compatibility to older\n  versions.\n\n\n5.2 (2017-02-25)\n----------------\n\n- fixed ``tostr`` to handle lists, for example a list of class names.\n  [maurits]\n\n- fixed browser to only follow redirects for http statuses\n  301, 302, 303, and 307; not other 30x statuses such as 304.\n\n- fix passing a real file to ``add_file``.\n\n- add ``controls`` property to form class to list all form controls.\n\n- restore the ability to use parts of the actually displayed select box titles.\n\n- allow to set a string value instead of a list on ``browser.displayvalue``.\n\n- fix setting empty values on a select control.\n\n- support python 3.6, pypy2.7 an pypy3.3.\n\n\n5.1 (2017-01-31)\n----------------\n\n- alias ``.browser.urllib_request.httperror`` to ``.browser.httperror`` to have\n  a better api.\n\n\n5.0.0 (2016-09-30)\n------------------\n\n- converted most doctests to sphinx documentation, and published to\n  https://zopetestbrowser.readthedocs.io/ .\n\n- internal implementation now uses webtest instead of ``mechanize``.\n  the ``mechanize`` dependency is completely dropped.\n  **this is a backwards-incompatible change.**\n\n- remove apis:\n\n  - ``zope.testbrowser.testing.browser`` (this is a big one).\n\n    instead of using ``zope.testbrowser.testing.browser()`` and relying on\n    it to magically pick up the ``zope.app.testing.functional`` singleton\n    application, you now have to define a test layer inheriting from\n    ``zope.testbrowser.wsgi.layer``, overrride the ``make_wsgi_app`` method\n    to create a wsgi application, and then use\n    ``zope.testbrowser.wsgi.browser()`` in your tests.\n\n    (or you can set up a wsgi application yourself in whatever way you like\n    and pass it explicitly to\n    ``zope.testbrowser.browser.browser(wsgi_app=my_app)``.)\n\n    example: if your test file looked like this ::\n\n        # my/package/tests.py\n        from zope.app.testing.functional import definelayer\n        from zope.app.testing.functional import functionaldocfilesuite\n        definelayer('myftestlayer', 'ftesting.zcml', allow_teardown=true)\n\n        def test_suite():\n            suite = functionaldocfilesuite('test.txt', ...)\n            suite.layer = myftestlayer\n            return suite\n\n    now you'll have to use ::\n\n        # my/package/tests.py\n        from unittest import testsuite\n        import doctest\n        import zope.app.wsgi.testlayer\n        import zope.testbrowser.wsgi\n\n        class layer(zope.testbrowser.wsgi.testbrowserlayer,\n                    zope.app.wsgi.testlayer.browserlayer):\n            \"\"\"layer to prepare zope.testbrowser using the wsgi app.\"\"\"\n\n        layer = layer(my.package, 'ftesting.zcml', allowteardown=true)\n\n        def test_suite():\n            suite = doctest.docfilesuite('test.txt', ...)\n            suite.layer = layer\n            return suite\n\n    and then change all your tests from ::\n\n        >>> from zope.testbrowser.testing import browser\n\n    to ::\n\n        >>> from zope.testbrowser.wsgi import browser\n\n    maybe the blog post `getting rid of zope.app.testing`_ could help you adapting to this new version, too.\n\n- remove modules:\n\n  - ``zope.testbrowser.connection``\n\n- remove internal classes you were not supposed to use anyway:\n\n  - ``zope.testbrowser.testing.publisherresponse``\n  - ``zope.testbrowser.testing.publisherconnection``\n  - ``zope.testbrowser.testing.publisherhttphandler``\n  - ``zope.testbrowser.testing.publishermechanizebrowser``\n  - ``zope.testbrowser.wsgi.wsgiconnection``\n  - ``zope.testbrowser.wsgi.wsgihttphandler``\n  - ``zope.testbrowser.wsgi.wsgimechanizebrowser``\n\n- remove internal attributes you were not supposed to use anyway (this\n  list is not necessarily complete):\n\n  - ``browser._mech_browser``\n\n- remove setuptools extras:\n\n  - ``zope.testbrowser[zope-functional-testing]``\n\n- changed behavior:\n\n  - the testbrowser no longer follows html redirects aka\n    ``<meta http-equiv=\"refresh\" ... />``. this was a `mechanize` feature which\n    does not seem to be provided by `webtest`.\n\n- add support for python 3.3, 3.4 and 3.5.\n\n- drop support for python 2.5 and 2.6.\n\n- drop the ``webtest <= 1.3.4`` pin.  we require ``webtest >= 2.0.8`` now.\n\n- remove dependency on deprecated ``zope.app.testing``.\n\n- bugfix: ``browser.getlink()`` could fail if your html contained ``<a>``\n  elements with no href attribute\n  (https://github.com/zopefoundation/zope.testbrowser/pull/3).\n\n\n.. _`getting rid of zope.app.testing` : https://icemac15.wordpress.com/2010/07/10/appswordpressicemac20100710get-rid-of-zope-app-testing-dependency/\n\n\n4.0.3 (2013-09-04)\n------------------\n\n- pinning version 'webtest <= 1.3.4', because of some incompatibility and\n  test failures\n\n- make zope.testbrowser installable via pip\n  (https://github.com/zopefoundation/zope.testbrowser/issues/6).\n\n- when ``browser.handleerrors`` is false, also add ``x-wsgiorg.throw_errors``\n  to the environment. http://wsgi.org/wsgi/specifications/throw_errors\n\n- prevent webtest from always sending ``paste.throw_errors=true`` in the\n  environment by setting it to ``none`` when ``browser.handleerrors`` is\n  ``true``.  this makes it easier to test error pages.\n\n- make browser.submit() handle ``raisehttperrors``\n  (https://github.com/zopefoundation/zope.testbrowser/pull/4).\n\n- more friendly error messages from getcontrol() et al:\n\n  - when you specify an index that is out of bounds, show the available\n    choices\n\n  - when you fail to find anything, show all the available items\n\n\n4.0.2 (2011-05-25)\n------------------\n\n- remove test dependency on zope.pagetemplate.\n\n\n4.0.1 (2011-05-04)\n------------------\n\n- add a hint in documentation how to use ``zope.testbrowser.wsgi.browser``\n  to test a zope 2/zope 3/bluebream wsgi application.\n\n4.0.0 (2011-03-14)\n------------------\n\n- lp #721252: ambiguityerror now shows all matching controls.\n\n- integrate with webtest. ``zope.testbrowser.wsgi.browser`` is a\n  ``browser`` implementation that uses ``webtest.testapp`` to drive a wsgi\n  application. this this replaces the wsgi_intercept support added in 3.11.\n\n- re-write the test application as a pure wsgi application using webob. run the\n  existing tests using the webtest based browser\n\n- move zope.app.testing based browser into ``zope.app.testing`` (leaving\n  backwards compatibility imports in-place). released in ``zope.app.testing``\n  3.9.0.\n\n\n3.11.1 (2011-01-24)\n-------------------\n\n- fixing brown bag release 3.11.0.\n\n\n3.11.0 (2011-01-24)\n-------------------\n\n- add ``wsgi_intercept`` support (came from ``zope.app.wsgi.testlayer``).\n\n\n3.10.4 (2011-01-14)\n-------------------\n\n- move the over-the-wire.txt doctest out of the testbrowserlayer as it doesn't\n  need or use it.\n\n- fix test compatibility with zope.app.testing 3.8.1.\n\n3.10.3 (2010-10-15)\n-------------------\n\n- fixed backwards compatibility with ``zope.app.wsgi.testlayer``.\n\n\n3.10.2 (2010-10-15)\n-------------------\n\n- fixed python 2.7 compatibility in browser.handleerrors.\n\n\n3.10.1 (2010-09-21)\n-------------------\n\n- fixed a bug that caused the ``browser`` to keep it's previous ``contents``\n  the places are:\n  - link.click()\n  - submitcontrol.click()\n  - imagecontrol.click()\n  - form.submit()\n\n- also adjusted exception messages at the above places to match\n  pre version 3.4.1 messages.\n\n\n3.10.0 (2010-09-14)\n-------------------\n\n- lp #98437: use ``mechanize``'s built-in ``submit()`` to submit forms,\n  allowing ``mechanize`` to set the \"referer:\" (sic) header appropriately.\n\n- fixed tests to run with ``zope.app.testing`` 3.8 and above.\n\n\n3.9.0 (2010-05-17)\n------------------\n\n- lp #568806: update dependency ``mechanize >= 0.2.0``, which now includes\n  the ``clientform`` apis.  remove use of ``urllib2`` apis (incompatible\n  with ``mechanize 0.2.0``) in favor of ``mechanize`` equivalents.\n  thanks to john j. lee for the patch.\n\n- use stdlib ``doctest`` module, instead of ``zope.testing.doctest``.\n\n- **caution:** this version is no longer fully compatible with python 2.4:\n  ``handleerrors = false`` no longer works.\n\n\n3.8.1 (2010-04-19)\n------------------\n\n- pin dependency on ``mechanize`` to prevent use of the upcoming\n  0.2.0 release before we have time to adjust to its api changes.\n\n- fix lp #98396: testbrowser resolves relative urls incorrectly.\n\n\n3.8.0 (2010-03-05)\n------------------\n\n- add ``follow`` convenience method which gets and follows a link.\n\n\n3.7.0 (2009-12-17)\n------------------\n\n- move ``zope.app.testing`` dependency into the scope of the\n  ``publisherconnection`` class. zope2 specifies its own version of\n  ``publisherconnection`` which isn't dependent on ``zope.app.testing``.\n\n- fix lp #419119: return ``none`` when the browser has no contents instead\n  of raising an exception.\n\n\n3.7.0a1 (2009-08-29)\n--------------------\n\n- update dependency from ``zope.app.publisher`` to\n  ``zope.browserpage``, ``zope.browserresource`` and ``zope.ptresource``.\n\n- remove dependencies on ``zope.app.principalannotation`` and\n  ``zope.securitypolicy`` by using the simple ``permissivesecuritypolicy``.\n\n- replace the testing dependency on ``zope.app.zcmlfiles`` with explicit\n  dependencies of a minimal set of packages.\n\n- remove unneeded ``zope.app.authentication`` from ftesting.zcml.\n\n- update dependency from ``zope.app.securitypolicy`` to\n  ``zope.securitypolicy``.\n\n\n3.6.0a2 (2009-01-31)\n--------------------\n\n- update dependency from ``zope.app.folder`` to ``zope.site.folder``.\n\n- remove unnecessary test dependency in ``zope.app.component``.\n\n\n3.6.0a1 (2009-01-08)\n--------------------\n\n- update author e-mail to ``zope-dev`` rather than ``zope3-dev``.\n\n- no longer strip newlines in xml and html code contained in a\n  ``<textarea>``; fix requires clientform >= 0.2.10 (lp #268139).\n\n- add ``cookies`` attribute to browser for easy manipulation of browser\n  cookies.  see brief example in main documentation, plus new ``cookies.txt``\n  documentation.\n\n\n3.5.1 (2008-10-10)\n------------------\n\n- work around for a ``mechanize``/``urllib2`` bug on python 2.6 missing\n  ``timeout`` attribute on ``request`` base class.\n\n- work around for a ``mechanize``/``urllib2`` bug in creating request objects\n  that won't handle fragment urls correctly.\n\n\n3.5.0 (2008-03-30)\n------------------\n\n- add a ``zope.testbrowser.testing.browser.post`` method that allows\n  tests to supply a body and a content type.  this is handy for\n  testing ajax requests with non-form input (e.g. json).\n\n- remove vendor import of ``mechanize``.\n\n- fix bug that caused http exception tracebacks to differ between version 3.4.0\n  and 3.4.1.\n\n- work around a bug in python ``cookie.simplecookie`` when handling unicode\n  strings.\n\n- fix bug introduced in 3.4.1 that created incompatible tracebacks in doctests.\n  this necessitated adding a patched ``mechanize`` to the source tree; patches\n  have been sent to the ``mechanize`` project.\n\n- fix https://bugs.launchpad.net/bugs/149517 by adding ``zope.interface`` and\n  ``zope.schema`` as real dependencies\n\n- fix ``browser.getlink`` documentation that was not updated since the last\n  api modification.\n\n- move tests for fixed bugs to a separate file.\n\n- remove non-functional and undocumented code intended to help test servers\n  using virtual hosting.\n\n\n3.4.2 (2007-10-31)\n------------------\n\n- resolve ``zopesecuritypolicy`` deprecation warning.\n\n\n3.4.1 (2007-09-01)\n------------------\n\n* update dependencies to ``mechanize 0.1.7b`` and ``clientform 0.2.7``.\n\n* add support for python 2.5.\n\n\n3.4.0 (2007-06-04)\n------------------\n\n* add the ability to suppress raising exceptions on http errors\n  (``raisehttperrors`` attribute).\n\n* make the tests more resilient to http header formatting changes with\n  the renormalizer.\n\n\n3.4.0a1 (2007-04-22)\n--------------------\n\ninitial release as a separate project, corresponds to zope.testbrowser\nfrom zope 3.4.0a1\n",
  "docs_url": null,
  "keywords": "headless browser functional tests wsgi http html form",
  "license": "zpl 2.1",
  "name": "zope.testbrowser",
  "package_url": "https://pypi.org/project/zope.testbrowser/",
  "project_url": "https://pypi.org/project/zope.testbrowser/",
  "project_urls": {
    "Documentation": "https://zopetestbrowser.readthedocs.io/",
    "Homepage": "https://github.com/zopefoundation/zope.testbrowser"
  },
  "release_url": "https://pypi.org/project/zope.testbrowser/6.0/",
  "requires_dist": [
    "setuptools",
    "zope.interface",
    "zope.schema",
    "zope.cachedescriptors",
    "pytz",
    "WebTest (>=2.0.30)",
    "BeautifulSoup4",
    "SoupSieve (>=1.9.0)",
    "WSGIProxy2",
    "Sphinx ; extra == 'docs'",
    "sphinx-rtd-theme ; extra == 'docs'",
    "repoze.sphinx.autointerface ; extra == 'docs'",
    "zope.app.wsgi ; extra == 'docs'",
    "zope.testing ; extra == 'test'",
    "mock ; extra == 'test'",
    "zope.testrunner ; extra == 'test'",
    "zope.testbrowser[test] ; extra == 'test_bbb'"
  ],
  "requires_python": ">=3.7",
  "summary": "programmable browser for functional black-box tests",
  "version": "6.0",
  "releases": [],
  "developers": [
    "zope-dev@zope.dev",
    "zope_corporation_and_contributors"
  ],
  "kwds": "wsgimechanizebrowser wsgiconnection wsgi_app wsgi zopetestbrowser",
  "license_kwds": "zpl 2.1",
  "libtype": "pypi",
  "id": "pypi_zope.testbrowser",
  "homepage": "https://github.com/zopefoundation/zope.testbrowser",
  "release_count": 45,
  "dependency_ids": [
    "pypi_beautifulsoup4",
    "pypi_mock",
    "pypi_pytz",
    "pypi_repoze.sphinx.autointerface",
    "pypi_setuptools",
    "pypi_soupsieve",
    "pypi_sphinx",
    "pypi_sphinx_rtd_theme",
    "pypi_webtest",
    "pypi_wsgiproxy2",
    "pypi_zope.app.wsgi",
    "pypi_zope.cachedescriptors",
    "pypi_zope.interface",
    "pypi_zope.schema",
    "pypi_zope.testbrowser",
    "pypi_zope.testing",
    "pypi_zope.testrunner"
  ]
}