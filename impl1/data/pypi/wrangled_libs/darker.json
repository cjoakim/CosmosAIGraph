{
  "classifiers": [
    "programming language :: python :: 3 :: only",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9"
  ],
  "description": "=================================================\n darker \u2013 reformat and lint modified python code\n=================================================\n\n|build-badge|_ |license-badge|_ |pypi-badge|_ |downloads-badge|_ |black-badge|_ |changelog-badge|_\n\n.. |build-badge| image:: https://github.com/akaihola/darker/actions/workflows/python-package.yml/badge.svg\n   :alt: master branch build status\n.. _build-badge: https://github.com/akaihola/darker/actions/workflows/python-package.yml?query=branch%3amaster\n.. |license-badge| image:: https://img.shields.io/badge/license-bsd%203--clause-blue.svg\n   :alt: bsd 3 clause license\n.. _license-badge: https://github.com/akaihola/darker/blob/master/license.rst\n.. |pypi-badge| image:: https://img.shields.io/pypi/v/darker\n   :alt: latest release on pypi\n.. _pypi-badge: https://pypi.org/project/darker/\n.. |downloads-badge| image:: https://pepy.tech/badge/darker\n   :alt: number of downloads\n.. _downloads-badge: https://pepy.tech/project/darker\n.. |black-badge| image:: https://img.shields.io/badge/code%20style-black-000000.svg\n   :alt: source code formatted using black\n.. _black-badge: https://github.com/psf/black\n.. |changelog-badge| image:: https://img.shields.io/badge/-change%20log-purple\n   :alt: change log\n.. _changelog-badge: https://github.com/akaihola/darker/blob/master/changes.rst\n.. |next-milestone| image:: https://img.shields.io/github/milestones/progress/akaihola/darker/21?color=red&label=release%201.8.0\n   :alt: next milestone\n.. _next-milestone: https://github.com/akaihola/darker/milestone/21\n\n\nwhat?\n=====\n\nthis utility reformats and checks python source code files.\nhowever, when run in a git repository, it compares an old revision of the source tree\nto a newer revision (or the working tree). it then\n\n- only applies reformatting in regions which have changed in the git working tree\n  between the two revisions, and\n- only reports those linting messages which appeared after the modifications to the\n  source code files.\n\nthe reformatters supported are:\n\n- black_ for code reformatting\n- isort_ for sorting imports\n- flynt_ for turning old-style format strings to f-strings\n\nsee `using linters`_ below for the list of supported linters.\n\nto easily run darker as a pytest_ plugin, see pytest-darker_.\n\nto integrate darker with your ide or with pre-commit_,\nsee the relevant sections below in this document.\n\n.. _black: https://github.com/python/black\n.. _isort: https://github.com/timothycrosley/isort\n.. _flynt: https://github.com/ikamensh/flynt\n.. _pytest: https://docs.pytest.org/\n.. _pytest-darker: https://pypi.org/project/pytest-darker/\n\n\n.. _#151: https://github.com/akaihola/darker/issues/151\n.. _community support channel: https://github.com/akaihola/darker/discussions\n\n\nwhy?\n====\n\nyou want to start unifying code style in your project using black_.\nmaybe you also like to standardize on how to order your imports,\nor do static type checking or other static analysis for your code.\n\nhowever, instead of formatting the whole code base in one giant commit,\nyou'd like to only change formatting when you're touching the code for other reasons.\n\nthis can also be useful\nwhen contributing to upstream codebases that are not under your complete control.\n\npartial formatting is not supported by black_ itself,\nfor various good reasons, and so far there hasn't been a plan to implemented it either\n(`134`__, `142`__, `245`__, `370`__, `511`__, `830`__).\nhowever, in september 2021 black developers started to hint towards adding this feature\nafter all (`1352`__). this might at least simplify darker's algorithm substantially.\n\n__ https://github.com/psf/black/issues/134\n__ https://github.com/psf/black/issues/142\n__ https://github.com/psf/black/issues/245\n__ https://github.com/psf/black/issues/370\n__ https://github.com/psf/black/issues/511\n__ https://github.com/psf/black/issues/830\n__ https://github.com/psf/black/issues/1352\n\nbut for the time being, this is where ``darker`` enters the stage.\nthis tool is for those who want to do partial formatting right now.\n\nnote that this tool is meant for special situations\nwhen dealing with existing code bases.\nyou should just use black_ and isort_ as is when starting a project from scratch.\n\nyou may also want to still consider whether reformatting the whole code base in one\ncommit would make sense in your particular case. you can ignore a reformatting commit\nin ``git blame`` using the `blame.ignorerevsfile`_ config option or ``--ignore-rev`` on\nthe command line. for a deeper dive into this topic, see `avoiding ruining git blame`_\nin black documentation, or the article\n`why does black insist on reformatting my entire project?`_ from `\u0142ukasz langa`_\n(`@ambv`_, the creator of black). here's an excerpt:\n\n    \"when you make this single reformatting commit, everything that comes after is\n    **semantic changes** so your commit history is clean in the sense that it actually\n    shows what changed in terms of meaning, not style. there are tools like darker that\n    allow you to only reformat lines that were touched since the last commit. however,\n    by doing that you forever expose yourself to commits that are a mix of semantic\n    changes with stylistic changes, making it much harder to see what changed.\"\n\n.. _blame.ignorerevsfile: https://git-scm.com/docs/git-blame/en#documentation/git-blame.txt---ignore-revs-fileltfilegt\n.. _avoiding ruining git blame: https://black.readthedocs.io/en/stable/guides/introducing_black_to_your_project.html#avoiding-ruining-git-blame\n.. _why does black insist on reformatting my entire project?: https://lukasz.langa.pl/36380f86-6d28-4a55-962e-91c2c959db7a/\n.. _\u0142ukasz langa: https://lukasz.langa.pl/\n.. _@ambv: https://github.com/ambv\n\nhow?\n====\n\nto install or upgrade, use::\n\n  pip install --upgrade darker~=1.7.2\n\nor, if you're using conda_ for package management::\n\n  conda install -c conda-forge darker~=1.7.2 isort\n  conda update -c conda-forge darker\n\n..\n\n    **note:** it is recommended to use the '``~=``' \"`compatible release`_\" version\n    specifier for darker. see `guarding against black compatibility breakage`_ for more\n    information.\n\nthe ``darker <myfile.py>`` or ``darker <directory>`` command\nreads the original file(s),\nformats them using black_,\ncombines original and formatted regions based on edits,\nand writes back over the original file(s).\n\nalternatively, you can invoke the module directly through the ``python`` executable,\nwhich may be preferable depending on your setup.\nuse ``python -m darker`` instead of ``darker`` in that case.\n\nby default, ``darker`` just runs black_ to reformat the code.\nyou can enable additional features with command line options:\n\n- ``-i`` / ``--isort``: reorder imports using isort_. note that isort_ must be\n  run in the same python environment as the packages to process, as it imports\n  your modules to determine whether they are first or third party modules.\n- ``-f`` / ``--flynt``: also convert string formatting to use f-strings using the\n  ``flynt`` package\n- ``-l <linter>`` / ``--lint <linter>``: run a supported linter (see `using linters`_)\n\n*new in version 1.1.0:* the ``-l`` / ``--lint`` option.\n*new in version 1.2.2:* package available in conda-forge_.\n*new in version 1.7.0:* the ``-f`` / ``--flynt`` option\n\n.. _conda: https://conda.io/\n.. _conda-forge: https://conda-forge.org/\n\n\nexample\n=======\n\nthis example walks you through a minimal practical use case for darker.\n\nfirst, create an empty git repository:\n\n.. code-block:: shell\n\n   $ mkdir /tmp/test\n   $ cd /tmp/test\n   $ git init\n   initialized empty git repository in /tmp/test/.git/\n\nin the root of that directory, create the ill-formatted python file ``our_file.py``:\n\n.. code-block:: python\n\n   if true: print('hi')\n   print()\n   if false: print('there')\n\ncommit that file:\n\n.. code-block:: shell\n\n   $ git add our_file.py\n   $ git commit -m \"initial commit\"\n   [master (root-commit) a0c7c32] initial commit\n    1 file changed, 3 insertions(+)\n    create mode 100644 our_file.py\n\nnow modify the first line in that file:\n\n.. code-block:: python\n\n   if true: print('changed text')\n   print()\n   if false: print('there')\n\nyou can ask darker to show the diff for minimal reformatting\nwhich makes edited lines conform to black rules:\n\n.. code-block:: diff\n\n   $ darker --diff our_file.py\n   --- our_file.py\n   +++ our_file.py\n   @@ -1,3 +1,4 @@\n   -if true: print('changed text')\n   +if true:\n   +    print(\"changed text\")\n   print()\n   if false: print('there')\n\nalternatively, darker can output the full reformatted file\n(works only when a single python file is provided on the command line):\n\n.. code-block:: shell\n\n   $ darker --stdout our_file.py\n\n.. code-block:: python\n\n   if true:\n       print(\"changed text\")\n   print()\n   if false: print('there')\n\nif you omit the ``--diff`` and ``--stdout`` options,\ndarker replaces the files listed on the command line\nwith partially reformatted ones as shown above:\n\n.. code-block:: shell\n\n   $ darker our_file.py\n\nnow the contents of ``our_file.py`` will have changed.\nnote that the original ``print()`` and ``if false: ...`` lines have not been reformatted\nsince they had not been edited!\n\n.. code-block:: python\n\n   if true:\n       print(\"changed text\")\n   print()\n   if false: print('there')\n\nyou can also ask darker to reformat edited lines in all python files in the repository:\n\n.. code-block:: shell\n\n   $ darker .\n\nor, if you want to compare to another branch (or, in fact, any commit)\ninstead of the last commit:\n\n.. code-block:: shell\n\n   $ darker --revision master .\n\n\ncustomizing ``darker``, black_, isort_, flynt_ and linter behavior\n==================================================================\n\n``darker`` invokes black_ and isort_ internals directly instead of running their\nbinaries, so it needs to read and pass configuration options to them explicitly.\nproject-specific default options for ``darker`` itself, black_ and isort_ are read from\nthe project's ``pyproject.toml`` file in the repository root. isort_ does also look for\na few other places for configuration.\n\nmypy_, pylint_, flake8_ and other compatible linters are invoked as\nsubprocesses by ``darker``, so normal configuration mechanisms apply for each of those\ntools. linters can also be configured on the command line, for example::\n\n    darker -l \"mypy --strict\" .\n    darker --lint \"pylint --errors-only\" .\n  \nflynt_ (option ``-f`` / ``--flynt``) is also invoked as a subprocess, but passing\ncommand line options to it is currently not supported. configuration files need to be\nused instead.\n\ndarker does honor exclusion options in black configuration files when recursing\ndirectories, but the exclusions are only applied to black reformatting. isort and\nlinters are still run on excluded files. also, individual files explicitly listed on the\ncommand line are still reformatted even if they match exclusion patterns.\n\nfor more details, see:\n\n- `black documentation about pyproject.toml`_\n- `isort documentation about config files`_\n- `public github repositories which install and run darker`_\n- `flynt documentation about configuration files`_\n\nthe following `command line arguments`_ can also be used to modify the defaults:\n\n-r rev, --revision rev\n       revisions to compare. the default is ``head..:worktree:`` which compares the\n       latest commit to the working tree. tags, branch names, commit hashes, and other\n       expressions like ``head~5`` work here. also a range like ``main...head`` or\n       ``main...`` can be used to compare the best common ancestor. with the magic value\n       ``:pre-commit:``, darker works in pre-commit compatible mode. darker expects the\n       revision range from the ``pre_commit_from_ref`` and ``pre_commit_to_ref``\n       environment variables. if those are not found, darker works against ``head``.\n       also see ``--stdin-filename=`` for the ``:stdin:`` special value.\n--diff\n       don't write the files back, just output a diff for each file on stdout. highlight\n       syntax if on a terminal and the ``pygments`` package is available, or if enabled\n       by configuration.\n-d, --stdout\n       force complete reformatted output to stdout, instead of in-place. only valid if\n       there's just one file to reformat. highlight syntax if on a terminal and the\n       ``pygments`` package is available, or if enabled by configuration.\n--stdin-filename path\n       the path to the file when passing it through stdin. useful so darker can find the\n       previous version from git. only valid with ``--revision=<rev1>..:stdin:``\n       (``head..:stdin:`` being the default if ``--stdin-filename`` is enabled).\n--check\n       don't write the files back, just return the status. return code 0 means nothing\n       would change. return code 1 means some files would be reformatted.\n-f, --flynt\n       also convert string formatting to use f-strings using the ``flynt`` package\n-i, --isort\n       also sort imports using the ``isort`` package\n-l cmd, --lint cmd\n       also run a linter on changed files. ``cmd`` can be a name or path of the linter\n       binary, or a full quoted command line with the command and options. linters read\n       their configuration as normally, and aren't affected by ``-c`` / ``--config``.\n       linter output is syntax highlighted when the ``pygments`` package is available if\n       run on a terminal and or enabled by explicitly (see ``--color``).\n-c path, --config path\n       ask ``black`` and ``isort`` to read configuration from ``path``. note that other\n       tools like flynt, mypy, pylint and flake8 won't use this configuration file.\n-v, --verbose\n       show steps taken and summarize modifications\n-q, --quiet\n       reduce amount of output\n--color\n       enable syntax highlighting even for non-terminal output. overrides the\n       environment variable py_colors=0\n--no-color\n       disable syntax highlighting even for terminal output. overrides the environment\n       variable py_colors=1\n-s, --skip-string-normalization\n       don't normalize string quotes or prefixes\n--no-skip-string-normalization\n       normalize string quotes or prefixes. this can be used to override\n       ``skip_string_normalization = true`` from a configuration file.\n--skip-magic-trailing-comma\n       skip adding trailing commas to expressions that are split by comma where each\n       element is on its own line. this includes function signatures. this can be used\n       to override ``skip_magic_trailing_comma = true`` from a configuration file.\n-l length, --line-length length\n       how many characters per line to allow [default: 88]\n-t version, --target-version version\n       [py33|py34|py35|py36|py37|py38|py39|py310|py311|py312] python versions that\n       should be supported by black's output. [default: per-file auto-detection]\n-w workers, --workers workers\n       how many parallel workers to allow, or ``0`` for one per core [default: 1]\n\nto change default values for these options for a given project,\nadd a ``[tool.darker]`` or ``[tool.black]`` section to ``pyproject.toml`` in the\nproject's root directory, or to a different toml file specified using the ``-c`` /\n``--config`` option. for example:\n\n.. code-block:: toml\n\n   [tool.darker]\n   src = [\n       \"src/mypackage\",\n   ]\n   revision = \"master\"\n   diff = true\n   check = true\n   isort = true\n   flynt = true\n   lint = [\n       \"pylint\",\n   ]\n   line-length = 80                  # passed to isort and black, override their config\n   log_level = \"info\"\n\n   [tool.black]\n   line-length = 88                  # overridden by [tool.darker] above\n   skip-magic-trailing-comma = false\n   skip-string-normalization = false\n   target-version = ['py311']\n   exclude = \"test_*\\.py\"\n   extend_exclude = \"/generated/\"\n   force_exclude = \".*\\.pyi\"\n\n   [tool.isort]\n   profile = \"black\"\n   known_third_party = [\"pytest\"]\n   line_length = 88                  # overridden by [tool.darker] above\n\nwhile isort_ reads all of its options from the configuration file, black_ only honors\nthe ones listed above when called by ``darker``. other tools are invoked as\nsubprocesses and use their configuration mechanisms unmodified.\n\nbe careful to not use options which generate output which is unexpected for\nother tools. for example, vscode only expects the reformat diff, so\n``lint = [ ... ]`` can't be used with it.\n\n*new in version 1.0.0:*\n\n- the ``-c``, ``-s`` and ``-l`` command line options.\n- isort_ is configured with ``-c`` and ``-l``, too.\n\n*new in version 1.1.0:* the command line options\n\n- ``-r`` / ``--revision``\n- ``--diff``\n- ``--check``\n- ``--no-skip-string-normalization``\n- ``-l`` / ``--lint``\n\n*new in version 1.2.0:* support for\n\n- commit ranges in ``-r`` / ``--revision``.\n- a ``[tool.darker]`` section in ``pyproject.toml``.\n\n*new in version 1.2.2:* support for ``-r :pre-commit:`` / ``--revision=:pre_commit:``\n\n*new in version 1.3.0:* the ``--skip-magic-trailing-comma`` and ``-d`` / ``--stdout``\ncommand line options\n\n*new in version 1.5.0:* the ``-w`` / ``--workers``, ``--color`` and ``--no-color``\ncommand line options\n\n*new in version 1.7.0:* the ``-t`` / ``--target-version`` command line option\n\n*new in version 1.7.0:* the ``-f`` / ``--flynt`` command line option\n\n.. _black documentation about pyproject.toml: https://black.readthedocs.io/en/stable/usage_and_configuration/the_basics.html#configuration-via-a-file\n.. _isort documentation about config files: https://timothycrosley.github.io/isort/docs/configuration/config_files/\n.. _public github repositories which install and run darker: https://github.com/search?q=%2fpip+install+.*darker%2f+path%3a%2f%5e.github%5c%2fworkflows%5c%2f.*%2f&type=code\n.. _flynt documentation about configuration files: https://github.com/ikamensh/flynt#configuration-files\n.. _command line arguments: https://black.readthedocs.io/en/stable/usage_and_configuration/the_basics.html#command-line-options\n\neditor integration\n==================\n\nmany editors have plugins or recipes for integrating black_.\nyou may be able to adapt them to be used with ``darker``.\nsee `editor integration`__ in the black_ documentation.\n\n__ https://github.com/psf/black/#editor-integration\n\npycharm/intellij idea\n---------------------\n\n1. install ``darker``::\n\n     $ pip install darker\n\n2. locate your ``darker`` installation folder.\n\n   on macos / linux / bsd::\n\n     $ which darker\n     /usr/local/bin/darker  # possible location\n\n   on windows::\n\n     $ where darker\n     %localappdata%\\programs\\python\\python36-32\\scripts\\darker.exe  # possible location\n\n3. open external tools in pycharm/intellij idea\n\n   - on macos: ``pycharm -> preferences -> tools -> external tools``\n   - on windows / linux / bsd: ``file -> settings -> tools -> external tools``\n\n4. click the ``+`` icon to add a new external tool with the following values:\n\n   - name: darker\n   - description: use black to auto-format regions changed since the last git commit.\n   - program: <install_location_from_step_2>\n   - arguments: ``\"$filepath$\"``\n\n   if you need any extra command line arguments\n   like the ones which change black behavior,\n   you can add them to the ``arguments`` field, e.g.::\n\n       --config /home/myself/black.cfg \"$filepath$\"\n\n5. you can now format the currently opened file by selecting ``tools -> external tools -> darker``\n   or right clicking on a file and selecting ``external tools -> darker``\n\n6. optionally, set up a keyboard shortcut at\n   ``preferences or settings -> keymap -> external tools -> external tools - darker``\n\n7. optionally, run ``darker`` on every file save:\n\n   1. make sure you have the `file watcher`__ plugin installed.\n   2. go to ``preferences or settings -> tools -> file watchers`` and click ``+`` to add\n      a new watcher:\n\n      - name: darker\n      - file type: python\n      - scope: project files\n      - program: <install_location_from_step_2>\n      - arguments: ``$filepath$``\n      - output paths to refresh: ``$filepath$``\n      - working directory: ``$projectfiledir$``\n\n   3. uncheck \"auto-save edited files to trigger the watcher\"\n\n__ https://plugins.jetbrains.com/plugin/7177-file-watchers\n\n\nvisual studio code\n------------------\n\n1. install ``darker``::\n\n     $ pip install darker\n\n2. locate your ``darker`` installation folder.\n\n   on macos / linux / bsd::\n\n     $ which darker\n     /usr/local/bin/darker  # possible location\n\n   on windows::\n\n     $ where darker\n     %localappdata%\\programs\\python\\python36-32\\scripts\\darker.exe  # possible location\n\n3. add these configuration options to vs code, ``cmd-shift-p``, ``open settings (json)``::\n\n    \"python.formatting.provider\": \"black\",\n    \"python.formatting.blackpath\": \"<install_location_from_step_2>\",\n    \"python.formatting.blackargs\": [],\n\nvscode will always add ``--diff --quiet`` as arguments to darker,\nbut you can also pass additional arguments in the ``blackargs`` option\n(e.g. ``[\"--isort\", \"--revision=master...\"]``).\nbe sure to *not* enable any linters here or in ``pyproject.toml``\nsince vscode won't be able to understand output from them.\n\nnote that vscode first copies the file to reformat into a temporary\n``<filename>.py.<hash>.tmp`` file, then calls black (or darker in this case) on that\nfile, and brings the changes in the modified files back into the editor.\ndarker is aware of this behavior, and will correctly compare ``.py.<hash>.tmp`` files\nto corresponding ``.py`` files from earlier repository revisions.\n\n\nvim\n---\n\nunlike black_ and many other formatters, ``darker`` needs access to the git history.\ntherefore it does not work properly with classical auto reformat plugins.\n\nyou can though ask vim to run ``darker`` on file save with the following in your\n``.vimrc``:\n\n.. code-block:: vim\n\n   set autoread\n   autocmd bufwritepost *.py silent :!darker %\n\n- ``bufwritepost`` to run ``darker`` *once the file has been saved*,\n- ``silent`` to not ask for confirmation each time,\n- ``:!`` to run an external command,\n- ``%`` for current file name.\n\nvim should automatically reload the file.\n\nemacs\n-----\n\nyou can integrate with emacs using steve purcell's `emacs-reformatter`__ library.\n\nusing `use-package`__:\n\n.. code-block:: emacs-lisp\n\n    (use-package reformatter\n      :hook ((python-mode . darker-reformat-on-save-mode))\n      :config\n      (reformatter-define darker-reformat\n        :program \"darker\"\n        :stdin nil\n        :stdout nil\n        :args (list \"-q\" input-file))\n\n\nthis will automatically reformat the buffer on save.\n\nyou have multiple functions available to launch it manually:\n\n- darker-reformat\n- darker-reformat-region\n- darker-reformat-buffer\n\n__ https://github.com/purcell/emacs-reformatter\n__ https://github.com/jwiegley/use-package\n\nusing as a pre-commit hook\n==========================\n\n*new in version 1.2.1*\n\nto use darker locally as a git pre-commit hook for a python project,\ndo the following:\n\n1. install pre-commit_ in your environment\n   (see `pre-commit installation`_ for details).\n\n2. create a base pre-commit configuration::\n\n       pre-commit sample-config >.pre-commit-config.yaml\n\n3. append to the created ``.pre-commit-config.yaml`` the following lines:\n\n   .. code-block:: yaml\n\n      - repo: https://github.com/akaihola/darker\n        rev: 1.7.2\n        hooks:\n          - id: darker\n\n4. install the git hook scripts and update to the newest version::\n\n       pre-commit install\n       pre-commit autoupdate\n\nwhen auto-updating, care is being taken to protect you from possible incompatibilities\nintroduced by black updates. see `guarding against black compatibility breakage`_ for\nmore information.\n\nif you'd prefer to not update but keep a stable pre-commit setup, you can pin black and\nother reformatter/linter tools you use to known compatible versions, for example:\n\n.. code-block:: yaml\n\n   - repo: https://github.com/akaihola/darker\n     rev: 1.7.2\n     hooks:\n       - id: darker\n         args:\n           - --isort\n           - --lint mypy\n           - --lint flake8\n           - --lint pylint\n         additional_dependencies:\n           - black==22.12.0\n           - isort==5.11.4\n           - mypy==0.990\n           - flake8==5.0.4\n           - pylint==2.15.5\n\n.. _pre-commit: https://pre-commit.com/\n.. _pre-commit installation: https://pre-commit.com/#installation\n\n\nusing arguments\n---------------\n\nyou can provide arguments, such as enabling isort, by specifying ``args``.\nnote the inclusion of the isort python package under ``additional_dependencies``:\n\n.. code-block:: yaml\n\n   - repo: https://github.com/akaihola/darker\n     rev: 1.7.2\n     hooks:\n       - id: darker\n         args: [--isort]\n         additional_dependencies:\n           - isort~=5.9\n\n\ngithub actions integration\n==========================\n\nyou can use darker within a github actions workflow\nwithout setting your own python environment.\ngreat for enforcing that modifications and additions to your code\nmatch the black_ code style.\n\ncompatibility\n-------------\n\nthis action is known to support all github-hosted runner oses. in addition, only\npublished versions of darker are supported (i.e. whatever is available on pypi).\nyou can `search workflows in public github repositories`_ to see how darker is being\nused.\n\n.. _search workflows in public github repositories: https://github.com/search?q=%22uses%3a+akaihola%2fdarker%22+path%3a%2f%5e.github%5c%2fworkflows%5c%2f.*%2f&type=code\n\nusage\n-----\n\ncreate a file named ``.github/workflows/darker.yml`` inside your repository with:\n\n.. code-block:: yaml\n\n   name: lint\n\n   on: [push, pull_request]\n\n   jobs:\n     lint:\n       runs-on: ubuntu-latest\n       steps:\n         - uses: actions/checkout@v3\n           with:\n             fetch-depth: 0 \n         - uses: actions/setup-python@v4\n         - uses: akaihola/darker@1.7.2\n           with:\n             options: \"--check --diff --isort --color\"\n             src: \"./src\"\n             version: \"~=1.7.2\"\n             lint: \"flake8,pylint==2.13.1\"\n\nthere needs to be a working python environment, set up using ``actions/setup-python``\nin the above example. darker will be installed in an isolated virtualenv to prevent\nconflicts with other workflows.\n\n``\"uses:\"`` specifies which darker release to get the github action definition from.\nwe recommend to pin this to a specific release.\n``\"version:\"`` specifies which version of darker to run in the github action.\nit defaults to the same version as in ``\"uses:\"``,\nbut you can force it to use a different version as well.\ndarker versions available from pypi are supported, as well as commit shas or branch\nnames, prefixed with an ``@`` symbol (e.g. ``version: \"@master\"``).\n\nthe ``revision: \"master...\"`` (or ``\"main...\"``) option instructs darker\nto compare the current branch to the branching point from main branch\nwhen determining which source code lines have been changed.\nif omitted, the darker github action will determine the commit range automatically.\n\n``\"src:\"`` defines the root directory to run darker for.\nthis is typically the source tree, but you can use ``\".\"`` (the default)\nto also reformat python files like ``\"setup.py\"`` in the root of the whole repository.\n\nyou can also configure other arguments passed to darker via ``\"options:\"``.\nit defaults to ``\"--check --diff --color\"``.\nyou can e.g. add ``\"--isort\"`` to sort imports, or ``\"--verbose\"`` for debug logging.\n\nto run linters through darker, you can provide a comma separated list of linters using\nthe ``lint:`` option. only ``flake8``, ``pylint`` and ``mypy`` are supported. other\nlinters may or may not work with darker, depending on their message output format.\nversions can be constrained using ``pip`` syntax, e.g. ``\"flake8>=3.9.2\"``.\n\n*new in version 1.1.0:*\ngithub actions integration. modeled after how black_ does it,\nthanks to black authors for the example!\n\n*new in version 1.4.1:*\nthe ``revision:`` option, with smart default value if omitted.\n\n*new in version 1.5.0:*\nthe ``lint:`` option.\n\n\n.. _using linters:\n\nusing linters\n=============\n\none way to use darker is to filter linter output to only those linter messages\nwhich appeared after the modifications to source code files,\nas well as old messages which concern modified lines.\ndarker supports any linter with output in one of the following formats::\n\n    <file>:<linenum>: <description>\n    <file>:<linenum>:<col>: <description>\n\nmost notably, the following linters/checkers have been verified to work with darker:\n\n- mypy_ for static type checking\n- pylint_ for generic static checking of code\n- flake8_ for style guide enforcement\n- `cov_to_lint.py`_ for test coverage\n\n*new in version 1.1.0:* support for mypy_, pylint_, flake8_ and compatible linters.\n\n*new in version 1.2.0:* support for test coverage output using `cov_to_lint.py`_.\n\nto run a linter, use the ``--lint`` / ``-l`` command line option with the linter\ncommand or a full command line to pass to a linter. some examples:\n\n- ``-l flake8``: enforce the python style guide using flake8_\n- ``-l \"mypy --strict\"``: do static type checking using mypy_\n- ``--lint=\"pylint --ignore='setup.py'\"\"``: analyze code using pylint_\n- ``-l cov_to_lint.py``: read ``.coverage`` and list non-covered modified lines\n\n**note:** full command lines aren't fully tested on windows. see issue `#456`_ for a\npossible bug.\n\ndarker also groups linter output into blocks of consecutive lines\nseparated by blank lines.\nhere's an example of `cov_to_lint.py`_ output::\n\n    $ darker --revision 0.1.0.. --check --lint cov_to_lint.py src\n    src/darker/__main__.py:94:  no coverage:             logger.debug(\"no changes in %s after isort\", src)\n    src/darker/__main__.py:95:  no coverage:             break\n\n    src/darker/__main__.py:125: no coverage:         except notequivalenterror:\n\n    src/darker/__main__.py:130: no coverage:             if context_lines == max_context_lines:\n    src/darker/__main__.py:131: no coverage:                 raise\n    src/darker/__main__.py:132: no coverage:             logger.debug(\n\n+-----------------------------------------------------------------------+\n|                               \u26a0 note \u26a0                                |\n+=======================================================================+\n| don't enable linting on the command line or in the configuration when |\n| running darker as a reformatter in vscode. you will confuse vscode    |\n| with unexpected output from darker, as it only expect black's output  |\n+-----------------------------------------------------------------------+\n\n.. _mypy: https://pypi.org/project/mypy\n.. _pylint: https://pypi.org/project/pylint\n.. _flake8: https://pypi.org/project/flake8\n.. _cov_to_lint.py: https://gist.github.com/akaihola/2511fe7d2f29f219cb995649afd3d8d2\n.. _#456: https://github.com/akaihola/darker/issues/456\n\n\nsyntax highlighting\n===================\n\ndarker automatically enables syntax highlighting for the ``--diff``,\n``-d``/``--stdout`` and ``-l``/``--lint`` options if it's running on a terminal and the\npygments_ package is installed.\n\nyou can force enable syntax highlighting on non-terminal output using\n\n- the ``color = true`` option in the ``[tool.darker]`` section of ``pyproject.toml`` of\n  your python project's root directory,\n- the ``py_colors=1`` environment variable, and\n- the ``--color`` command line option for ``darker``.\n  \nyou can force disable syntax highlighting on terminal output using\n\n- the ``color = false`` option in ``pyproject.toml``,\n- the ``py_colors=0`` environment variable, and\n- the ``--no-color`` command line option.\n\nin the above lists, latter configuration methods override earlier ones, so the command\nline options always take highest precedence.\n\n.. _pygments: https://pypi.org/project/pygments/\n\n\nguarding against black compatibility breakage\n=============================================\n\ndarker accesses some black internals which don't belong to its public api. darker is\nthus subject to becoming incompatible with future versions of black.\n\nto protect users against such breakage, we test darker daily against the `black main\nbranch`_ and strive to proactively fix any potential incompatibilities through this\nprocess. if a commit to black ``main`` branch introduces an incompatibility with\ndarker, we will release a first patch version for darker that prevents upgrading black\nand a second patch version that fixes the incompatibility. a hypothetical example:\n\n1. darker 9.0.0; black 35.12.0\n   -> ok\n2. darker 9.0.0; black ``main`` (after 35.12.0)\n   -> error on ci test-future_ workflow\n3. darker 9.0.1 released, with constraint ``black<=35.12.0``\n   -> ok\n4. black 36.1.0 released, but darker 9.0.1 prevents upgrade; black 35.12.0\n   -> ok\n5. darker 9.0.2 released with a compatibility fix, constraint removed; black 36.1.0\n   -> ok\n\nif a black release introduces an incompatibility before the second darker patch version\nthat fixes it, the first darker patch version will downgrade black to the latest\ncompatible version:\n\n1. darker 9.0.0; black 35.12.0\n   -> ok\n2. darker 9.0.0; black 36.1.0\n   -> error\n3. darker 9.0.1, constraint ``black<=35.12.0``; downgrades to black 35.12.0\n   -> ok\n4. darker 9.0.2 released with a compatibility fix, constraint removed; black 36.1.0\n   -> ok\n\nto be completely safe, you can pin both darker and black to known good versions, but\nthis may prevent you from receiving improvements in black. \n\nit is recommended to use the '``~=``' \"`compatible release`_\" version specifier for\ndarker to ensure you have the latest version before the next major release that may\ncause compatibility issues. \n\nsee issue `#382`_ and pr `#430`_ for more information.\n\n.. _compatible release: https://peps.python.org/pep-0440/#compatible-release\n.. _black main branch: https://github.com/psf/black/commits/main\n.. _test-future: https://github.com/akaihola/darker/blob/master/.github/workflows/test-future.yml\n.. _#382: https://github.com/akaihola/darker/issues/382\n.. _#430: https://github.com/akaihola/darker/issues/430\n\n\nhow does it work?\n=================\n\ndarker takes a ``git diff`` of your python files,\nrecords which lines of current files have been edited or added since the last commit.\nit then runs black_ and notes which chunks of lines were reformatted.\nfinally, only those reformatted chunks on which edited lines fall (even partially)\nare applied to the edited file.\n\nalso, in case the ``--isort`` option was specified,\nisort_ is run on each edited file before applying black_.\nsimilarly, each linter requested using the `--lint <command>` option is run,\nand only those linting messages are displayed which appeared after the modifications to\nthe source code files,\nor which were there already before but now fall on modified lines.\n\n\nlicense\n=======\n\nbsd. see ``license.rst``.\n\n\nprior art\n=========\n\n- black-macchiato__\n- darken__ (deprecated in favor of darker; thanks carreau__ for inspiration!)\n\n__ https://github.com/wbolster/black-macchiato\n__ https://github.com/carreau/darken\n__ https://github.com/carreau\n\n\ninteresting code formatting and analysis projects to watch\n==========================================================\n\nthe following projects are related to black_ or darker in some way or another.\nsome of them we might want to integrate to be part of a darker run.\n\n- blacken-docs__ \u2013 run black_ on python code blocks in documentation files\n- blackdoc__ \u2013 run black_ on documentation code snippets\n- velin__ \u2013 reformat docstrings that follow the numpydoc__ convention\n- diff-cov-lint__ \u2013 pylint and coverage reports for git diff only\n- xenon__ \u2013 monitor code complexity\n- pyupgrade__ \u2013 upgrade syntax for newer versions of the language (see `#51`_)\n- yapf_ \u2013 google's python formatter\n- yapf_diff__ \u2013 apply yapf_ or other formatters to modified lines only\n\n__ https://github.com/asottile/blacken-docs\n__ https://github.com/keewis/blackdoc\n__ https://github.com/carreau/velin\n__ https://pypi.org/project/numpydoc\n__ https://gitlab.com/sverentsov/diff-cov-lint\n__ https://github.com/rubik/xenon\n__ https://github.com/asottile/pyupgrade\n__ https://github.com/google/yapf/blob/main/yapf/third_party/yapf_diff/yapf_diff.py\n.. _yapf: https://github.com/google/yapf\n.. _#51: https://github.com/akaihola/darker/pull/51\n\n\ncontributors \u2728\n===============\n\nsee readme.rst_ for the list of contributors.\n\nthis project follows the all-contributors_ specification.\ncontributions of any kind are welcome!\n\n.. _readme.rst: https://github.com/akaihola/darker/blob/master/readme.rst\n.. _emoji key: https://allcontributors.org/docs/en/emoji-key\n.. _all-contributors: https://allcontributors.org\n\n\ngithub stars trend\n==================\n\n|stargazers|_\n\n.. |stargazers| image:: https://starchart.cc/akaihola/darker.svg\n.. _stargazers: https://starchart.cc/akaihola/darker\n",
  "docs_url": null,
  "keywords": "",
  "license": "bsd",
  "name": "darker",
  "package_url": "https://pypi.org/project/darker/",
  "project_url": "https://pypi.org/project/darker/",
  "project_urls": {
    "Change Log": "https://github.com/akaihola/darker/blob/master/CHANGES.rst",
    "Homepage": "https://github.com/akaihola/darker",
    "News": "https://github.com/akaihola/darker/discussions/categories/announcements",
    "Source Code": "https://github.com/akaihola/darker"
  },
  "release_url": "https://pypi.org/project/darker/1.7.2/",
  "requires_dist": [],
  "requires_python": ">=3.7",
  "summary": "apply black formatting only in regions changed since last commit",
  "version": "1.7.2",
  "releases": [],
  "developers": [
    "13725+akaihola@users.noreply.github.com",
    "antti_kaihola"
  ],
  "kwds": "badge py_colors py pygments_ _pygments",
  "license_kwds": "bsd",
  "libtype": "pypi",
  "id": "pypi_darker",
  "homepage": "https://github.com/akaihola/darker",
  "release_count": 23,
  "dependency_ids": []
}