{
  "classifiers": [
    "development status :: 4 - beta",
    "programming language :: python",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "programming language :: python :: implementation :: cpython",
    "programming language :: python :: implementation :: pypy"
  ],
  "description": "# hologres-vector\n\n[![pypi - version](https://img.shields.io/pypi/v/hologres-vector.svg)](https://pypi.org/project/hologres-vector)\n[![pypi - python version](https://img.shields.io/pypi/pyversions/hologres-vector.svg)](https://pypi.org/project/hologres-vector)\n\nuse [hologres](https://www.alibabacloud.com/product/hologres) to store large amount of vector data and perform high speed k-nearest-neighbour search!\n\n-----\n\n**table of contents**\n\n- [installation](#installation)\n- [usage](#usage)\n- [license](#license)\n\n## installation\n\n```console\npip install hologres-vector\n```\n\n## usage\n\n### \u8f93\u5165hologres\u5b9e\u4f8b\u8fde\u63a5\u4fe1\u606f\n\n```python\nfrom hologres_vector import hologresvector\nimport os\n\nhost = os.environ[\"holo_host\"]\nport = os.environ[\"holo_port\"]\ndbname = os.environ[\"holo_dbname\"]\nuser = os.environ[\"holo_user\"]\npassword = os.environ[\"holo_password\"]\n\nconnection_string = hologresvector.connection_string_from_db_params(host, port, dbname, user, password)\n```\n\n### \u4e0e\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5\u5e76\u5efa\u8868\n\n\u5efa\u8868\u65f6\uff0c\u9700\u8981\u6307\u5b9a\u5411\u91cf\u7684\u7ef4\u6570\uff0c\u4ee5\u53ca\u8868\u4e2d\u7684\u9664\u5411\u91cf\u6570\u636e\u3001\u4e3b\u952e\u3001json\u5143\u6570\u636e\u4ee5\u5916\u7684\u5176\u4ed6\u5f3aschema\u5217\u3002\n\n```python\ntable_name = \"test_table\"\nholo = hologresvector(\n    connection_string,     # \u8fde\u63a5\u4fe1\u606f\n    5,                     # \u5411\u91cf\u7ef4\u5ea6\n    table_name=table_name, # \u8868\u540d\n    table_schema={\"t\": \"text\", \"date\": \"timestamptz\", \"i\": \"int\"},\n    distance_method=\"squaredeuclidean\", # \u8ddd\u79bb\u51fd\u6570\uff0c\u63a8\u8350\u7528\u9ed8\u8ba4\u503c\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\"euclidean\"\u6216\"innerproduct\"\n    pre_delete_table=false, # \u82e5\u8868\u5df2\u5b58\u5728\u5219\u5148\u5220\u9664\n)\n```\n\n### \u63d2\u5165\u5411\u91cf\u6570\u636e\u4e0e\u5bf9\u5e94\u7684\u5176\u4ed6\u5217\u4fe1\u606f\n\n\u652f\u6301\u5f3aschema\u5217 `schema_datas` \u4e0e\u4e00\u4e2ajson\u5217 `metadatas`\u3002\n\n\u8be5\u63a5\u53e3\u4e3a\u6279\u91cf\u5bfc\u5165\uff0c\u5185\u90e8\u4f1a\u5c06\u8f93\u5165\u6570\u636e\u5207\u5206\u4e3a512\u884c\u7684\u6279\u8fdb\u884c\u63d2\u5165\u3002\n\n```python\nvectors = [[0,0,0,0,0], [1,1,1,1,1], [2,2,2,2,2]]\nids = ['0', '1', '2'] # primary key\nschema_datas = [\n    {'t': 'text 0', 'date': '2023-08-02 18:30:00', 'i': 0},\n    {'t': 'text 1', 'date': '2023-08-02 19:30:00', 'i': 1},\n    {'t': 'text 2', 'date': '2023-08-02 20:30:00', 'i': 2},\n]\nmetadatas = [\n    {'a': \"hello\"},\n    {'b': 123},\n    {},\n]\n\nholo.upsert_vectors(vectors, ids, schema_datas=schema_datas, metadatas=metadatas)\n```\n\n### \u67e5\u8be2\n\n1. \u666e\u901a\u67e5\u8be2\uff1a\u4ece\u6570\u636e\u5e93\u4e2d\u4efb\u53d6\u4e00\u6761\u6570\u636e\uff08\u53ef\u52a0filter\uff09\n\n```python\nholo.query(limit=1)\n```\n\n    [{'id': '2', 'vector': [2.0, 2.0, 2.0, 2.0, 2.0], 'metadata': {}}]\n\n2. \u8fd1\u90bb\u67e5\u8be2\uff1a\u6839\u636e\u5411\u91cf\u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u6700\u8fd1\u90bb\n\n```python\nholo.search([0.1, 0.1, 0.1, 0.1, 0.1], k=2, select_columns=['t'])\n```\n\n    [{'id': '0', 'metadata': {'a': 'hello'}, 'distance': 0.05, 't': 'text 0'},\n    {'id': '1', 'metadata': {'b': 123}, 'distance': 4.05, 't': 'text 1'}]\n\n3. \u878d\u5408\u67e5\u8be2\uff1a\u6839\u636e\u5411\u91cf\u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u6700\u8fd1\u90bb\uff0c\u5e76\u7528\u5176\u4ed6\u5217\u67e5\u8be2\u6761\u4ef6\u7ea6\u675f\n\n```python\nholo.search([0.1, 0.1, 0.1, 0.1, 0.1], k=2, schema_data_filters={'t': 'text 1'})\n```\n\n    [{'id': '1', 'metadata': {'b': 123}, 'distance': 4.05}]\n\n### \u66ff\u6362\uff08upsert\uff09\n\n\u672csdk\u76ee\u524d\u9ed8\u8ba4\u4f7f\u7528\u6839\u636e\u4e3b\u952e`id`\u7684\u4e00\u79cd\u63d2\u5165\u66ff\u6362\u7b56\u7565\uff1a\u5f53\u63d2\u5165\u7684\u6570\u636e\u548c\u5df2\u6709\u6570\u636e\u4e3b\u952e\u76f8\u540c\u65f6\uff0c\u7528\u65b0\u63d2\u5165\u7684\u6574\u884c\u66ff\u6362\u5df2\u6709\u7684\u884c\u3002\n\n```python\n# \u5148\u63d2\u5165\u4e00\u884cid\u4e3a3\u7684\u6570\u636e\nholo.upsert_vectors([[3, 3, 3, 3, 3]], [3], schema_datas=[{'t': 'old data'}])\n# \u518d\u63d2\u5165\u4e00\u884cid\u4e3a3\u7684\u6570\u636e\uff0c\u4e0b\u9762\u8fd9\u884c\u4f1a\u5c06\u4e0a\u9762\u7684\u6574\u884c\u66ff\u6362\u6389\nholo.upsert_vectors([[-3, -3, -3, -3, -3]], [3], schema_datas=[{'t': 'new data'}])\n\nholo.query(schema_data_filters={'id': '3'})\n```\n\n    [{'id': '3', 'vector': [-3.0, -3.0, -3.0, -3.0, -3.0], 'metadata': {}}]\n\n### \u5220\u9664\n\n\u53ef\u4f7f\u7528\u4e0e\u67e5\u8be2\u683c\u5f0f\u76f8\u540c\u7684filter\u6761\u4ef6\u6765\u5bf9\u6570\u636e\u8fdb\u884c\u90e8\u5206\u5220\u9664\u3002\n\n```python\nholo.delete_vectors(schema_data_filters={'id': '2'})\nholo.query(limit=10)\n```\n\n    [{'id': '0', 'vector': [0.0, 0.0, 0.0, 0.0, 0.0], 'metadata': {'a': 'hello'}},\n     {'id': '1', 'vector': [1.0, 1.0, 1.0, 1.0, 1.0], 'metadata': {'b': 123}},\n     {'id': '3', 'vector': [-3.0, -3.0, -3.0, -3.0, -3.0], 'metadata': {}}]\n\n```python\nholo.delete_vectors() # \u5220\u9664\u5168\u90e8\u6570\u636e\n```\n\n```python\nholo.query(limit=10)\n```\n\n## license\n\n`hologres-vector` is distributed under the terms of the [mit](https://spdx.org/licenses/mit.html) license.\n",
  "docs_url": null,
  "keywords": "",
  "license": "",
  "name": "hologres-vector",
  "package_url": "https://pypi.org/project/hologres-vector/",
  "project_url": "https://pypi.org/project/hologres-vector/",
  "project_urls": {
    "Documentation": "https://github.com/unknown/hologres-vector#readme",
    "Issues": "https://github.com/unknown/hologres-vector/issues",
    "Source": "https://github.com/unknown/hologres-vector"
  },
  "release_url": "https://pypi.org/project/hologres-vector/0.0.9/",
  "requires_dist": [
    "psycopg2-binary",
    "typing",
    "uuid"
  ],
  "requires_python": ">=3.7",
  "summary": "",
  "version": "0.0.9",
  "releases": [],
  "developers": [
    "zhaochanggeng.zcg@alibaba-inc.com"
  ],
  "kwds": "hologres_vector hologresvector hologres \u8f93\u5165hologres\u5b9e\u4f8b\u8fde\u63a5\u4fe1\u606f svg",
  "license_kwds": "",
  "libtype": "pypi",
  "id": "pypi_hologres_vector",
  "homepage": "",
  "release_count": 9,
  "dependency_ids": [
    "pypi_psycopg2_binary",
    "pypi_typing",
    "pypi_uuid"
  ]
}