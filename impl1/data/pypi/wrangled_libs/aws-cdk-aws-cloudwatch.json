{
  "classifiers": [
    "development status :: 7 - inactive",
    "framework :: aws cdk",
    "framework :: aws cdk :: 1",
    "intended audience :: developers",
    "license :: osi approved",
    "operating system :: os independent",
    "programming language :: javascript",
    "programming language :: python :: 3 :: only",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "typing :: typed"
  ],
  "description": "# amazon cloudwatch construct library\n\n<!--begin stability banner-->---\n\n\n![end-of-support](https://img.shields.io/badge/end--of--support-critical.svg?style=for-the-badge)\n\n> aws cdk v1 has reached end-of-support on 2023-06-01.\n> this package is no longer being updated, and users should migrate to aws cdk v2.\n>\n> for more information on how to migrate, see the [*migrating to aws cdk v2* guide](https://docs.aws.amazon.com/cdk/v2/guide/migrating-v2.html).\n\n---\n<!--end stability banner-->\n\n## metric objects\n\nmetric objects represent a metric that is emitted by aws services or your own\napplication, such as `cpuusage`, `failurecount` or `bandwidth`.\n\nmetric objects can be constructed directly or are exposed by resources as\nattributes. resources that expose metrics will have functions that look\nlike `metricxxx()` which will return a metric object, initialized with defaults\nthat make sense.\n\nfor example, `lambda.function` objects have the `fn.metricerrors()` method, which\nrepresents the amount of errors reported by that lambda function:\n\n```python\n# fn: lambda.function\n\n\nerrors = fn.metric_errors()\n```\n\n`metric` objects can be account and region aware. you can specify `account` and `region` as properties of the metric, or use the `metric.attachto(construct)` method. `metric.attachto()` will automatically copy the `region` and `account` fields of the `construct`, which can come from anywhere in the construct tree.\n\nyou can also instantiate `metric` objects to reference any\n[published metric](https://docs.aws.amazon.com/amazoncloudwatch/latest/monitoring/aws-services-cloudwatch-metrics.html)\nthat's not exposed using a convenience method on the cdk construct.\nfor example:\n\n```python\nhosted_zone = route53.hostedzone(self, \"myhostedzone\", zone_name=\"example.org\")\nmetric = cloudwatch.metric(\n    namespace=\"aws/route53\",\n    metric_name=\"dnsqueries\",\n    dimensions_map={\n        \"hostedzoneid\": hosted_zone.hosted_zone_id\n    }\n)\n```\n\n### instantiating a new metric object\n\nif you want to reference a metric that is not yet exposed by an existing construct,\nyou can instantiate a `metric` object to represent it. for example:\n\n```python\nmetric = cloudwatch.metric(\n    namespace=\"mynamespace\",\n    metric_name=\"mymetric\",\n    dimensions_map={\n        \"processingstep\": \"download\"\n    }\n)\n```\n\n### metric math\n\nmath expressions are supported by instantiating the `mathexpression` class.\nfor example, a math expression that sums two other metrics looks like this:\n\n```python\n# fn: lambda.function\n\n\nall_problems = cloudwatch.mathexpression(\n    expression=\"errors + throttles\",\n    using_metrics={\n        \"errors\": fn.metric_errors(),\n        \"faults\": fn.metric_throttles()\n    }\n)\n```\n\nyou can use `mathexpression` objects like any other metric, including using\nthem in other math expressions:\n\n```python\n# fn: lambda.function\n# all_problems: cloudwatch.mathexpression\n\n\nproblem_percentage = cloudwatch.mathexpression(\n    expression=\"(problems / invocations) * 100\",\n    using_metrics={\n        \"problems\": all_problems,\n        \"invocations\": fn.metric_invocations()\n    }\n)\n```\n\n### search expressions\n\nmath expressions also support search expressions. for example, the following\nsearch expression returns all cpuutilization metrics that it finds, with the\ngraph showing the average statistic with an aggregation period of 5 minutes:\n\n```python\ncpu_utilization = cloudwatch.mathexpression(\n    expression=\"search('{aws/ec2,instanceid} metricname=\\\"cpuutilization\\\"', 'average', 300)\",\n\n    # specifying '' as the label suppresses the default behavior\n    # of using the expression as metric label. this is especially appropriate\n    # when using expressions that return multiple time series (like search()\n    # or metrics()), to show the labels of the retrieved metrics only.\n    label=\"\"\n)\n```\n\ncross-account and cross-region search expressions are also supported. use\nthe `searchaccount` and `searchregion` properties to specify the account\nand/or region to evaluate the search expression against.\n\n### aggregation\n\nto graph or alarm on metrics you must aggregate them first, using a function\nlike `average` or a percentile function like `p99`. by default, most metric objects\nreturned by cdk libraries will be configured as `average` over `300 seconds` (5 minutes).\nthe exception is if the metric represents a count of discrete events, such as\nfailures. in that case, the metric object will be configured as `sum` over `300 seconds`, i.e. it represents the number of times that event occurred over the\ntime period.\n\nif you want to change the default aggregation of the metric object (for example,\nthe function or the period), you can do so by passing additional parameters\nto the metric function call:\n\n```python\n# fn: lambda.function\n\n\nminute_error_rate = fn.metric_errors(\n    statistic=\"avg\",\n    period=duration.minutes(1),\n    label=\"lambda failure rate\"\n)\n```\n\nthis function also allows changing the metric label or color (which will be\nuseful when embedding them in graphs, see below).\n\n> rates versus sums\n>\n> the reason for using `sum` to count discrete events is that *some* events are\n> emitted as either `0` or `1` (for example `errors` for a lambda) and some are\n> only emitted as `1` (for example `numberofmessagespublished` for an sns\n> topic).\n>\n> in case `0`-metrics are emitted, it makes sense to take the `average` of this\n> metric: the result will be the fraction of errors over all executions.\n>\n> if `0`-metrics are not emitted, the `average` will always be equal to `1`,\n> and not be very useful.\n>\n> in order to simplify the mental model of `metric` objects, we default to\n> aggregating using `sum`, which will be the same for both metrics types. if you\n> happen to know the metric you want to alarm on makes sense as a rate\n> (`average`) you can always choose to change the statistic.\n\n### labels\n\nmetric labels are displayed in the legend of graphs that include the metrics.\n\nyou can use [dynamic labels](https://docs.aws.amazon.com/amazoncloudwatch/latest/monitoring/graph-dynamic-labels.html)\nto show summary information about the displayed time series\nin the legend. for example, if you use:\n\n```python\n# fn: lambda.function\n\n\nminute_error_rate = fn.metric_errors(\n    statistic=\"sum\",\n    period=duration.hours(1),\n\n    # show the maximum hourly error count in the legend\n    label=\"[max: ${max}] lambda failure rate\"\n)\n```\n\nas the metric label, the maximum value in the visible range will\nbe shown next to the time series name in the graph's legend.\n\nif the metric is a math expression producing more than one time series, the\nmaximum will be individually calculated and shown for each time series produce\nby the math expression.\n\n## alarms\n\nalarms can be created on metrics in one of two ways. either create an `alarm`\nobject, passing the `metric` object to set the alarm on:\n\n```python\n# fn: lambda.function\n\n\ncloudwatch.alarm(self, \"alarm\",\n    metric=fn.metric_errors(),\n    threshold=100,\n    evaluation_periods=2\n)\n```\n\nalternatively, you can call `metric.createalarm()`:\n\n```python\n# fn: lambda.function\n\n\nfn.metric_errors().create_alarm(self, \"alarm\",\n    threshold=100,\n    evaluation_periods=2\n)\n```\n\nthe most important properties to set while creating an alarms are:\n\n* `threshold`: the value to compare the metric against.\n* `comparisonoperator`: the comparison operation to use, defaults to `metric >= threshold`.\n* `evaluationperiods`: how many consecutive periods the metric has to be\n  breaching the the threshold for the alarm to trigger.\n\nto create a cross-account alarm, make sure you have enabled [cross-account functionality](https://docs.aws.amazon.com/amazoncloudwatch/latest/monitoring/cross-account-cross-region.html) in cloudwatch. then, set the `account` property in the `metric` object either manually or via the `metric.attachto()` method.\n\n### alarm actions\n\nto add actions to an alarm, use the integration classes from the\n`@aws-cdk/aws-cloudwatch-actions` package. for example, to post a message to\nan sns topic when an alarm breaches, do the following:\n\n```python\nimport aws_cdk.aws_cloudwatch_actions as cw_actions\n# alarm: cloudwatch.alarm\n\n\ntopic = sns.topic(self, \"topic\")\nalarm.add_alarm_action(cw_actions.snsaction(topic))\n```\n\n#### notification formats\n\nalarms can be created in one of two \"formats\":\n\n* with \"top-level parameters\" (these are the classic style of cloudwatch alarms).\n* with a list of metrics specifications (these are the modern style of cloudwatch alarms).\n\nfor backwards compatibility, cdk will try to create classic, top-level cloudwatch alarms\nas much as possible, unless you are using features that cannot be expressed in that format.\nfeatures that require the new-style alarm format are:\n\n* metric math\n* cross-account metrics\n* labels\n\nthe difference between these two does not impact the functionality of the alarm\nin any way, *except* that the format of the notifications the alarm generates is\ndifferent between them. this affects both the notifications sent out over sns,\nas well as the eventbridge events generated by this alarm. if you are writing\ncode to consume these notifications, be sure to handle both formats.\n\n### composite alarms\n\n[composite alarms](https://aws.amazon.com/about-aws/whats-new/2020/03/amazon-cloudwatch-now-allows-you-to-combine-multiple-alarms/)\ncan be created from existing alarm resources.\n\n```python\n# alarm1: cloudwatch.alarm\n# alarm2: cloudwatch.alarm\n# alarm3: cloudwatch.alarm\n# alarm4: cloudwatch.alarm\n\n\nalarm_rule = cloudwatch.alarmrule.any_of(\n    cloudwatch.alarmrule.all_of(\n        cloudwatch.alarmrule.any_of(alarm1,\n            cloudwatch.alarmrule.from_alarm(alarm2, cloudwatch.alarmstate.ok), alarm3),\n        cloudwatch.alarmrule.not(cloudwatch.alarmrule.from_alarm(alarm4, cloudwatch.alarmstate.insufficient_data))),\n    cloudwatch.alarmrule.from_boolean(false))\n\ncloudwatch.compositealarm(self, \"myawesomecompositealarm\",\n    alarm_rule=alarm_rule\n)\n```\n\n### a note on units\n\nin cloudwatch, metrics datums are emitted with units, such as `seconds` or\n`bytes`. when `metric` objects are given a `unit` attribute, it will be used to\n*filter* the stream of metric datums for datums emitted using the same `unit`\nattribute.\n\nin particular, the `unit` field is *not* used to rescale datums or alarm threshold\nvalues (for example, it cannot be used to specify an alarm threshold in\n*megabytes* if the metric stream is being emitted as *bytes*).\n\nyou almost certainly don't want to specify the `unit` property when creating\n`metric` objects (which will retrieve all datums regardless of their unit),\nunless you have very specific requirements. note that in any case, cloudwatch\nonly supports filtering by `unit` for alarms, not in dashboard graphs.\n\nplease see the following github issue for a discussion on real unit\ncalculations in cdk: https://github.com/aws/aws-cdk/issues/5595\n\n## dashboards\n\ndashboards are set of widgets stored server-side which can be accessed quickly\nfrom the aws console. available widgets are graphs of a metric over time, the\ncurrent value of a metric, or a static piece of markdown which explains what the\ngraphs mean.\n\nthe following widgets are available:\n\n* `graphwidget` -- shows any number of metrics on both the left and right\n  vertical axes.\n* `alarmwidget` -- shows the graph and alarm line for a single alarm.\n* `singlevaluewidget` -- shows the current value of a set of metrics.\n* `textwidget` -- shows some static markdown.\n* `alarmstatuswidget` -- shows the status of your alarms in a grid view.\n\n### graph widget\n\na graph widget can display any number of metrics on either the `left` or\n`right` vertical axis:\n\n```python\n# dashboard: cloudwatch.dashboard\n# execution_count_metric: cloudwatch.metric\n# error_count_metric: cloudwatch.metric\n\n\ndashboard.add_widgets(cloudwatch.graphwidget(\n    title=\"executions vs error rate\",\n\n    left=[execution_count_metric],\n\n    right=[error_count_metric.with(\n        statistic=\"average\",\n        label=\"error rate\",\n        color=cloudwatch.color.green\n    )]\n))\n```\n\nusing the methods `addleftmetric()` and `addrightmetric()` you can add metrics to a graph widget later on.\n\ngraph widgets can also display annotations attached to the left or the right y-axis.\n\n```python\n# dashboard: cloudwatch.dashboard\n\n\ndashboard.add_widgets(cloudwatch.graphwidget(\n    # ...\n\n    left_annotations=[cloudwatch.horizontalannotation(value=1800, label=duration.minutes(30).to_human_string(), color=cloudwatch.color.red), cloudwatch.horizontalannotation(value=3600, label=\"1 hour\", color=\"#2ca02c\")\n    ]\n))\n```\n\nthe graph legend can be adjusted from the default position at bottom of the widget.\n\n```python\n# dashboard: cloudwatch.dashboard\n\n\ndashboard.add_widgets(cloudwatch.graphwidget(\n    # ...\n\n    legend_position=cloudwatch.legendposition.right\n))\n```\n\nthe graph can publish live data within the last minute that has not been fully aggregated.\n\n```python\n# dashboard: cloudwatch.dashboard\n\n\ndashboard.add_widgets(cloudwatch.graphwidget(\n    # ...\n\n    live_data=true\n))\n```\n\nthe graph view can be changed from default 'timeseries' to 'bar' or 'pie'.\n\n```python\n# dashboard: cloudwatch.dashboard\n\n\ndashboard.add_widgets(cloudwatch.graphwidget(\n    # ...\n\n    view=cloudwatch.graphwidgetview.bar\n))\n```\n\n### alarm widget\n\nan alarm widget shows the graph and the alarm line of a single alarm:\n\n```python\n# dashboard: cloudwatch.dashboard\n# error_alarm: cloudwatch.alarm\n\n\ndashboard.add_widgets(cloudwatch.alarmwidget(\n    title=\"errors\",\n    alarm=error_alarm\n))\n```\n\n### single value widget\n\na single-value widget shows the latest value of a set of metrics (as opposed\nto a graph of the value over time):\n\n```python\n# dashboard: cloudwatch.dashboard\n# visitor_count: cloudwatch.metric\n# purchase_count: cloudwatch.metric\n\n\ndashboard.add_widgets(cloudwatch.singlevaluewidget(\n    metrics=[visitor_count, purchase_count]\n))\n```\n\nshow as many digits as can fit, before rounding.\n\n```python\n# dashboard: cloudwatch.dashboard\n\n\ndashboard.add_widgets(cloudwatch.singlevaluewidget(\n    metrics=[],\n\n    full_precision=true\n))\n```\n\n### text widget\n\na text widget shows an arbitrary piece of markdown. use this to add explanations\nto your dashboard:\n\n```python\n# dashboard: cloudwatch.dashboard\n\n\ndashboard.add_widgets(cloudwatch.textwidget(\n    markdown=\"# key performance indicators\"\n))\n```\n\n### alarm status widget\n\nan alarm status widget displays instantly the status of any type of alarms and gives the\nability to aggregate one or more alarms together in a small surface.\n\n```python\n# dashboard: cloudwatch.dashboard\n# error_alarm: cloudwatch.alarm\n\n\ndashboard.add_widgets(\n    cloudwatch.alarmstatuswidget(\n        alarms=[error_alarm]\n    ))\n```\n\nan alarm status widget only showing firing alarms, sorted by state and timestamp:\n\n```python\n# dashboard: cloudwatch.dashboard\n# error_alarm: cloudwatch.alarm\n\n\ndashboard.add_widgets(cloudwatch.alarmstatuswidget(\n    title=\"errors\",\n    alarms=[error_alarm],\n    sort_by=cloudwatch.alarmstatuswidgetsortby.state_updated_timestamp,\n    states=[cloudwatch.alarmstate.alarm]\n))\n```\n\n### query results widget\n\na `logquerywidget` shows the results of a query from logs insights:\n\n```python\n# dashboard: cloudwatch.dashboard\n\n\ndashboard.add_widgets(cloudwatch.logquerywidget(\n    log_group_names=[\"my-log-group\"],\n    view=cloudwatch.logqueryvisualizationtype.table,\n    # the lines will be automatically combined using '\\n|'.\n    query_lines=[\"fields @message\", \"filter @message like /error/\"\n    ]\n))\n```\n\n### custom widget\n\na `customwidget` shows the result of an aws lambda function:\n\n```python\n# dashboard: cloudwatch.dashboard\n\n\n# import or create a lambda function\nfn = lambda_.function.from_function_arn(dashboard, \"function\", \"arn:aws:lambda:us-east-1:123456789012:function:myfn\")\n\ndashboard.add_widgets(cloudwatch.customwidget(\n    function_arn=fn.function_arn,\n    title=\"my lambda baked widget\"\n))\n```\n\nyou can learn more about custom widgets in the [amazon cloudwatch user guide](https://docs.aws.amazon.com/amazoncloudwatch/latest/monitoring/add_custom_widget_dashboard.html).\n\n### dashboard layout\n\nthe widgets on a dashboard are visually laid out in a grid that is 24 columns\nwide. normally you specify x and y coordinates for the widgets on a dashboard,\nbut because this is inconvenient to do manually, the library contains a simple\nlayout system to help you lay out your dashboards the way you want them to.\n\nwidgets have a `width` and `height` property, and they will be automatically\nlaid out either horizontally or vertically stacked to fill out the available\nspace.\n\nwidgets are added to a dashboard by calling `add(widget1, widget2, ...)`.\nwidgets given in the same call will be laid out horizontally. widgets given\nin different calls will be laid out vertically. to make more complex layouts,\nyou can use the following widgets to pack widgets together in different ways:\n\n* `column`: stack two or more widgets vertically.\n* `row`: lay out two or more widgets horizontally.\n* `spacer`: take up empty space\n",
  "docs_url": null,
  "keywords": "",
  "license": "apache-2.0",
  "name": "aws-cdk.aws-cloudwatch",
  "package_url": "https://pypi.org/project/aws-cdk.aws-cloudwatch/",
  "project_url": "https://pypi.org/project/aws-cdk.aws-cloudwatch/",
  "project_urls": {
    "Homepage": "https://github.com/aws/aws-cdk",
    "Source": "https://github.com/aws/aws-cdk.git"
  },
  "release_url": "https://pypi.org/project/aws-cdk.aws-cloudwatch/1.204.0/",
  "requires_dist": [
    "aws-cdk.aws-iam (==1.204.0)",
    "aws-cdk.core (==1.204.0)",
    "constructs (<4.0.0,>=3.3.69)",
    "jsii (<2.0.0,>=1.84.0)",
    "publication (>=0.0.3)",
    "typeguard (~=2.13.3)"
  ],
  "requires_python": "~=3.7",
  "summary": "the cdk construct library for aws::cloudwatch",
  "version": "1.204.0",
  "releases": [],
  "developers": [
    "amazon_web_services"
  ],
  "kwds": "aws_cdk aws_cloudwatch_actions cloudwatch using_metrics metric_invocations",
  "license_kwds": "apache-2.0",
  "libtype": "pypi",
  "id": "pypi_aws_cdk.aws_cloudwatch",
  "homepage": "https://github.com/aws/aws-cdk",
  "release_count": 258,
  "dependency_ids": [
    "pypi_aws_cdk.aws_iam",
    "pypi_aws_cdk.core",
    "pypi_constructs",
    "pypi_jsii",
    "pypi_publication",
    "pypi_typeguard"
  ]
}