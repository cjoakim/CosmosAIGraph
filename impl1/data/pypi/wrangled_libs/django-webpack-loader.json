{
  "classifiers": [
    "environment :: web environment",
    "framework :: django",
    "framework :: django :: 3.2",
    "framework :: django :: 4.0",
    "framework :: django :: 4.1",
    "framework :: django :: 4.2",
    "license :: osi approved :: mit license",
    "programming language :: python",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.12",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9"
  ],
  "description": "# django-webpack-loader\n\n[![build status](https://circleci.com/gh/django-webpack/django-webpack-loader/tree/master.svg?style=svg)](https://circleci.com/gh/django-webpack/django-webpack-loader/tree/master)\n[![coverage status](https://coveralls.io/repos/github/django-webpack/django-webpack-loader/badge.svg?branch=master)](https://coveralls.io/github/django-webpack/django-webpack-loader?branch=master)\n![pyversions](https://img.shields.io/pypi/pyversions/django-webpack-loader)\n![djversions](https://img.shields.io/pypi/djversions/django-webpack-loader)\n\nintegrate webpack bundles in django templates by using a simple template tag:\n\n```html+django\n{% load render_bundle from webpack_loader %}\n\n<html>\n  <head>\n    {% render_bundle 'main' 'css' %}\n  </head>\n</html>\n```\n\nbehind the scenes, django webpack loader consumes a **stats file** generated by [webpack-bundle-tracker](https://github.com/django-webpack/webpack-bundle-tracker) and lets you use the generated bundles in django.\n\na [changelog](changelog.md) is available.\n\n## compatibility\n\ngenerally, python, django, and node lts releases will be supported until eol. check `tests/tox.ini` for details.  \nversions not listed in `tests/tox.ini` may still work, but maintainers will not test them, nor solve issues with them.  \nexamples below are in webpack 5.\n\n## install\n\n```bash\nnpm install --save-dev webpack-bundle-tracker\n\npip install django-webpack-loader\n```\n\n## configuration\n\nfor kick-starting a full example project with opinionated development and production settings, you can check the [`django-react-boilerplate`](https://github.com/vintasoftware/django-react-boilerplate/blob/main/package.json). for a more flexible configuration, keep reading.\n\n### configuring `webpack-bundle-tracker`\n\nbefore configuring `django-webpack-loader`, let's first configure what's necessary on `webpack-bundle-tracker` side. update your webpack configuration file (it's usually on `webpack.config.js` in the project root). make sure your file looks like this (adapt to your needs):\n\n```javascript\nconst path = require(\"path\");\nconst webpack = require(\"webpack\");\nconst bundletracker = require(\"webpack-bundle-tracker\");\n\nmodule.exports = {\n  context: __dirname,\n  entry: \"./assets/js/index\",\n  output: {\n    path: path.resolve(__dirname, \"assets/webpack_bundles/\"),\n    publicpath: \"auto\", // necessary for cdns/s3/blob storages\n    filename: \"[name]-[contenthash].js\",\n  },\n  plugins: [\n    new bundletracker({ path: __dirname, filename: \"webpack-stats.json\" }),\n  ],\n};\n```\n\nthe configuration above expects the `index.js` (the app entrypoint file) to live inside the `/assets/js/` directory (this guide going forward will assume that all frontend related files are placed inside the `/assets/` directory, with the different kinds of files arranged within its subdirectories).\n\nthe generated compiled files will be placed inside the `/assets/webpack_bundles/` directory and the **stats file with the information regarding the bundles and assets** (`webpack-stats.json`) will be stored in the project root. you may add `webpack-stats.json` to your `.gitignore`.\n\n### configuring the django settings file\n\nfirst of all, add `webpack_loader` to `installed_apps`.\n\n```python\ninstalled_apps = (\n    ...\n    'webpack_loader',\n    ...\n)\n```\n\nbelow is the recommended setup for the django settings file when using `django-webpack-loader`.\n\n```python\nstaticfiles_dirs = (\n    os.path.join(base_dir, 'assets'),\n)\n\nwebpack_loader = {\n    'default': {\n        'bundle_dir_name': 'webpack_bundles/',\n        'cache': not debug,\n        'stats_file': os.path.join(base_dir, 'webpack-stats.json'),\n        'poll_interval': 0.1,\n        'ignore': [r'.+\\.hot-update.js', r'.+\\.map'],\n    }\n}\n```\n\nnote that you must set the path where you're keeping your static assets and webpack bundles in `staticfiles_dirs`.\n\nfor that setup, we're using the `debug` variable provided by django. since in a production environment (`debug = false`) the assets files won't constantly change, we can safely cache the results (`cache=true`) and optimize our flow, as `django-webpack-loader` will read the stats file only once and store the assets paths in memory. if `cache=false`, we'll always read the stats file to get the assets paths.\n\nthe `stats_file` parameter represents the output file produced by `webpack-bundle-tracker`. since in the webpack configuration file we've named it `webpack-stats.json` and stored it on the project root, we must replicate that setting on the backend side.\n\nduring development, the stats file will change often, therefore we want to always poll for its updated version (every 0.1s, as defined on `poll_interval`).\n\n> \u26a0\ufe0f in production (`debug=false`), we'll only fetch the stats file once, so `poll_interval` is ignored.\n\n`ignore` is a list of regular expressions. if a file generated by webpack matches one of the expressions, the file will not be included in the template.\n\n### compiling the frontend assets\n\nusing webpack, you must generate the frontend bundle along with the stats file using `webpack-bundle-tracker` before using `django-webpack-loader` in django templates. note you'll probably want different configurations in development vs. production. the pipeline should look like this:\n\n```mermaid\nflowchart td\n    a(\"run webpack\")\n    a --> |css, js, imgs, fonts| b(collect compiled assets)\n    a --> |webpack-stats.json| c(read on django templates)\n```\n\nin development, we can simply do:\n\n```bash\n# in one shell\nnpx webpack --mode=development --watch\n\n# in another shell\npython manage.py runserver\n```\n\ncheck [the full example for development here](https://github.com/django-webpack/django-webpack-loader/tree/master/examples/simple).\n\naditionally, hot reload is available through a specific config. check [this section](#hot-reload).\n\n> \u26a0\ufe0f for compiling and serving the frontend assets in production, check [this section](#using-in-production).\n\n## usage\n\nin order to render the frontend code into the django templates, we use the `render_bundle` template tag.\n\nits behavior is to accept a string with the name of an entrypoint from the stats file (in our case, we're using `main`, which is [the default](https://webpack.js.org/concepts/entry-points/#single-entry-shorthand-syntax)) and it'll proceed to include all files under that entrypoint. you can read more about the entrypoints concept [here](https://webpack.js.org/concepts/entry-points/).\n\n> \u26a0\ufe0f you can also check an example on how to use multiple `entry` values [here](https://github.com/django-webpack/django-webpack-loader/tree/master/examples/code-splitting).\n\nbelow is the basic usage for `render_bundle` within a template:\n\n```html+django\n{% load render_bundle from webpack_loader %}\n\n<html>\n  <head>\n    {% render_bundle 'main' 'css' %}\n  </head>\n</html>\n```\n\nthat will render the proper `<script>` and `<link>` tags needed in your template.\n\n## using in tests\n\nto run tests where `render_bundle` shows up, since we don't have `webpack-bundle-tracker` at that point to generate the stats file, the calls to render the bundle will fail. the solution is to use the `fakewebpackloader` in your test settings:\n\n```python\nwebpack_loader['default']['loader_class'] = 'webpack_loader.loaders.fakewebpackloader'\n```\n\n## using in production\n\nthe recommended apporach is to have a production pipeline that generates the frontend bundle along with the stats file during the **deployment phase**. we recommend keeping the generated bundles and the stats file outside the version control. in other words, add `webpack-stats.json` and `assets/webpack_bundles/` to your `.gitignore`.\n\nassuming static files is properly configured using django built-ins or something like [django-storages](https://django-storages.readthedocs.io/), a simple production deployment can use django's own `collectstatic`. remember the django settings values of `staticfiles_dirs`, `bundle_dir_name`, `stats_file`, and webpack's `output.path` must all be compatible:\n\n```javascript\n// webpack.config.js\nmodule.exports = {\n  // ...\n  context: __dirname,\n  output: {\n    // emit bundle files at \"assets/webpack_bundles/\":\n    path: path.resolve(__dirname, \"assets/webpack_bundles/\"),\n    publicpath: \"auto\", // necessary for cdns/s3/blob storages\n    filename: \"[name]-[contenthash].js\",\n  },\n  plugins: [\n    // emit 'webpack-stats.json' in project root for django to find it:\n    new bundletracker({ path: __dirname, filename: \"webpack-stats.json\" }),\n  ],\n};\n```\n\n```python\n# app/settings.py\n\nbase_dir =  ... # set to project root\n\nstaticfiles_dirs = (\n   # make django collect all \"assets/\" and \"assets/webpack_bundles\"\n   # to be served at \"my-static-url.com/asset-name.png\"\n   # and \"my-static-url.com/webpack_bundles/main.js\"\n   os.path.join(base_dir, 'assets'),\n)\n\nwebpack_loader = {\n    'default': {\n        # bundle directory, like in \"my-static-url.com/webpack_bundles/main.js\":\n        'bundle_dir_name': 'webpack_bundles/',\n        # absolute path to where 'webpack-stats.json' is in django project root:\n        'stats_file': os.path.join(base_dir, 'webpack-stats.json'),\n        # ...\n    }\n}\n```\n\nin your deployment script, you must first run your webpack build in production-mode, before calling `collectstatic`:\n\n```\nnode_env=production webpack --progress --bail --mode=production\npython manage.py collectstatic --noinput\n```\n\nthis means we're building the assets and, since we have `webpack-bundle-tracker` in our webpack building pipeline, the `webpack-stats.json` stats file is also populated. if you followed the default configuration, the `webpack-stats.json` will be at django's project root (`base_dir`) and the `render_bundle` template tag will be able to use it.\n\nhowever, production usage for this package is **fairly flexible**, as the entire django-webpack integration depends only on the `webpack-stats.json` file.\n\n> \u26a0\ufe0f heroku is one platform that automatically runs collectstatic for you, so you need to set the `disable_collectstatic=1` environment var and manually run collectstatic after running webpack. in heroku, this is achieved with a `post_compile` hook. here's [an example](https://github.com/vintasoftware/django-react-boilerplate/blob/70a079e9671241a857256f3046722995bc71eb12/bin/post_compile).\n\n## advanced usage\n\n### hot reload\n\n[hot reload (hot module replacement)](https://webpack.js.org/guides/hot-module-replacement/) is critical for a improving the development workflow. in case you wish to enable for your project, please check out [this example](https://github.com/django-webpack/django-webpack-loader/tree/master/examples/hot-reload), in particular how [webpack.config.js](https://github.com/django-webpack/django-webpack-loader/blob/master/examples/hot-reload/webpack.config.js) is configured. the key is to set the `publicpath` and `devserver`.\n\n### dynamic imports\n\nin case you wish to use [dynamic imports](https://webpack.js.org/guides/code-splitting/#dynamic-imports), please check out [this example](https://github.com/django-webpack/django-webpack-loader/tree/master/examples/dynamic-imports), in particular how [webpack.config.js](https://github.com/django-webpack/django-webpack-loader/blob/master/examples/dynamic-imports/webpack.config.js) is configured.\n\n### extra options for `webpack-bundle-tracker`\n\ncheck `webpack-bundle-tracker` [readme](https://github.com/django-webpack/webpack-bundle-tracker) for all supported options, such as relative paths, integrity hashes, timestamp logging, etc.\n\n### extra `webpack_loader` settings in django\n\nset those extra settings inside like this:\n\n```python\nwebpack_loader = {\n    'default': {\n       # settings go here\n    }\n```\n\n- `timeout` is the number of seconds webpack_loader should wait for webpack to finish compiling before raising an exception. `0`, `none` or leaving the value out of settings disables timeouts\n\n- `integrity` is flag enabling [subresource integrity](https://developer.mozilla.org/en-us/docs/web/security/subresource_integrity) on rendered `<script>` and `<link>` tags. integrity hash is get from stats file and configuration on side of `bundletracker`, where [configuration option](https://github.com/django-webpack/webpack-bundle-tracker#options) `integrity: true` is required.\n\n- `loader_class` is the fully qualified name of a python class as a string that holds the custom webpack loader. this is where behavior can be customized as to how the stats file is loaded. examples include loading the stats file from a database, cache, external url, etc. for convenience, `webpack_loader.loaders.webpackloader` can be extended. the `load_assets` method is likely where custom behavior will be added. this should return the stats file as an object.\n\nhere's a simple example of loading from an external url:\n\n```py\nimport requests\nfrom webpack_loader.loaders import webpackloader\n\nclass externalwebpackloader(webpackloader):\n    def load_assets(self):\n        url = self.config['stats_url']\n        return requests.get(url).json()\n```\n\n- `skip_common_chunks` (default: `false`) is a flag which prevents already generated chunks from being included again in the same page. this should only happen if you use more than one entrypoint per django template (multiple `render_bundle` calls). by enabling this, you can get the same default behavior of the [htmlwebpackplugin](https://webpack.js.org/plugins/html-webpack-plugin/). the same caveats apply as when using `skip_common_chunks` on `render_bundle`, see that section below for more details.\n\n### rendering by file extension\n\n`render_bundle` also takes a second argument which can be a file extension to match. this is useful when you want to render different types for files in separately. for example, to render css in head and js at bottom we can do something like this:\n\n```html+django\n{% load render_bundle from webpack_loader %}\n\n<html>\n  <head>\n    {% render_bundle 'main' 'css' %}\n  </head>\n  <body>\n    ....\n    {% render_bundle 'main' 'js' %}\n  </body>\n</head>\n```\n\n### using preload\n\nthe `is_preload=true` option in the `render_bundle` template tag can be used to add `rel=\"preload\"` link tags:\n\n```html+django\n{% load render_bundle from webpack_loader %}\n\n<html>\n  <head>\n    {% render_bundle 'main' 'css' is_preload=true %}\n    {% render_bundle 'main' 'js' is_preload=true %}\n\n    {% render_bundle 'main' 'css' %}\n  </head>\n\n  <body>\n    {% render_bundle 'main' 'js' %}\n  </body>\n</html>\n```\n\n### accessing other webpack assets\n\n`webpack_static` template tag provides facilities to load static assets managed by webpack in django templates. it is like django's built in `static` tag but for webpack assets instead.\n\nin the example below, `logo.png` can be any static asset shipped with any npm package:\n\n```html+django\n{% load webpack_static from webpack_loader %}\n\n<!-- render full public path of logo.png -->\n<img src=\"{% webpack_static 'logo.png' %}\"/>\n```\n\nthe public path is based on `webpack.config.js` [output.publicpath](https://webpack.js.org/configuration/output/#output-publicpath).\n\nplease note that this approach will use the original asset file, and not a post-processed one from the webpack pipeline, in case that file had gone through such flow (e.g.: you've imported an image on the react side and used it there, the file used within the react components will probably have a hash string on its name, etc. this processed file will be different than the one you'll grab with `webpack_static`).\n\n### use `skip_common_chunks` on `render_bundle`\n\nyou can use the parameter `skip_common_chunks=true` or `skip_common_chunks=false` to override the global `skip_common_chunks` setting for a specific bundle.\n\nin order for this option to work, `django-webpack-loader` requires the `request` object to be in the template context. the `request` object is passed by default via the `django.template.context_processors.request` context processor, so make sure you have that.\n\nif you don't have `request` in the context for some reason (e.g. using `template.render` or `render_to_string` directly without passing the request), you'll get warnings on the console and the common chunks will remain duplicated.\n\n### appending file extensions\n\nthe `suffix` option can be used to append a string at the end of the file url. for instance, it can be used if your webpack configuration emits compressed `.gz` files.\n\n```html+django\n{% load render_bundle from webpack_loader %}\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <title>example</title>\n    {% render_bundle 'main' 'css' %}\n  </head>\n  <body>\n    {% render_bundle 'main' 'js' suffix='.gz' %}\n  </body>\n</html>\n```\n\n### multiple webpack configurations\n\n`django-webpack-loader` also supports multiple webpack configurations. assuming you have different webpack configs, each with a different `output.path`, the following configuration defines 2 webpack stats files in settings and uses the `config` argument in the template tags to influence which stats file to load the bundles from:\n\n```python\nwebpack_loader = {\n    'default': {\n        'bundle_dir_name': 'bundles/',\n        'stats_file': os.path.join(base_dir, 'webpack-stats.json'),\n    },\n    'dashboard': {\n        'bundle_dir_name': 'dashboard_bundles/',\n        'stats_file': os.path.join(base_dir, 'webpack-stats-dashboard.json'),\n    }\n}\n```\n\n```html+django\n{% load render_bundle from webpack_loader %}\n\n<html>\n  <body>\n    ....\n    {% render_bundle 'main' 'js' 'default' %}\n    {% render_bundle 'main' 'js' 'dashboard' %}\n\n    <!-- or render all files from a bundle -->\n    {% render_bundle 'main' config='dashboard' %}\n\n    <!-- the following tags do the same thing -->\n    {% render_bundle 'main' 'css' 'dashboard' %}\n    {% render_bundle 'main' extension='css' config='dashboard' %}\n    {% render_bundle 'main' config='dashboard' extension='css' %}\n\n    <!-- add some extra attributes to the tag -->\n    {% render_bundle 'main' 'js' 'default' attrs='async charset=\"utf-8\"'%}\n  </body>\n</head>\n```\n\n### file urls instead of html tags\n\nif you need the url to an asset without the html tags, the `get_files` template tag can be used. a common use case is specifying the url to a custom css file for a javascript plugin.\n\n`get_files` works exactly like `render_bundle` except it returns a list of matching files and lets you assign the list to a custom template variable.\n\neach object in the returned list has 2 properties:\n\n1. `name`, which is the name of a chunk from the stats file;\n2. `url`, which can be:\n3. the `publicpath` if the asset has one;\n4. the `path` to the asset in the static files storage, if the asset doesn't have a `publicpath`.\n\nfor example:\n\n```html+django\n{% load get_files from webpack_loader %}\n\n{% get_files 'editor' 'css' as editor_css_files %}\nckeditor.config.contentscss = '{{ editor_css_files.0.url }}';\n\n<!-- or list down name and url for every file -->\n<ul>\n{% for css_file in editor_css_files %}\n    <li>{{ css_file.name }} : {{ css_file.url }}</li>\n{% endfor %}\n</ul>\n```\n\n### jinja2 configuration\n\nif you need to output your assets in a jinja template, we provide a jinja2 extension that's compatible with [django-jinja](https://github.com/niwinz/django-jinja).\n\nto install the extension, add it to the `templates` configuration in the `[\"options\"][\"extension\"]` list.\n\n```python\nfrom django_jinja.builtins import default_extensions\ntemplates = [\n  {\n    \"backend\": \"django_jinja.backend.jinja2\",\n    \"options\": {\n      \"extensions\": default_extensions + [\n        \"webpack_loader.contrib.jinja2ext.webpackextension\",\n      ],\n    }\n  }\n]\n```\n\nthen in your base jinja template, do:\n\n```html\n{{ render_bundle('main') }}\n```\n\n## migrating from version < 1.0.0\n\nin order to use `django-webpack-loader>=1.0.0`, you must ensure that `webpack-bundle-tracker@1.0.0` is being used on the javascript side. it's recommended that you always keep at least minor version parity across both packages for full compatibility.\n\n## contributing\n\nthis project includes a makefile that provides several useful commands for building, installing, and publishing the project. please feel free to open prs or create issues!\n\n### available commands\n\n- `clean`: removes generated files and directories.\n- `build`: cleans the project and builds the distribution packages.\n- `test`: run the tests.\n- `install`: installs the project's build dependencies. will initialize a virtual environment if one does not exist.\n- `publish`: builds the distribution packages and publishes them to the specified repository.\n- `register`: registers the package on the specified repository.\n\nto execute a command, run `make <command>` in the project's root directory.\n\n### virtual environment settings\n\n- `env`: the name of the virtual environment. (default: `venv`)\n- `repository`: the repository to publish the distribution packages to. (default: `pypi`)\n\n### special thanks\n\ndjango webpack loader was originally created by [owais lone](https://github.com/owais) and received contributions from more than 50 developers since its inception, as well as many others who assisted with issues, comments, articles, talks, etc. thanks for everyone who's been part of django webpack loader community!\n\n## commercial support\n\n[![alt text](https://avatars2.githubusercontent.com/u/5529080?s=80&v=4 \"vinta logo\")](https://www.vinta.com.br/)\n\nthis project is currently maintained by [vinta software](https://www.vinta.com.br/) and is used in products of vinta's clients. we are always looking for exciting work, so if you need any commercial support, feel free to get in touch: contact@vinta.com.br\n\n\n",
  "docs_url": null,
  "keywords": "django,webpack,assets",
  "license": "mit license",
  "name": "django-webpack-loader",
  "package_url": "https://pypi.org/project/django-webpack-loader/",
  "project_url": "https://pypi.org/project/django-webpack-loader/",
  "project_urls": {
    "Download": "https://github.com/django-webpack/django-webpack-loader/tarball/3.0.0",
    "Homepage": "https://github.com/django-webpack/django-webpack-loader"
  },
  "release_url": "https://pypi.org/project/django-webpack-loader/3.0.0/",
  "requires_dist": [],
  "requires_python": "",
  "summary": "transparently use webpack with django",
  "version": "3.0.0",
  "releases": [],
  "developers": [
    "contact@vinta.com.br",
    "vinta_software"
  ],
  "kwds": "django_jinja webpack_loader webpackloader webpack_bundles webpack",
  "license_kwds": "mit license",
  "libtype": "pypi",
  "id": "pypi_django_webpack_loader",
  "homepage": "https://github.com/django-webpack/django-webpack-loader",
  "release_count": 46,
  "dependency_ids": []
}