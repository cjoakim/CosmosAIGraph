{
  "classifiers": [
    "development status :: 3 - alpha",
    "framework :: pytest",
    "intended audience :: developers",
    "license :: osi approved :: mit license",
    "operating system :: os independent",
    "programming language :: python :: 3",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "topic :: software development :: libraries :: python modules"
  ],
  "description": "[![build status](https://github.com/csernazs/pytest-httpserver/workflows/build/badge.svg?branch=master)](https://github.com/csernazs/pytest-httpserver/actions?query=workflow%3abuild+branch%3amaster)\n[![documentation status](https://readthedocs.org/projects/pytest-httpserver/badge/?version=latest)](https://pytest-httpserver.readthedocs.io/en/latest/?badge=latest)\n [![license: mit](https://img.shields.io/badge/license-mit-blue.svg)](https://opensource.org/licenses/mit)\n[![donate](https://img.shields.io/badge/donate-paypal-green.svg)](https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=k6pu3agbzw4qc&item_name=pytest-httpserver&currency_code=eur&source=url)\n[![codecov](https://codecov.io/gh/csernazs/pytest-httpserver/branch/master/graph/badge.svg?token=mx2jxbhqrh)](https://codecov.io/gh/csernazs/pytest-httpserver)\n[![code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)\n\n## pytest_httpserver\n\nhttp server for pytest\n\n\n### nutshell\n\nthis library is designed to help to test http clients without contacting the real http server.\nin other words, it is a fake http server which is accessible via localhost can be started with\nthe pre-defined expected http requests and their responses.\n\n### example\n\n#### handling a simple get request\n```python\ndef test_my_client(\n    httpserver,\n):  # httpserver is a pytest fixture which starts the server\n    # set up the server to serve /foobar with the json\n    httpserver.expect_request(\"/foobar\").respond_with_json({\"foo\": \"bar\"})\n    # check that the request is served\n    assert requests.get(httpserver.url_for(\"/foobar\")).json() == {\"foo\": \"bar\"}\n```\n\n#### handing a post request with an expected json body\n```python\ndef test_json_request(\n    httpserver,\n):  # httpserver is a pytest fixture which starts the server\n    # set up the server to serve /foobar with the json\n    httpserver.expect_request(\n        \"/foobar\", method=\"post\", json={\"id\": 12, \"name\": \"foo\"}\n    ).respond_with_json({\"foo\": \"bar\"})\n    # check that the request is served\n    assert requests.post(\n        httpserver.url_for(\"/foobar\"), json={\"id\": 12, \"name\": \"foo\"}\n    ).json() == {\"foo\": \"bar\"}\n```\n\n\nyou can also use the library without pytest. there's a with statement to ensure that the server is stopped.\n\n\n```python\nwith httpserver() as httpserver:\n    # set up the server to serve /foobar with the json\n    httpserver.expect_request(\"/foobar\").respond_with_json({\"foo\": \"bar\"})\n    # check that the request is served\n    print(requests.get(httpserver.url_for(\"/foobar\")).json())\n```\n\n### documentation\n\nplease find the api documentation at https://pytest-httpserver.readthedocs.io/en/latest/.\n\n### features\n\nyou can set up a dozen of expectations for the requests, and also what response should be sent by the server to the client.\n\n\n#### requests\n\nthere are three different types:\n\n- **permanent**: this will be always served when there's match for this request, you can make as many http requests as you want\n- **oneshot**: this will be served only once when there's a match for this request, you can only make 1 http request\n- **ordered**: same as oneshot but the order must be strictly matched to the order of setting up\n\nyou can also fine-tune the expected request. the following can be specified:\n\n- uri (this is a must)\n- http method\n- headers\n- query string\n- data (http body of the request)\n- json (http body loaded as json)\n\n\n#### responses\n\nonce you have the expectations for the request set up, you should also define the response you want to send back.\nthe following is supported currently:\n\n- respond arbitrary data (string or bytearray)\n- respond a json (a python dict converted in-place to json)\n- respond a response object of werkzeug\n- use your own function\n\nsimilar to requests, you can fine-tune what response you want to send:\n\n- http status\n- headers\n- data\n\n\n#### behave support\n\nusing the `blockinghttpserver` class, the assertion for a request and the\nresponse can be performed in real order. for more info, see the\n[test](tests/test_blocking_httpserver.py), the\n[howto](https://pytest-httpserver.readthedocs.io/en/latest/howto.html#running-httpserver-in-blocking-mode)\nand the [api\ndocumentation](https://pytest-httpserver.readthedocs.io/en/latest/api.html#blockinghttpserver).\n\n\n### missing features\n* http/2\n* keepalive\n* ~~tls~~\n\n### donation\n\nif you want to donate to this project, you can find the donate button at the top\nof the readme.\n\ncurrently, this project is based heavily on werkzeug. werkzeug does all the heavy lifting\nbehind the scenes, parsing http request and defining request and response objects, which\nare currently transparent in the api.\n\nif you wish to donate, please consider donating to them: https://palletsprojects.com/donate\n",
  "docs_url": null,
  "keywords": "",
  "license": "mit",
  "name": "pytest-httpserver",
  "package_url": "https://pypi.org/project/pytest-httpserver/",
  "project_url": "https://pypi.org/project/pytest-httpserver/",
  "project_urls": {
    "Bug Tracker": "https://github.com/csernazs/pytest-httpserver/issues",
    "Documentation": "https://pytest-httpserver.readthedocs.io/en/latest/",
    "Homepage": "https://github.com/csernazs/pytest-httpserver",
    "Repository": "https://github.com/csernazs/pytest-httpserver"
  },
  "release_url": "https://pypi.org/project/pytest-httpserver/1.0.8/",
  "requires_dist": [
    "Werkzeug (>=2.0.0)"
  ],
  "requires_python": ">=3.8,<4.0",
  "summary": "pytest-httpserver is a httpserver for pytest",
  "version": "1.0.8",
  "releases": [],
  "developers": [
    "cserna.zsolt@gmail.com",
    "zsolt_cserna"
  ],
  "kwds": "pytest pytest_httpserver badge donation token",
  "license_kwds": "mit",
  "libtype": "pypi",
  "id": "pypi_pytest_httpserver",
  "homepage": "https://github.com/csernazs/pytest-httpserver",
  "release_count": 24,
  "dependency_ids": [
    "pypi_werkzeug"
  ]
}