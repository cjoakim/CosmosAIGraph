{
  "classifiers": [
    "license :: osi approved :: apache software license",
    "operating system :: os independent",
    "programming language :: python :: 3"
  ],
  "description": "# lumigo opentelemetry distro for python :stars:\n\n[![tracer testing](https://github.com/lumigo-io/opentelemetry-python-distro/actions/workflows/push-actions.yml/badge.svg)](https://github.com/lumigo-io/opentelemetry-python-distro/actions/workflows/push-actions.yml)\n![version](https://badge.fury.io/py/lumigo_opentelemetry.svg)\n\nthe lumigo opentelemetry distribution for python is a package that provides no-code distributed tracing for containerized applications.\n\nthe lumigo opentelemetry distribution for python is made of several upstream opentelemetry packages, with additional automated quality-assurance and customizations that optimize for no-code injection, meaning that you should need to update exactly zero lines of code in your application in order to make use of the lumigo opentelemetry distribution.\n(see the [no-code activation](#no-code-activation) section for auto-instrumentation instructions)\n\n**note:** if you are looking for the lumigo python tracer for aws lambda functions, [`lumigo-tracer`](https://pypi.org/project/lumigo-tracer/) is the package you should use instead.\n\n## setup\n\nadding the lumigo opentelemetry distro for python to your application is a three-step process:\n\n1. [add the lumigo opentelemetry distro for python as dependency](#add-lumigo_opentelemetry-as-dependency)\n2. [provide configurations through environment variables](#environment-based-configuration)\n3. [activate the tracer](#tracer-activation), which can also be achieved through environment variables\n\n### add lumigo_opentelemetry as dependency\n\nthe [`lumigo_opentelemetry` package](https://pypi.org/project/lumigo_opentelemetry/) needs to be a dependency of your application.\nin most cases, you will add `lumigo_opentelemetry` as a line in `requirements.txt`:\n\n```txt\nlumigo_opentelemetry\n```\n\nor, you may use `pip`:\n\n```sh\npip install lumigo_opentelemetry\n```\n\n### environment-based configuration\n\nconfigure the `lumigo_tracer_token` environment variable with the token value generated for you by the lumigo platform, under `settings --> tracing --> manual tracing`:\n\n```console\nlumigo_tracer_token=<token>\n```\n\nreplace `<token>` below with the token generated for you by the lumigo platform.\n\nit is also strongly suggested that you set the `otel_service_name` environment variable with, as value, the service name you have chosen for your application:\n\n```console\notel_service_name=<service name>\n```\n\nreplace `<service name> with the desired name of the service`.\n\n**note:** while you are providing environment variables for configuration, consider also providing the one needed for [no-code tracer activation](#no-code-activation) :-)\n\n### tracer activation\n\nthere are two ways to activate the `lumigo_opentelemetry` package: one based on importing the package in code (manual activation), and the other via the environment (no-code activation).\nthe [no-code activation](#no-code-activation) approach is the preferred one.\n\n#### no-code activation\n\n**note:** the instructions in this section are mutually exclusive with those provided in the [manual activation](#manual-activation) section.\n\nset the following environment variable:\n\n```console\nautowrapt_bootstrap=lumigo_opentelemetry\n```\n\n#### manual activation\n\n**note:** the instructions in this section are mutually exclusive with those provided in the [no-code activation](#no-code-activation) section.\n\nimport `lumigo_opentelemetry` at the beginning of your main file:\n\n```python\nimport lumigo_opentelemetry\n```\n\n## configuration\n\n### opentelemetry configurations\n\nthe lumigo opentelemetry distro for python is made of several upstream opentelemetry packages, together with additional logic and, as such, the environment variables that work with \"vanilla\" opentelemetry work also with the lumigo opentelemetry distro for python. specifically supported are:\n\n* [general configurations](https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/sdk-environment-variables.md#general-sdk-configuration)\n* [batch span processor configurations](https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/sdk-environment-variables.md#batch-span-processor): the lumigo opentelemetry distro for python uses a batch processor for sending data to lumigo.\n\n### lumigo-specific configurations\n\nthe `lumigo_opentelemetry` package additionally supports the following configuration options as environment variables:\n\n* `lumigo_tracer_token`: [required] required configuration to send data to lumigo; you will find the right value in lumigo under `settings -> tracing -> manual tracing`.\n* `lumigo_debug=true`: enables debug logging\n* `lumigo_debug_spandump`: path to a local file where to write a local copy of the spans that will be sent to lumigo; this option handy for local testing but **should not be used in production** unless you are instructed to do so by lumigo support.\n* `lumigo_secret_masking_regex=[\"regex1\", \"regex2\"]`: prevents lumigo from sending keys that match the supplied regular expressions. all regular expressions are case-insensitive. by default, lumigo applies the following regular expressions: `[\".*pass.*\", \".*key.*\", \".*secret.*\", \".*credential.*\", \".*passphrase.*\"]`.\n  * we support more granular masking using the following parameters. if not given, the above configuration is the fallback: `lumigo_secret_masking_regex_http_request_bodies`, `lumigo_secret_masking_regex_http_request_headers`, `lumigo_secret_masking_regex_http_response_bodies`, `lumigo_secret_masking_regex_http_response_headers`, `lumigo_secret_masking_regex_http_query_params`, `lumigo_secret_masking_regex_environment`.\n* `lumigo_switch_off=true`: this option disables the lumigo opentelemetry distro entirely; no instrumentation will be injected, no tracing data will be collected.\n* `lumigo_report_dependencies=false`: this option disables the built-in dependency reporting to lumigo saas. for more information, refer to the [automated dependency reporting](#automated-dependency-reporting) section.\n* `lumigo_auto_filter_empty_sqs`: this option enables the automatic filtering of empty sqs messages from being sent to lumigo saas. for more information, refer to the [filtering out empty sqs messages](#filtering-out-empty-sqs-messages) section.\n* `lumigo_auto_filter_http_endpoints_regex`: this option enables the automatic filtering of endpoints that match the supplied regular expressions, refer to the [filtering out http endpoints](#filtering-out-http-endpoints) section.\n\n### execution tags\n\n[execution tags](https://docs.lumigo.io/docs/execution-tags) allow you to dynamically add dimensions to your invocations so that they can be identified, searched for, and filtered in lumigo.\nfor example: in multi-tenanted systems, execution tags are often used to mark with the identifiers of the end-users that trigger them for analysis (e.g., [explore view](https://docs.lumigo.io/docs/explore)) and alerting purposes.\n\n#### creating execution tags\n\nin the lumigo opentelemetry distro for python, execution tags are represented as [span attributes](https://opentelemetry.io/docs/reference/specification/common/#attribute) and, specifically, as span attributes with the `lumigo.execution_tags.` prefix.\nfor example, you could add an execution tag as follows:\n\n```python\nfrom opentelemetry.trace import get_current_span\n\nget_current_span().set_attribute('lumigo.execution_tags.foo','bar')\n```\n\nnotice that, using opentelemetry's [`get_current_span()` api](https://opentelemetry.io/docs/instrumentation/python/manual/#get-the-current-span), you do not need to keep track of the current span, you can get it at any point of your program execution.\n\nin opentelemetry, span attributes can be `strings`, `numbers` (double precision floating point or signed 64 bit integer), `booleans` (a.k.a. \"primitive types\"), and arrays of one primitive type (e.g., an array of string, and array of numbers or an array of booleans).\nin lumigo, booleans and numbers are transformed to strings.\n\n**important:** if you use the `span.set_attribute` api multiple times _on the same span_ to set values for the same key multiple values, you may override previous values rather than adding to them:\n\n```python\nfrom opentelemetry.trace import get_current_span\n\nget_current_span().set_attribute('lumigo.execution_tags.foo','bar')\nget_current_span().set_attribute('lumigo.execution_tags.foo','baz')\n```\n\nin the snippets above, the `foo` execution tag will have in lumigo only the `baz` value!\nmultiple values for an execution tag are supported as follows:\n\n```python\nfrom opentelemetry.trace import get_current_span\n\nget_current_span().set_attribute('lumigo.execution_tags.foo',['bar', 'baz'])\n```\n\ntuples are also supported to specify multiple values for an execution tag:\n\n```python\nfrom opentelemetry.trace import get_current_span\n\nget_current_span().set_attribute('lumigo.execution_tags.bar',('baz','xyz',))\n```\n\nthe snippets above will produce in lumigo the `foo` tag having both `bar` and `baz` values.\nanother option to set multiple values is setting [execution tags in different spans of an invocation](#execution-tags-in-different-spans-of-an-invocation).\n\n#### execution tags in different spans of an invocation\n\nin lumigo, multiple spans may be merged together into one invocation, which is the entry that you see, for example, in the [explore view](https://docs.lumigo.io/docs/explore).\nthe invocation will include all execution tags on all its spans, and merge their values:\n\n```python\nfrom opentelemetry import trace\n\ntrace.get_current_span().set_attribute('lumigo.execution_tags.foo','bar')\n\ntracer = trace.get_tracer(__name__)\n\nwith tracer.start_as_current_span('child_span') as child_span:\n    child_span.set_attribute('lumigo.execution_tags.foo','baz')\n```\n\nin the examples above, the invocation in lumigo resulting from executing the code will have both `bar` and `baz` values associated with the `foo` execution tag.\nwhich spans are merged in the same invocation depends on the parent-child relations among those spans.\nexplaining this topic is outside the scope of this documentation; a good first read to get deeper into the topic is the [traces](https://opentelemetry.io/docs/concepts/signals/traces/) documentation of opentelemetry.\nin case your execution tags on different spans appear on different invocations than what you would expect, get in touch with [lumigo support](https://docs.lumigo.io/docs/support).\n\n#### execution tag limitations\n\n* up to 50 execution tag keys per invocation in lumigo, irrespective of how many spans are part of the invocation or how many values each execution tag has.\n* the `key` of an execution tag cannot contain the `.` character; for example: `lumigo.execution_tags.my.tag` is not a valid tag. the opentelemetry `span.set_attribute()` api will not fail or log warnings, but that will be displayed as `my` in lumigo.\n* each execution tag key can be at most 50 characters long; the `lumigo.execution_tags.` prefix does _not_ count against the 50 characters limit.\n* each execution tag value can be at most 70 characters long.\n\n### programmatic errors\n\n[programmatic errors](https://docs.lumigo.io/docs/programmatic-errors) allow you to customize errors, monitor and troubleshoot issues that should not necessarily interfere with the service.\nfor example, an application tries to remove a user who doesn't exist. these custom errors can be captured by adding just a few lines of additional code to your application.\n\nprogrammatic errors indicating that a non-fatal error occurred, such as an application error. you can log programmatic errors, track custom error issues, and trigger [alerts](https://docs.lumigo.io/docs/event-alert).\n\n#### creating a programmatic error\n\nprogrammatic errors are created by adding [span events](https://opentelemetry.io/docs/instrumentation/python/manual/#adding-events) with a custom attribute being set with the key name `lumigo.type`.\n\nfor example, you could add a programmatic error as follows:\n\n```python\nfrom opentelemetry.trace import get_current_span\n\nget_current_span().add_event('<error-message>', {'lumigo.type': '<error-type>'})\n```\n\n## supported runtimes\n\n* cpython: 3.7.x, 3.8.x, 3.9.x, 3.10.x, 3.11.x\n\n## supported packages\n\n| instrumentation | package | supported versions | | | | |\n| --- | --- | :---: | :---: | :---: | :---: | :---: |\n| | | 3.7 | 3.8 | 3.9 | 3.10 | 3.11 |\n| botocore | [boto3](https://pypi.org/project/boto3) | 1.17.22~1.33.13|1.17.22~1.34.2|1.17.22~1.34.2|1.17.22~1.34.2|1.17.22~1.34.2|\n| django | [django](https://pypi.org/project/django) | 3.2.1~3.2.23|3.2.1~3.2.23|3.2.1~3.2.23|3.2.1~3.2.23|3.2.1~3.2.23|\n| | | 3.2| 4.0.1~4.2.8| 4.0.1~4.2.8| 4.0.1~4.2.8| 4.0.1~4.2.8|\n| | | | 3.2| 3.2| 5.0.1~5.0.1| 5.0.1~5.0.1|\n| | | | 4.0| 4.0| 3.2| 3.2|\n| | | | 4.0.a1| 4.0.a1| 4.0| 4.0|\n| | | | 4.0.b1| 4.0.b1| 4.0.a1| 4.0.a1|\n| | | | 4.0.rc1| 4.0.rc1| 4.0.b1| 4.0.b1|\n| | | | 4.1| 4.1| 4.0.rc1| 4.0.rc1|\n| | | | 4.1.a1| 4.1.a1| 4.1| 4.1|\n| | | | 4.1.b1| 4.1.b1| 4.1.a1| 4.1.a1|\n| | | | 4.1.rc1| 4.1.rc1| 4.1.b1| 4.1.b1|\n| | | | 4.1rc1| 4.1rc1| 4.1.rc1| 4.1.rc1|\n| | | | 4.2| 4.2| 4.1rc1| 4.1rc1|\n| | | | 4.2.a1| 4.2.a1| 4.2| 4.2|\n| | | | 4.2.b1| 4.2.b1| 4.2.a1| 4.2.a1|\n| | | | 4.2.rc1| 4.2.rc1| 4.2.b1| 4.2.b1|\n| | | | 4.2rc1| 4.2rc1| 4.2.rc1| 4.2.rc1|\n| | | | | | 4.2rc1| 4.2rc1|\n| | | | | | 5.0| 5.0|\n| | | | | | 5.0rc1| 5.0rc1|\n| fastapi | [uvicorn](https://pypi.org/project/uvicorn) | 0.11.3~0.22.0|0.11.3~0.22.0|0.11.3~0.22.0|0.11.3~0.22.0|0.12.0~0.22.0|\n| | | | 0.24.0~0.24.0.post1| 0.24.0~0.24.0.post1| 0.24.0~0.24.0.post1| 0.24.0~0.24.0.post1|\n|  | [fastapi](https://pypi.org/project/fastapi) | 0.56.1~0.100.0|0.56.1~0.100.0|0.56.1~0.100.0|0.56.1~0.100.0|0.56.1~0.100.0|\n| | | 0.100.0b2~0.103.2| 0.100.0b2~0.105.0| 0.100.0b2~0.105.0| 0.100.0b2~0.105.0| 0.100.0b2~0.105.0|\n| flask | [flask](https://pypi.org/project/flask) | 2.0.0~2.2.5|2.0.0~2.2.5|2.0.0~2.2.5|2.0.0~2.2.5|2.0.0~2.2.5|\n| grpcio | [grpcio](https://pypi.org/project/grpcio) | 1.45.0~1.60.0rc1|1.45.0~1.60.0rc1|1.45.0~1.60.0rc1|1.45.0~1.60.0rc1|1.49.0~1.60.0rc1|\n| kafka_python | [kafka_python](https://pypi.org/project/kafka_python) | 2.0.0~2.0.2|2.0.0~2.0.2|2.0.0~2.0.2|2.0.0~2.0.2|2.0.0~2.0.2|\n| pika | [pika](https://pypi.org/project/pika) | 1.0.0|1.0.0|1.0.0|1.0.0|1.0.0|\n| | | 1.0.1~1.3.0| 1.0.1~1.3.0| 1.0.1~1.3.0| 1.0.1~1.3.0| 1.0.1~1.3.0|\n| | | 1.3.0rc5~1.3.2| 1.3.0rc5~1.3.2| 1.3.0rc5~1.3.2| 1.3.0rc5~1.3.2| 1.3.0rc5~1.3.2|\n| psycopg | [psycopg-binary](https://pypi.org/project/psycopg-binary) | 3.1.1~3.1.15|3.1.1~3.1.15|3.1.1~3.1.15|3.1.1~3.1.15|3.1.4~3.1.15|\n| | | 3.1| 3.1| 3.1| 3.1| |\n|  | [psycopg](https://pypi.org/project/psycopg) | 3.1.1~3.1.15|3.1.1~3.1.15|3.1.1~3.1.15|3.1.1~3.1.15|3.1.1~3.1.15|\n| | | 3.1| 3.1| 3.1| 3.1| 3.1|\n| psycopg2 | [psycopg2](https://pypi.org/project/psycopg2) | 2.7.5~2.9.9|2.8.1~2.9.9|2.8.1~2.9.9|2.8.1~2.8.6|2.9.5~2.9.9|\n| | | 2.8| 2.8| 2.8| 2.9.5~2.9.9| |\n| | | 2.9| 2.9| 2.9| 2.8| |\n|  | [psycopg2-binary](https://pypi.org/project/psycopg2-binary) | 2.7.5~2.9.9|2.8.1~2.9.9|2.8.1~2.9.9|2.8.1~2.8.6|2.9.5~2.9.9|\n| | | 2.8| 2.8| 2.8| 2.9.5~2.9.9| |\n| | | 2.9| 2.9| 2.9| 2.8| |\n| pymongo | [pymongo](https://pypi.org/project/pymongo) | 3.1.1~3.3.1|3.1.1~3.3.1|3.1.1~3.3.1|3.1.1~3.3.1|3.1.1~3.3.1|\n| | | 3.5.0~3.13.0| 3.5.0~3.13.0| 3.5.0~3.13.0| 3.5.0~3.13.0| 3.5.0~3.13.0|\n| | | 4.0.1~4.6.1| 4.0.1~4.6.1| 4.0.1~4.6.1| 4.0.1~4.6.1| 4.0.1~4.6.1|\n| | | 3.1| 3.1| 3.1| 3.1| 3.1|\n| | | 3.2| 3.2| 3.2| 3.2| 3.2|\n| | | 4.0| 4.0| 4.0| 4.0| 4.0|\n| pymysql | [pymysql](https://pypi.org/project/pymysql) | 0.9.0~0.10.1|0.9.0~0.10.1|0.9.0~0.10.1|0.9.0~0.10.1|0.9.0~0.10.1|\n| | | 1.0.0~1.0.3| 1.0.0~1.0.3| 1.0.0~1.0.3| 1.0.0~1.0.3| 1.0.0~1.0.3|\n| | | 1.1.0~1.1.0rc2| 1.1.0~1.1.0rc2| 1.1.0~1.1.0rc2| 1.1.0~1.1.0rc2| 1.1.0~1.1.0rc2|\n| redis | [redis](https://pypi.org/project/redis) | 4.1.1~4.2.0|4.1.1~4.2.0|4.1.1~4.2.0|4.1.1~4.2.0|4.1.1~4.2.0|\n| | | 4.2.1~4.6.0| 4.2.1~4.6.0| 4.2.1~4.6.0| 4.2.1~4.6.0| 4.2.1~4.6.0|\n| | | 5.0.0~5.1.0a1| 5.0.0~5.1.0a1| 5.0.0~5.1.0a1| 5.0.0~5.1.0a1| 5.0.0~5.1.0a1|\n\n## automated dependency reporting\n\nto provide better support and better data-driven product decisions with respect to which packages to support next, the lumigo opentelemetry distro for python will report to lumigo saas on startup the packages and their versions used in this application, together with the opentelemetry resource data to enable analytics in terms of which platforms use which dependencies.\n\nthe data uploaded to lumigo is a set of key-value pairs with package name and version.\nsimilar is available through the tracing data sent to lumigo, except that this aims at covering dependencies for which the lumigo opentelemetry distro for python does not have instrumentation (yet?).\nlumigo's only goal for these analytics data is to be able to give you the instrumentations you need without you needing to tell us!\n\nthe dependencies data is sent only when a `lumigo_tracer_token` is present in the process environment, and it can be opted out via the `lumigo_report_dependencies=false` environment variable.\n\n## baseline setup\n\nthe lumigo opentelemetry distro will automatically create the following opentelemetry constructs provided to a `traceprovider`.\n\n### resource attributes\n\n#### sdk resource attributes\n\n* the attributes from the default resource:\n  * `telemetry.sdk.language`: `python`\n  * `telemetry.sdk.name`: `opentelemetry`\n  * `telemetry.sdk.version`: depends on the version of the `opentelemetry-sdk` included in the [dependencies](./setup.py)\n\n* the `lumigo.distro.version` containing the version of the lumigo opentelemetry distro for python as specified in the [version file](./src/lumigo_opentelemetry/version)\n\n#### process resource attributes\n\n* the following `process.runtime.*` attributes as specified in the [process semantic conventions](https://opentelemetry.io/docs/reference/specification/resource/semantic_conventions/process/#process-runtimes):\n  * `process.runtime.description`\n  * `process.runtime.name`\n  * `process.runtime.version`\n\n* a non-standard `process.environ` resource attribute, containing a stringified representation of the process environment, with environment variables scrubbed based on the [`lumigo_secret_masking_regex`](#lumigo-specific-configurations) configuration.\n\n#### amazon ecs resource attributes\n\nif the instrumented python application is running on the amazon elastic container service (ecs):\n\n* `cloud.provider` attribute with value `aws`\n* `cloud.platform` with value `aws_ecs`\n* `container.name` with the hostname of the ecs task container\n* `container.id` with the id of the docker container (based on the cgroup id)\n\nif the ecs task uses the ecs agent v1.4.0, and has therefore access to the [task metadata endpoint version 4](https://docs.aws.amazon.com/amazonecs/latest/developerguide/task-metadata-endpoint-v4.html), the following experimental attributes as specified in the [aws ecs resource attributes](https://github.com/open-telemetry/opentelemetry-specification/blob/42081e023b3827d824c45031e3ccd19318ff3411/specification/resource/semantic_conventions/cloud_provider/aws/ecs.md) specification:\n\n* `aws.ecs.container.arn`\n* `aws.ecs.cluster.arn`\n* `aws.ecs.launchtype`\n* `aws.ecs.task.arn`\n* `aws.ecs.task.family`\n* `aws.ecs.task.revision`\n\n#### kubernetes resource attributes\n\n* `k8s.pod.uid` with the pod identifier, supported for both cgroups v1 and v2\n\n### span exporters\n\n* if the `lumigo_tracer_token` environment variable is set: a [batchspanprocessor](https://github.com/open-telemetry/opentelemetry-python/blob/25771ecdac685a5bf7ada1da21092d2061dbfc02/opentelemetry-sdk/src/opentelemetry/sdk/trace/export/__init__.py#l126), which uses an [`otlpspanexporter`](https://github.com/open-telemetry/opentelemetry-python/blob/50093f220f945ae38e769ab539c78c975e582bef/exporter/opentelemetry-exporter-otlp-proto-http/src/opentelemetry/exporter/otlp/proto/http/trace_exporter/__init__.py#l55) to push tracing data to lumigo\n* if the `lumigo_debug_spandump` environment variable is set: a [`simplespanprocessor`](https://github.com/open-telemetry/opentelemetry-python/blob/25771ecdac685a5bf7ada1da21092d2061dbfc02/opentelemetry-sdk/src/opentelemetry/sdk/trace/export/__init__.py#l79), which uses an [`consolespanexporter`](https://github.com/open-telemetry/opentelemetry-python/blob/25771ecdac685a5bf7ada1da21092d2061dbfc02/opentelemetry-sdk/src/opentelemetry/sdk/trace/export/__init__.py#l415) to save to file the spans collected. do not use this in production!\n\n### sdk configuration\n\n* the following [sdk environment variables](https://opentelemetry.io/docs/reference/specification/sdk-environment-variables/) are supported:\n  * `otel_span_attribute_value_length_limit`\n  * `otel_attribute_value_length_limit`\n\n  ** if the `otel_span_attribute_value_length_limit` environment variable is not set, the span attribute size limit will be taken from `otel_attribute_value_length_limit` environment variable. the default size limit when both are not set is 2048.\n\n## advanced use cases\n\n### access to the tracerprovider\n\nthe lumigo opentelemetry distro provides access to the `tracerprovider` it configures (see the [baseline setup](#baseline-setup) section for more information) through the `tracer_provider` attribute of the `lumigo_opentelemetry` package:\n\n```python\nfrom lumigo_opentelemetry import tracer_provider\n\n# do here stuff like adding span processors\n```\n\n### ensure spans are flushed to lumigo before shutdown\n\nfor short-running processes, the `batchprocessor` configured by the lumigo opentelemetry distro may not ensure that the tracing data are sent to lumigo (see the [baseline setup](#baseline-setup) section for more information).\nthrough the access to the `tracer_provider`, however, it is possible to ensure that all spans are flushed to lumigo as follows:\n\n```python\nfrom lumigo_opentelemetry import tracer_provider\n\n# do some logic\n\ntracer_provider.force_flush()\n\n# now the python process can terminate, with all the spans closed so far sent to lumigo\n```\n\n### consuming sqs messages with boto3 receive_message\n\nmessaging instrumentations that retrieve messages from queues tend to be counter-intuitive for end-users: when retrieving one or more messages from the queue, one would naturally expect that all calls done _using data from those messages_, e.g., sending their content to a database or another queue, would result in spans that are children of the describing the retrieving of those messages.\n\nconsider the following scenario, which is supported by the `boto3` sqs `receive_message` instrumentation of the lumigo opentelemetry distro for python:\n\n```python\nfrom opentelemetry import trace\n\ntracer = trace.get_tracer(__name__)\n\nresponse = client.receive_message(...)  # instrumentation creates a `span_0` span\n\nfor message in response.get(\"messages\", []):\n  # the sqs.receivemessage span is active in this scope\n  with tracer.start_as_current_span(\"span_1\"):  # span_0 is the parent of span_1\n    do_something()\n```\n\nwithout the scope provided by the iterator over `response[\"messages\"]`, `span_1` would be without a parent span, and that would result in a separate invocation and a separate transaction in lumigo.\n\n### filtering out empty sqs messages\n\na common pattern in sqs-based applications is to continuously poll an sqs queue for messages,\nand to process them as they arrive.\nin order not to clutter the lumigo platform with empty sqs polling messages, the default behavior is to filter them\nout from being sent to lumigo.\n\nyou can change this behavior by setting the boolean environment variable `lumigo_auto_filter_empty_sqs` to `false`.\nthe possible variations are:\n\n* `lumigo_auto_filter_empty_sqs=true` filter out empty sqs polling messages\n* `lumigo_auto_filter_empty_sqs=false` do not filter out empty sqs polling messages\n* no environment variable set (default): filter out empty sqs polling messages\n\n### filtering out http endpoints\n\nit is possible to automatically filter out spans based on an http server endpoints for all supported web server frameworks.\n\nsimply set the `lumigo_auto_filter_http_endpoints_regex` environment variable to a regex string that will match the urls,\nspans for matching urls will be not be delivered (works for both incoming & outgoing http requests).\n\nif we are filtering out an http call to an opentelemetry traced component, every subsequent invocation made by that \ncomponent won't be traced either.\n\nwhen filtering out an http span, all child spans will not be recorded as well.\n\nnote: when urls are accessed using standard ports (80 for http and 443 for https), the port is not included in the url.\n\nexample patterns:\n* `https:\\/\\/example\\.com\\/about` - will match `https://example.com/about`\n* `.*example.*` - will match any url with the word `example` in it\n* `https:\\/\\/example\\.com:123.*` - will match any http request to example.com on port 123\n\n## contributing\n\nfor guidelines on contributing, please see [contributing.md](./contributing.md).\n\n\n",
  "docs_url": null,
  "keywords": "",
  "license": "apache license 2.0",
  "name": "lumigo-opentelemetry",
  "package_url": "https://pypi.org/project/lumigo-opentelemetry/",
  "project_url": "https://pypi.org/project/lumigo-opentelemetry/",
  "project_urls": {
    "Bug Tracker": "https://github.com/lumigo-io/opentelemetry-python-distro/issues",
    "Homepage": "https://github.com/lumigo-io/opentelemetry-python-distro"
  },
  "release_url": "https://pypi.org/project/lumigo-opentelemetry/1.0.129/",
  "requires_dist": [
    "asgiref (~=3.0)",
    "autowrapt (>=1.0)",
    "wrapt (>=1.11.0)",
    "lumigo-core (==0.0.6)",
    "opentelemetry-api (==1.20.0)",
    "opentelemetry-sdk (==1.20.0)",
    "opentelemetry-sdk-extension-aws (==2.0.1)",
    "opentelemetry-exporter-otlp-proto-http (==1.20.0)",
    "opentelemetry-semantic-conventions (==0.41b0)",
    "opentelemetry-instrumentation (==0.41b0)",
    "opentelemetry-instrumentation-asgi (==0.41b0)",
    "opentelemetry-instrumentation-boto (==0.41b0)",
    "opentelemetry-instrumentation-fastapi (==0.41b0)",
    "opentelemetry-instrumentation-flask (==0.41b0)",
    "opentelemetry-instrumentation-grpc (==0.41b0)",
    "opentelemetry-instrumentation-kafka-python (==0.41b0)",
    "opentelemetry-instrumentation-pika (==0.41b0)",
    "opentelemetry-instrumentation-psycopg2 (==0.41b0)",
    "opentelemetry-instrumentation-pymongo (==0.41b0)",
    "opentelemetry-instrumentation-pymysql (==0.41b0)",
    "opentelemetry-instrumentation-requests (==0.41b0)",
    "opentelemetry-instrumentation-redis (==0.41b0)",
    "opentelemetry-instrumentation-django (==0.41b0)",
    "typing-extensions (==4.7.1) ; python_version < \"3.8\"",
    "importlib-metadata (==6.7.0) ; python_version < \"3.8\""
  ],
  "requires_python": ">=3.7",
  "summary": "lumigo opentelemetry distribution for python",
  "version": "1.0.129",
  "releases": [],
  "developers": [
    "lumigo_ltd",
    "support@lumigo.io"
  ],
  "kwds": "lumigo_opentelemetry lumigo_debug lumigo_tracer_token lumigo_debug_spandump lumigo_report_dependencies",
  "license_kwds": "apache license 2.0",
  "libtype": "pypi",
  "id": "pypi_lumigo_opentelemetry",
  "homepage": "https://github.com/lumigo-io/opentelemetry-python-distro",
  "release_count": 137,
  "dependency_ids": [
    "pypi_asgiref",
    "pypi_autowrapt",
    "pypi_importlib_metadata",
    "pypi_lumigo_core",
    "pypi_opentelemetry_api",
    "pypi_opentelemetry_exporter_otlp_proto_http",
    "pypi_opentelemetry_instrumentation",
    "pypi_opentelemetry_instrumentation_asgi",
    "pypi_opentelemetry_instrumentation_boto",
    "pypi_opentelemetry_instrumentation_django",
    "pypi_opentelemetry_instrumentation_fastapi",
    "pypi_opentelemetry_instrumentation_flask",
    "pypi_opentelemetry_instrumentation_grpc",
    "pypi_opentelemetry_instrumentation_kafka_python",
    "pypi_opentelemetry_instrumentation_pika",
    "pypi_opentelemetry_instrumentation_psycopg2",
    "pypi_opentelemetry_instrumentation_pymongo",
    "pypi_opentelemetry_instrumentation_pymysql",
    "pypi_opentelemetry_instrumentation_redis",
    "pypi_opentelemetry_instrumentation_requests",
    "pypi_opentelemetry_sdk",
    "pypi_opentelemetry_sdk_extension_aws",
    "pypi_opentelemetry_semantic_conventions",
    "pypi_typing_extensions",
    "pypi_wrapt"
  ]
}