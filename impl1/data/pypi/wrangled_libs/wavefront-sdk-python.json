{
  "classifiers": [
    "development status :: 5 - production/stable",
    "intended audience :: developers",
    "intended audience :: information technology",
    "intended audience :: system administrators",
    "license :: osi approved :: apache software license",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "topic :: software development :: libraries :: python modules",
    "topic :: system :: monitoring",
    "topic :: system :: networking :: monitoring"
  ],
  "description": "# vmware aria operations\u2122 for applications python sdk\n\n[![build status](https://github.com/wavefronthq/wavefront-sdk-python/actions/workflows/main.yml/badge.svg)](https://github.com/wavefronthq/wavefront-sdk-python/actions)\n[![image](https://img.shields.io/pypi/v/wavefront-sdk-python.svg)](https://pypi.org/project/wavefront-sdk-python/)\n[![image](https://img.shields.io/pypi/l/wavefront-sdk-python.svg)](https://pypi.org/project/wavefront-sdk-python/)\n[![image](https://img.shields.io/pypi/pyversions/wavefront-sdk-python.svg)](https://pypi.org/project/wavefront-sdk-python/)\n![pypi - downloads](https://img.shields.io/pypi/dm/wavefront-sdk-python)\n\n## table of content\n\n* [overview](#overview)\n* [prerequisites](#prerequisites)\n* [set up a sender](#set-up-a-sender)\n* [send data](#send-data)\n* [close the sender](#close-the-sender)\n* [license](#license)\n* [contribute](#contribute)\n\n## overview\n\nvmware aria operations for applications (formerly known as tanzu observability by wavefront) python sdk lets you send raw data from your python application to operations for applications using a wavefront_sender interface. the data is then stored as metrics, histograms, and trace data. this sdk is also referred to as the wavefront sender sdk for python.\n\nalthough this library is mostly used by the other operations for applications python sdks to send data to operations for applications, you can also use this sdk directly. for example, you can send data directly from a data store or csv file to operations for applications.\n\nnote: we're in the process of updating the product name to operations for applications, but in many places we still refer to it as wavefront.\n\n## prerequisites\n\n* python versions 3.8 - 3.11 are supported.\n* install `wavefront-sdk-python`:\n\n    ```python\n    pip install wavefront-sdk-python\n    ```\n\n## set up a sender\n\nyou can send metrics, histograms, or trace data from your application to the service using a wavefront proxy or direct ingestions.\n\n* use [**direct ingestion**](https://docs.wavefront.com/direct_ingestion.html) to send the data directly to the service. this is the simplest way for poc environment to get it running quickly.\n* use a [**wavefront proxy**](https://docs.wavefront.com/proxies.html), which forwards the data to the service. this is the recommended way for a production environment and large-scale deployment that needs resilience to internet outages, control over data queuing and filtering, and more.\n\nlet's [create a `wavefrontclient`](#create-a-wavefrontclient) to send data to operations for applications either through the wavefront proxy or directly over http.\n\n> **deprecated implementations**: *`wavefrontdirectclient` and `wavefrontproxyclient` are deprecated starting with wavefront proxy version 7.0. we recommend all new applications to use the `wavefrontclient`.*\n\n### create a wavefrontclient\n\nuse `wavefrontclientfactory` to create a `wavefrontclient` instance, which can send data directly to the service or send data using a wavefront proxy.\n\nthe `wavefrontclientfactory` supports multiple client bindings. if more than one client configuration is specified, you can create a `wavefrontmulticlient` instance, which can send data to multiple services.\n\n#### initialize the wavefrontclient (wavefront proxy/direct ingestion)\n\n##### prerequisites (wavefront proxy/direct ingestion)\n\n* sending data by using the wavefront proxy?\n  before your application can use a `wavefrontclient` you must [install a wavefront proxy](https://docs.wavefront.com/proxies_installing.html).\n* sending data by using direct ingestion?\n  * verify that you have the direct data ingestion permission. for details, see [operations for applications permissions](https://docs.wavefront.com/users_account_managing.html#examine-groups-roles-and-permissions).\n  * the http url of your cluster. this is the url you connect to when you log in to the service, typically something like `http://<domain>.wavefront.com`. you can also use http client with wavefront proxy version 7.0 or later. example: `http://proxy.acme.corp:2878`.\n  * [obtain the operations for applications api token](https://docs.wavefront.com/api_tokens.html#generate-and-manage-the-api-tokens-for-your-user-account).\n\n**example**: use a factory class to create a wavefrontclient and send data to operations for applications through a wavefront proxy or using direct ingestion.\n\n```python\nfrom wavefront_sdk.client_factory import wavefrontclientfactory\n\n# create a sender with:\n   # required parameter\n   #   url format to send data via proxy: \"proxy://<your.proxy.load.balancer.com>:<someport>\"\n   #   url format to send data via direct ingestion: \"https://token@domain.wavefront.com\"\n   # optional parameter\n   #   max queue size (in data points). default: 50000\n   #   batch size (in data points). default: 10000\n   #   flush interval (in seconds). default: 1 second\n\nclient_factory = wavefrontclientfactory()\nclient_factory.add_client(\n    url=\"<url for proxy or direct ingestions>\",\n    max_queue_size=50000,\n    batch_size=10000,\n    flush_interval_seconds=5)\nwavefront_sender = client_factory.get_client()\n```\n\n#### initialize the wavefrontclient with a vmware cloud services api token\n\n##### prerequisites (vmware cloud services api token)\n\n* the http url of your cluster. this is the url you connect to when you log in to the service, typically something like `http://<domain>.wavefront.com`.\n* the base http url of your vmware cloud services console. this is the url you connect to when you log in to the vmware cloud services console, typically something like `http://console.cloud.vmware.com`.\n* verify that you have access to the vmware cloud services console. for details, see [operations for applications permissions](https://docs.wavefront.com/csp_permissions_overview.html#operations-for-applications-permissions).\n* [generating an api token](https://developer.vmware.com/apis/csp/).\n\n**example**: use a factory class to create a wavefrontclient and send data to operations for applications via vmware cloud services api token.\n\n```python\nfrom wavefront_sdk.client_factory import wavefrontclientfactory\n\n# create a sender with:\n   # required parameter\n   #   url format to send data via direct ingestion: \"https://<domain>.wavefront.com\"\n   #   url format to get tokens via vmware cloud services authentication: \"https://<csp_endpoint>.cloud.vmware.com\"\n   #   vmware cloud services api token for vmware cloud services authentication: \"<csp_api_token>\"\n   # optional parameter\n   #   max queue size (in data points). default: 50000\n   #   batch size (in data points). default: 10000\n   #   flush interval (in seconds). default: 1 second\n\nclient_factory = wavefrontclientfactory()\nclient_factory.add_client(\n    url=\"<url for direct ingestions>\",\n    csp_base_url='<url for csp authentication>',\n    csp_api_token=\"<token for csp api>\",\n    max_queue_size=50000,\n    batch_size=10000,\n    flush_interval_seconds=5)\nwavefront_sender = client_factory.get_client()\n```\n\n#### initialize the wavefrontclient with a server to server oauth app\n\n##### prerequisites (server to server oauth app)\n\n* the http url of your cluster. this is the url you connect to when you log in to the service, typically something like `http://<domain>.wavefront.com`.\n* the base http url of your vmware cloud services console. this is the url you connect to when you log in to the vmware cloud services console, typically something like `http://console.cloud.vmware.com`.\n* verify that you have the required permissions for adding and managing oauth apps in this organization. for details, see [organization roles and permissions](https://docs.vmware.com/en/vmware-cloud-services/services/using-vmware-cloud-services/guid-c11d3aac-267c-4f16-a0e3-3edf286ebe53.html#organization-roles-and-permissions-0).\n* [create a server to server app](https://docs.vmware.com/en/vmware-cloud-services/services/using-vmware-cloud-services/guid-327ae12a-85db-474b-89b2-86651df91c77.html).\n\n**example**: use a factory class to create a wavefrontclient and send data to operations for applications by using the server to server oauth app.\n\n```python\nfrom wavefront_sdk.client_factory import wavefrontclientfactory\n\n# create a sender with:\n   # required parameter\n   #   url format to send data via direct ingestion: \"https://<domain>.wavefront.com\"\n   #   url format to get tokens via csp authentication: \"https://<csp_endpoint>.cloud.vmware.com\"\n   #   vmware cloud services oauth app id for csp authentication: \"<csp_app_id>\"\n   #   vmware cloud services oauth app secret for csp authentication: \"<csp_app_secret>\"\n   # optional parameter\n   #   vmware cloud services organization id for csp authentication. default: none\n   #   max queue size (in data points). default: 50000\n   #   batch size (in data points). default: 10000\n   #   flush interval (in seconds). default: 1 second\n\nclient_factory = wavefrontclientfactory()\nclient_factory.add_client(\n    url=\"<url for direct ingestions>\",\n    csp_base_url='<url for csp authentication>',\n    csp_app_id=\"<id for csp oauth app>\",\n    csp_app_secret=\"<secret for csp oauth app>\",\n    csp_org_id=\"<id for csp organization>\",\n    max_queue_size=50000,\n    batch_size=10000,\n    flush_interval_seconds=5)\nwavefront_sender = client_factory.get_client()\n```\n\n#### add multiple clients to client factory to send data to multiple services\n\n**example**: creating a `wavefrontmulticlient` to send data to multiple operations for applications services.\n\n```python\nfrom wavefront_sdk.client_factory import wavefrontclientfactory\n\nclient_factory = wavefrontclientfactory()\nclient_factory.add_client(\"proxy://our.proxy.lb.com:2878\")\nclient_factory.add_client(\"https://sometoken@domain.wavefront.com\")\n\n# send traces and spans to the tracing port. if you are directly using the sender sdk to send spans without using any other sdk, use the same port as the customtracinglistenerports configured in the wavefront proxy. assume you have installed and started the proxy on <proxy_hostname>.\nclient_factory.add_client(\"http://<proxy_hostname>:30000\")\n\nwavefront_sender = client_factory.get_client()\n```\n\n## send data\n\noperations for applications supports different metric types, such as gauges, counters, delta counters, histograms, traces, and spans. see [metrics](https://docs.wavefront.com/metric_types.html) for details. to send data to operations for applications using the `wavefront_sender` you need to instantiate the following:\n\n* [single metric or delta counter](#single-metric-or-delta-counter)\n* [single histogram distribution](#single-histogram-distribution)\n* [single span](#single-span)\n* [single event](#single-event)\n\n### send a single data point\n\nthe following examples show how to send a single data point to the service. you use the wavefront sender you created above.\n\n#### single metric or delta counter\n\n```python\nfrom uuid import uuid\n\n# wavefront metrics data format:\n# <metricname> <metricvalue> [<timestamp>] source=<source> [pointtags]\nwavefront_sender.send_metric(\n    name=\"new_york.power.usage\",\n    value=42422.0,\n    timestamp=1533529977,\n    source=\"localhost\",\n    tags={\"datacenter\": \"dc1\"})\n\n# wavefront delta counter data format:\n# <metricname> <metricvalue> source=<source> [pointtags]\nwavefront_sender.send_delta_counter(\n    name=\"delta.counter\",\n    value=1.0,\n    source=\"localhost\",\n    tags={\"datacenter\": \"dc1\"})\n```\n\n***note***: if your metric name has a bad character, that character is replaced with a `-`.\n\n#### single histogram distribution\n\n```python\nfrom uuid import uuid\nfrom wavefront_sdk.entities.histogram import histogram_granularity\n\n# wavefront histogram data format:\n# {!m | !h | !d} [<timestamp>] #<count> <mean> [centroids] <histogramname> source=<source> [pointtags]\n# example: you can choose to send to at most 3 bins: minute, hour, day\n# \"!m 1533529977 #20 30.0 #10 5.1 request.latency source=appserver1 region=us-west\"\n# \"!h 1533529977 #20 30.0 #10 5.1 request.latency source=appserver1 region=us-west\"\n# \"!d 1533529977 #20 30.0 #10 5.1 request.latency source=appserver1 region=us-west\"\nwavefront_sender.send_distribution(\n    name=\"request.latency\",\n    centroids=[(30, 20), (5.1, 10)],\n    histogram_granularities={histogram_granularity.day,\n                             histogram_granularity.hour,\n                             histogram_granularity.minute},\n    timestamp=1533529977,\n    source=\"appserver1\",\n    tags={\"region\": \"us-west\"})\n```\n\n#### single span\n\nif you are directly using the sender sdk to send data to the service, you won\u2019t see span-level red metrics by default unless you use the wavefront proxy and define a custom tracing port (`tracing_port`). see [instrument your application with the sender sdks](https://docs.wavefront.com/tracing_instrumenting_frameworks.html#instrument-your-application-with-wavefront-sender-sdks) for details.\n\n```python\nfrom uuid import uuid\n\n# wavefront trace and span data format:\n# <tracingspanname> source=<source> [pointtags] <start_millis> <duration_milliseconds>\n# example: \"getallusers source=localhost\n#           traceid=7b3bf470-9456-11e8-9eb6-529269fb1459\n#           spanid=0313bafe-9457-11e8-9eb6-529269fb1459\n#           parent=2f64e538-9457-11e8-9eb6-529269fb1459\n#           application=wavefront http.method=get\n#           1533529977 343500\"\nwavefront_sender.send_span(\n    name=\"getallusers\",\n    start_millis=1533529977,\n    duration_millis=343500,\n    source=\"localhost\",\n    trace_id=uuid(\"7b3bf470-9456-11e8-9eb6-529269fb1459\"),\n    span_id=uuid(\"0313bafe-9457-11e8-9eb6-529269fb1459\"),\n    parents=[uuid(\"2f64e538-9457-11e8-9eb6-529269fb1459\")],\n    follows_from=none,\n    tags=[(\"application\", \"wavefront\"),\n          (\"service\", \"istio\"),\n          (\"http.method\", \"get\")],\n    span_logs=none)\n```\n\n#### single event\n\n```python\n# wavefront event format:\n# @event <starttime> <endtime> \"<eventname>\"  severity=\"<severity>\"\n# type=\"<type>\" details=\"<eventdetail>\" host=\"<source>\" tag=\"<tags>\"\nwavefront_sender.send_event('event name',\n                            1592200048,\n                            1592201048,\n                            \"localhost\",\n                            [\"env:\", \"dev\"],\n                            {\"severity\": \"info\",\n                             \"type\": \"backup\",\n                             \"details\": \"broker backup\"})\n```\n\n### send batch data\n\nthe following examples show how to generate data points manually and send them as a batch to operations for applications.\n\n#### batch metrics\n\n```python\nfrom uuid import uuid\nfrom wavefront_sdk.common import metric_to_line_data\n\n# generate string data in wavefront metric format\none_metric_data = metric_to_line_data(\n    name=\"new-york.power.usage\",\n    value=42422,\n    timestamp=1493773500,\n    source=\"localhost\",\n    tags={\"datacenter\": \"dc1\"},\n    default_source=\"defaultsource\")\n\n# result of one_metric_data:\n  # '\"new-york.power.usage\" 42422.0 1493773500 source=\"localhost\" \"datacenter\"=\"dc1\"\\n'\n\n# list of data\nbatch_metric_data = [one_metric_data, one_metric_data]\n\n# send list of data immediately\nwavefront_sender.send_metric_now(batch_metric_data)\n```\n\n***note***: if your metric name has a bad character, that character is replaced with a `-`.\n\n#### batch histograms\n\n```python\nfrom uuid import uuid\nfrom wavefront_sdk.entities.histogram import histogram_granularity\nfrom wavefront_sdk.common import histogram_to_line_data\n\n# generate string data in wavefront histogram format\none_histogram_data = histogram_to_line_data(\n    name=\"request.latency\",\n    centroids=[(30.0, 20), (5.1, 10)],\n    histogram_granularities={histogram_granularity.minute,\n                             histogram_granularity.hour,\n                             histogram_granularity.day},\n    timestamp=1493773500,\n    source=\"appserver1\",\n    tags={\"region\": \"us-west\"},\n    default_source =\"defaultsource\")\n\n# result of one_histogram_data:\n  # '!d 1493773500 #20 30.0 #10 5.1 \"request.latency\" source=\"appserver1\" \"region\"=\"us-west\"\\n\n  # !h 1493773500 #20 30.0 #10 5.1 \"request.latency\" source=\"appserver1\" \"region\"=\"us-west\"\\n\n  # !m 1493773500 #20 30.0 #10 5.1 \"request.latency\" source=\"appserver1\" \"region\"=\"us-west\"\\n'\n\n# list of data\nbatch_histogram_data = [one_histogram_data, one_histogram_data]\n\n# send list of data immediately\nwavefront_sender.send_distribution_now(batch_histogram_data)\n```\n\n#### batch trace data\n\nif you are directly using the sender sdk to send data to the service, you won\u2019t see span-level red metrics by default unless you use the wavefront proxy and define a custom tracing port (`tracing_port`). see [instrument your application with wavefront sender sdks](https://docs.wavefront.com/tracing_instrumenting_frameworks.html#instrument-your-application-with-wavefront-sender-sdks) for details.\n\n```python\nfrom uuid import uuid\nfrom wavefront_sdk.common import tracing_span_to_line_data\n\n# generate string data in wavefront tracing span format\none_tracing_span_data = tracing_span_to_line_data(\n    name=\"getallusers\",\n    start_millis=1552949776000,\n    duration_millis=343,\n    source=\"localhost\",\n    trace_id=uuid(\"7b3bf470-9456-11e8-9eb6-529269fb1459\"),\n    span_id=uuid(\"0313bafe-9457-11e8-9eb6-529269fb1459\"),\n    parents=[uuid(\"2f64e538-9457-11e8-9eb6-529269fb1459\")],\n    follows_from=[uuid(\"5f64e538-9457-11e8-9eb6-529269fb1459\")],\n    tags=[(\"application\", \"wavefront\"), (\"http.method\", \"get\")],\n    span_logs=none,\n    default_source=\"defaultsource\")\n\n# result of one_tracing_span_data:\n  # '\"getallusers\" source=\"localhost\" traceid=7b3bf470-9456-11e8-9eb6-529269fb1459 spanid=0313bafe-\n  # 9457-11e8-9eb6-529269fb1459 parent=2f64e538-9457-11e8-9eb6-529269fb1459 followsfrom=5f64e538-\n  # 9457-11e8-9eb6-529269fb1459 \"application\"=\"wavefront\" \"http.method\"=\"get\" 1552949776000 343\\n'\n\n# list of data\nbatch_span_data = [one_tracing_span_data, one_tracing_span_data]\n\n# send list of data immediately\nwavefront_sender.send_span_now(batch_span_data)\n```\n\n#### batch events\n\n```python\nfrom wavefront_sdk.common import event_to_line_data\n\n# generate string data in wavefront event format\none_event_data = event_to_line_data(\n    name=\"event name\",\n    start_time=1592200048,\n    end_time=1592201048,\n    source=\"localhost\",\n    tags=[\"env\", \"dev\"],\n    annotations={\"severity\": \"info\",\n                 \"type\": \"backup\",\n                 \"details\": \"broker backup\"})\n\n# result of one_event_data:\n# '@event 1592200048 1592201048 \"event name\" severity=\"info\" type=\"backup\" details=\"broker backup\"\n# host=\"localhost\" tag=\"env\" tag=\"dev\"\\n'\n\n# list of events\nbatch_event_data = [one_event_data, one_event_data]\n\n# send list of events immediately\nwavefront_sender.send_event_now(batch_event_data)\n```\n\n## close the sender\n\nremember to flush the buffer and close the sender before shutting down the application.\n\n```python\n# to shut down a sender from a wavefrontclientfactory\nwavefront_sender = client_factory.get_client()\n\n# if the application failed to send metrics/histograms/tracing-spans,\n# you can get the total failure count as follows:\ntotal_failures = wavefront_sender.get_failure_count()\n\n# on-demand buffer flush\nwavefront_sender.flush_now()\n\n# close the sender connection\nwavefront_sender.close()\n```\n\n## license\n\n[apache 2.0 license](license).\n\n## contribute\n\nto get support with our project and contribute, follow the instructions in [contributing.md](contributing.md).\n\nto create a new release, follow the instructions in [releasing.md](releasing.md)\n",
  "docs_url": null,
  "keywords": "aria,aria operations,aria operations for applications,3d observability,distributed tracing,histograms,logging,metrics,monitoring,observability,tracing,vmware aria,vmware aria operations,vmware aria operations for applications,wavefront,wavefront sdk",
  "license": "apache-2.0",
  "name": "wavefront-sdk-python",
  "package_url": "https://pypi.org/project/wavefront-sdk-python/",
  "project_url": "https://pypi.org/project/wavefront-sdk-python/",
  "project_urls": {
    "Homepage": "https://github.com/wavefrontHQ/wavefront-sdk-python"
  },
  "release_url": "https://pypi.org/project/wavefront-sdk-python/2.1.0/",
  "requires_dist": [
    "requests >=2.27",
    "tdigest >=0.5.2",
    "Deprecated >=1.2.10"
  ],
  "requires_python": "",
  "summary": "vmware aria operations for applications python sdk",
  "version": "2.1.0",
  "releases": [],
  "developers": [
    "vmware_aria_operations_for_applications_team"
  ],
  "kwds": "wavefront_sdk wavefrontclient wavefront_sender wavefrontclientfactory tracing_instrumenting_frameworks",
  "license_kwds": "apache-2.0",
  "libtype": "pypi",
  "id": "pypi_wavefront_sdk_python",
  "homepage": "https://github.com/wavefronthq/wavefront-sdk-python",
  "release_count": 16,
  "dependency_ids": [
    "pypi_deprecated",
    "pypi_requests",
    "pypi_tdigest"
  ]
}