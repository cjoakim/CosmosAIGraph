{
  "classifiers": [
    "development status :: 5 - production/stable",
    "framework :: django",
    "intended audience :: developers",
    "license :: osi approved :: apache software license",
    "operating system :: os independent",
    "programming language :: python :: 3",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9"
  ],
  "description": "# django object actions\n\n[![ci](https://github.com/crccheck/django-object-actions/actions/workflows/ci.yml/badge.svg?branch=master)](https://github.com/crccheck/django-object-actions/actions/workflows/ci.yml?query=branch%3amaster)\n\nif you've ever tried making admin object tools you may have thought, \"why can't\nthis be as easy as making django admin actions?\" well now they can be.\n\n## quick-start guide\n\ninstall django object actions:\n\n```shell\n$ pip install django-object-actions\n```\n\nadd `django_object_actions` to your `installed_apps` so django can find\nour templates.\n\nin your admin.py:\n\n```python\nfrom django_object_actions import djangoobjectactions, action\n\nclass articleadmin(djangoobjectactions, admin.modeladmin):\n    @action(label=\"publish\", description=\"submit this article\") # optional\n    def publish_this(self, request, obj):\n        publish_obj(obj)\n\n    change_actions = ('publish_this', )\n    changelist_actions = ('...', )\n```\n\n## usage\n\ndefining new &_tool actions_ is just like defining regular [admin actions]. the\nmajor difference is the functions for `django-object-actions` will take an\nobject instance instead of a queryset (see _re-using admin actions_ below).\n\n_tool actions_ are exposed by putting them in a `change_actions` attribute in\nyour `admin.modeladmin`. you can also add _tool actions_ to the main changelist\nviews too. there, you'll get a queryset like a regular [admin action][admin actions]:\n\n```python\nfrom django_object_actions import djangoobjectactions\n\nclass mymodeladmin(djangoobjectactions, admin.modeladmin):\n    @action(\n        label=\"this will be the label of the button\",  # optional\n        description=\"this will be the tooltip of the button\" # optional\n    )\n    def toolfunc(self, request, obj):\n        pass\n\n    def make_published(modeladmin, request, queryset):\n        queryset.update(status='p')\n\n    change_actions = ('toolfunc', )\n    changelist_actions = ('make_published', )\n```\n\njust like admin actions, you can send a message with `self.message_user`.\nnormally, you would do something to the object and return to the same url, but\nif you return a `httpresponse`, it will follow it (hey, just like [admin\nactions]!).\n\nif your admin modifies `get_urls`, `change_view`, or `changelist_view`,\nyou'll need to take extra care because `django-object-actions` uses them too.\n\n### re-using admin actions\n\nif you would like a preexisting admin action to also be an _object action_, add\nthe `takes_instance_or_queryset` decorator to convert object instances into a\nqueryset and pass querysets:\n\n```python\nfrom django_object_actions import djangoobjectactions, takes_instance_or_queryset\n\nclass robotadmin(djangoobjectactions, admin.modeladmin):\n    # ... snip ...\n\n    @takes_instance_or_queryset\n    def tighten_lug_nuts(self, request, queryset):\n        queryset.update(lugnuts=f('lugnuts') - 1)\n\n    change_actions = ['tighten_lug_nuts']\n    actions = ['tighten_lug_nuts']\n```\n\n[admin actions]: https://docs.djangoproject.com/en/stable/ref/contrib/admin/actions/\n\n### customizing _object actions_\n\nto give the action some a helpful title tooltip, you can use the `action` decorator\nand set the description argument.\n\n```python\n@action(description=\"increment the vote count by one\")\ndef increment_vote(self, request, obj):\n    obj.votes = obj.votes + 1\n    obj.save()\n```\n\nalternatively, you can also add a `short_description` attribute,\nsimilar to how admin actions work:\n\n```python\ndef increment_vote(self, request, obj):\n    obj.votes = obj.votes + 1\n    obj.save()\nincrement_vote.short_description = \"increment the vote count by one\"\n```\n\nby default, django object actions will guess what to label the button\nbased on the name of the function. you can override this with a `label`\nattribute:\n\n```python\n@action(label=\"vote++\")\ndef increment_vote(self, request, obj):\n    obj.votes = obj.votes + 1\n    obj.save()\n```\n\nor\n\n```python\ndef increment_vote(self, request, obj):\n    obj.votes = obj.votes + 1\n    obj.save()\nincrement_vote.label = \"vote++\"\n```\n\nif you need even more control, you can add arbitrary attributes to the buttons\nby adding a django widget style\n[attrs](https://docs.djangoproject.com/en/stable/ref/forms/widgets/#django.forms.widget.attrs)\nattribute:\n\n```python\n@action(attrs = {'class': 'addlink'})\ndef increment_vote(self, request, obj):\n    obj.votes = obj.votes + 1\n    obj.save()\n```\n\nor\n\n```python\ndef increment_vote(self, request, obj):\n    obj.votes = obj.votes + 1\n    obj.save()\nincrement_vote.attrs = {\n    'class': 'addlink',\n}\n```\n\n### programmatically disabling actions\n\nyou can programmatically disable registered actions by defining your own\ncustom `get_change_actions()` method. in this example, certain actions\nonly apply to certain object states (e.g. you should not be able to\nclose an company account if the account is already closed):\n\n```python\ndef get_change_actions(self, request, object_id, form_url):\n    actions = super(polladmin, self).get_change_actions(request, object_id, form_url)\n    actions = list(actions)\n    if not request.user.is_superuser:\n        return []\n\n    obj = self.model.objects.get(pk=object_id)\n    if obj.question.endswith('?'):\n        actions.remove('question_mark')\n\n    return actions\n```\n\nthe same is true for changelist actions with `get_changelist_actions`.\n\n### alternate installation\n\nyou don't have to add this to `installed_apps`, all you need to to do\nis copy the template `django_object_actions/change_form.html` some place\ndjango's template loader [will find\nit](https://docs.djangoproject.com/en/stable/ref/settings/#template-dirs).\n\nif you don't intend to use the template customizations at all, don't\nadd `django_object_actions` to your `installed_apps` at all and use\n`basedjangoobjectactions` instead of `djangoobjectactions`.\n\n## more examples\n\nmaking an action that links off-site:\n\n```python\ndef external_link(self, request, obj):\n    from django.http import httpresponseredirect\n    return httpresponseredirect(f'https://example.com/{obj.id}')\n```\n\n## limitations\n\n1.  `django-object-actions` expects functions to be methods of the model\n    admin. while django gives you a lot more options for their admin\n    actions.\n2.  if you provide your own custom `change_form.html`, you'll also need\n    to manually copy in the relevant bits of [our change form\n    ](./django_object_actions/templates/django_object_actions/change_form.html).\n3.  security. this has been written with the assumption that everyone in\n    the django admin belongs there. permissions should be enforced in\n    your own actions irregardless of what this provides. better default\n    security is planned for the future.\n\n## python and django compatibility\n\nsee [`ci.yml`](./.github/workflows/ci.yml) for which python and django versions this supports.\n\n## demo admin & docker images\n\nyou can try the demo admin against several versions of django with these docker\nimages: https://hub.docker.com/r/crccheck/django-object-actions/tags\n\nthis runs the example django project in `./example_project` based on the \"polls\"\ntutorial. `admin.py` demos what you can do with this app.\n\n## development\n\ngetting started:\n\n```shell\n# get a copy of the code\ngit clone git@github.com:crccheck/django-object-actions.git\ncd django-object-actions\n# install requirements\nmake install\nmake test  # run test suite\nmake quickstart  # runs 'make resetdb' and some extra steps\n```\n\nvarious helpers are available as make commands. type `make help` and\nview the `makefile` to see what other things you can do.\n\nsome commands assume you are in the virtualenv. if you see\n\"modulenotfounderror\"s, try running `poetry shell` first.\n\n## similar packages\n\nif you want an actions menu for each row of your changelist, check out [django\nadmin row actions](https://github.com/djangoadminhackers/django-admin-row-actions).\n\ndjango object actions is very similar to\n[django-object-tools](https://github.com/praekelt/django-object-tools), but does\nnot require messing with your urls.py, does not do anything special with\npermissions, and uses the same patterns as making [admin actions].\n\n",
  "docs_url": null,
  "keywords": "django,admin",
  "license": "apache-2.0",
  "name": "django-object-actions",
  "package_url": "https://pypi.org/project/django-object-actions/",
  "project_url": "https://pypi.org/project/django-object-actions/",
  "project_urls": {
    "Homepage": "https://github.com/crccheck/django-object-actions",
    "Repository": "https://github.com/crccheck/django-object-actions"
  },
  "release_url": "https://pypi.org/project/django-object-actions/4.2.0/",
  "requires_dist": [],
  "requires_python": ">=3.7,<4.0",
  "summary": "a django app for adding object tools for models in the admin",
  "version": "4.2.0",
  "releases": [],
  "developers": [
    "c@crccheck.com",
    "crccheck"
  ],
  "kwds": "django_object_actions djangoobjectactions djangoadminhackers django djangoproject",
  "license_kwds": "apache-2.0",
  "libtype": "pypi",
  "id": "pypi_django_object_actions",
  "homepage": "https://github.com/crccheck/django-object-actions",
  "release_count": 25,
  "dependency_ids": []
}