{
  "classifiers": [
    "intended audience :: developers",
    "intended audience :: science/research",
    "license :: osi approved :: mit license",
    "topic :: education",
    "topic :: scientific/engineering",
    "topic :: scientific/engineering :: artificial intelligence"
  ],
  "description": "# clip-interrogator\n\n*want to figure out what a good prompt might be to create new images like an existing one? the **clip interrogator** is here to get you answers!*\n\n## run it!\n\n\ud83c\udd95 now available as a [stable diffusion web ui extension](https://github.com/pharmapsychotic/clip-interrogator-ext)! \ud83c\udd95\n\n<br>\n\nrun version 2 on colab, huggingface, and replicate!\n\n[![open in colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/pharmapsychotic/clip-interrogator/blob/main/clip_interrogator.ipynb) [![generic badge](https://img.shields.io/badge/\ud83e\udd17-open%20in%20spaces-blue.svg)](https://huggingface.co/spaces/pharma/clip-interrogator) [![replicate](https://replicate.com/pharmapsychotic/clip-interrogator/badge)](https://replicate.com/pharmapsychotic/clip-interrogator) [![lambda](https://img.shields.io/badge/%ce%bb-lambda-blue)](https://cloud.lambdalabs.com/demos/ml/clip-interrogator)\n\n<br>\n\n\nversion 1 still available in colab for comparing different clip models \n\n[![open in colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/pharmapsychotic/clip-interrogator/blob/v1/clip_interrogator.ipynb) \n\n\n## about\n\nthe **clip interrogator** is a prompt engineering tool that combines openai's [clip](https://openai.com/blog/clip/) and salesforce's [blip](https://blog.salesforceairesearch.com/blip-bootstrapping-language-image-pretraining/) to optimize text prompts to match a given image. use the resulting prompts with text-to-image models like [stable diffusion](https://github.com/compvis/stable-diffusion) on [dreamstudio](https://beta.dreamstudio.ai/) to create cool art!\n\n\n## using as a library\n\ncreate and activate a python virtual environment\n```bash\npython3 -m venv ci_env\n(for linux  ) source ci_env/bin/activate\n(for windows) .\\ci_env\\scripts\\activate\n```\n\ninstall with pip\n```\n# install torch with gpu support for example:\npip3 install torch torchvision --extra-index-url https://download.pytorch.org/whl/cu117\n\n# install clip-interrogator\npip install clip-interrogator==0.5.5\n```\n\nyou can then use it in your script\n```python\nfrom pil import image\nfrom clip_interrogator import config, interrogator\nimage = image.open(image_path).convert('rgb')\nci = interrogator(config(clip_model_name=\"vit-l-14/openai\"))\nprint(ci.interrogate(image))\n```\n\nclip interrogator uses openclip which supports many different pretrained clip models. for the best prompts for \nstable diffusion 1.x use `vit-l-14/openai` for clip_model_name. for stable diffusion 2.0 use `vit-h-14/laion2b_s32b_b79k`\n\n## configuration\n\nthe `config` object lets you configure clip interrogator's processing. \n* `clip_model_name`: which of the openclip pretrained clip models to use\n* `cache_path`: path where to save precomputed text embeddings\n* `download_cache`: when true will download the precomputed embeddings from huggingface\n* `chunk_size`: batch size for clip, use smaller for lower vram\n* `quiet`: when true no progress bars or text output will be displayed\n\non systems with low vram you can call `config.apply_low_vram_defaults()` to reduce the amount of vram needed (at the cost of some speed and quality). the default settings use about 6.3gb of vram and the low vram settings use about 2.7gb.\n\nsee the [run_cli.py](https://github.com/pharmapsychotic/clip-interrogator/blob/main/run_cli.py) and [run_gradio.py](https://github.com/pharmapsychotic/clip-interrogator/blob/main/run_gradio.py) for more examples on using config and interrogator classes.\n\n\n## ranking against your own list of terms\n\n```python\nfrom clip_interrogator import config, interrogator, labeltable, load_list\nfrom pil import image\n\nci = interrogator(config(blip_model_type=none))\nimage = image.open(image_path).convert('rgb')\ntable = labeltable(load_list('terms.txt'), 'terms', ci)\nbest_match = table.rank(ci.image_to_features(image), top_count=1)[0]\nprint(best_match)\n```\n",
  "docs_url": null,
  "keywords": "blip,clip,prompt-engineering,stable-diffusion,text-to-image",
  "license": "mit",
  "name": "clip-interrogator",
  "package_url": "https://pypi.org/project/clip-interrogator/",
  "project_url": "https://pypi.org/project/clip-interrogator/",
  "project_urls": {
    "Homepage": "https://github.com/pharmapsychotic/clip-interrogator"
  },
  "release_url": "https://pypi.org/project/clip-interrogator/0.6.0/",
  "requires_dist": [
    "torch",
    "torchvision",
    "Pillow",
    "requests",
    "safetensors",
    "tqdm",
    "open-clip-torch",
    "accelerate",
    "transformers (>=4.27.1)",
    "pytest ; extra == 'dev'"
  ],
  "requires_python": "",
  "summary": "generate a prompt from an image",
  "version": "0.6.0",
  "releases": [],
  "developers": [
    "me@pharmapsychotic.com",
    "pharmapsychotic"
  ],
  "kwds": "clip clip_interrogator ui openclip badge",
  "license_kwds": "mit",
  "libtype": "pypi",
  "id": "pypi_clip_interrogator",
  "homepage": "https://github.com/pharmapsychotic/clip-interrogator",
  "release_count": 21,
  "dependency_ids": [
    "pypi_accelerate",
    "pypi_open_clip_torch",
    "pypi_pillow",
    "pypi_pytest",
    "pypi_requests",
    "pypi_safetensors",
    "pypi_torch",
    "pypi_torchvision",
    "pypi_tqdm",
    "pypi_transformers"
  ]
}