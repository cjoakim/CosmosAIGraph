{
  "classifiers": [
    "development status :: 7 - inactive",
    "framework :: aws cdk",
    "framework :: aws cdk :: 1",
    "intended audience :: developers",
    "license :: osi approved",
    "operating system :: os independent",
    "programming language :: javascript",
    "programming language :: python :: 3 :: only",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "typing :: typed"
  ],
  "description": "# aws service catalog construct library\n\n<!--begin stability banner-->---\n\n\n![end-of-support](https://img.shields.io/badge/end--of--support-critical.svg?style=for-the-badge)\n\n> aws cdk v1 has reached end-of-support on 2023-06-01.\n> this package is no longer being updated, and users should migrate to aws cdk v2.\n>\n> for more information on how to migrate, see the [*migrating to aws cdk v2* guide](https://docs.aws.amazon.com/cdk/v2/guide/migrating-v2.html).\n\n---\n<!--end stability banner-->\n\n[aws service catalog](https://docs.aws.amazon.com/servicecatalog/latest/dg/what-is-service-catalog.html)\nenables organizations to create and manage catalogs of products for their end users that are approved for use on aws.\n\n## table of contents\n\n* [portfolio](#portfolio)\n\n  * [granting access to a portfolio](#granting-access-to-a-portfolio)\n  * [sharing a portfolio with another aws account](#sharing-a-portfolio-with-another-aws-account)\n* [product](#product)\n\n  * [creating a product from a local asset](#creating-a-product-from-local-asset)\n  * [creating a product from a stack](#creating-a-product-from-a-stack)\n  * [creating a product from a stack with a history of previous versions](#creating-a-product-from-a-stack-with-a-history-of-all-previous-versions)\n  * [adding a product to a portfolio](#adding-a-product-to-a-portfolio)\n* [tagoptions](#tag-options)\n* [constraints](#constraints)\n\n  * [tag update constraint](#tag-update-constraint)\n  * [notify on stack events](#notify-on-stack-events)\n  * [cloudformation template parameters constraint](#cloudformation-template-parameters-constraint)\n  * [set launch role](#set-launch-role)\n  * [deploy with stacksets](#deploy-with-stacksets)\n\nthe `@aws-cdk/aws-servicecatalog` package contains resources that enable users to automate governance and management of their aws resources at scale.\n\n```python\nimport aws_cdk.aws_servicecatalog as servicecatalog\n```\n\n## portfolio\n\naws service catalog portfolios allow administrators to organize, manage, and distribute cloud resources for their end users.\nusing the cdk, a new portfolio can be created with the `portfolio` construct:\n\n```python\nservicecatalog.portfolio(self, \"portfolio\",\n    display_name=\"myportfolio\",\n    provider_name=\"myteam\"\n)\n```\n\nyou can also specify optional metadata properties such as `description` and `messagelanguage`\nto help better catalog and manage your portfolios.\n\n```python\nservicecatalog.portfolio(self, \"portfolio\",\n    display_name=\"myfirstportfolio\",\n    provider_name=\"scadmin\",\n    description=\"portfolio for a project\",\n    message_language=servicecatalog.messagelanguage.en\n)\n```\n\nread more at [creating and managing portfolios](https://docs.aws.amazon.com/servicecatalog/latest/adminguide/catalogs_portfolios.html).\n\nto reference an existing portfolio into your cdk application, use the `portfolio.fromportfolioarn()` factory method:\n\n```python\nportfolio = servicecatalog.portfolio.from_portfolio_arn(self, \"referencedportfolio\", \"arn:aws:catalog:region:account-id:portfolio/port-abcdefghi\")\n```\n\n### granting access to a portfolio\n\nyou can grant access to and manage the `iam` users, groups, or roles that have access to the products within a portfolio.\nentities with granted access will be able to utilize the portfolios resources and products via the console or aws cli.\nonce resources are deployed end users will be able to access them via the console or service catalog cli.\n\n```python\nimport aws_cdk.aws_iam as iam\n\n# portfolio: servicecatalog.portfolio\n\n\nuser = iam.user(self, \"user\")\nportfolio.give_access_to_user(user)\n\nrole = iam.role(self, \"role\",\n    assumed_by=iam.accountrootprincipal()\n)\nportfolio.give_access_to_role(role)\n\ngroup = iam.group(self, \"group\")\nportfolio.give_access_to_group(group)\n```\n\n### sharing a portfolio with another aws account\n\nyou can use account-to-account sharing to distribute a reference to your portfolio to other aws accounts by passing the recipient account number.\nafter the share is initiated, the recipient account can accept the share via cli or console by importing the portfolio id.\nchanges made to the shared portfolio will automatically propagate to recipients.\n\n```python\n# portfolio: servicecatalog.portfolio\n\nportfolio.share_with_account(\"012345678901\")\n```\n\n## product\n\nproducts are version friendly infrastructure-as-code templates that admins create and add to portfolios for end users to provision and create aws resources.\nservice catalog supports products from aws marketplace or ones defined by a cloudformation template.\nthe cdk currently only supports adding products of type cloudformation.\nusing the cdk, a new product can be created with the `cloudformationproduct` construct.\nyou can use `cloudformationtemplate.fromurl` to create a product from a cloudformation template directly from a url that points to the template in s3, github, or codecommit:\n\n```python\nproduct = servicecatalog.cloudformationproduct(self, \"myfirstproduct\",\n    product_name=\"my product\",\n    owner=\"product owner\",\n    product_versions=[servicecatalog.cloudformationproductversion(\n        product_version_name=\"v1\",\n        cloud_formation_template=servicecatalog.cloudformationtemplate.from_url(\"https://raw.githubusercontent.com/awslabs/aws-cloudformation-templates/master/aws/services/servicecatalog/product.yaml\")\n    )\n    ]\n)\n```\n\n### creating a product from a local asset\n\na `cloudformationproduct` can also be created by using a cloudformation template held locally on disk using assets.\nassets are files that are uploaded to an s3 bucket before deployment.\n`cloudformationtemplate.fromasset` can be utilized to create a product by passing the path to a local template file on your disk:\n\n```python\nimport path as path\n\n\nproduct = servicecatalog.cloudformationproduct(self, \"product\",\n    product_name=\"my product\",\n    owner=\"product owner\",\n    product_versions=[servicecatalog.cloudformationproductversion(\n        product_version_name=\"v1\",\n        cloud_formation_template=servicecatalog.cloudformationtemplate.from_url(\"https://raw.githubusercontent.com/awslabs/aws-cloudformation-templates/master/aws/services/servicecatalog/product.yaml\")\n    ), servicecatalog.cloudformationproductversion(\n        product_version_name=\"v2\",\n        cloud_formation_template=servicecatalog.cloudformationtemplate.from_asset(path.join(__dirname, \"development-environment.template.json\"))\n    )\n    ]\n)\n```\n\n### creating a product from a stack\n\nyou can create a service catalog `cloudformationproduct` entirely defined with cdk code using a service catalog `productstack`.\na separate child stack for your product is created and you can add resources like you would for any other cdk stack,\nsuch as an s3 bucket, iam roles, and ec2 instances. this stack is passed in as a product version to your\nproduct.  this will not create a separate cloudformation stack during deployment.\n\n```python\nimport aws_cdk.aws_s3 as s3\nimport aws_cdk.core as cdk\n\n\nclass s3bucketproduct(servicecatalog.productstack):\n    def __init__(self, scope, id):\n        super().__init__(scope, id)\n\n        s3.bucket(self, \"bucketproduct\")\n\nproduct = servicecatalog.cloudformationproduct(self, \"product\",\n    product_name=\"my product\",\n    owner=\"product owner\",\n    product_versions=[servicecatalog.cloudformationproductversion(\n        product_version_name=\"v1\",\n        cloud_formation_template=servicecatalog.cloudformationtemplate.from_product_stack(s3bucketproduct(self, \"s3bucketproduct\"))\n    )\n    ]\n)\n```\n\n### creating a product from a stack with a history of previous versions\n\nthe default behavior of service catalog is to overwrite each product version upon deployment.\nthis applies to product stacks as well, where only the latest changes to your product stack will\nbe deployed.\nto keep a history of the revisions of a productstack available in service catalog,\nyou would need to define a productstack for each historical copy.\n\nyou can instead create a `productstackhistory` to maintain snapshots of all previous versions.\nthe `productstackhistory` can be created by passing the base `productstack`,\na `currentversionname` for your current version and a `locked` boolean.\nthe `locked` boolean which when set to true will prevent your `currentversionname`\nfrom being overwritten when there is an existing snapshot for that version.\n\n```python\nimport aws_cdk.aws_s3 as s3\nimport aws_cdk.core as cdk\n\n\nclass s3bucketproduct(servicecatalog.productstack):\n    def __init__(self, scope, id):\n        super().__init__(scope, id)\n\n        s3.bucket(self, \"bucketproduct\")\n\nproduct_stack_history = servicecatalog.productstackhistory(self, \"productstackhistory\",\n    product_stack=s3bucketproduct(self, \"s3bucketproduct\"),\n    current_version_name=\"v1\",\n    current_version_locked=true\n)\n```\n\nwe can deploy the current version `v1` by using `productstackhistory.currentversion()`\n\n```python\nimport aws_cdk.aws_s3 as s3\nimport aws_cdk.core as cdk\n\n\nclass s3bucketproduct(servicecatalog.productstack):\n    def __init__(self, scope, id):\n        super().__init__(scope, id)\n\n        s3.bucket(self, \"bucketproductv2\")\n\nproduct_stack_history = servicecatalog.productstackhistory(self, \"productstackhistory\",\n    product_stack=s3bucketproduct(self, \"s3bucketproduct\"),\n    current_version_name=\"v2\",\n    current_version_locked=true\n)\n\nproduct = servicecatalog.cloudformationproduct(self, \"myfirstproduct\",\n    product_name=\"my product\",\n    owner=\"product owner\",\n    product_versions=[\n        product_stack_history.current_version()\n    ]\n)\n```\n\nusing `productstackhistory` all deployed templates for the productstack will be written to disk,\nso that they will still be available in the future as the definition of the `productstack` subclass changes over time.\n**it is very important** that you commit these old versions to source control as these versions\ndetermine whether a version has already been deployed and can also be deployed themselves.\n\nafter using `productstackhistory` to deploy version `v1` of your `productstack`, we\nmake changes to the `productstack` and update the `currentversionname` to `v2`.\nwe still want our `v1` version to still be deployed, so we reference it by calling `productstackhistory.versionfromsnapshot('v1')`.\n\n```python\nimport aws_cdk.aws_s3 as s3\nimport aws_cdk.core as cdk\n\n\nclass s3bucketproduct(servicecatalog.productstack):\n    def __init__(self, scope, id):\n        super().__init__(scope, id)\n\n        s3.bucket(self, \"bucketproductv2\")\n\nproduct_stack_history = servicecatalog.productstackhistory(self, \"productstackhistory\",\n    product_stack=s3bucketproduct(self, \"s3bucketproduct\"),\n    current_version_name=\"v2\",\n    current_version_locked=true\n)\n\nproduct = servicecatalog.cloudformationproduct(self, \"myfirstproduct\",\n    product_name=\"my product\",\n    owner=\"product owner\",\n    product_versions=[\n        product_stack_history.current_version(),\n        product_stack_history.version_from_snapshot(\"v1\")\n    ]\n)\n```\n\n### adding a product to a portfolio\n\nyou add products to a portfolio to organize and distribute your catalog at scale.  adding a product to a portfolio creates an association,\nand the product will become visible within the portfolio side in both the service catalog console and aws cli.\nyou can add a product to multiple portfolios depending on your organizational structure and how you would like to group access to products.\n\n```python\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\nportfolio.add_product(product)\n```\n\n## tag options\n\ntagoptions allow administrators to easily manage tags on provisioned products by providing a template for a selection of tags that end users choose from.\ntagoptions are created by specifying a tag key with a set of allowed values and can be associated with both portfolios and products.\nwhen launching a product, both the tagoptions associated with the product and the containing portfolio are made available.\n\nat the moment, tagoptions can only be deactivated in the console.\n\n```python\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\ntag_options_for_portfolio = servicecatalog.tagoptions(self, \"orgtagoptions\",\n    allowed_values_for_tags={\n        \"group\": [\"finance\", \"engineering\", \"marketing\", \"research\"],\n        \"costcenter\": [\"01\", \"02\", \"03\"]\n    }\n)\nportfolio.associate_tag_options(tag_options_for_portfolio)\n\ntag_options_for_product = servicecatalog.tagoptions(self, \"producttagoptions\",\n    allowed_values_for_tags={\n        \"environment\": [\"dev\", \"alpha\", \"prod\"]\n    }\n)\nproduct.associate_tag_options(tag_options_for_product)\n```\n\n## constraints\n\nconstraints are governance gestures that you place on product-portfolio associations that allow you to manage minimal launch permissions, notifications, and other optional actions that end users can perform on products.\nusing the cdk, if you do not explicitly associate a product to a portfolio and add a constraint, it will automatically add an association for you.\n\nthere are rules around how constraints are applied to portfolio-product associations.\nfor example, you can only have a single \"launch role\" constraint applied to a portfolio-product association.\nif a misconfigured constraint is added, `synth` will fail with an error message.\n\nread more at [service catalog constraints](https://docs.aws.amazon.com/servicecatalog/latest/adminguide/constraints.html).\n\n### tag update constraint\n\ntag update constraints allow or disallow end users to update tags on resources associated with an aws service catalog product upon provisioning.\nby default, if a tag update constraint is not configured, tag updating is not permitted.\nif tag updating is allowed, then new tags associated with the product or portfolio will be applied to provisioned resources during a provisioned product update.\n\n```python\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\nportfolio.add_product(product)\nportfolio.constrain_tag_updates(product)\n```\n\nif you want to disable this feature later on, you can update it by setting the \"allow\" parameter to `false`:\n\n```python\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\n# to disable tag updates:\nportfolio.constrain_tag_updates(product,\n    allow=false\n)\n```\n\n### notify on stack events\n\nallows users to subscribe an aws `sns` topic to a provisioned product's cloudformation stack events.\nwhen an end user provisions a product it creates a cloudformation stack that notifies the subscribed topic on creation, edit, and delete events.\nan individual `sns` topic may only have a single subscription to any given portfolio-product association.\n\n```python\nimport aws_cdk.aws_sns as sns\n\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\ntopic1 = sns.topic(self, \"topic1\")\nportfolio.notify_on_stack_events(product, topic1)\n\ntopic2 = sns.topic(self, \"topic2\")\nportfolio.notify_on_stack_events(product, topic2,\n    description=\"description for topic2\"\n)\n```\n\n### cloudformation template parameters constraint\n\ncloudformation template parameter constraints allow you to configure the provisioning parameters that are available to end users when they launch a product.\ntemplate constraint rules consist of one or more assertions that define the default and/or allowable values for a product\u2019s provisioning parameters.\nyou can configure multiple parameter constraints to govern the different provisioning parameters within your products.\nfor example, a rule might define the `ec2` instance types that users can choose from when launching a product that includes one or more `ec2` instances.\nparameter rules have an optional `condition` field that allow for rule application to consider conditional evaluations.\nif a `condition` is specified, all  assertions will be applied if the condition evaluates to true.\nfor information on rule-specific intrinsic functions to define rule conditions and assertions,\nsee [aws rule functions](https://docs.aws.amazon.com/awscloudformation/latest/userguide/intrinsic-function-reference-rules.html).\n\n```python\nimport aws_cdk.core as cdk\n\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\nportfolio.constrain_cloud_formation_parameters(product,\n    rule=servicecatalog.templaterule(\n        rule_name=\"testinstancetype\",\n        condition=cdk.fn.condition_equals(cdk.fn.ref(\"environment\"), \"test\"),\n        assertions=[servicecatalog.templateruleassertion(\n            assert=cdk.fn.condition_contains([\"t2.micro\", \"t2.small\"], cdk.fn.ref(\"instancetype\")),\n            description=\"for test environment, the instance type should be small\"\n        )]\n    )\n)\n```\n\n### set launch role\n\nallows you to configure a specific `iam` role that service catalog assumes on behalf of the end user when launching a product.\nby setting a launch role constraint, you can maintain least permissions for an end user when launching a product.\nfor example, a launch role can grant permissions for specific resource creation like an `s3` bucket that the user.\nthe launch role must be assumed by the service catalog principal.\nyou can only have one launch role set for a portfolio-product association,\nand you cannot set a launch role on a product that already has a stacksets deployment configured.\n\n```python\nimport aws_cdk.aws_iam as iam\n\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\nlaunch_role = iam.role(self, \"launchrole\",\n    assumed_by=iam.serviceprincipal(\"servicecatalog.amazonaws.com\")\n)\n\nportfolio.set_launch_role(product, launch_role)\n```\n\nyou can also set the launch role using just the name of a role which is locally deployed in end user accounts.\nthis is useful for when roles and users are separately managed outside of the cdk.\nthe given role must exist in both the account that creates the launch role constraint,\nas well as in any end user accounts that wish to provision a product with the launch role.\n\nyou can do this by passing in the role with an explicitly set name:\n\n```python\nimport aws_cdk.aws_iam as iam\n\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\nlaunch_role = iam.role(self, \"launchrole\",\n    role_name=\"myrole\",\n    assumed_by=iam.serviceprincipal(\"servicecatalog.amazonaws.com\")\n)\n\nportfolio.set_local_launch_role(product, launch_role)\n```\n\nor you can simply pass in a role name and cdk will create a role with that name that trusts service catalog in the account:\n\n```python\nimport aws_cdk.aws_iam as iam\n\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\nrole_name = \"myrole\"\nlaunch_role = portfolio.set_local_launch_role_name(product, role_name)\n```\n\nsee [launch constraint](https://docs.aws.amazon.com/servicecatalog/latest/adminguide/constraints-launch.html) documentation\nto understand the permissions that launch roles need.\n\n### deploy with stacksets\n\na stacksets deployment constraint allows you to configure product deployment options using\n[aws cloudformation stacksets](https://docs.aws.amazon.com/servicecatalog/latest/adminguide/using-stacksets.html).\nyou can specify one or more accounts and regions into which stack instances will launch when the product is provisioned.\nthere is an additional field `allowstacksetinstanceoperations` that sets ability for end users to create, edit, or delete the stacks created by the stackset.\nby default, this field is set to `false`.\nwhen launching a stacksets product, end users can select from the list of accounts and regions configured in the constraint to determine where the stack instances will deploy and the order of deployment.\nyou can only define one stacksets deployment configuration per portfolio-product association,\nand you cannot both set a launch role and stacksets deployment configuration for an assocation.\n\n```python\nimport aws_cdk.aws_iam as iam\n\n# portfolio: servicecatalog.portfolio\n# product: servicecatalog.cloudformationproduct\n\n\nadmin_role = iam.role(self, \"adminrole\",\n    assumed_by=iam.accountrootprincipal()\n)\n\nportfolio.deploy_with_stack_sets(product,\n    accounts=[\"012345678901\", \"012345678902\", \"012345678903\"],\n    regions=[\"us-west-1\", \"us-east-1\", \"us-west-2\", \"us-east-1\"],\n    admin_role=admin_role,\n    execution_role_name=\"scstacksetexecutionrole\",  # name of role deployed in end users accounts.\n    allow_stack_set_instance_operations=true\n)\n```\n",
  "docs_url": null,
  "keywords": "",
  "license": "apache-2.0",
  "name": "aws-cdk.aws-servicecatalog",
  "package_url": "https://pypi.org/project/aws-cdk.aws-servicecatalog/",
  "project_url": "https://pypi.org/project/aws-cdk.aws-servicecatalog/",
  "project_urls": {
    "Homepage": "https://github.com/aws/aws-cdk",
    "Source": "https://github.com/aws/aws-cdk.git"
  },
  "release_url": "https://pypi.org/project/aws-cdk.aws-servicecatalog/1.204.0/",
  "requires_dist": [
    "aws-cdk.aws-iam (==1.204.0)",
    "aws-cdk.aws-s3-assets (==1.204.0)",
    "aws-cdk.aws-sns (==1.204.0)",
    "aws-cdk.core (==1.204.0)",
    "constructs (<4.0.0,>=3.3.69)",
    "jsii (<2.0.0,>=1.84.0)",
    "publication (>=0.0.3)",
    "typeguard (~=2.13.3)"
  ],
  "requires_python": "~=3.7",
  "summary": "the cdk construct library for aws::servicecatalog",
  "version": "1.204.0",
  "releases": [],
  "developers": [
    "amazon_web_services"
  ],
  "kwds": "aws_cdk aws_servicecatalog aws_s3 aws awslabs",
  "license_kwds": "apache-2.0",
  "libtype": "pypi",
  "id": "pypi_aws_cdk.aws_servicecatalog",
  "homepage": "https://github.com/aws/aws-cdk",
  "release_count": 258,
  "dependency_ids": [
    "pypi_aws_cdk.aws_iam",
    "pypi_aws_cdk.aws_s3_assets",
    "pypi_aws_cdk.aws_sns",
    "pypi_aws_cdk.core",
    "pypi_constructs",
    "pypi_jsii",
    "pypi_publication",
    "pypi_typeguard"
  ]
}