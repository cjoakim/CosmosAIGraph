{
  "classifiers": [
    "environment :: console",
    "environment :: web environment",
    "intended audience :: developers",
    "license :: osi approved :: bsd license",
    "operating system :: macos",
    "operating system :: microsoft :: windows",
    "operating system :: posix",
    "topic :: software development :: debuggers",
    "topic :: software development :: testing"
  ],
  "description": "pyinstrument\n============\n\n[![pypi version](https://badge.fury.io/py/pyinstrument.svg)](https://badge.fury.io/py/pyinstrument)\n[![.github/workflows/test.yml](https://github.com/joerick/pyinstrument/actions/workflows/test.yml/badge.svg)](https://github.com/joerick/pyinstrument/actions/workflows/test.yml)\n[![build wheels](https://github.com/joerick/pyinstrument/actions/workflows/wheels.yml/badge.svg)](https://github.com/joerick/pyinstrument/actions/workflows/wheels.yml)\n\n[documentation](https://pyinstrument.readthedocs.io/)\n\n<!-- mark intro start -->\n\n[![screenshot](docs/img/screenshot.jpg)](https://raw.githubusercontent.com/joerick/pyinstrument/main/docs/img/screenshot.jpg)\n\npyinstrument is a python profiler. a profiler is a tool to help you optimize\nyour code - make it faster. to get the biggest speed increase you should\n[focus on the slowest part of your program](https://en.wikipedia.org/wiki/amdahl%27s_law).\npyinstrument helps you find it!\n\n> \u2615\ufe0f not sure where to start? check out this [video tutorial from calmcode.io](https://calmcode.io/pyinstrument/introduction.html)!\n\n<!-- mark intro end -->\n\ninstallation\n------------\n\n<!-- mark installation start -->\n\n    pip install pyinstrument\n\npyinstrument supports python 3.7+.\n\n<!-- mark installation end -->\n\n> to run pyinstrument from a git checkout, there's a build step.\ntake a look at [contributing](#contributing) for more info.\n\ndocumentation\n-------------\n\nto learn how to use pyinstrument, or to check the reference, head to the\n[documentation](https://pyinstrument.readthedocs.io/).\n\nknown issues\n------------\n\n- profiling code inside a docker container can cause some strange results,\n  because the gettimeofday syscall that pyinstrument uses is slow in that\n  environment. see [#83](https://github.com/joerick/pyinstrument/issues/83)\n- when using `pyinstrument script.py` where `script.py` contains a class\n  serialized with `pickle`, you might encounter errors because the\n  serialisation machinery doesn't know where `__main__` is. [see this issue\n  for workarounds](https://github.com/joerick/pyinstrument/issues/109#issuecomment-722276263)\n\nchangelog\n---------\n\n### v4.6.1\n\n_8 november 2023_\n\n-   fixes a bug with unwanted variable expansion in the ipython magics `%pyinstrument` (#278)\n\n### v4.6.0\n\n_12 october 2023_\n\n-   adds a feature `-c`, which allows profiling code directly from the command line, like `python -c`. (#271)\n-   adds a convenience method [`profiler.write_html`](https://pyinstrument.readthedocs.io/en/latest/reference.html#pyinstrument.profiler.write_html), for writing html output to a file directly. (#266)\n\n### v4.5.3\n\n_7 september 2023_\n\n-   fix a problem in the packaging process that prevented upload to pypi\n\n### v4.5.2\n\n_1 september 2023_\n\n-   show the program name in the header of the html output (#260)\n-   improve program name capture through resilience to other programs modifying sys.argv (#258)\n-   add support for python 3.12 (#246)\n\n### v4.5.1\n\n_22 july 2023_\n\n-   fix a bug that caused `[x frames hidden]` in the output when frames were deleted due to `__tracebackhide__` (#255)\n-   fix a bug causing built-in code to display the filepath `none` in the console output (#254)\n-   some docs improvements (#251)\n\n### v4.5.0\n\n_5 june 2023_\n\n-   adds a flat mode to the console renderer, which can be enabled by passing `-p flat` on the command line. this mode shows the heaviest frame as measured by self-time, which can be useful in some codebases. (#240)\n-   adds the ability to save `pstats` files. this is the file format used by cprofile in the stdlib. it's less detailed than pyinstrument profiles, but it's compatible with more tools. (#236)\n-   fixes a detail of the `--show-all` option - pyinstrument will no longer remove python-internal frames when this option is supplied. (#239)\n-   internally to the html renderer, it now uses svelte to render the frontend, meaning profile html files bundle less javascript and so are smaller. (#222)\n\n### v4.4.0\n\n_5 november 2022_\n\n-   adds the class name to methods in the console & html outputs (#203)\n-   fix a bug that caused pyinstrument machinery to appear at the start of a profile (#215)\n-   frames that set a `__traceback_hide__` local variable will now be removed from the output (#217)\n-   jupyter/ipython magic now supports async/await, if you run with a `--async_mode=enabled` flag. (#212)\n-   fix a crash when more than one root frame is captured in a thread - this can happen with gevent.\n-   a big refactor to the backend, allowing more than just static information to be captured. this currently is just powering the class name feature, but more is to come!\n\n### v4.3.0\n\n_21 august 2022_\n\n-   adds buttons in the html output to switch between absolute and\n    proportional (percentage) time.\n-   adds a command line flag `--interval` (seconds, default 0.001) to change the interval that\n    pyinstrument samples a program. this is useful for long-running programs,\n    where increasing the interval reduces the memory overhead.\n-   includes wheels for cpython 3.11.\n\n### v4.2.0\n\n-   adds a command-line option `-p` `--render-option` that allows arbitrary\n    setting of render options. this lets you set options like\n    `filter_threshold` from the command line, by doing something like\n    `pyinstrument -p processor_options.filter_threshold=0`.\n\n    here's the help output for the option:\n    ```\n      -p render_option, --render-option=render_option\n                        options to pass to the renderer, in the format\n                        'flag_name' or 'option_name=option_value'. for\n                        example, to set the option 'time', pass '-p\n                        time=percent_of_total'. to pass multiple options, use\n                        the -p option multiple times. you can set processor\n                        options using dot-syntax, like '-p\n                        processor_options.filter_threshold=0'. option_value is\n                        parsed as a json value or a string.\n    ```\n-   adds the ability to view times in the console output as percentages,\n    rather than absolute times. use the consolerenderer option\n    `time='percent_of_total'`, or on the command line, use `-p`, like\n    `pyinstrument -p time=percent_of_total`.\n-   adds command line options for loading and saving pyinstrument sessions.\n    you can save the raw data for a pyinstrument session with `-r session`,\n    like `pyinstrument -r session -o session.pyisession myscript.py`. loading\n    is via `--load`, e.g. `pyinstrument --load session.pyisession`.\n-   command line output format is inferred from the `-o` output file\n    extension. so if you do `pyinstrument -o profile.html myscript.py`, you\n    don't need to supply `-r html`, pyinstrument will automatically use the\n    html renderer. or if you do\n    `pyinstrument -o profile.pyisession myscript.py`, it will save a raw\n    session object.\n-   adds [usage examples for fastapi and pytest](https://pyinstrument.readthedocs.io/en/latest/guide.html#profile-a-web-request-in-fastapi) to the documentation.\n-   fixes a bug causing notimplementederror when using `async_mode=strict`.\n-   adds support for python 3.11\n\n### v4.1.1\n\n-   fixed an issue causing pyinstrument_profile_dir_renderer to output the\n    wrong file extension when used with the speedscope renderer.\n\n### v4.1.0\n\n-   you can now use pyinstrument natively in an ipython notebook! just use\n    `%load_ext pyinstrument` at the top of your notebook, and then\n    `%%pyinstrument` in the cell you want to profile.\n-   added support for the [speedscope](https://www.speedscope.app/) format.\n    this provides a way to view interactive flamecharts using pyinstrument. to\n    use, profile with `pyinstrument -r speedscope`, and upload to the\n    speedscope web app.\n-   you can now configure renderers for the django middleware file output,\n    using the `pyinstrument_profile_dir_renderer` option.\n-   added wheels for linux aarch64 (64-bit arm).\n\n### v4.0.4\n\n-   fix a packaging issue where a package called 'test' was installed\n    alongside pyinstrument\n-   use more modern c apis to resolve deprecation warnings on python 3.10.\n-   minor docs fixes\n\n### v4.0.3\n\n-   cpython 3.10 support\n-   improve error messages when trying to use profiler from multiple threads\n-   fix crash when rendering sessions that contain a module in a framegroup\n\n### v4.0.2\n\n-   fix some packaging issues\n\n### v4.0.0\n\n-   async support! pyinstrument now detects when an async task hits an await,\n    and tracks time spent outside of the async context under this await.\n\n    so, for example, here's a simple script with an async task that does a\n    sleep:\n\n    ```python\n    import asyncio\n    from pyinstrument import profiler\n\n    async def main():\n        p = profiler(async_mode='disabled')\n\n        with p:\n            print('hello ...')\n            await asyncio.sleep(1)\n            print('... world!')\n\n        p.print()\n\n    asyncio.run(main())\n    ```\n\n    before pyinstrument 4.0.0, we'd see only time spent in the run loop, like\n    this:\n\n    ```\n      _     ._   __/__   _ _  _  _ _/_   recorded: 18:33:03  samples:  2\n     /_//_/// /_\\ / //_// / //_'/ //     duration: 1.006     cpu time: 0.001\n    /   _/                      v3.4.2\n\n    program: examples/async_example_simple.py\n\n    1.006 _run_once  asyncio/base_events.py:1784\n    \u2514\u2500 1.005 select  selectors.py:553\n          [3 frames hidden]  selectors, <built-in>\n             1.005 kqueue.control  <built-in>:0\n    ```\n\n    now, with pyinstrument 4.0.0, we get:\n\n          _     ._   __/__   _ _  _  _ _/_   recorded: 18:30:43  samples:  2\n         /_//_/// /_\\ / //_// / //_'/ //     duration: 1.007     cpu time: 0.001\n        /   _/                      v4.0.0\n\n        program: examples/async_example_simple.py\n\n        1.006 main  async_example_simple.py:4\n        \u2514\u2500 1.005 sleep  asyncio/tasks.py:641\n              [2 frames hidden]  asyncio\n                 1.005 [await]\n\n    for more information, check out the [async profiling documentation] and\n    the [profiler.async_mode] property.\n\n-   pyinstrument has a [documentation site], including full python api docs!\n\n[async profiling documentation]: https://pyinstrument.readthedocs.io/en/latest/how-it-works.html#async-profiling\n[profiler.async_mode]: https://pyinstrument.readthedocs.io/en/latest/reference.html#pyinstrument.profiler.async_mode\n[documentation site]: https://pyinstrument.readthedocs.io\n\n### v3.4.2\n\n- fix a bug that caused `--show`, `--show-regex`, `--show-all` to be ignored\n  on the command line.\n\n### v3.4.1\n\n- under-the-hood modernisation\n\n### v3.4.0\n\n- added `timeline` option (boolean) to profiler methods `output_html()` and\n  `open_in_browser()`.\n\n### v3.3.0\n\n- fixed issue with `pyinstrument -m module`, where pyinstrument wouldn't find\n  modules in the current directory.\n- dropped support for python 2.7 and 3.5. old versions will remain available\n  on pypi, and pip should choose the correct one automatically.\n\n### v3.2.0\n\n- added the ability to track time in c functions. minor note - pyinstrument\n  will record time spent c functions as 'leaf' functions, due to a limitation\n  in how python records frames. `python -> c -> python` is recorded as\n  `python -> python`, but `python -> python -> c` will be attributed correctly.\n  (#103)\n\n### v3.1.2\n\n- fix `<__array_function__ internals>` frames appearing as app code in reports\n\n### v3.1.1\n\n- added support for timeline mode on html and json renderers\n- released as a tarball as well as a universal wheel\n\n### v3.1.0\n\n- added pyinstrument_show_callback option on the django middleware to\n  add a condition to showing the profile (could be used to run pyinstrument\n  on a live server!)\n- fixed bug in the django middleware where file would not be written because\n  of a unicode error\n\n### v3.0.3\n\n- fixed bug with the django middleware on windows where profiling would fail\n  because we were trying to put an illegal character '?' in the profile path.\n  (#66)\n\n### v3.0.2\n\n- add `--show` and `--show-regex` options, to mark certain files to be\n  displayed. this helps to profile inside specific modules, while hiding\n  others. for example, `pyinstrument --show '*/sympy/*' script.py`.\n\n### v3.0.1\n\n- fix #60: pass all arguments after -m module_name to the called module\n- fix crash during html/json output when no frames were captured.\n\n### v3.0.0\n\n- pyinstrument will now hide traces through libraries that you're using by default. so instead of showing you loads of frames going through the internals of something external e.g. urllib, it lets you focus on your code.\n\n    | before | after |\n    | --- | ---\n    | ![image](https://user-images.githubusercontent.com/1244307/50928250-1e50db00-1452-11e9-9164-6050a3c950ed.png) | ![image](https://user-images.githubusercontent.com/1244307/50928326-4c361f80-1452-11e9-91e8-cea735584806.png) |\n\n  to go back to the old behaviour, use `--show-all` on the command line.\n\n- 'entry' frames of hidden groups are shown, so you know which call is the problem\n- really slow frames in the groups are shown too, e.g. the 'read' call on the socket\n- application code is highlighted in the console\n- additional metrics are shown at the top of the trace - timestamp, number of samples, duration, cpu time\n- hidden code is controlled by the `--hide` or `--hide-regex` options - matching on the path of the code files.\n  ```\n    --hide=expr           glob-style pattern matching the file paths whose\n                          frames to hide. defaults to '*/lib/*'.\n    --hide-regex=regex    regex matching the file paths whose frames to hide.\n                          useful if --hide doesn't give enough control.\n  ```\n\n- outputting a timeline is supported from the command line.\n\n  ```\n    -t, --timeline        render as a timeline - preserve ordering and don't\n                          condense repeated calls\n  ```\n\n- because there are a few rendering options now, you can load a previous profiling session using `--load-prev` - pyinstrument keeps the last 10 sessions.\n\n- hidden groups can also call back into application code, that looks like this:\n\n    ![image](https://user-images.githubusercontent.com/1244307/50928591-fca42380-1452-11e9-8320-3c851cf5210e.png)\n\n- (internal) when recording timelines, frame trees are completely linear now, allowing\n  for the creation of super-accurate frame charts.\n\n- (internal) the html renderer has been rewritten as a vue.js app. all the console improvements apply to the html output too, plus it's interactive.\n\n- (internal) a lot of unit and integration tests added!\n\nyikes! see #49 for the gory details. i hope you like it.\n\n### v2.3.0\n\n-   big refactor!\n    -   `recorders` have been removed. the frame recording is now internal to the `profiler` object.\n        this means the 'frame' objects are more general-purpose, which paves the way for...\n    -   processors! these are functions that mutate the tree to sculpt the output.\n        they are used by the renderers to filter the output to the correct form. now, instead of\n        a time-aggregating recorder, the profiler just uses timeline-style recording (this is\n        lower-overhead anyway) and the aggregation is done as a processing step.\n    -   the upshot of this is that it's now way easier to alter the tree to filter stuff out, and\n        do more advanced things like combining frames that we don't care about. more features to\n        come that use this in v3.0!\n-   importlib frames are removed - you won't see them at all. their children are retained, so\n    imports are just transparent.\n-   django profile file name is now limited to a hundred of characters (#50)\n-   fix bug with --html option (#53)\n-   add `--version` command line option\n\n### v2.2.1\n\n-   fix crash when using on the command line.\n\n### v2.2.0\n\n-   added support for json output. use `pyinstrument --renderer=json scriptfile.py`.\n    [pr](https://github.com/joerick/pyinstrument/pull/46)\n-   [@iddan](https://github.com/iddan) has put together an\n    [interactive viewer](https://python-flame-chart.netlify.com/) using the json output!\n\n    ![image](https://user-images.githubusercontent.com/1244307/44622790-3ca9a600-a8b8-11e8-8dc2-f33ce433c03d.png)\n\n-   when running `pyinstrument --html` and you don't pipe the output to a file, pyinstrument will write the console output to a temp file and open that in a browser.\n\n### v2.1.0\n\n-   added support for running modules with pyinstrument via the command line. the new syntax\n    is the `-m` flag e.g. `pyinstrument -m module_name`! [pr](https://github.com/joerick/pyinstrument/pull/45#pullrequestreview-143383557)\n\n### v2.0.4\n\n-   fix crashes due to multi-threaded use of pyinstrument. the fix is in the c extension,\n    over at https://github.com/joerick/pyinstrument_cext/pull/3\n\n### v2.0.3\n\n-   pyinstrument can now be used in a `with` block.\n\n    for example:\n\n\t\tprofiler = pyinstrument.profiler()\n\t\twith profiler:\n\t\t    # do some work here...\n\t\tprint(profiler.output_text())\n-   middleware fix for older versions of django\n\n### v2.0.2\n\n-   fix for max recursion error when used to profile programs with a lot of frames on the stack.\n\n### v2.0.1\n\n-   ensure license is included in the sdist.\n\n### v2.0.0\n\n-   **pyinstrument uses a new profiling mode**. rather than using\n    signals, pyintrument uses a new statistical profiler built on\n    pyeval_setprofile. this means no more main thread restriction, no more\n    io errors when using pyinstrument, and no need for a separate more\n    'setprofile' mode!\n\n-   **renderers**. users can customize pyinstrument to use alternative renderers\n    with the `renderer` argument on `profiler.output()`, or using the `--renderer`\n    argument on the command line.\n\n-   **recorders**. to support other use cases of pyinstrument (e.g. flame charts),\n    pyinstrument now has a 'timeline' recorder mode. this mode records captured\n    frames in a linear way, so the program execution can be viewed on a\n    timeline.\n\n### v0.13\n\n-   `pyinstrument` command. you can now profile python scripts from the shell\n    by running `$ pyinstrument script.py`. this is now equivalent to\n    `python -m pyinstrument`. thanks @asmeurer!\n\n### v0.12\n\n-   application code is highlighted in html traces to make it easier to spot\n\n-   added `pyinstrument_profile_dir` option to the django interface, which\n    will log profiles of all requests to a file the specified folder. useful\n    for profiling api calls.\n\n-   added `pyinstrument_use_signal` option to the django interface, for use\n    when signal mode presents problems.\n\ncontributing\n------------\n\nto setup a dev environment:\n\n    virtualenv --python=python3 env\n    . env/bin/activate\n    pip install --upgrade pip\n    pip install -r requirements-dev.txt\n    pre-commit install --install-hooks\n\nto get some sample output:\n\n    pyinstrument examples/wikipedia_article_word_count.py\n\nto run the tests:\n\n    pytest\n\nto run linting checks locally:\n\n    pre-commit run --all-files\n\nsome of the pre-commit checks, like `isort` or `black`, will auto-fix\nthe problems they find. so if the above command returns an error, try\nrunning it again, it might succeed the second time :)\n\nrunning all the checks can be slow, so you can also run checks\nindividually, e.g., to format source code that fails `isort` or `black`\nchecks:\n\n    pre-commit run --all-files isort\n    pre-commit run --all-files black\n\nto diagnose why `pyright` checks are failing:\n\n    pre-commit run --all-files pyright\n\n### the html renderer vue.js app\n\nthe html renderer works by embedding a json representation of the sample with\na javascript 'bundle' inside an html file that can be viewed in any web\nbrowser.\n\nto edit the html renderer style, do:\n\n    cd html_renderer\n    npm ci\n    npm run serve\n\nwhen launched without a top-level `window.profilesession` object, it will\nfetch a sample profile so you can work with it.\n\nto compile the js app and bundle it back into the pyinstrument python tool:\n\n    bin/build_js_bundle.py [--force]\n",
  "docs_url": null,
  "keywords": "profiling,profile,profiler,cpu,time,sampling",
  "license": "",
  "name": "pyinstrument",
  "package_url": "https://pypi.org/project/pyinstrument/",
  "project_url": "https://pypi.org/project/pyinstrument/",
  "project_urls": {
    "Homepage": "https://github.com/joerick/pyinstrument"
  },
  "release_url": "https://pypi.org/project/pyinstrument/4.6.1/",
  "requires_dist": [
    "click ; extra == 'bin'",
    "nox ; extra == 'bin'",
    "sphinx ==4.2.0 ; extra == 'docs'",
    "myst-parser ==0.15.1 ; extra == 'docs'",
    "furo ==2021.6.18b36 ; extra == 'docs'",
    "sphinxcontrib-programoutput ==0.17 ; extra == 'docs'",
    "numpy ; extra == 'examples'",
    "django ; extra == 'examples'",
    "pytest ; extra == 'test'",
    "flaky ; extra == 'test'",
    "trio ; extra == 'test'",
    "greenlet >=3.0.0a1 ; extra == 'test'",
    "pytest-asyncio ==0.12.0 ; extra == 'test'",
    "sphinx-autobuild ==2021.3.14 ; extra == 'test'",
    "ipython ; extra == 'test'",
    "typing-extensions ; extra == 'types'"
  ],
  "requires_python": ">=3.7",
  "summary": "call stack profiler for python. shows you why your code is slow!",
  "version": "4.6.1",
  "releases": [],
  "developers": [
    "joe_rickerby",
    "joerick@mac.com"
  ],
  "kwds": "pyinstrument_profile_dir pyinstrument_cext pytest pyinstrument pyinstrument_profile_dir_renderer",
  "license_kwds": "",
  "libtype": "pypi",
  "id": "pypi_pyinstrument",
  "homepage": "https://github.com/joerick/pyinstrument",
  "release_count": 44,
  "dependency_ids": [
    "pypi_click",
    "pypi_django",
    "pypi_flaky",
    "pypi_furo",
    "pypi_greenlet",
    "pypi_ipython",
    "pypi_myst_parser",
    "pypi_nox",
    "pypi_numpy",
    "pypi_pytest",
    "pypi_pytest_asyncio",
    "pypi_sphinx",
    "pypi_sphinx_autobuild",
    "pypi_sphinxcontrib_programoutput",
    "pypi_trio",
    "pypi_typing_extensions"
  ]
}