{
  "classifiers": [
    "development status :: 5 - production/stable",
    "environment :: web environment",
    "framework :: django",
    "framework :: django :: 4.0",
    "framework :: django :: 4.1",
    "framework :: django :: 4.2",
    "framework :: django :: 5.0",
    "license :: osi approved :: mit license",
    "programming language :: python",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "topic :: software development :: libraries :: python modules"
  ],
  "description": "django-tenants\n==============\n.. image:: https://badge.fury.io/py/django-tenants.svg\n    :target: http://badge.fury.io/py/django-tenants\n\n.. image:: https://github.com/tomturner/django-tenants/workflows/code/badge.svg\n    :alt: build status\n    :target: https://github.com/tomturner/django-tenants/actions\n\n.. image:: https://readthedocs.org/projects/pip/badge/?version=latest\n    :target: https://django-tenants.readthedocs.io/en/latest/\n    \n.. image:: https://img.shields.io/pypi/dm/django-tenants.svg?maxage=180\n   :target: https://pypi.org/project/django-tenants/\n   \n.. image:: https://codecov.io/gh/django-tenants/django-tenants/branch/master/graph/badge.svg?token=wcngsgttr8\n   :target: https://codecov.io/gh/django-tenants/django-tenants\n\n\nthis application enables `django`_ powered websites to have multiple\ntenants via `postgresql schemas`_. a vital feature for every\nsoftware-as-a-service (saas) website.\n\n    read the full documentation here: `django-tenants.readthedocs.org`_\n\ndjango provides currently no simple way to support multiple tenants\nusing the same project instance, even when only the data is different.\nbecause we don\u2019t want you running many copies of your project, you\u2019ll be\nable to have:\n\n-  multiple customers running on the same instance\n-  shared and tenant-specific data\n-  tenant view-routing\n\n\n\nwhat are schemas\n----------------\n\na schema can be seen as a directory in an operating system, each\ndirectory (schema) with its own set of files (tables and objects). this\nallows the same table name and objects to be used in different schemas\nwithout conflict. for an accurate description on schemas, see\n`postgresql\u2019s official documentation on schemas`_.\n\nwhy schemas\n-----------\n\nthere are typically three solutions for solving the multitenancy\nproblem.\n\n1. isolated approach: separate databases. each tenant has its own\n   database.\n\n2. semi isolated approach: shared database, separate schemas. one\n   database for all tenants, but one schema per tenant.\n\n3. shared approach: shared database, shared schema. all tenants share\n   the same database and schema. there is a main tenant-table, where all\n   other tables have a foreign key pointing to.\n\nthis application implements the second approach, which in our opinion,\nrepresents the ideal compromise between simplicity and performance.\n\n-  simplicity: barely make any changes to your current code to support\n   multitenancy. plus, you only manage one database.\n-  performance: make use of shared connections, buffers and memory.\n\neach solution has its up and down sides. for a more in-depth\ndiscussion, see microsoft\u2019s excellent article on `multi-tenant data\narchitecture`_.\n\nhow it works\n------------\n\ntenants are identified via their host name (i.e tenant.domain.com). this\ninformation is stored on a table on the ``public`` schema. whenever a\nrequest is made, the host name is used to match a tenant in the\ndatabase. if there\u2019s a match, the search path is updated to use this\ntenant\u2019s schema. so from now on all queries will take place at the\ntenant\u2019s schema. for example, suppose you have a tenant ``customer`` at\nhttp://customer.example.com. any request incoming at\n``customer.example.com`` will automatically use ``customer``\\ \u2019s schema\nand make the tenant available at the request. if no tenant is found, a\n404 error is raised. this also means you should have a tenant for your\nmain domain, typically using the ``public`` schema. for more information\nplease read the `setup`_ section.\n\nwhat can this app do?\n---------------------\n\nas many tenants as you want\n~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\neach tenant has its data on a specific schema. use a single project\ninstance to serve as many as you want.\n\ntenant-specific and shared apps\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\ntenant-specific apps do not share their data between tenants, but you\ncan also have shared apps where the information is always available and\nshared between all.\n\ntenant view-routing\n~~~~~~~~~~~~~~~~~~~\n\nyou can have different views for ``http://customer.example.com/`` and\n``http://example.com/``, even though django only uses the string after\nthe host name to identify which view to serve.\n\nmagic\n~~~~~\n\neveryone loves magic! you\u2019ll be able to have all this barely having to\nchange your code!\n\nsetup & documentation\n---------------------\n\n**this is just a short setup guide**. it is **strongly** recommended\nthat you read the complete version at\n`django-tenants.readthedocs.org`_.\n\nyour ``database_engine`` setting needs to be changed to\n\n.. code-block:: python\n\n    databases = {\n        'default': {\n            'engine': 'django_tenants.postgresql_backend',\n            # ..\n        }\n    }    \n\nadd the middleware ``django_tenants.middleware.main.tenantmainmiddleware`` to the\ntop of ``middleware``, so that each request can be set to use\nthe correct schema.\n\n.. code-block:: python\n\n    middleware = (\n        'django_tenants.middleware.main.tenantmainmiddleware',\n        #...\n    )\n    \nadd ``django_tenants.routers.tenantsyncrouter`` to your `database_routers`\nsetting, so that the correct apps can be synced depending on what's \nbeing synced (shared or tenant).\n\n.. code-block:: python\n\n    database_routers = (\n        'django_tenants.routers.tenantsyncrouter',\n    )\n\nadd ``django_tenants`` to your ``installed_apps``.\n\ncreate your tenant model\n~~~~~~~~~~~~~~~~~~~~~~~~\n\n.. code-block:: python\n\n    from django.db import models\n    from django_tenants.models import tenantmixin, domainmixin\n\n    class client(tenantmixin):\n        name = models.charfield(max_length=100)\n        paid_until = models.datefield()\n        on_trial = models.booleanfield()\n        created_on = models.datefield(auto_now_add=true)\n\n    class domain(domainmixin):\n        pass\n\ndefine on ``settings.py`` which model is your tenant model. assuming you\ncreated ``client`` inside an app named ``customers``, your\n``tenant_model`` should look like this:\n\n.. code-block:: python\n\n    tenant_model = \"customers.client\" # app.model\n    tenant_domain_model = \"customers.domain\" # app.model\n\nnow run ``migrate_schemas``. this will sync your apps to the ``public``\nschema.\n\n.. code-block:: bash\n\n    python manage.py migrate_schemas --shared\n\ncreate your tenants just like a normal django model. calling ``save``\nwill automatically create and sync the schema.\n\n.. code-block:: python\n\n    from customers.models import client, domain\n\n    # create your public tenant\n    tenant = client(schema_name='tenant1',\n                    name='my first tenant',\n                    paid_until='2014-12-05',\n                    on_trial=true)\n    tenant.save()\n\n    # add one or more domains for the tenant\n    domain = domain()\n    domain.domain = 'tenant.my-domain.com'\n    domain.tenant = tenant\n    domain.is_primary = true\n    domain.save()\n\nany request made to ``tenant.my-domain.com`` will now automatically set\nyour postgresql\u2019s ``search_path`` to ``tenant1`` and ``public``, making\nshared apps available too. this means that any call to the methods\n``filter``, ``get``, ``save``, ``delete`` or any other function\ninvolving a database connection will now be done at the tenant\u2019s schema,\nso you shouldn\u2019t need to change anything at your views.\n\nyou\u2019re all set, but we have left key details outside of this short\ntutorial, such as creating the public tenant and configuring shared and\ntenant specific apps. complete instructions can be found at\n`django-tenants.readthedocs.org`_.\n\n\n\nrunning the example project\n---------------------------\n\ndjango-tenants comes with an example project please see\n\n`examples`_.\n\n\ncredits\n-------\n\ni would like to thank two of the original authors of this project.\n\n1. bernardo pires under the name `django-tenant-schemas`_.\n\n2. vlada macek under the name of `django-schemata`_.\n\nrequirements\n------------\n\n - django 2 if you want to use django 1.11 or lower please use version 1 of django-tenants\n - postgresql\n\ntesting\n-------\n\nif you want to run tests, you can either run ``run_tests.sh`` (which requires access to\na postgresql instance, location of which you can customize using the ``database_host``\nenv variable) or use `docker-compose`_ like this:\n\n.. code-block:: bash\n\n    ## start docker service\n    # start docker   # with upstart\n    # systemctl start docker  # with systemd\n\n    ## install docker-compose (you might want to do this in python virtualenv)\n    # pip install docker-compose\n\n    ## in main directory of this repo do:\n    docker-compose run --rm django-tenants-test  # runs django-tenants tests.\n    # dockerized postgresql service is started implicitly\n\n(note that upon first run the ``dockerfile`` will be built).\n\nvideo tutorial\n--------------\n\nan online video tutorial is available on `youtube`_.\n\ndonation\n--------\n\nif this project helped you reduce development time, you can give me cake :)\n\n.. image:: https://www.paypalobjects.com/en_us/i/btn/btn_donatecc_lg.gif\n  :target: https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=qu8bgc7dwb9g6&source=ur\n\n\n.. _youtube: https://youtu.be/twf7okf5xoo\n.. _django: https://www.djangoproject.com/\n.. _postgresql schemas: http://www.postgresql.org/docs/9.1/static/ddl-schemas.html\n.. _postgresql\u2019s official documentation on schemas: http://www.postgresql.org/docs/9.1/static/ddl-schemas.html\n.. _multi-tenant data architecture: https://web.archive.org/web/20160311212239/https://msdn.microsoft.com/en-us/library/aa479086.aspx\n.. _setup: https://django-tenants.readthedocs.org/en/latest/install.html\n.. _examples: https://django-tenants.readthedocs.org/en/latest/examples.html\n.. _django-tenants.readthedocs.org: https://django-tenants.readthedocs.org/en/latest/\n.. _django-tenant-schemas: http://github.com/bernardopires/django-tenant-schemas\n.. _django-schemata: https://github.com/tuttle/django-schemata\n.. _docker-compose: https://docs.docker.com/engine/reference/run/\n",
  "docs_url": null,
  "keywords": "",
  "license": "mit",
  "name": "django-tenants",
  "package_url": "https://pypi.org/project/django-tenants/",
  "project_url": "https://pypi.org/project/django-tenants/",
  "project_urls": {
    "Homepage": "https://github.com/django-tenants/django-tenants"
  },
  "release_url": "https://pypi.org/project/django-tenants/3.6.1/",
  "requires_dist": [],
  "requires_python": "",
  "summary": "tenant support for django using postgresql schemas.",
  "version": "3.6.1",
  "releases": [],
  "developers": [
    "thomas_turner",
    "tom@twt.me.uk"
  ],
  "kwds": "django_tenants _django django djangoproject badge",
  "license_kwds": "mit",
  "libtype": "pypi",
  "id": "pypi_django_tenants",
  "homepage": "https://github.com/django-tenants/django-tenants",
  "release_count": 52,
  "dependency_ids": []
}