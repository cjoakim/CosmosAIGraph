{
  "classifiers": [
    "intended audience :: developers",
    "intended audience :: system administrators",
    "license :: osi approved :: apache software license",
    "natural language :: english",
    "programming language :: python :: 3 :: only",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "topic :: software development :: libraries"
  ],
  "description": "# coordinate and use dbt in your dataflow with prefect-dbt\n\n<p align=\"center\">\n    <img src=\"https://user-images.githubusercontent.com/15331990/215649781-be317381-9ff0-4f45-85d4-a30e80514554.png\" width=40% height=40%>\n    <br>\n    <a href=\"https://pypi.python.org/pypi/prefect-dbt/\" alt=\"pypi version\">\n        <img alt=\"pypi\" src=\"https://img.shields.io/pypi/v/prefect-dbt?color=0052ff&labelcolor=090422\"></a>\n    <a href=\"https://github.com/prefecthq/prefect-dbt/\" alt=\"stars\">\n        <img src=\"https://img.shields.io/github/stars/prefecthq/prefect-dbt?color=0052ff&labelcolor=090422\" /></a>\n    <a href=\"https://pepy.tech/badge/prefect-dbt/\" alt=\"downloads\">\n        <img src=\"https://img.shields.io/pypi/dm/prefect-dbt?color=0052ff&labelcolor=090422\" /></a>\n    <a href=\"https://github.com/prefecthq/prefect-dbt/pulse\" alt=\"activity\">\n        <img src=\"https://img.shields.io/github/commit-activity/m/prefecthq/prefect-dbt?color=0052ff&labelcolor=090422\" /></a>\n    <br>\n    <a href=\"https://prefect-community.slack.com\" alt=\"slack\">\n        <img src=\"https://img.shields.io/badge/slack-join_community-red.svg?color=0052ff&labelcolor=090422&logo=slack\" /></a>\n    <a href=\"https://discourse.prefect.io/\" alt=\"discourse\">\n        <img src=\"https://img.shields.io/badge/discourse-browse_forum-red.svg?color=0052ff&labelcolor=090422&logo=discourse\" /></a>\n</p>\n\nvisit the full docs [here](https://prefecthq.github.io/prefect-dbt) to see additional examples and the api reference.\n\nwith prefect-dbt, you can easily trigger and monitor dbt cloud jobs, execute dbt core cli commands, and incorporate other services, like snowflake, into your dbt runs!\n\ncheck out the examples below to get started!\n\n## getting started\n\nbe sure to install [prefect-dbt](#installation) and [save a block](#saving-credentials-to-block) to run the examples below!\n\n### integrate dbt cloud jobs with prefect flows\n\nif you have an existing dbt cloud job, take advantage of the flow, `run_dbt_cloud_job`.\n\nthis flow triggers the job and waits until the job run is finished.\n\nif certain nodes fail, `run_dbt_cloud_job` efficiently retries the specific, unsuccessful nodes.\n\n```python\nfrom prefect import flow\n\nfrom prefect_dbt.cloud import dbtcloudjob\nfrom prefect_dbt.cloud.jobs import run_dbt_cloud_job\n\n@flow\ndef run_dbt_job_flow():\n    result = run_dbt_cloud_job(\n        dbt_cloud_job=dbtcloudjob.load(\"my-block-name\"),\n        targeted_retries=5,\n    )\n    return result\n\nrun_dbt_job_flow()\n```\n\n### integrate dbt core cli commands with prefect flows\n\n`prefect-dbt` also supports execution of dbt core cli commands.\n\nto get started, if you don't have a `dbtcoreoperation` block already saved,\nset the commands that you want to run; it can include a mix of dbt and non-dbt commands.\n\nthen, optionally specify the `project_dir`.\n\nif `profiles_dir` is unset, it will try to use the `dbt_profiles_dir` environment variable.\nif that's also not set, it will use the default directory `$home/.dbt/`.\n\n#### using an existing profile\n\nif you already have an existing dbt profile, specify the `profiles_dir` where `profiles.yml` is located.\n\n```python\nfrom prefect import flow\nfrom prefect_dbt.cli.commands import dbtcoreoperation\n\n@flow\ndef trigger_dbt_flow() -> str:\n    result = dbtcoreoperation(\n        commands=[\"pwd\", \"dbt debug\", \"dbt run\"],\n        project_dir=\"project-directory-placeholder\",\n        profiles_dir=\"profiles-directory-placeholder\"\n    ).run()\n    return result\n\ntrigger_dbt_flow()\n```\n\n#### writing a new profile\n\nto setup a new profile, first [save and load a dbtcliprofile block](#saving-credentials-to-block) and use it in `dbtcoreoperation`.\n\nthen, specify `profiles_dir` where `profiles.yml` will be written.\n\n```python\nfrom prefect import flow\nfrom prefect_dbt.cli import dbtcliprofile, dbtcoreoperation\n\n@flow\ndef trigger_dbt_flow():\n    dbt_cli_profile = dbtcliprofile.load(\"dbt-core-operation-block-name-placeholder\")\n    with dbtcoreoperation(\n        commands=[\"dbt debug\", \"dbt run\"],\n        project_dir=\"project-directory-placeholder\",\n        profiles_dir=\"profiles-directory-placeholder\",\n        dbt_cli_profile=dbt_cli_profile,\n    ) as dbt_operation:\n        dbt_process = dbt_operation.trigger()\n        # do other things before waiting for completion\n        dbt_process.wait_for_completion()\n        result = dbt_process.fetch_result()\n    return result\n\ntrigger_dbt_flow()\n```\n\n## resources\n\nif you need help getting started with or using dbt, please consult the [dbt documentation](https://docs.getdbt.com/docs/building-a-dbt-project/documentation).\n\n### installation\n\nto use `prefect-dbt` with dbt cloud:\n\n```bash\npip install prefect-dbt\n```\n\nto use dbt core (cli):\n\n```bash\npip install \"prefect-dbt[cli]\"\n```\n\nto use dbt core with snowflake profiles:\n\n```bash\npip install \"prefect-dbt[snowflake]\"\n```\n\nto use dbt core with bigquery profiles:\n\n```bash\npip install \"prefect-dbt[bigquery]\"\n```\n\nto use dbt core with postgres profiles:\n\n```bash\npip install \"prefect-dbt[postgres]\"\n```\n\n!!! warning \"some dbt core profiles require additional installation\"\n\n    according to dbt's [databricks setup page](https://docs.getdbt.com/reference/warehouse-setups/databricks-setup), users must first install the adapter:\n\n    ```bash\n    pip install dbt-databricks\n    ```\n\n    check out the [desired profile setup page](https://docs.getdbt.com/reference/profiles.yml) on the sidebar for others.\n\nrequires an installation of python 3.7+.\n\nwe recommend using a python virtual environment manager such as pipenv, conda or virtualenv.\n\nthese tasks are designed to work with prefect 2. for more information about how to use prefect, please refer to the [prefect documentation](https://orion-docs.prefect.io/).\n\n### saving credentials to block\n\nnote, to use the `load` method on blocks, you must already have a block document [saved through code](https://orion-docs.prefect.io/concepts/blocks/#saving-blocks) or [saved through the ui](https://orion-docs.prefect.io/ui/blocks/).\n\n!!! info \"registering blocks\"\n\n    register blocks in this module to\n    [view and edit them](https://orion-docs.prefect.io/ui/blocks/)\n    on prefect cloud:\n\n    ```bash\n    prefect block register -m prefect_dbt\n    ```\n\na list of available blocks in `prefect-dbt` and their setup instructions can be found [here](https://prefecthq.github.io/prefect-dbt/blocks_catalog).\n\n#### dbt cloud\n\nto create a dbt cloud credentials block:\n\n1. head over to your [dbt cloud profile](https://cloud.getdbt.com/settings/profile).\n2. login to your dbt cloud account.\n3. scroll down to \"api\" or click \"api access\" on the sidebar.\n4. copy the api key.\n5. click projects on the sidebar.\n6. copy the account id from the url: `https://cloud.getdbt.com/settings/accounts/<account_id>`.\n7. create a short script, replacing the placeholders.\n\n```python\nfrom prefect_dbt.cloud import dbtcloudcredentials\n\ndbtcloudcredentials(\n    api_key=\"api-key-placeholder\",\n    account_id=\"account-id-placeholder\"\n).save(\"credentials-block-name-placeholder\")\n```\n\nthen, to create a dbt cloud job block:\n\n1. head over to your [dbt home page](https://cloud.getdbt.com/).\n2. on the top nav bar, click on deploy -> jobs.\n3. select a job.\n4. copy the job id from the url: `https://cloud.getdbt.com/deploy/<account_id>/projects/<project_id>/jobs/<job_id>`\n5. create a short script, replacing the placeholders.\n\n```python\nfrom prefect_dbt.cloud import dbtcloudcredentials, dbtcloudjob\n\ndbt_cloud_credentials = dbtcloudcredentials.load(\"credentials-block-name-placeholder\")\ndbt_cloud_job = dbtcloudjob(\n    dbt_cloud_credentials=dbt_cloud_credentials,\n    job_id=\"job-id-placeholder\"\n).save(\"job-block-name-placeholder\")\n```\n\ncongrats! you can now easily load the saved block, which holds your credentials:\n\n```python\nfrom prefect_dbt.cloud import dbtcloudjob\n\ndbtcloudjob.load(\"job-block-name-placeholder\")\n```\n\n#### dbt core cli\n\n!!! info \"available `targetconfigs` blocks\"\n\n    the following may vary slightly depending on the service you want to incorporate.\n\n    visit the [api reference](cli/configs/base) to see other built-in `targetconfigs` blocks.\n\n    if the desired service profile is not available, check out the\n    [examples catalog](examples_catalog/#clicredentials-module) to see how you can\n    build one from the generic `targetconfigs` class.\n\nto create dbt core target config and profile blocks for bigquery:\n\n1. save and load a [`gcpcredentials` block](https://prefecthq.github.io/prefect-gcp/#saving-credentials-to-a-block).\n2. determine the schema / dataset you want to use in bigquery.\n3. create a short script, replacing the placeholders.\n\n```python\nfrom prefect_gcp.credentials import gcpcredentials\nfrom prefect_dbt.cli import bigquerytargetconfigs, dbtcliprofile\n\ncredentials = gcpcredentials.load(\"credentials-block-name-placeholder\")\ntarget_configs = bigquerytargetconfigs(\n    schema=\"schema-name-placeholder\",  # also known as dataset\n    credentials=credentials,\n)\ntarget_configs.save(\"target-configs-block-name-placeholder\")\n\ndbt_cli_profile = dbtcliprofile(\n    name=\"profile-name-placeholder\",\n    target=\"target-name-placeholder\",\n    target_configs=target_configs,\n)\ndbt_cli_profile.save(\"dbt-cli-profile-block-name-placeholder\")\n```\n\nthen, to create a dbt core operation block:\n\n1. determine the dbt commands you want to run.\n2. create a short script, replacing the placeholders.\n\n```python\nfrom prefect_dbt.cli import dbtcliprofile, dbtcoreoperation\n\ndbt_cli_profile = dbtcliprofile.load(\"dbt-cli-profile-block-name-placeholder\")\ndbt_core_operation = dbtcoreoperation(\n    commands=[\"dbt-cli-commands-placeholder\"],\n    dbt_cli_profile=dbt_cli_profile,\n    overwrite_profiles=true,\n)\ndbt_core_operation.save(\"dbt-core-operation-block-name-placeholder\")\n```\n\ncongrats! you can now easily load the saved block, which holds your credentials:\n\n```python\nfrom prefect_dbt.cloud import dbtcoreoperation\n\ndbtcoreoperation.load(\"dbt-core-operation-block-name-placeholder\")\n```\n\n### feedback\n\nif you encounter any bugs while using `prefect-dbt`, feel free to open an issue in the [prefect-dbt](https://github.com/prefecthq/prefect-dbt) repository.\n\nif you have any questions or issues while using `prefect-dbt`, you can find help in either the [prefect discourse forum](https://discourse.prefect.io/) or the [prefect slack community](https://prefect.io/slack).\n\nfeel free to star or watch [`prefect-dbt`](https://github.com/prefecthq/prefect-dbt) for updates too!\n\n### contributing\n\nif you'd like to help contribute to fix an issue or add a feature to `prefect-dbt`, please [propose changes through a pull request from a fork of the repository](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork).\n\nhere are the steps:\n\n1. [fork the repository](https://docs.github.com/en/get-started/quickstart/fork-a-repo#forking-a-repository)\n2. [clone the forked repository](https://docs.github.com/en/get-started/quickstart/fork-a-repo#cloning-your-forked-repository)\n3. install the repository and its dependencies:\n```\npip install -e \".[dev]\"\n```\n4. make desired changes\n5. add tests\n6. insert an entry to [changelog.md](https://github.com/prefecthq/prefect-dbt/blob/main/changelog.md)\n7. install `pre-commit` to perform quality checks prior to commit:\n```\npre-commit install\n```\n8. `git commit`, `git push`, and create a pull request\n",
  "docs_url": null,
  "keywords": "prefect",
  "license": "apache license 2.0",
  "name": "prefect-dbt",
  "package_url": "https://pypi.org/project/prefect-dbt/",
  "project_url": "https://pypi.org/project/prefect-dbt/",
  "project_urls": {
    "Homepage": "https://github.com/PrefectHQ/prefect-dbt"
  },
  "release_url": "https://pypi.org/project/prefect-dbt/0.4.1/",
  "requires_dist": [
    "prefect >=2.13.5",
    "dbt-core >=1.1.1",
    "prefect-shell >=0.1.0",
    "sgqlc >=16.0.0",
    "dbt-bigquery ; extra == 'all_extras'",
    "dbt-postgres ; extra == 'all_extras'",
    "dbt-snowflake ; extra == 'all_extras'",
    "prefect-gcp[bigquery] >=0.1.8 ; extra == 'all_extras'",
    "prefect-snowflake >=0.2.4 ; extra == 'all_extras'",
    "prefect-sqlalchemy >=0.2.1 ; extra == 'all_extras'",
    "prefect-gcp[bigquery] >=0.1.8 ; extra == 'bigquery'",
    "dbt-bigquery ; extra == 'bigquery'",
    "pytest ; extra == 'dev'",
    "black ; extra == 'dev'",
    "flake8 ; extra == 'dev'",
    "mypy ; extra == 'dev'",
    "mkdocs ; extra == 'dev'",
    "mkdocs-material ; extra == 'dev'",
    "mkdocstrings[python] ; extra == 'dev'",
    "isort ; extra == 'dev'",
    "pre-commit ; extra == 'dev'",
    "pytest-asyncio ; extra == 'dev'",
    "mkdocs-gen-files ; extra == 'dev'",
    "interrogate ; extra == 'dev'",
    "coverage ; extra == 'dev'",
    "respx ; extra == 'dev'",
    "pillow ; extra == 'dev'",
    "dbt-bigquery ; extra == 'dev'",
    "dbt-postgres ; extra == 'dev'",
    "dbt-snowflake ; extra == 'dev'",
    "prefect-gcp[bigquery] >=0.1.8 ; extra == 'dev'",
    "prefect-snowflake >=0.2.4 ; extra == 'dev'",
    "prefect-sqlalchemy >=0.2.1 ; extra == 'dev'",
    "mock ; (python_version < \"3.8\") and extra == 'dev'",
    "prefect-sqlalchemy >=0.2.1 ; extra == 'postgres'",
    "dbt-postgres ; extra == 'postgres'",
    "prefect-snowflake >=0.2.4 ; extra == 'snowflake'",
    "dbt-snowflake ; extra == 'snowflake'"
  ],
  "requires_python": ">=3.7",
  "summary": "prefect integration for working with dbt",
  "version": "0.4.1",
  "releases": [],
  "developers": [
    "help@prefect.io",
    "prefect_technologies"
  ],
  "kwds": "dataflow prefect_dbt run_dbt_job_flow pypi trigger_dbt_flow",
  "license_kwds": "apache license 2.0",
  "libtype": "pypi",
  "id": "pypi_prefect_dbt",
  "homepage": "https://github.com/prefecthq/prefect-dbt",
  "release_count": 13,
  "dependency_ids": [
    "pypi_black",
    "pypi_coverage",
    "pypi_dbt_bigquery",
    "pypi_dbt_core",
    "pypi_dbt_postgres",
    "pypi_dbt_snowflake",
    "pypi_flake8",
    "pypi_interrogate",
    "pypi_isort",
    "pypi_mkdocs",
    "pypi_mkdocs_gen_files",
    "pypi_mkdocs_material",
    "pypi_mkdocstrings",
    "pypi_mock",
    "pypi_mypy",
    "pypi_pillow",
    "pypi_pre_commit",
    "pypi_prefect",
    "pypi_prefect_gcp",
    "pypi_prefect_shell",
    "pypi_prefect_snowflake",
    "pypi_prefect_sqlalchemy",
    "pypi_pytest",
    "pypi_pytest_asyncio",
    "pypi_respx",
    "pypi_sgqlc"
  ]
}