{
  "classifiers": [
    "development status :: 4 - beta",
    "intended audience :: developers",
    "intended audience :: information technology",
    "license :: osi approved :: mit license",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "topic :: text processing"
  ],
  "description": "# dynamic prompts\n\n\n![mit](https://img.shields.io/github/license/adieyal/dynamicprompts)\n&nbsp;-&nbsp;\n![github workflow status](https://img.shields.io/github/actions/workflow/status/adieyal/dynamicprompts/test.yml)\n[![codecov](https://img.shields.io/codecov/c/github/adieyal/dynamicprompts)](https://app.codecov.io/gh/adieyal/dynamicprompts)\n&nbsp;-&nbsp;\n[![pypi](https://img.shields.io/pypi/v/dynamicprompts)](https://pypi.org/project/dynamicprompts) ![pypi - downloads](https://img.shields.io/pypi/dm/dynamicprompts)\n![pypi - python version](https://img.shields.io/pypi/pyversions/dynamicprompts)\n\ndynamic prompts is a python library that provides developers with a **flexible and intuitive templating language** and **tools** for generating prompts for text-to-image generators like stable diffusion, midjourney or dall-e 2. it lets you create and manage **sophisticated prompt generation workflows** that seamlessly integrate with your existing text-to-image generation pipelines.\n\n<img src=\"images/famous_people_small.jpg\">\n\nit includes:\n* an easy-to-learn templating language that lets you create a number of unique prompts from a single template.\n* support for wildcard files as placeholders in templates.\n* a mechanism for creating a wildcard library. text, json, and yaml files are supported.\n* exhaustive generation of all prompts from a template.\n* variable assignment enabling re-usable prompt snippets.\n* supports magic prompt which automatically spices up your prompt with modifiers\n* provides an i'm feeling lucky feature which uses the semantic search on lexica.art to find similar prompts.\n* for systems that support attention syntax, attention grabber will emphasis random phrases in your prompt.\n* jinja-powered templating for advanced prompt creation.\n\nthe dynamic prompts library powers the [dynamic prompts](https://github.com/adieyal/sd-dynamic-prompts) extension for automatic1111.\n\n## table of contents\n\n* [dynamic prompts](#dynamic-prompts)\n   * [quick overview of the templating language:](#quick-overview-of-the-templating-language)\n      * [variants](#variants)\n      * [choosing multiple variants](#choosing-multiple-variants)\n      * [wildcards](#wildcards)\n      * [let's try a real-world prompt](#lets-try-a-real-world-prompt)\n      * [use whitespace for readability](#use-whitespace-for-readability)\n   * [installation](#installation)\n   * [quick start](#quick-start)\n      * [combinatorial generation](#combinatorial-generation)\n      * [magic prompt](#magic-prompt)\n       * [i'm feeling lucky](#im-feeling-lucky)\n       * [attention generator](#attention-generator)\n    * [jinja2 templates](#jinja2-templates)\n    * [template syntax](#template-syntax)\n      * [syntax customisation](#syntax-customisation)\n    * [wildcard collections](#wildcard-collections)\n    * [dynamic prompts in the wild.](#dynamic-prompts-in-the-wild)\n\n\n\n\n## quick overview of the templating language:\n\n### variants\n```\n{summer|autumn|winter|spring} is coming\n```\nrandomly generate one of:\n```\nsummer is coming\nautumn is coming\nwinter is coming\nspring is coming\n```\n\n### choosing multiple variants\nthis syntax `{2$$ and $$a|b|c}` will choose two values from the list:\n```\na and b\na and c\nb and a\nb and c\nc and a\nc and b\n```\n\n### wildcards\n```\n__season__ is coming\n```\nrandomly selects a value from season.txt in your wildcard directory.\n\n\n### let's try a real-world prompt\none prompt template can generate a family of prompts:\n\n```\nfunko pop {yoda|darth vader|jabba the hutt|princess leia|chewbacca|luke skywalker} figurine, made of {wood|plastic|metal|stone}, product studio shot, on a white background, diffused lighting, centered\n```\n\n<img src=\"images/funkypop.jpg\" style=\"width:50%\">\n\n<br/>\n\n\nnow, how about two characters at the same time:\n\n```\nfunko pop {2$$ and $$yoda|darth vader|jabba the hutt|princess leia|chewbacca|luke skywalker} figurine, made of {wood|plastic|metal|stone}, product studio shot, on a white background, diffused lighting, centered\n```\n\n<img src=\"images/funkypop2.jpg\" style=\"width:50%\">\n\n\n<br/>\n\n### use whitespace for readability\n```\n# add comments like this\nfunko pop\n    {2$$ and $$\n  \t    yoda\n\t\t|darth vader\n\t\t|jabba the hutt\n\t\t|princess leia\n\t\t|chewbacca\n\t\t|luke skywalker\n\t}\n\tfigurine, made of\n\t{\n\t\twood\n\t\t|plastic\n\t\t|metal\n\t\t|stone\n\t}, product studio shot, on a white background, diffused lighting, centered\n```\n\n\nuse wildcards for re-usable lists:\n\n```\n# starwars.txt\nyoda\ndarth vader\njabba the hutt\nprincess leia\nchewbacca\nluke skywalker\n```\n\n```\n# material.txt\nwood\nplastic\nmetal\nstone\n```\n\n```\n# studio-shot.txt\nproduct studio shot, on a white background, diffused lighting, centered\n```\n\nnow compose your prompt like this:\n```\nfunko pop __starwars__ figurine, made of __material__, __studio-shot__\n```\n\nand easily change it to:\n```\nfunko pop __celebrities__ figurine, made of __material__, __studio-shot__\n```\n\n\nhat tip to [publicprompts](https://publicprompts.art/) for the funko pop prompt.\n\nthe complete syntax can be found [here](https://github.com/adieyal/sd-dynamic-prompts/blob/main/docs/syntax.md).\n\n\n## installation\n\n`pip install dynamicprompts`\n\nadditional functionality (see below) can be installed with this command:\n\n`pip install \"dynamicprompts[magicprompt, attentiongrabber]\"`\n\n## quick start\n\nuse the randompromptgenerator to create 5 random prompts using a given template:\n\n```python\nfrom dynamicprompts.generators import randompromptgenerator\n\ngenerator = randompromptgenerator()\ngenerator.generate(\"i love {red|green|blue} roses\", num_images=5)\n\n>> ['i love blue roses', 'i love red roses', 'i love green roses', 'i love red roses', 'i love red roses']\n```\n\nif you want to use wildcards, instantiate a wildcardmanager:\n\n```python\nfrom pathlib import path\nfrom dynamicprompts.generators import randompromptgenerator\nfrom dynamicprompts.wildcards.wildcard_manager import wildcardmanager\n\nwm = wildcardmanager(path(\"/path/to/wildcard/directory\"))\n\ngenerator = randompromptgenerator(wildcard_manager=wm)\n```\n\nassuming you have a file called colours.txt in /path/to/wildcards/directory with one colour per line, e.g.\n\n```\nred\ngreen\nblue\npurple\nyellow\n```\n\nthen\n\n```python\ngenerator.generate(\"i love __colours__ roses\", num_prompts)\n>> ['i love pink roses', 'i love violet roses', 'i love white roses', 'i love violet roses', 'i love blue roses']\n```\n\n### random seeds\n\nyou can pass a random seed in the constructor for predictable outputs\n```\ngenerator = randompromptgenerator(wildcard_manager=wm, seed=999)\n```\n\na list of seeds can also be provided in the `generate` method.\n\n```\ngenerator.generate(\"i love __colours__ roses\", num_prompts, seeds=[1,2,3])\n```\nin this example, a seed is provided for each prompt generated. the number of seeds must equal the number of prompts, i.e. `len(seeds) == num_prompts`. if `len(seeds) == 1` then the same seed is used for every image.\n\nas a convenience, `seeds` may also be an int value.\n\n```\ngenerator.generate(\"i love __colours__ roses\", num_prompts=3, seeds=5)\n```\n\nis equivalent to:\n```\ngenerator.generate(\"i love __colours__ roses\", num_prompts=3, seeds=[5, 5, 5])\n```\n\n### combinatorial generation\ninstead of generating random prompts from a template, combinatorial generation produces every possible prompt from the given string. for example:\n\n`i {love|hate} {new york|chicago} in {june|july|august}`\n\nwill produce:\n> i love new york in june<br>\n> i love new york in july<br>\n> i love new york in august<br>\n> i love chicago in june<br>\n> i love chicago in july<br>\n> i love chicago in august<br>\n> i hate new york in june<br>\n> i hate new york in july<br>\n> i hate new york in august<br>\n> i hate chicago in june<br>\n> i hate chicago in july<br>\n> i hate chicago in august<br>\n\nif a `__wildcard__` is provided, then a new prompt will be produced for every value in the wildcard file. for example:\n\n`my favourite season is __seasons__`\n\nwill produce:\n> my favourite season is summer<br>\n> my favourite season is august<br>\n> my favourite season is winter<br>\n> my favourite season is sprint<br>\n\n#### usage\n\n```python\nfrom dynamicprompts.generators import combinatorialpromptgenerator\n\ngenerator = combinatorialpromptgenerator()\ngenerator.generate(\"i love {red|green|blue} roses\", max_prompts=5)\n\n>> ['i love red roses', 'i love green roses', 'i love blue roses']\n```\n\nnotice that only 3 prompts were generated, even though we requested 5. since there are only three options, i.e. red, green, and blue, only 3 unique prompts can be created. `num_prompts` in this case acts as an upper bound. combinatorial generation can very quickly produce many more prompts than you intended. `num_prompts` is a safeguard to ensure that you don't accidentally produced thousands or tens of thousands of prompts.\n\nconsider this template:\n\n`my favourite colours are __colours__, __colours__, and __colours__`\n\nif colours.txt contains 10 different colours, a combinatorial enumeration of that template will create `10 * 10 * 10 = 1000` different prompts. e.g.\n\n> my favourite colours are red, green, and blue<br>\n> my favourite colours are red, green, and yellow<br>\n> my favourite colours are red, green, and purple<br>\n> my favourite colours are red, blue, and yellow<br>\n> my favourite colours are red, blue, and purple<br>\n> ...<br>\n\n\n### magic prompt\nusing [gustavosta](https://huggingface.co/gustavosta/magicprompt-stable-diffusion)'s magicprompt model, automatically generate new prompts from the input. trained on 80,000 prompts from [lexica.art](lexica.art), it can help give you interesting new prompts on a given subject. here are some automatically generated variations for \"dogs playing football\":\n\n> dogs playing football, in the streets of a japanese town at night, with people watching in wonder, in the style of studio ghibli and makoto shinkai, highly detailed digital art, trending on artstation<br>\n> dogs playing football, in the background is a nuclear explosion. photorealism. hq. hyper. realistic. 4 k. award winning.<br>\n> dogs playing football, in the background is a nuclear explosion. photorealistic. realism. 4 k wideshot. cinematic. unreal engine. artgerm. marc simonetti. jc leyendecker<br>\n\nthis is compatible with the wildcard syntax described above.\n\n#### usage\n\n```python\nfrom dynamicprompts.generators import randompromptgenerator\nfrom dynamicprompts.generators.magicprompt import magicpromptgenerator\n\ngenerator = randompromptgenerator()\nmagic_generator = magicpromptgenerator(\n    generator,\n    device=...,  # torch device specifier (int, string, torch.device)\n)\n\nnum_prompts = 5\ngenerator.generate(\"i love {red|green|blue} roses\", num_prompts)\n\n>> ['i love red roses trending on artstation #vividart #pixiv', 'i love red roses trending on artstation artwork', 'i love blue roses breakfast club, cute, intricate, highly detailed, digital painting, artstation, concept art, smooth, sharp focus, illustration, unreal engine 5, 8 k, art by artgerm and greg rutkowski and alphonse mucha', 'i love green roses i love green flowers, smile, tristan eaton, victo ngai, artgerm, rhads, ross draws', 'i love red roses smile, tristan eaton, victo ngai, artgerm, rhads, ross draws']\n\n```\n\nthe first time you use it, the model is downloaded. it is approximately 500mb and so will take some time depending on how fast your connection is. it will also take a few seconds on first activation as the model is loaded into memory. note, if you're low in vram, you might get a cuda error. my gpu uses less than 8gb by ymmv.\n\nmagic prompt is not available by default, you need to install it as follows:\n\n`pip install \"dynamicprompts[magicprompt]\"`\n\n#### other models\nthere a few alternatives to gustavosta's model available. you can try:\n\n```\nmagic_generator = magicpromptgenerator(generator, \"automatic/promptgen-lexart\")\nmagic_generator = magicpromptgenerator(generator, \"automatic/promptgen-majinai-safe\")\nmagic_generator = magicpromptgenerator(generator, \"automatic/promptgen-majinai-unsafe\")\n```\n\nyou can find a longer list [here](https://github.com/adieyal/sd-dynamic-prompts/blob/main/config/magicprompt_models.txt)\nnote that each model requires a download of large model files.\n\n### i'm feeling lucky\nuse the [lexica.art](https://lexica.art) api to create random prompts. useful if you're looking for inspiration, or are simply too lazy to think of your own prompts. when this option is selected, the template is used as a search string. for example, prompt \"mech warrior\" might return:\n\n> a large robot stone statue in the middle of a forest by greg rutkowski, sung choi, mitchell mohrhauser, maciej kuciara, johnson ting, maxim verehin, peter konig, final fantasy , 8k photorealistic, cinematic lighting, hd, high details, atmospheric,\n\n> a beautiful portrait painting of a ( ( ( cyberpunk ) ) ) armor by simon stalenhag and pascal blanche and alphonse mucha and nekro. in style of digital art. colorful comic, film noirs, symmetry, brush stroke, vibrating colors, hyper detailed. octane render. trending on artstation\n\n> symmetry!! portrait of a robot astronaut, floral! horizon zero dawn machine, intricate, elegant, highly detailed, digital painting, artstation, concept art, smooth, sharp focus, illustration, art by artgerm and greg rutkowski and alphonse mucha, 8 k\n\n<img src=\"images/feeling-lucky.png\">\n\n#### usage\n\n```python\nfrom dynamicprompts.generators import randompromptgenerator\nfrom dynamicprompts.generators.feelinglucky import feelingluckygenerator\n\ngenerator = randompromptgenerator()\nlucky_generator = feelingluckygenerator(generator)\n\nnum_prompts = 5\nlucky_generator.generate(\"i love {red|green|blue} roses\", num_prompts)\n\n>> ['\u201c guns and roses \u201d ', '\ud83c\udf39\ud83e\udd40\ud83c\udfdc. \ud83c\udf0c\ud83c\udf20\u2b50. \ud83d\udcaf. ', 'tattoo design, stencil, beautiful japanese girls face, roses and ivy surrounding by artgerm, artgerm, cat girl, anime ', 'rose made of glass dramatic lighting', 'a wireframe render of a red rose']\n\n```\n\n### attention generator\nif you are using [automatic1111](https://github.com/automatic1111/stable-diffusion-webui/) or a similar frontend to stable diffusion that uses attention syntax, e.g. `(some text:1.4)`, attentiongenerator will randomly add attention to various phrases in your prompt. this injects a small amount of randomness into your prompt.\n\n#### usage\n\n```python\nfrom dynamicprompts.generators import randompromptgenerator\nfrom dynamicprompts.generators.attentiongenerator import attentiongenerator\n\ngenerator = randompromptgenerator()\nattention_generator = attentiongenerator(generator)\n\nprompt = \"a portrait an anthropomorphic panda mage casting a spell, wearing mage robes, landscape in background, cute, dnd character art portrait, by jason felix and peter mohrbacher, cinematic lighting\"\nattention_generator.generate(prompt, num_prompts=1)\n\n>> ['a portrait an anthropomorphic panda mage casting a spell, wearing (mage robes:0.77), landscape in background, cute, dnd character art portrait, by jason felix and peter mohrbacher, cinematic lighting']\n\n```\n\n<img src=\"images/emphasis.png\">\n\nyou may get better results with attentiongenerator by installing the `spacy` nlp library. use this command to install it:\n\n`pip install spacy`\n\nwhen spacy is available, an nlp model will automatically be downloaded on first use.\n\n## jinja2 templates\nif the standard template language is not sufficient for your needs, you can try the jinja2 generator. jinja2 templates have familiar programming constructs such as looping, conditionals, variables, etc. youcan find a guide on using jinja2 templates with dynamic prompts, [here](https://github.com/adieyal/sd-dynamic-prompts/blob/main/jinja2.md). here is the minimal code you need to instantiate jinja2 generator.\n\n```python\nfrom dynamicprompts.generators import jinjagenerator\n\ngenerator = jinjagenerator()\ngenerator.generate(\"i love {red|green|blue} roses\", num_images=5)\n\ntemplate = \"\"\"\n{% for colour in ['red', 'blue', 'green'] %}\n    {% prompt %}i love {{ colour }} roses{% endprompt %}\n{% endfor %}\n\"\"\"\n\ngenerator.generate(template)\n\n>> ['i love red roses', 'i love blue roses', 'i love green roses']\n```\n\n## template syntax\n\nyou can find the complete syntax guide [here](https://github.com/adieyal/sd-dynamic-prompts/blob/main/docs/syntax.md)\n\n### syntax customisation\nto address potential syntax clashes with other tools it is possible to change various tokens. instead of `{red|green|blue}` you can configure the library to use the `<` `>` pair instead, e.g. `<red|green|blue>`. you can also change the `__` used in wildcards. so instead of `__colours__`, you can configure wildcards to use `**`, e.g. `**colours**`\n```python\n\nfrom dynamicprompts.generators import randompromptgenerator\nfrom dynamicprompts.parser.config import parserconfig\n\nparser_config = parserconfig(variant_start=\"<\", variant_end=\">\", wildcard_wrap=\"**\")\ngenerator = randompromptgenerator(parser_config=parser_config)\n\n```\n## wildcard collections\nyou can bootstrap your wildcard library by using our [pre-existing collections](https://github.com/adieyal/sd-dynamic-prompts/tree/main/collections). you'll find just under 80,000 wildcards divided into 1900 files. feel free to pick and choose or take them in their entirety.\n\n## dynamic prompts in the wild.\ndynamic prompts has been used in:\n1. [sd dynamic prompts](https://github.com/adieyal/sd-dynamic-prompts/edit/main/readme.md) auto1111 extension\n2. deforum 0.7 [colab](https://colab.research.google.com/drive/1qtyhuwfl9oclyzdrl1_mlpqluv32ndot?usp=sharing)\n3. [comfyui nodes](https://github.com/adieyal/comfyui-dynamicprompts)\n",
  "docs_url": null,
  "keywords": "automatic1111,prompt engineering,stable diffusion,text2img",
  "license": "",
  "name": "dynamicprompts",
  "package_url": "https://pypi.org/project/dynamicprompts/",
  "project_url": "https://pypi.org/project/dynamicprompts/",
  "project_urls": null,
  "release_url": "https://pypi.org/project/dynamicprompts/0.30.4/",
  "requires_dist": [
    "jinja2~=3.1",
    "pyparsing~=3.0",
    "pytest-cov~=4.0; extra == 'dev'",
    "pytest-lazy-fixture~=0.6; extra == 'dev'",
    "pytest~=7.2; extra == 'dev'",
    "requests~=2.28; extra == 'feelinglucky'",
    "transformers[torch]~=4.19; extra == 'magicprompt'"
  ],
  "requires_python": ">=3.8",
  "summary": "dynamic prompts templating library for stable diffusion",
  "version": "0.30.4",
  "releases": [],
  "developers": [
    "adi@clearforest.io"
  ],
  "kwds": "dynamicprompts prompts promptgen prompt max_prompts",
  "license_kwds": "",
  "libtype": "pypi",
  "id": "pypi_dynamicprompts",
  "homepage": "",
  "release_count": 67,
  "dependency_ids": [
    "pypi_jinja2",
    "pypi_pyparsing",
    "pypi_pytest",
    "pypi_pytest_cov",
    "pypi_pytest_lazy_fixture",
    "pypi_requests",
    "pypi_transformers"
  ]
}