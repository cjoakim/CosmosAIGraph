{
  "classifiers": [
    "license :: osi approved :: mit license",
    "operating system :: os independent",
    "programming language :: python :: 3"
  ],
  "description": "# openapi-schema-pydantic\n\n[![pypi](https://img.shields.io/pypi/v/openapi-schema-pydantic)](https://pypi.org/project/openapi-schema-pydantic/)\n[![pypi - license](https://img.shields.io/pypi/l/openapi-schema-pydantic)](https://github.com/kuimono/openapi-schema-pydantic/blob/master/license)\n\nopenapi (v3) specification schema as [pydantic](https://github.com/samuelcolvin/pydantic) classes.\n\nthe naming of the classes follows the schema in \n[openapi specification](https://github.com/oai/openapi-specification/blob/master/versions/3.1.0.md#schema).\n\n## installation\n\n`pip install openapi-schema-pydantic`\n\n## try me\n\n```python\nfrom openapi_schema_pydantic import openapi, info, pathitem, operation, response\n\n# construct openapi by pydantic objects\nopen_api = openapi(\n    info=info(\n        title=\"my own api\",\n        version=\"v0.0.1\",\n    ),\n    paths={\n        \"/ping\": pathitem(\n            get=operation(\n                responses={\n                    \"200\": response(\n                        description=\"pong\"\n                    )\n                }\n            )\n        )\n    },\n)\nprint(open_api.json(by_alias=true, exclude_none=true, indent=2))\n```\n\nresult:\n\n```json\n{\n  \"openapi\": \"3.1.0\",\n  \"info\": {\n    \"title\": \"my own api\",\n    \"version\": \"v0.0.1\"\n  },\n  \"servers\": [\n    {\n      \"url\": \"/\"\n    }\n  ],\n  \"paths\": {\n    \"/ping\": {\n      \"get\": {\n        \"responses\": {\n          \"200\": {\n            \"description\": \"pong\"\n          }\n        },\n        \"deprecated\": false\n      }\n    }\n  }\n}\n```\n\n## take advantage of pydantic\n\npydantic is a great tool, allow you to use object / dict / mixed data for for input.\n\nthe following examples give the same openapi result as above:\n\n```python\nfrom openapi_schema_pydantic import openapi, pathitem, response\n\n# construct openapi from dict\nopen_api = openapi.parse_obj({\n    \"info\": {\"title\": \"my own api\", \"version\": \"v0.0.1\"},\n    \"paths\": {\n        \"/ping\": {\n            \"get\": {\"responses\": {\"200\": {\"description\": \"pong\"}}}\n        }\n    },\n})\n\n# construct openapi with mix of dict/object\nopen_api = openapi.parse_obj({\n    \"info\": {\"title\": \"my own api\", \"version\": \"v0.0.1\"},\n    \"paths\": {\n        \"/ping\": pathitem(\n            get={\"responses\": {\"200\": response(description=\"pong\")}}\n        )\n    },\n})\n```\n\n## use pydantic classes as schema\n\n- the [schema object](https://github.com/oai/openapi-specification/blob/master/versions/3.0.3.md#schemaobject)\n  in openapi has definitions and tweaks in json schema, which is hard to comprehend and define a good data class\n- pydantic already has a good way to [create json schema](https://pydantic-docs.helpmanual.io/usage/schema/),\n  let's not re-invent the wheel\n  \nthe approach to deal with this:\n\n1. use `pydanticschema` objects to represent the `schema` in `openapi` object\n2. invoke `construct_open_api_with_schema_class` to resolve the json schemas and references\n\n```python\nfrom pydantic import basemodel, field\n\nfrom openapi_schema_pydantic import openapi\nfrom openapi_schema_pydantic.util import pydanticschema, construct_open_api_with_schema_class\n\ndef construct_base_open_api() -> openapi:\n    return openapi.parse_obj({\n        \"info\": {\"title\": \"my own api\", \"version\": \"v0.0.1\"},\n        \"paths\": {\n            \"/ping\": {\n                \"post\": {\n                    \"requestbody\": {\"content\": {\"application/json\": {\n                        \"schema\": pydanticschema(schema_class=pingrequest)\n                    }}},\n                    \"responses\": {\"200\": {\n                        \"description\": \"pong\",\n                        \"content\": {\"application/json\": {\n                            \"schema\": pydanticschema(schema_class=pingresponse)\n                        }},\n                    }},\n                }\n            }\n        },\n    })\n\nclass pingrequest(basemodel):\n    \"\"\"ping request\"\"\"\n    req_foo: str = field(description=\"foo value of the request\")\n    req_bar: str = field(description=\"bar value of the request\")\n\nclass pingresponse(basemodel):\n    \"\"\"ping response\"\"\"\n    resp_foo: str = field(description=\"foo value of the response\")\n    resp_bar: str = field(description=\"bar value of the response\")\n\nopen_api = construct_base_open_api()\nopen_api = construct_open_api_with_schema_class(open_api)\n\n# print the result openapi.json\nprint(open_api.json(by_alias=true, exclude_none=true, indent=2))\n```\n\nresult:\n\n```json\n{\n  \"openapi\": \"3.1.0\",\n  \"info\": {\n    \"title\": \"my own api\",\n    \"version\": \"v0.0.1\"\n  },\n  \"servers\": [\n    {\n      \"url\": \"/\"\n    }\n  ],\n  \"paths\": {\n    \"/ping\": {\n      \"post\": {\n        \"requestbody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/pingrequest\"\n              }\n            }\n          },\n          \"required\": false\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"pong\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/pingresponse\"\n                }\n              }\n            }\n          }\n        },\n        \"deprecated\": false\n      }\n    }\n  },\n  \"components\": {\n    \"schemas\": {\n      \"pingrequest\": {\n        \"title\": \"pingrequest\",\n        \"required\": [\n          \"req_foo\",\n          \"req_bar\"\n        ],\n        \"type\": \"object\",\n        \"properties\": {\n          \"req_foo\": {\n            \"title\": \"req foo\",\n            \"type\": \"string\",\n            \"description\": \"foo value of the request\"\n          },\n          \"req_bar\": {\n            \"title\": \"req bar\",\n            \"type\": \"string\",\n            \"description\": \"bar value of the request\"\n          }\n        },\n        \"description\": \"ping request\"\n      },\n      \"pingresponse\": {\n        \"title\": \"pingresponse\",\n        \"required\": [\n          \"resp_foo\",\n          \"resp_bar\"\n        ],\n        \"type\": \"object\",\n        \"properties\": {\n          \"resp_foo\": {\n            \"title\": \"resp foo\",\n            \"type\": \"string\",\n            \"description\": \"foo value of the response\"\n          },\n          \"resp_bar\": {\n            \"title\": \"resp bar\",\n            \"type\": \"string\",\n            \"description\": \"bar value of the response\"\n          }\n        },\n        \"description\": \"ping response\"\n      }\n    }\n  }\n}\n```\n\n## notes\n\n### use of openapi.json() / openapi.dict()\n\nwhen using `openapi.json()` / `openapi.dict()` function,\narguments `by_alias=true, exclude_none=true` has to be in place.\notherwise the result json will not fit the openapi standard.\n\n```python\n# ok\nopen_api.json(by_alias=true, exclude_none=true, indent=2)\n\n# not good\nopen_api.json(indent=2)\n```\n\nmore info about field alias:\n\n| openapi version | field alias info |\n| --------------- | ---------------- |\n| 3.1.0 | [here](https://github.com/kuimono/openapi-schema-pydantic/blob/master/openapi_schema_pydantic/v3/v3_1_0/readme.md#alias) |\n| 3.0.3 | [here](https://github.com/kuimono/openapi-schema-pydantic/blob/master/openapi_schema_pydantic/v3/v3_0_3/readme.md#alias) |\n\n### non-pydantic schema types\n\nsome schema types are not implemented as pydantic classes.\nplease refer to the following for more info:\n\n| openapi version | non-pydantic schema type info |\n| --------------- | ----------------------------- |\n| 3.1.0 | [here](https://github.com/kuimono/openapi-schema-pydantic/blob/master/openapi_schema_pydantic/v3/v3_1_0/readme.md#non-pydantic-schema-types) |\n| 3.0.3 | [here](https://github.com/kuimono/openapi-schema-pydantic/blob/master/openapi_schema_pydantic/v3/v3_0_3/readme.md#non-pydantic-schema-types) |\n\n### use openapi 3.0.3 instead of 3.1.0\n\nsome ui renderings (e.g. swagger) still do not support openapi 3.1.0.\nit is allowed to use the old 3.0.3 version by importing from different paths:\n\n```python\nfrom openapi_schema_pydantic.v3.v3_0_3 import openapi, ...\nfrom openapi_schema_pydantic.v3.v3_0_3.util import pydanticschema, construct_open_api_with_schema_class\n```\n\n## license\n\n[mit license](https://github.com/kuimono/openapi-schema-pydantic/blob/master/license)\n",
  "docs_url": null,
  "keywords": "",
  "license": "",
  "name": "openapi-schema-pydantic",
  "package_url": "https://pypi.org/project/openapi-schema-pydantic/",
  "project_url": "https://pypi.org/project/openapi-schema-pydantic/",
  "project_urls": {
    "Homepage": "https://github.com/kuimono/openapi-schema-pydantic"
  },
  "release_url": "https://pypi.org/project/openapi-schema-pydantic/1.2.4/",
  "requires_dist": [
    "pydantic (>=1.8.2)"
  ],
  "requires_python": ">=3.6.1",
  "summary": "openapi (v3) specification schema as pydantic class",
  "version": "1.2.4",
  "releases": [],
  "developers": [
    "kuimono"
  ],
  "kwds": "openapi_schema_pydantic openapi construct_open_api_with_schema_class open_api pydantic",
  "license_kwds": "",
  "libtype": "pypi",
  "id": "pypi_openapi_schema_pydantic",
  "homepage": "https://github.com/kuimono/openapi-schema-pydantic",
  "release_count": 13,
  "dependency_ids": [
    "pypi_pydantic"
  ]
}