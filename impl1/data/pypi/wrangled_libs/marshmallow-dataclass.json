{
  "classifiers": [
    "development status :: 4 - beta",
    "environment :: console",
    "license :: osi approved :: mit license",
    "operating system :: os independent",
    "programming language :: python",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.6",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "topic :: internet :: www/http :: dynamic content :: cgi tools/libraries"
  ],
  "description": "# marshmallow-dataclass\n\n[![test workflow status (master branch)](https://img.shields.io/github/actions/workflow/status/lovasoa/marshmallow_dataclass/python-package.yml?branch=master&label=tests)](https://github.com/lovasoa/marshmallow_dataclass/actions/workflows/python-package.yml)\n[![pypi version](https://badge.fury.io/py/marshmallow-dataclass.svg)](https://badge.fury.io/py/marshmallow-dataclass)\n[![marshmallow 3 compatible](https://badgen.net/badge/marshmallow/3)](https://marshmallow.readthedocs.io/en/latest/upgrading.html)\n[![download stats](https://img.shields.io/pypi/dm/marshmallow-dataclass.svg)](https://pypistats.org/packages/marshmallow-dataclass)\n\nautomatic generation of [marshmallow](https://marshmallow.readthedocs.io/) schemas from dataclasses.\n\n```python\nfrom dataclasses import dataclass, field\nfrom typing import list, optional\n\nimport marshmallow_dataclass\nimport marshmallow.validate\n\n\n@dataclass\nclass building:\n    # field metadata is used to instantiate the marshmallow field\n    height: float = field(metadata={\"validate\": marshmallow.validate.range(min=0)})\n    name: str = field(default=\"anonymous\")\n\n\n@dataclass\nclass city:\n    name: optional[str]\n    buildings: list[building] = field(default_factory=list)\n\n\ncity_schema = marshmallow_dataclass.class_schema(city)()\n\ncity = city_schema.load(\n    {\"name\": \"paris\", \"buildings\": [{\"name\": \"eiffel tower\", \"height\": 324}]}\n)\n# => city(name='paris', buildings=[building(height=324.0, name='eiffel tower')])\n\ncity_dict = city_schema.dump(city)\n# => {'name': 'paris', 'buildings': [{'name': 'eiffel tower', 'height': 324.0}]}\n```\n\n## why\n\nusing schemas in python often means having both a class to represent your data and a class to represent its schema, which results in duplicated code that could fall out of sync.\nas of python 3.6, types can be defined for class members, which allows libraries to generate schemas automatically.\n\ntherefore, you can document your apis in a way that allows you to statically check that the code matches the documentation.\n\n## installation\n\nthis package [is hosted on pypi](https://pypi.org/project/marshmallow-dataclass/).\n\n```shell\npip3 install marshmallow-dataclass\n```\n\nyou may optionally install the following extras:\n\n- `enum` : enum support for marshmallow versions <3.18 [marshmallow-enum](https://github.com/justanr/marshmallow_enum).\n- `union` : for translating python [`union` types](https://docs.python.org/3/library/typing.html#typing.union) to union fields.\n\n```shell\npip3 install \"marshmallow-dataclass[enum,union]\"\n```\n\n### marshmallow 2 support\n\n`marshmallow-dataclass` no longer supports marshmallow 2.\ninstall `marshmallow_dataclass<6.0` if you need marshmallow 2 compatibility.\n\n## usage\n\nuse the [`class_schema`](https://lovasoa.github.io/marshmallow_dataclass/html/marshmallow_dataclass.html#marshmallow_dataclass.class_schema)\nfunction to generate a marshmallow [schema](https://marshmallow.readthedocs.io/en/latest/api_reference.html#marshmallow.schema)\nclass from a [`dataclass`](https://docs.python.org/3/library/dataclasses.html#dataclasses.dataclass).\n\n```python\nfrom dataclasses import dataclass\nfrom datetime import date\n\nimport marshmallow_dataclass\n\n\n@dataclass\nclass person:\n    name: str\n    birth: date\n\n\npersonschema = marshmallow_dataclass.class_schema(person)\n```\n\nthe type of your fields must be either basic \n[types supported by marshmallow](https://marshmallow.readthedocs.io/en/stable/api_reference.html#marshmallow.schema.type_mapping)\n(such as `float`, `str`, `bytes`, `datetime`, ...), `union`, or other dataclasses.\n\n### union (de)serialization coercion \n\ntypically the union type; `union[x, y]` means\u2014from a set theory perspective\u2014either `x` or `y`, i.e., an unordered set, howevever the order of the sub-types defines the precedence when attempting to ether deserialize or serialize the value per [here](https://github.com/lovasoa/marshmallow_dataclass/blob/master/marshmallow_dataclass/union_field.py). \n\nfor example, \n\n```python\nfrom typing import union\n\nfrom dataclasses import dataclass\n\n\n@dataclass\nclass person:\n    name: str\n    age: union[int, float]\n\n\npersonschema = marshmallow_dataclass.class_schema(person)\npersonschema().load({\"name\": \"jane\", \"age\": 50.0})\n# => person(name=\"jane\", age=50)\n```\n\nwill first (sucessfully) try to coerce `50.0` to an `int`. if coercion is not desired the `any` type can be used with the caveat that values will not be type checked without additional [validation](https://marshmallow.readthedocs.io/en/stable/marshmallow.validate.html).\n\n### customizing generated fields\n\nto pass arguments to the generated marshmallow fields (e.g., `validate`, `load_only`, `dump_only`, etc.),\npass them to the `metadata` argument of the\n[`field`](https://docs.python.org/3/library/dataclasses.html#dataclasses.field) function.\n\nnote that starting with version 4, marshmallow will disallow passing arbitrary arguments, so any\nadditional metadata should itself be put in its own `metadata` dict:\n\n```python\nfrom dataclasses import dataclass, field\nimport marshmallow_dataclass\nimport marshmallow.validate\n\n\n@dataclass\nclass person:\n    name: str = field(\n        metadata=dict(\n            load_only=true, metadata=dict(description=\"the person's first name\")\n        )\n    )\n    height: float = field(metadata=dict(validate=marshmallow.validate.range(min=0)))\n\n\npersonschema = marshmallow_dataclass.class_schema(person)\n```\n\n### `@dataclass` shortcut\n\n`marshmallow_dataclass` provides a `@dataclass` decorator that behaves like the standard library's \n`@dataclasses.dataclass` and adds a `schema` attribute with the generated marshmallow\n[schema](https://marshmallow.readthedocs.io/en/2.x-line/api_reference.html#marshmallow.schema).\n\n```python\n# use marshmallow_dataclass's @dataclass shortcut\nfrom marshmallow_dataclass import dataclass\n\n\n@dataclass\nclass point:\n    x: float\n    y: float\n\n\npoint.schema().dump(point(4, 2))\n# => {'x': 4, 'y': 2}\n```\n\nnote: since the `.schema` property is added dynamically, it can confuse type checkers.\nto avoid that, you can declare `schema` as a [`classvar`](https://docs.python.org/3/library/typing.html#typing.classvar).\n\n```python\nfrom typing import classvar, type\n\nfrom marshmallow_dataclass import dataclass\nfrom marshmallow import schema\n\n\n@dataclass\nclass point:\n    x: float\n    y: float\n    schema: classvar[type[schema]] = schema\n```\n\n### customizing the base schema\n\nit is also possible to derive all schemas from your own \nbase schema class\n(see [marshmallow's documentation about extending `schema`](https://marshmallow.readthedocs.io/en/stable/extending.html)).\nthis allows you to implement custom (de)serialization\nbehavior, for instance specifying a custom mapping between your classes and marshmallow fields,\nor renaming fields on serialization.\n\n#### custom mapping between classes and fields\n\n```python\nclass baseschema(marshmallow.schema):\n    type_mapping = {customtype: customfield, list: customlistfield}\n\n\nclass sample:\n    my_custom: customtype\n    my_custom_list: list[int]\n\n\nsampleschema = marshmallow_dataclass.class_schema(sample, base_schema=baseschema)\n# sampleschema now serializes my_custom using the customfield marshmallow field\n# and serializes my_custom_list using the customlistfield marshmallow field\n```\n\n#### renaming fields on serialization\n\n```python\nimport marshmallow\nimport marshmallow_dataclass\n\n\nclass uppercaseschema(marshmallow.schema):\n    \"\"\"a schema that marshals data with uppercased keys.\"\"\"\n\n    def on_bind_field(self, field_name, field_obj):\n        field_obj.data_key = (field_obj.data_key or field_name).upper()\n\n\nclass sample:\n    my_text: str\n    my_int: int\n\n\nsampleschema = marshmallow_dataclass.class_schema(sample, base_schema=uppercaseschema)\n\nsampleschema().dump(sample(my_text=\"warm words\", my_int=1))\n# -> {\"my_text\": \"warm words\", \"my_int\": 1}\n```\n\nyou can also pass `base_schema` to `marshmallow_dataclass.dataclass`.\n\n```python\n@marshmallow_dataclass.dataclass(base_schema=uppercaseschema)\nclass sample:\n    my_text: str\n    my_int: int\n```\n\nsee [marshmallow's documentation about extending `schema`](https://marshmallow.readthedocs.io/en/stable/extending.html).\n\n### custom newtype declarations\n\nthis library exports a `newtype` function to create types that generate [customized marshmallow fields](https://marshmallow.readthedocs.io/en/stable/custom_fields.html#creating-a-field-class).\n\nkeyword arguments to `newtype` are passed to the marshmallow field constructor.\n\n```python\nimport marshmallow.validate\nfrom marshmallow_dataclass import newtype\n\nipv4 = newtype(\n    \"ipv4\", str, validate=marshmallow.validate.regexp(r\"^([0-9]{1,3}\\\\.){3}[0-9]{1,3}$\")\n)\n```\n\nyou can also pass a marshmallow field to `newtype`.\n\n```python\nimport marshmallow\nfrom marshmallow_dataclass import newtype\n\nemail = newtype(\"email\", str, field=marshmallow.fields.email)\n```\n\nfor convenience, some custom types are provided:\n\n```python\nfrom marshmallow_dataclass.typing import email, url\n```\n\nnote: if you are using `mypy`, you will notice that `mypy` throws an error if a variable defined with\n`newtype` is used in a type annotation. to resolve this, add the `marshmallow_dataclass.mypy` plugin\nto your `mypy` configuration, e.g.:\n\n```ini\n[mypy]\nplugins = marshmallow_dataclass.mypy\n# ...\n```\n\n### `meta` options\n\n[`meta` options](https://marshmallow.readthedocs.io/en/stable/api_reference.html#marshmallow.schema.meta) are set the same way as a marshmallow `schema`.\n\n```python\nfrom marshmallow_dataclass import dataclass\n\n\n@dataclass\nclass point:\n    x: float\n    y: float\n\n    class meta:\n        ordered = true\n```\n\n## documentation\n\nthe project documentation is hosted on github pages: https://lovasoa.github.io/marshmallow_dataclass/\n\n## contributing\n\nto install this project and make changes to it locally, follow the instructions in [`contributing.md`](./contributing.md).\n",
  "docs_url": null,
  "keywords": "marshmallow,dataclass,serialization",
  "license": "mit",
  "name": "marshmallow-dataclass",
  "package_url": "https://pypi.org/project/marshmallow-dataclass/",
  "project_url": "https://pypi.org/project/marshmallow-dataclass/",
  "project_urls": {
    "Homepage": "https://github.com/lovasoa/marshmallow_dataclass"
  },
  "release_url": "https://pypi.org/project/marshmallow-dataclass/8.6.0/",
  "requires_dist": [
    "marshmallow <4.0,>=3.13.0",
    "typing-inspect <1.0,>=0.8.0",
    "typing-extensions >=4.2.0 ; python_version < \"3.11\" and python_version >= \"3.7\"",
    "typing-extensions >=3.7.2 ; python_version < \"3.8\"",
    "dataclasses ; python_version == \"3.6\"",
    "types-dataclasses <0.6.4 ; python_version == \"3.6\"",
    "typeguard <4.0.0,>=2.4.1 ; extra == 'dev'",
    "pre-commit ~=2.17 ; extra == 'dev'",
    "sphinx ; extra == 'dev'",
    "pytest >=5.4 ; extra == 'dev'",
    "pytest-mypy-plugins >=1.2.0 ; (implementation_name != \"pypy\") and extra == 'dev'",
    "marshmallow-enum ; (python_version < \"3.7\") and extra == 'dev'",
    "marshmallow <4.0,>=3.18.0 ; (python_version >= \"3.7\") and extra == 'dev'",
    "sphinx ; extra == 'docs'",
    "marshmallow-enum ; (python_version < \"3.7\") and extra == 'enum'",
    "marshmallow <4.0,>=3.18.0 ; (python_version >= \"3.7\") and extra == 'enum'",
    "pre-commit ~=2.17 ; extra == 'lint'",
    "pytest >=5.4 ; extra == 'tests'",
    "pytest-mypy-plugins >=1.2.0 ; (implementation_name != \"pypy\") and extra == 'tests'",
    "typeguard <4.0.0,>=2.4.1 ; extra == 'union'"
  ],
  "requires_python": ">=3.6",
  "summary": "python library to convert dataclasses into marshmallow schemas.",
  "version": "8.6.0",
  "releases": [],
  "developers": [
    "ophir_lojkine",
    "pere.jobs@gmail.com"
  ],
  "kwds": "marshmallow_dataclass pip3 dataclasses marshmallow dataclass",
  "license_kwds": "mit",
  "libtype": "pypi",
  "id": "pypi_marshmallow_dataclass",
  "homepage": "https://github.com/lovasoa/marshmallow_dataclass",
  "release_count": 71,
  "dependency_ids": [
    "pypi_dataclasses",
    "pypi_marshmallow",
    "pypi_marshmallow_enum",
    "pypi_pre_commit",
    "pypi_pytest",
    "pypi_pytest_mypy_plugins",
    "pypi_sphinx",
    "pypi_typeguard",
    "pypi_types_dataclasses",
    "pypi_typing_extensions",
    "pypi_typing_inspect"
  ]
}