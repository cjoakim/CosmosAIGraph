{
  "classifiers": [
    "development status :: 5 - production/stable",
    "intended audience :: developers",
    "license :: osi approved :: apache software license",
    "natural language :: english",
    "programming language :: python",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9"
  ],
  "description": "![sagemaker](https://github.com/aws/sagemaker-inference-toolkit/raw/master/branding/icon/sagemaker-banner.png)\n\n# sagemaker inference toolkit\n\n[![latest version](https://img.shields.io/pypi/v/sagemaker-inference.svg)](https://pypi.python.org/pypi/sagemaker-inference) [![supported python versions](https://img.shields.io/pypi/pyversions/sagemaker-inference.svg)](https://pypi.python.org/pypi/sagemaker-inference) [![code style: black](https://img.shields.io/badge/code_style-black-000000.svg)](https://github.com/python/black)\n\nserve machine learning models within a docker container using amazon\nsagemaker.\n\n## :books: background\n\n[amazon sagemaker](https://aws.amazon.com/sagemaker/) is a fully managed service for data science and machine learning (ml) workflows.\nyou can use amazon sagemaker to simplify the process of building, training, and deploying ml models.\n\nonce you have a trained model, you can include it in a [docker container](https://www.docker.com/resources/what-container) that runs your inference code.\na container provides an effectively isolated environment, ensuring a consistent runtime regardless of where the container is deployed.\ncontainerizing your model and code enables fast and reliable deployment of your model.\n\nthe **sagemaker inference toolkit** implements a model serving stack and can be easily added to any docker container, making it [deployable to sagemaker](https://aws.amazon.com/sagemaker/deploy/).\nthis library's serving stack is built on [multi model server](https://github.com/awslabs/multi-model-server), and it can serve your own models or those you trained on sagemaker using [machine learning frameworks with native sagemaker support](https://docs.aws.amazon.com/sagemaker/latest/dg/frameworks.html).\nif you use a [prebuilt sagemaker docker image for inference](https://docs.aws.amazon.com/sagemaker/latest/dg/pre-built-containers-frameworks-deep-learning.html), this library may already be included.\n\nfor more information, see the amazon sagemaker developer guide sections on [building your own container with multi model server](https://docs.aws.amazon.com/sagemaker/latest/dg/build-multi-model-build-container.html) and [using your own models](https://docs.aws.amazon.com/sagemaker/latest/dg/your-algorithms.html).\n\n## :hammer_and_wrench: installation\n\nto install this library in your docker image, add the following line to your [dockerfile](https://docs.docker.com/engine/reference/builder/):\n\n``` dockerfile\nrun pip3 install multi-model-server sagemaker-inference\n```\n\n[here is an example](https://github.com/awslabs/amazon-sagemaker-examples/blob/master/advanced_functionality/multi_model_bring_your_own/container/dockerfile) of a dockerfile that installs sagemaker inference toolkit.\n\n## :computer: usage\n\n### implementation steps\n\nto use the sagemaker inference toolkit, you need to do the following:\n\n1.  implement an inference handler, which is responsible for loading the model and providing input, predict, and output functions.\n    ([here is an example](https://github.com/aws/sagemaker-pytorch-serving-container/blob/master/src/sagemaker_pytorch_serving_container/default_pytorch_inference_handler.py) of an inference handler.)\n\n    ``` python\n    from sagemaker_inference import content_types, decoder, default_inference_handler, encoder, errors\n\n    class defaultpytorchinferencehandler(default_inference_handler.defaultinferencehandler):\n\n        def default_model_fn(self, model_dir, context=none):\n            \"\"\"loads a model. for pytorch, a default function to load a model cannot be provided.\n            users should provide customized model_fn() in script.\n\n            args:\n                model_dir: a directory where model is saved.\n                context (obj): the request context (default: none).\n\n            returns: a pytorch model.\n            \"\"\"\n            raise notimplementederror(textwrap.dedent(\"\"\"\n            please provide a model_fn implementation.\n            see documentation for model_fn at https://github.com/aws/sagemaker-python-sdk\n            \"\"\"))\n\n        def default_input_fn(self, input_data, content_type, context=none):\n            \"\"\"a default input_fn that can handle json, csv and npz formats.\n\n            args:\n                input_data: the request payload serialized in the content_type format\n                content_type: the request content_type\n                context (obj): the request context (default: none).\n\n            returns: input_data deserialized into torch.floattensor or torch.cuda.floattensor depending if cuda is available.\n            \"\"\"\n            return decoder.decode(input_data, content_type)\n\n        def default_predict_fn(self, data, model, context=none):\n            \"\"\"a default predict_fn for pytorch. calls a model on data deserialized in input_fn.\n            runs prediction on gpu if cuda is available.\n\n            args:\n                data: input data (torch.tensor) for prediction deserialized by input_fn\n                model: pytorch model loaded in memory by model_fn\n                context (obj): the request context (default: none).\n\n            returns: a prediction\n            \"\"\"\n            return model(input_data)\n\n        def default_output_fn(self, prediction, accept, context=none):\n            \"\"\"a default output_fn for pytorch. serializes predictions from predict_fn to json, csv or npy format.\n\n            args:\n                prediction: a prediction result from predict_fn\n                accept: type which the output data needs to be serialized\n                context (obj): the request context (default: none).\n\n            returns: output data serialized\n            \"\"\"\n            return encoder.encode(prediction, accept)\n    ```\n    note, passing context as an argument to the handler functions is optional. customer can choose to omit context from the function declaration if it's not needed in the runtime. for example, the following handler function declarations will also work:\n\n    ```\n    def default_model_fn(self, model_dir)\n\n    def default_input_fn(self, input_data, content_type)\n\n    def default_predict_fn(self, data, model)\n\n    def default_output_fn(self, prediction, accept)\n    ``` \n\n2.  implement a handler service that is executed by the model server.\n    ([here is an example](https://github.com/aws/sagemaker-pytorch-serving-container/blob/master/src/sagemaker_pytorch_serving_container/handler_service.py) of a handler service.)\n    for more information on how to define your `handler_service` file, see [the mms custom service documentation](https://github.com/awslabs/multi-model-server/blob/master/docs/custom_service.md).\n\n    ``` python\n    from sagemaker_inference.default_handler_service import defaulthandlerservice\n    from sagemaker_inference.transformer import transformer\n    from sagemaker_pytorch_serving_container.default_inference_handler import defaultpytorchinferencehandler\n\n\n    class handlerservice(defaulthandlerservice):\n        \"\"\"handler service that is executed by the model server.\n        determines specific default inference handlers to use based on model being used.\n        this class extends ``defaulthandlerservice``, which define the following:\n            - the ``handle`` method is invoked for all incoming inference requests to the model server.\n            - the ``initialize`` method is invoked at model server start up.\n        based on: https://github.com/awslabs/multi-model-server/blob/master/docs/custom_service.md\n        \"\"\"\n        def __init__(self):\n            transformer = transformer(default_inference_handler=defaultpytorchinferencehandler())\n            super(handlerservice, self).__init__(transformer=transformer)\n    ```\n\n3.  implement a serving entrypoint, which starts the model server.\n    ([here is an example](https://github.com/aws/sagemaker-pytorch-serving-container/blob/master/src/sagemaker_pytorch_serving_container/serving.py) of a serving entrypoint.)\n\n    ``` python\n    from sagemaker_inference import model_server\n\n    model_server.start_model_server(handler_service=handler_service)\n    ```\n\n4.  define the location of the entrypoint in your dockerfile.\n\n    ``` dockerfile\n    entrypoint [\"python\", \"/usr/local/bin/entrypoint.py\"]\n    ```\n\n### complete example\n\n[here is a complete example](https://github.com/awslabs/amazon-sagemaker-examples/tree/master/advanced_functionality/multi_model_bring_your_own) demonstrating usage of the sagemaker inference toolkit in your own container for deployment to a multi-model endpoint.\n\n## :scroll: license\n\nthis library is licensed under the [apache 2.0 license](http://aws.amazon.com/apache2.0/).\nfor more details, please take a look at the [license](https://github.com/aws-samples/sagemaker-inference-toolkit/blob/master/license) file.\n\n## :handshake: contributing\n\ncontributions are welcome!\nplease read our [contributing guidelines](https://github.com/aws/sagemaker-inference-toolkit/blob/master/contributing.md)\nif you'd like to open an issue or submit a pull request.",
  "docs_url": null,
  "keywords": "",
  "license": "apache license 2.0",
  "name": "sagemaker-inference",
  "package_url": "https://pypi.org/project/sagemaker-inference/",
  "project_url": "https://pypi.org/project/sagemaker-inference/",
  "project_urls": {
    "Homepage": "https://github.com/aws/sagemaker-inference-toolkit/"
  },
  "release_url": "https://pypi.org/project/sagemaker-inference/1.10.1/",
  "requires_dist": [],
  "requires_python": "",
  "summary": "open source toolkit for helping create serving containers to run on amazon sagemaker.",
  "version": "1.10.1",
  "releases": [],
  "developers": [
    "amazon_web_services"
  ],
  "kwds": "sagemaker sagemaker_inference sagemaker_pytorch_serving_container pip3 docker",
  "license_kwds": "apache license 2.0",
  "libtype": "pypi",
  "id": "pypi_sagemaker_inference",
  "homepage": "https://github.com/aws/sagemaker-inference-toolkit/",
  "release_count": 47,
  "dependency_ids": []
}