{
  "classifiers": [
    "development status :: 5 - production/stable",
    "environment :: web environment",
    "framework :: django",
    "framework :: django :: 3.2",
    "framework :: django :: 4.0",
    "framework :: django :: 4.1",
    "framework :: django :: 4.2",
    "framework :: django :: 5.0",
    "intended audience :: developers",
    "license :: osi approved :: bsd license",
    "natural language :: english",
    "operating system :: os independent",
    "programming language :: python",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.12",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9"
  ],
  "description": "django-impersonate |nlshield|\n-----------------------------\n\nsimple application to allow superusers to \"impersonate\" other\nnon-superuser accounts.\n\n**version:** 1.9.2\n\n**project links:**\n`issues <https://todo.code.netlandish.com/~petersanchez/django-impersonate>`__\n- `mailing\nlist <https://lists.code.netlandish.com/~petersanchez/public-inbox>`__ -\n`contributing <#contributing>`__\n\n**author:** peter sanchez (https://petersanchez.com)\n\npython / django support\n=======================\n\n-  python 3.7+ for django versions 3.2+\n\n**note:** as of version 1.4 we are only officially supporting python and\ndjango versions that are supported by the official projects. so if a\npython or django version is end-of-life'd, then we will no longer\nsupport that version either.\n\ndependencies\n============\n\n-  depends on your project using the django.contrib.session framework.\n\n**note:**\n\n-  **version 1.6** has officially removed support for the old settings\n   format. please see the `settings <#settings>`__ section for how\n   settings should be configured.\n-  **version 1.5 is now only officially supporting django's 1.11, 2.2,\n   and 3.0**\n-  **version 1.4 is now officially supporting python 3.6+ and django\n   1.11+**\n-  **version 1.3 adds a settings format change.** please see the\n   settings section for details.\n-  **version 1.0 adds new functionality by default.** please see the\n   ``disable_logging`` settings option.\n-  if you need to use this with django older than 1.8, please use\n   version django-impersonate == 1.0.1\n-  if you need to use this with django older than 1.7, please use\n   version django-impersonate == 0.9.2\n-  **version 0.9.2 partially reverts work completed in version 0.9.1.**\n   this is because work done to address a request in `issue\n   #17 <https://bitbucket.org/petersanchez/django-impersonate/issues/17/remember-where-to-return-to-after>`__\n   broke default behavior for all previous versions. `issue\n   #24 <https://bitbucket.org/petersanchez/django-impersonate/issues/24/impersonate_redirect_url-no-longer-works>`__\n   was opened and the fix was released in 0.9.2 to address it. please\n   see the new ``use_http_referer`` settings option.\n-  if you need to use this with django older than 1.4, please use\n   version django-impersonate == 0.5.3\n\ninstallation\n============\n\npip:\n\n::\n\n   pip install django-impersonate\n\nbasic manual install:\n\n::\n\n   $ python setup.py build\n   $ sudo python setup.py install\n\nalternative install (manually):\n\nplace impersonate directory in your python path. either in your python\ninstalls site-packages directory or set your $pythonpath environment\nvariable to include a directory where the impersonate directory lives.\n\nuse\n===\n\n#. add ``impersonate`` to your installed_apps\n\n#. add ``impersonate.middleware.impersonatemiddleware`` to your\n   ``middleware`` setting.\n\n#. add ``impersonate.urls`` somewhere in your url structure. example:\n\n   ::\n\n      urlpatterns = patterns('',\n          url(r'^admin/', include(admin.site.urls)),\n          url(r'^impersonate/', include('impersonate.urls')),\n          ... (all your other urls here) ...\n      )\n\n**note:** the ``impersonationmiddleware`` class should be placed after\nthe ``django.contrib.auth.*`` middleware classes\n\nfunctionality\n=============\n\n**you can now impersonate another user by hitting the following path:**\n\n::\n\n   /impersonate/<user-id>/\n\nreplace <user-id> with the user id of the user you want to impersonate.\n\nwhile in impersonation \"mode\" the ``request.user`` object will have an\n``is_impersonate`` attribute set to ``true`` as well as ``impersonator``\n(and also ``request.impersonator``) set to the original user. so if you\nwanted to check in your templates or view, you just do something\nlike...:\n\n::\n\n   {% if user.is_impersonate %} .... {% endif %}\n\nthe original user is available as ``user.impersonator`` or\n``request.impersonator``:\n\n::\n\n   {{ request.user }} ({{ request.impersonator }})\n\nthe real user is available as ``request.real_user`` - this is equivalent\nto calling ``getattr(request, 'impersonator', request.user)``:\n\n::\n\n   assert request.real_user == getattr(request, 'impersonator', request.user)\n\nyou can reference this url with ``reverse`` or the ``{% url %}``\ntemplate tag as ``impersonate-start`` and expects the argument of the\nuser id. example:\n\n::\n\n   reverse('impersonate-start', args=[user.id])\n   reverse('impersonate-start', uid=user.id)\n\n**to remove the impersonation, hit the following path:**\n\n::\n\n   /impersonate/stop/\n\nyou can reference this url with ``reverse`` or the ``{% url %}``\ntemplate tag as ``impersonate-stop``. when you call this url, you will\nbe redirected to the page that you used to start impersonating a user\n(eg, some search results or the user list).\n\n**to list all users you can go to:**\n\n::\n\n   /impersonate/list/\n\nthis will render the template ``impersonate/list_users.html`` and will\npass the following in the context:\n\n-  ``users`` - queryset of all users\n-  ``paginator`` - django paginator instance\n-  ``page`` - current page of objects (from paginator)\n-  ``page_number`` - current page number, defaults to 1\n\nyou can reference this url with ``reverse`` or the ``{% url %}``\ntemplate tag as ``impersonate-list``.\n\n**to search all users you can go to:**\n\n::\n\n   /impersonate/search/\n\nthis will render the template 'impersonate/search_users.html' and will\npass the following in the context:\n\n-  ``users`` - queryset of all users\n-  ``paginator`` - django paginator instance\n-  ``page`` - current page of objects (from paginator)\n-  ``page_number`` - current page number, defaults to 1\n-  ``query`` - the search query that was entered\n\nthe view will expect a get request and look for the ``q`` variable being\npassed. if present, it will search the user entries with the value of\n``q``. the default fields searched are:\n\n``user.username``, ``user.first_name``, ``user.last_name``,\n``user.email``\n\nyou can reference this url with ``reverse`` or the ``{% url %}``\ntemplate tag as ``impersonate-search``.\n\n**to allow some users to impersonate other users**\n\nyou can optionally allow only some non-superuser and non-staff users to\nimpersonate by adding a ``custom_allow`` setting option. create a\nfunction that takes a request object, and based on your rules, returns\n``true`` if the user is allowed to impersonate or not.\n\n**to limit what users a user can impersonate**\n\nby, optionally, setting the ``custom_user_queryset`` option you can\ncontrol what users can be impersonated. it takes a request object of the\nuser, and returns a queryset of users. this is used when searching for\nusers to impersonate, when listing what users to impersonate, and when\ntrying to start impersonation.\n\nsignals\n=======\n\nif you wish to hook into the impersonation session (for instance, in\norder to audit access), there are two signals that are fired by\ndjango-impersonate, at the beginning and end of a session:\n\n-  ``session_begin`` - sent when calling the ``impersonate`` view\n-  ``session_end`` - sent when calling the ``stop_impersonate`` view\n\nboth of these signals send the same arguments:\n\n-  ``sender`` - this is a django signal requirement, and is always set\n   to none\n-  ``impersonator`` - a reference to the user object of the person doing\n   the impersonation\n-  ``impersonating`` - a reference to the user object of the person\n   being impersonated\n-  ``request`` - the django httprequest object from which the\n   impersonation was invoked\n\nthe request object is included as it contains pertinent information that\nyou may wish to audit - such as client ip address, user-agent string,\netc.\n\nfor an example of how to hook up the signals, see the relevant test -\n``test_successful_impersonation_signals``.\n\nthe ``session_end`` signal will only be fired if the impersonator\nexplicitly ends the session.\n\nsettings\n========\n\nthe following settings are available for django-impersonate. all\nsettings should be set as variables in a dictionary assigned to the\nattribute named ``impersonate``.\n\nfor example:\n\n::\n\n   impersonate = {\n       'redirect_url': '/some-path/',\n       'paginate_count': 10,\n   }\n\nhere are the options available...\n\n::\n\n   redirect_url\n\nthis is the url you want to be redirected to *after* you have chosen to\nimpersonate another user. if this is not present it will check for the\n``login_redirect_url`` setting and fall back to '/' if neither is\npresent. value should be a string containing the redirect path.\n\n::\n\n   read_only\n\na boolean that if set to ``true`` any requests that are not either\n``get`` or ``head`` or ``options`` will result in a \"bad request\"\nresponse (status code 405). use this if you want to limit your\nimpersonating users to read only impersonation sessions.\n\nvalue should be a boolean, defaults to ``false``\n\nif the ``custom_read_only`` is set, then that custom function is used,\nand this setting is ignored.\n\n::\n\n   custom_read_only\n\na string that represents a function (e.g.\n``module.submodule.mod.function_name``) that allows more fine grained\ncontrol over who has read only access. it takes one argument, the\nrequest object, and should return true to restrict the user to only\nallow ``get``, ``head`` and ``options`` requests.\n\nit is optional, and if it is not present, ``read_only`` setting value\napplies.\n\n::\n\n   use_http_referer\n\nif this is set to ``true``, then the app will attempt to be redirect you\nto the url you were at when the impersonation began once you have\n*stopped* the impersonation. for example, if you were at the url\n'/foo/bar/' when you began impersonating a user, once you end the\nimpersonation, you will be redirected back to '/foo/bar/' instead of the\nvalue in ``redirect_url``.\n\nvalue should be a boolean, defaults to ``false``\n\n::\n\n   paginate_count\n\nthis is the number of users to paginate by when using the list or search\nviews. this defaults to 20. value should be an integer.\n\n::\n\n   require_superuser\n\nif this is set to ``true``, then only users who have ``is_superuser``\nset to ``true`` will be allowed to impersonate other users. default is\n``false``. if ``false``, then any ``is_staff`` user will be able to\nimpersonate other users.\n\n**note:** regardless of this setting, a ``is_staff`` user will **not**\nbe allowed to impersonate a ``is_superuser`` user.\n\nvalue should be a boolean\n\nif the ``custom_allow`` is set, then that custom function is used, and\nthis setting is ignored.\n\n::\n\n   allow_superuser\n\nby default, superusers cannot be impersonated; this setting allows for\nthat.\n\n**note:** even when this is true, only superusers can impersonate other\nsuperusers, regardless of the value of require_superuser.\n\nvalue should be a boolean and the default is ``false``.\n\n::\n\n   uri_exclusions\n\nset to a list/tuple of url patterns that, if matched, user impersonation\nis not completed. it defaults to:\n\n::\n\n   (r'^admin/',)\n\nif you do not want to use even the default exclusions then set the\nsetting to an empty list/tuple.\n\n::\n\n   custom_user_queryset\n\na string that represents a function (e.g.\n``module.submodule.mod.function_name``) that allows more fine grained\ncontrol over what users a user can impersonate. it takes one argument,\nthe request object, and should return a queryset. only the users in this\nqueryset can be impersonated.\n\nthis function will not be called when the request has an unauthorised\nusers, and will only be called when the user is allowed to impersonate\n(cf. ``require_superuser`` and ``custom_allow``).\n\nregardless of what this function returns, a user cannot impersonate a\nsuperuser, even if there are superusers in the returned queryset.\n\nit is optional, and if it is not present, the user can impersonate any\nuser (i.e. the default is ``user.objects.all()``).\n\n::\n\n   custom_allow\n\na string that represents a function (e.g.\n``module.submodule.mod.function_name``) that allows more fine grained\ncontrol over who can use the impersonation. it takes one argument, the\nrequest object, and should return true to allow impersonation.\nregardless of this setting, the user must be logged in to impersonate.\nif this setting is used, ``require_superuser`` is ignored.\n\nit is optional, and if it is not present, the previous rules about\nsuperuser and ``require_superuser`` apply.\n\n::\n\n   redirect_field_name\n\na string that represents the name of a request (get) parameter which\ncontains the url to redirect to after impersonating a user. this can be\nused to redirect to a custom page after impersonating a user. example:\n\n::\n\n   # in settings.py\n   impersonate = {'redirect_field_name': 'next'}\n\n   # in your template\n   <a href=\"{% url 'impersonate-list' %}?next=/some/url/\">switch user</a>\n\nto return always to the current page after impersonating a user, use\nrequest.path:\n\n::\n\n   `<a href=\"{% url 'impersonate-list' %}?next={{request.path}}\">switch user</a>`\n\neach use case is different so obviously set the next value to whatever\nyour case requires.\n\n::\n\n   search_fields\n\narray of user model fields used for building searching query. default\nvalue is [``user.username_field``, ``first_name``, ``last_name``,\n``email``]. if the user model doesn't have the ``username_field``\nattribute, it falls back to 'username' (< django 1.5).\n\n::\n\n   lookup_type\n\na string that represents sql lookup type for searching users by query on\nfields above. it is ``icontains`` by default.\n\n::\n\n   disable_logging\n\na boolean that can be used to disable the logging of impersonation\nsessions. by default each impersonation ``session_begin`` signal will\ncreate a new ``impersonationlog`` object, which is closed out (duration\ncalculated) at the corresponding ``session_end`` signal.\n\nit is optional, and defaults to false (i.e. logging is enabled).\n\n::\n\n   max_filter_size\n\nthe max number of items acceptable in the admin list filters. if the\nnumber of items exceeds this, then the filter list is the size of the\nsettings value. this is used by the \"filter by impersonator\" filter.\n\nit is optional, and defaults to 100.\n\n::\n\n   admin_delete_permission\n\na boolean to enable/disable deletion of impersonation logs in the django\nadmin.\n\ndefault is ``false``\n\n::\n\n   admin_add_permission\n\na boolean to enable/disable ability to add impersonation logs in the\ndjango admin.\n\ndefault is ``false``\n\n::\n\n   admin_read_only\n\na boolean to enable/disable \"read only\" mode of impersonation logs in\nthe django admin. generally you want to leave this enabled otherwise\nadmin users can alter logs within the django admin area.\n\ndefault is ``true``\n\n::\n\n   max_duration\n\na number specifying the maximum allowed duration of impersonation\nsessions in **seconds**.\n\ndefault is ``none``\n\nadmin\n=====\n\nas of version 1.3 django-impersonate now includes a helper admin mixin,\nlocated at ``impersonate.admin.useradminimpersonatemixin``, to include\nin your user model's modeladmin. this provides a direct link to\nimpersonate users from your user model's django admin list view. using\nit is very simple, however if you're using the default\n``django.contrib.auth.models.user`` model you will need to unregister\nthe old modeladmin before registering your own.\n\nthe ``useradminimpersonatemixin`` has a attribute named\n``open_new_window`` that **defaults to ``false``**. if this is set to\ntrue a new window will be opened to start the new impersonation session\nwhen clicking the impersonate link directly in the admin.\n\nhere's an example:\n\n::\n\n   # yourapp/admin.py\n   from django.contrib import admin\n   from django.contrib.auth.models import user\n   from django.contrib.auth.admin import useradmin\n   from impersonate.admin import useradminimpersonatemixin\n\n\n   class newuseradmin(useradminimpersonatemixin, useradmin):\n       open_new_window = true\n       pass\n\n   admin.site.unregister(user)\n   admin.site.register(user, newuseradmin)\n\ntesting\n=======\n\nfrom the repo checkout, ensure you have django in your ``pythonpath``\nand run:\n\n::\n\n   $ python runtests.py\n\nto get test coverage, use:\n\n::\n\n   $ coverage run --branch runtests.py\n   $ coverage html  <- pretty html files for you\n   $ coverage report -m  <- ascii report\n\nif you're bored and want to test all the supported environments, you'll\nneed tox.:\n\n::\n\n   $ pip install tox\n   $ tox\n\nand you should see:\n\n::\n\n   py37-django2.2: commands succeeded\n   py37-django3.2: commands succeeded\n   py38-django2.2: commands succeeded\n   py38-django3.2: commands succeeded\n   py39-django2.2: commands succeeded\n   py39-django3.2: commands succeeded\n   py38-django4.0: commands succeeded\n   py39-django4.0: commands succeeded\n   py310-django3.2: commands succeeded\n   py310-django4.0: commands succeeded\n   congratulations :)\n\ncontributing\n============\n\nwe accept patches submitted via ``hg email`` which is the ``patchbomb``\nextension included with mercurial.\n\nthe mailing list where you submit your patches is\n``~petersanchez/public-inbox@lists.code.netlandish.com``. you can also\nview the archives on the web here:\n\nhttps://lists.code.netlandish.com/~petersanchez/public-inbox\n\nto quickly setup your clone of ``django-impersonate`` to submit to the\nmailing list just edit your ``.hg/hgrc`` file and add the following:\n\n::\n\n   [email]\n   to = ~petersanchez/public-inbox@lists.code.netlandish.com\n\n   [patchbomb]\n   flagtemplate = {separate(' ', 'django-impersonate', flags)}\n\n   [diff]\n   git = 1\n\nwe have more information on the topic here:\n\n-  `contributing <https://man.code.netlandish.com/contributing.md>`__\n-  `using email with\n   mercurial <https://man.code.netlandish.com/hg/email.md>`__\n-  `mailing list\n   etiquette <https://man.code.netlandish.com/lists/etiquette.md>`__\n\ncopyright & warranty\n====================\n\nall documentation, libraries, and sample code are copyright 2011 peter\nsanchez <petersanchez@gmail.com>. the library and sample code are made\navailable to you under the terms of the bsd license which is contained\nin the included file, bsd-license.\n\ncommercial support\n------------------\n\nthis software, and lots of other software like it, has been built in\nsupport of many of netlandish's own projects, and the projects of our\nclients. we would love to help you on your next project so get in touch\nby dropping us a note at hello@netlandish.com.\n\n.. |nlshield| image:: https://img.shields.io/badge/100%25-netlandish-blue.svg?style=square-flat\n   :target: http://www.netlandish.com\n",
  "docs_url": null,
  "keywords": "",
  "license": "bsd license",
  "name": "django-impersonate",
  "package_url": "https://pypi.org/project/django-impersonate/",
  "project_url": "https://pypi.org/project/django-impersonate/",
  "project_urls": {
    "Homepage": "https://code.netlandish.com/~petersanchez/django-impersonate"
  },
  "release_url": "https://pypi.org/project/django-impersonate/1.9.2/",
  "requires_dist": [],
  "requires_python": "",
  "summary": "django app to allow superusers to impersonate other users.",
  "version": "1.9.2",
  "releases": [],
  "developers": [
    "peter_sanchez",
    "pjs@petersanchez.com"
  ],
  "kwds": "impersonationmiddleware impersonatemiddleware allow_superuser is_impersonate require_superuser",
  "license_kwds": "bsd license",
  "libtype": "pypi",
  "id": "pypi_django_impersonate",
  "homepage": "https://code.netlandish.com/~petersanchez/django-impersonate",
  "release_count": 36,
  "dependency_ids": []
}