{
  "classifiers": [
    "development status :: 5 - production/stable",
    "license :: osi approved :: mit license",
    "programming language :: python",
    "programming language :: python :: 3 :: only",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.11",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9"
  ],
  "description": "# azure event hubs client library for python\n\nazure event hubs is a highly scalable publish-subscribe service that can ingest millions of events per second and stream\nthem to multiple consumers. this lets you process and analyze the massive amounts of data produced by your connected\ndevices and applications. once event hubs has collected the data, you can retrieve, transform, and store it by using\nany real-time analytics provider or with batching/storage adapters. if you would like to know more about azure event hubs,\nyou may wish to review: [what is event hubs](https://docs.microsoft.com/azure/event-hubs/event-hubs-about)?\n\nthe azure event hubs client library allows for publishing and consuming of azure event hubs events and may be used to:\n\n- emit telemetry about your application for business intelligence and diagnostic purposes.\n- publish facts about the state of your application which interested parties may observe and use as a trigger for taking action.\n- observe interesting operations and interactions happening within your business or other ecosystem, allowing loosely coupled systems to interact without the need to bind them together.\n- receive events from one or more publishers, transform them to better meet the needs of your ecosystem, then publish the transformed events to a new stream for consumers to observe.\n\n[source code](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/eventhub/azure-eventhub/)\n| [package (pypi)](https://pypi.org/project/azure-eventhub/)\n| [package (conda)](https://anaconda.org/microsoft/azure-eventhub/)\n| [api reference documentation][api_reference]\n| [product documentation](https://docs.microsoft.com/azure/event-hubs/)\n| [samples](https://github.com/azure/azure-sdk-for-python/tree/main/sdk/eventhub/azure-eventhub/samples)\n\n## getting started\n\n### prerequisites\n\n- python 3.7 or later.\n- **microsoft azure subscription:**  to use azure services, including azure event hubs, you'll need a subscription.\nif you do not have an existing azure account, you may sign up for a free trial or use your msdn subscriber benefits when you [create an account](https://account.windowsazure.com/home/index).\n\n- **event hubs namespace with an event hub:** to interact with azure event hubs, you'll also need to have a namespace and event hub  available.\nif you are not familiar with creating azure resources, you may wish to follow the step-by-step guide\nfor [creating an event hub using the azure portal](https://docs.microsoft.com/azure/event-hubs/event-hubs-create).\nthere, you can also find detailed instructions for using the azure cli, azure powershell, or azure resource manager (arm) templates to create an event hub.\n\n### install the package\n\ninstall the azure event hubs client library for python with pip:\n\n```\n$ pip install azure-eventhub\n```\n\n### authenticate the client\n\ninteraction with event hubs starts with an instance of eventhubconsumerclient or eventhubproducerclient class. you need either the host name, sas/aad credential and event hub name or a connection string to instantiate the client object.\n\n**[create client from connection string:](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/eventhub/azure-eventhub/samples/sync_samples/connection_string_authentication.py)**\n\nfor the event hubs client library to interact with an event hub, the easiest means is to use a connection string, which is created automatically when creating an event hubs namespace.\nif you aren't familiar with shared access policies in azure, you may wish to follow the step-by-step guide to [get an event hubs connection string](https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string).\n\n- the `from_connection_string` method takes the connection string of the form\n`endpoint=sb://<yournamespace>.servicebus.windows.net/;sharedaccesskeyname=<yoursharedaccesskeyname>;sharedaccesskey=<yoursharedaccesskey>` and\nentity name to your event hub instance. you can get the connection string from the [azure portal](https://docs.microsoft.com/azure/event-hubs/event-hubs-get-connection-string#get-connection-string-from-the-portal).\n\n**[create client using the azure-identity library:](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/eventhub/azure-eventhub/samples/sync_samples/client_identity_authentication.py)**\n\nalternately, one can use a credential object to authenticate via aad with the azure-identity package.\n\n- this constructor demonstrated in the sample linked above takes the host name and entity name of your event hub instance and credential that implements the\n[tokencredential](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/core/azure-core/azure/core/credentials.py)\nprotocol. there are implementations of the `tokencredential` protocol available in the\n[azure-identity package](https://pypi.org/project/azure-identity/). the host name is of the format `<yournamespace.servicebus.windows.net>`.\n- to use the credential types provided by `azure-identity`, please install the package:\n```pip install azure-identity```\n- additionally, to use the async api,  you must first install an async transport, such as [`aiohttp`](https://pypi.org/project/aiohttp/):\n```pip install aiohttp```\n- when using azure active directory, your principal must be assigned a role which allows access to event hubs, such as the\nazure event hubs data owner role. for more information about using azure active directory authorization with event hubs,\nplease refer to [the associated documentation](https://docs.microsoft.com/azure/event-hubs/authorize-access-azure-active-directory).\n\n## key concepts\n\n- an **eventhubproducerclient** is a source of telemetry data, diagnostics information, usage logs, or other log data,\nas part of an embedded device solution, a mobile device application, a game title running on a console or other device,\nsome client or server based business solution, or a web site.\n\n- an **eventhubconsumerclient** picks up such information from the event hub and processes it. processing may involve aggregation,\ncomplex computation, and filtering. processing may also involve distribution or storage of the information in a raw or transformed fashion.\nevent hub consumers are often robust and high-scale platform infrastructure parts with built-in analytics capabilities,\nlike azure stream analytics, apache spark, or apache storm.\n\n- a **partition** is an ordered sequence of events that is held in an event hub. azure event hubs provides message streaming\nthrough a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of the message stream.\nas newer events arrive, they are added to the end of this sequence. the number of partitions is specified at the time an event hub is created and cannot be changed.\n\n- a **consumer group** is a view of an entire event hub. consumer groups enable multiple consuming applications to each\nhave a separate view of the event stream, and to read the stream independently at their own pace and from their own position.\nthere can be at most 5 concurrent readers on a partition per consumer group; however it is recommended that there is only\none active consumer for a given partition and consumer group pairing. each active reader receives all of the events from\nits partition; if there are multiple readers on the same partition, then they will receive duplicate events.\n\nfor more concepts and deeper discussion, see: [event hubs features](https://docs.microsoft.com/azure/event-hubs/event-hubs-features).\nalso, the concepts for amqp are well documented in [oasis advanced messaging queuing protocol (amqp) version 1.0](https://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-overview-v1.0-os.html).\n\n### thread safety\n\nwe do not guarantee that the eventhubproducerclient or eventhubconsumerclient are thread-safe. we do not recommend reusing these instances across threads. it is up to the running application to use these classes in a thread-safe manner.\n\nthe data model type, `eventdatabatch` is not thread-safe. it should not be shared across threads nor used concurrently with client methods.\n\n## examples\n\nthe following sections provide several code snippets covering some of the most common event hubs tasks, including:\n\n- [inspect an event hub](#inspect-an-event-hub)\n- [publish events to an event hub](#publish-events-to-an-event-hub)\n- [consume events from an event hub](#consume-events-from-an-event-hub)\n- [consume events from an event hub in batches](#consume-events-from-an-event-hub-in-batches)\n- [publish events to an event hub asynchronously](#publish-events-to-an-event-hub-asynchronously)\n- [consume events from an event hub asynchronously](#consume-events-from-an-event-hub-asynchronously)\n- [consume events from an event hub in batches asynchronously](#consume-events-from-an-event-hub-in-batches-asynchronously)\n- [consume events and save checkpoints using a checkpoint store](#consume-events-and-save-checkpoints-using-a-checkpoint-store)\n- [use eventhubconsumerclient to work with iot hub](#use-eventhubconsumerclient-to-work-with-iot-hub)\n\n### inspect an event hub\n\nget the partition ids of an event hub.\n\n<!-- snippet:connection_string_authentication.connection_string_authentication -->\n\n```python\nimport os\nfrom azure.eventhub import eventhubconsumerclient\n\nconnection_str = os.environ[\"event_hub_conn_str\"]\neventhub_name = os.environ['event_hub_name']\n\nconsumer_client = eventhubconsumerclient.from_connection_string(\n    conn_str=connection_str,\n    consumer_group='$default',\n    eventhub_name=eventhub_name,\n)\n\nwith consumer_client:\n    pass # consumer_client is now ready to be used.\n```\n\n<!-- end snippet -->\n\n### publish events to an event hub\n\nuse the `create_batch` method on `eventhubproducerclient` to create an `eventdatabatch` object which can then be sent using the `send_batch` method.\nevents may be added to the `eventdatabatch` using the `add` method until the maximum batch size limit in bytes has been reached.\n\n<!-- snippet:send.send_event_data_batch -->\n\n```python\ndef send_event_data_batch(producer):\n    # without specifying partition_id or partition_key\n    # the events will be distributed to available partitions via round-robin.\n    event_data_batch = producer.create_batch()\n    event_data_batch.add(eventdata('single message'))\n    producer.send_batch(event_data_batch)\n```\n\n<!-- end snippet -->\n\n### consume events from an event hub\n\nthere are multiple ways to consume events from an eventhub.  to simply trigger a callback when an event is received,\nthe `eventhubconsumerclient.receive` method will be of use as follows:\n\n```python\nimport logging\nfrom azure.eventhub import eventhubconsumerclient\n\nconnection_str = '<< connection string for the event hubs namespace >>'\nconsumer_group = '<< consumer group >>'\neventhub_name = '<< name of the event hub >>'\nclient = eventhubconsumerclient.from_connection_string(connection_str, consumer_group, eventhub_name=eventhub_name)\n\nlogger = logging.getlogger(\"azure.eventhub\")\nlogging.basicconfig(level=logging.info)\n\ndef on_event(partition_context, event):\n    logger.info(\"received event from partition {}\".format(partition_context.partition_id))\n    partition_context.update_checkpoint(event)\n\nwith client:\n    client.receive(\n        on_event=on_event,\n        starting_position=\"-1\",  # \"-1\" is from the beginning of the partition.\n    )\n    # receive events from specified partition:\n    # client.receive(on_event=on_event, partition_id='0')\n```\n\n### consume events from an event hub in batches\n\nwhereas the above sample triggers the callback for each message as it is received, the following sample\ntriggers the callback on a batch of events, attempting to receive a number at a time.\n\n```python\nimport logging\nfrom azure.eventhub import eventhubconsumerclient\n\nconnection_str = '<< connection string for the event hubs namespace >>'\nconsumer_group = '<< consumer group >>'\neventhub_name = '<< name of the event hub >>'\nclient = eventhubconsumerclient.from_connection_string(connection_str, consumer_group, eventhub_name=eventhub_name)\n\nlogger = logging.getlogger(\"azure.eventhub\")\nlogging.basicconfig(level=logging.info)\n\ndef on_event_batch(partition_context, events):\n    logger.info(\"received event from partition {}\".format(partition_context.partition_id))\n    partition_context.update_checkpoint()\n\nwith client:\n    client.receive_batch(\n        on_event_batch=on_event_batch,\n        starting_position=\"-1\",  # \"-1\" is from the beginning of the partition.\n    )\n    # receive events from specified partition:\n    # client.receive_batch(on_event_batch=on_event_batch, partition_id='0')\n```\n\n### publish events to an event hub asynchronously\n\nuse the `create_batch` method on `eventhubproducer` to create an `eventdatabatch` object which can then be sent using the `send_batch` method.\nevents may be added to the `eventdatabatch` using the `add` method until the maximum batch size limit in bytes has been reached.\n```python\nimport asyncio\nfrom azure.eventhub.aio import eventhubproducerclient  # the package name suffixed with \".aio\" for async\nfrom azure.eventhub import eventdata\n\nconnection_str = '<< connection string for the event hubs namespace >>'\nconsumer_group = '<< consumer group >>'\neventhub_name = '<< name of the event hub >>'\n\nasync def create_batch(client):\n    event_data_batch = await client.create_batch()\n    can_add = true\n    while can_add:\n        try:\n            event_data_batch.add(eventdata('message inside eventbatchdata'))\n        except valueerror:\n            can_add = false  # eventdatabatch object reaches max_size.\n    return event_data_batch\n\nasync def send():\n    client = eventhubproducerclient.from_connection_string(connection_str, eventhub_name=eventhub_name)\n    batch_data = await create_batch(client)\n    async with client:\n        await client.send_batch(batch_data)\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(send())\n```\n\n### consume events from an event hub asynchronously\n\nthis sdk supports both synchronous and asyncio based code.  to receive as demonstrated in the samples above, but within\naio, one would need the following:\n\n```python\nimport logging\nimport asyncio\nfrom azure.eventhub.aio import eventhubconsumerclient\n\nconnection_str = '<< connection string for the event hubs namespace >>'\nconsumer_group = '<< consumer group >>'\neventhub_name = '<< name of the event hub >>'\n\nlogger = logging.getlogger(\"azure.eventhub\")\nlogging.basicconfig(level=logging.info)\n\nasync def on_event(partition_context, event):\n    logger.info(\"received event from partition {}\".format(partition_context.partition_id))\n    await partition_context.update_checkpoint(event)\n\nasync def receive():\n    client = eventhubconsumerclient.from_connection_string(connection_str, consumer_group, eventhub_name=eventhub_name)\n    async with client:\n        await client.receive(\n            on_event=on_event,\n            starting_position=\"-1\",  # \"-1\" is from the beginning of the partition.\n        )\n        # receive events from specified partition:\n        # await client.receive(on_event=on_event, partition_id='0')\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(receive())\n```\n\n### consume events from an event hub in batches asynchronously\n\nall synchronous functions are supported in aio as well.  as demonstrated above for synchronous batch receipt, one can accomplish\nthe same within asyncio as follows:\n\n```python\nimport logging\nimport asyncio\nfrom azure.eventhub.aio import eventhubconsumerclient\n\nconnection_str = '<< connection string for the event hubs namespace >>'\nconsumer_group = '<< consumer group >>'\neventhub_name = '<< name of the event hub >>'\n\nlogger = logging.getlogger(\"azure.eventhub\")\nlogging.basicconfig(level=logging.info)\n\nasync def on_event_batch(partition_context, events):\n    logger.info(\"received event from partition {}\".format(partition_context.partition_id))\n    await partition_context.update_checkpoint()\n\nasync def receive_batch():\n    client = eventhubconsumerclient.from_connection_string(connection_str, consumer_group, eventhub_name=eventhub_name)\n    async with client:\n        await client.receive_batch(\n            on_event_batch=on_event_batch,\n            starting_position=\"-1\",  # \"-1\" is from the beginning of the partition.\n        )\n        # receive events from specified partition:\n        # await client.receive_batch(on_event_batch=on_event_batch, partition_id='0')\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(receive_batch())\n```\n\n### consume events and save checkpoints using a checkpoint store\n\n`eventhubconsumerclient` is a high level construct which allows you to receive events from multiple partitions at once\nand load balance with other consumers using the same event hub and consumer group.\n\nthis also allows the user to track progress when events are processed using checkpoints.\n\na checkpoint is meant to represent the last successfully processed event by the user from a particular partition of\na consumer group in an event hub instance. the `eventhubconsumerclient` uses an instance of `checkpointstore` to update checkpoints\nand to store the relevant information required by the load balancing algorithm.\n\nsearch pypi with the prefix `azure-eventhub-checkpointstore` to\nfind packages that support this and use the `checkpointstore` implementation from one such package. please note that both sync and async libraries are provided.\n\nin the below example, we create an instance of `eventhubconsumerclient` and use a `blobcheckpointstore`. you need\nto [create an azure storage account](https://docs.microsoft.com/azure/storage/common/storage-quickstart-create-account?tabs=azure-portal)\nand a [blob container](https://docs.microsoft.com/azure/storage/blobs/storage-quickstart-blobs-portal#create-a-container) to run the code.\n\n[azure blob storage checkpoint store async](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/eventhub/azure-eventhub-checkpointstoreblob-aio)\nand [azure blob storage checkpoint store sync](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/eventhub/azure-eventhub-checkpointstoreblob)\nare one of the `checkpointstore` implementations we provide that applies azure blob storage as the persistent store.\n\n\n```python\nimport asyncio\n\nfrom azure.eventhub.aio import eventhubconsumerclient\nfrom azure.eventhub.extensions.checkpointstoreblobaio import blobcheckpointstore\n\nconnection_str = '<< connection string for the event hubs namespace >>'\nconsumer_group = '<< consumer group >>'\neventhub_name = '<< name of the event hub >>'\nstorage_connection_str = '<< connection string for the storage >>'\ncontainer_name = '<<name of the blob container>>'\n\nasync def on_event(partition_context, event):\n    # do something\n    await partition_context.update_checkpoint(event)  # or update_checkpoint every n events for better performance.\n\nasync def receive(client):\n    await client.receive(\n        on_event=on_event,\n        starting_position=\"-1\",  # \"-1\" is from the beginning of the partition.\n    )\n\nasync def main():\n    checkpoint_store = blobcheckpointstore.from_connection_string(storage_connection_str, container_name)\n    client = eventhubconsumerclient.from_connection_string(\n        connection_str,\n        consumer_group,\n        eventhub_name=eventhub_name,\n        checkpoint_store=checkpoint_store,  # for load balancing and checkpoint. leave none for no load balancing\n    )\n    async with client:\n        await receive(client)\n\nif __name__ == '__main__':\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(main())\n```\n\n### use eventhubconsumerclient to work with iot hub\n\nyou can use `eventhubconsumerclient` to work with iot hub as well. this is useful for receiving telemetry data of iot hub from the\nlinked eventhub. the associated connection string will not have send claims, hence sending events is not possible.\n\nplease notice that the connection string needs to be for an [event hub-compatible endpoint](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-messages-read-builtin),\ne.g. \"endpoint=sb://my-iothub-namespace-[uid].servicebus.windows.net/;sharedaccesskeyname=my-sa-name;sharedaccesskey=my-sa-key;entitypath=my-iot-hub-name\"\n\nthere are two ways to get the event hubs compatible endpoint:\n- manually get the \"built-in endpoints\" of the iot hub in azure portal and receive from it.\n```python\nfrom azure.eventhub import eventhubconsumerclient\n\nconnection_str = 'endpoint=sb://my-iothub-namespace-[uid].servicebus.windows.net/;sharedaccesskeyname=my-sa-name;sharedaccesskey=my-sa-key;entitypath=my-iot-hub-name'\nconsumer_group = '<< consumer group >>'\nclient = eventhubconsumerclient.from_connection_string(connection_str, consumer_group)\n\npartition_ids = client.get_partition_ids()\n```\n- programmatically retrieve the built-in event hubs compatible endpoint.\nrefer to [iot hub connection string sample](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/eventhub/azure-eventhub/samples/async_samples/iot_hub_connection_string_receive_async.py).\n\n## troubleshooting\n\nsee the `azure-eventhubs` [troubleshooting guide](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/eventhub/azure-eventhub/troubleshooting.md) for details on how to diagnose various failure scenarios.\n\n## next steps\n\n### more sample code\n\nplease take a look at the [samples](https://github.com/azure/azure-sdk-for-python/blob/main/sdk/eventhub/azure-eventhub/samples) directory for detailed examples of how to use this library to send and receive events to/from event hubs.\n\n### documentation\n\nreference documentation is available [here](https://azuresdkdocs.blob.core.windows.net/$web/python/azure-eventhub/latest/azure.eventhub.html).\n\n### schema registry and avro encoder\n\nthe eventhubs sdk integrates nicely with the [schema registry][schemaregistry_service] service and [avro][avro].\nfor more information, please refer to [schema registry sdk][schemaregistry_repo] and [schema registry avro encoder sdk][schemaregistry_avroencoder_repo].\n\n### pure python amqp transport and backward compatibility support\n\nthe azure event hubs client library is now based on a pure python amqp implementation. `uamqp` has been removed as required dependency.\n\nto use `uamqp` as the underlying transport:\n\n1. install `uamqp` with pip.\n\n```\n$ pip install uamqp \n```\n\n2. pass `uamqp_transport=true` during client construction.\n\n```python\nfrom azure.eventhub import eventhubproducerclient, eventhubconsumerclient\n\nconnection_str = '<< connection string for the event hubs namespace >>'\nconsumer_group = '<< consumer group >>'\neventhub_name = '<< name of the event hub >>'\n\nclient = eventhubproducerclient.from_connection_string(\n    connection_str, eventhub_name=eventhub_name, uamqp_transport=true\n)\nclient = eventhubconsumerclient.from_connection_string(\n    connection_str, consumer_group, eventhub_name=eventhub_name, uamqp_transport=true\n)\n```\n\nnote: the `message` attribute on `eventdata`/`eventdatabatch`, which previously exposed the `uamqp.message`, has been deprecated.\n the \"legacy\" objects returned by `eventdata.message`/`eventdatabatch.message` have been introduced to help facilitate the transition.\n\n### building uamqp wheel from source\n\nif [uamqp](https://pypi.org/project/uamqp/) is intended to be used as the underlying amqp protocol implementation for `azure-eventhub`,\nuamqp wheels can be found for most major operating systems.\n\nif you intend to use `uamqp` and you're running on a platform for which uamqp wheels are not provided, please follow\n the [uamqp installation](https://github.com/azure/azure-uamqp-python#installation) guidance to install from source.\n\n### provide feedback\n\nif you encounter any bugs or have suggestions, please file an issue in the [issues](https://github.com/azure/azure-sdk-for-python/issues) section of the project.\n\n## contributing\n\nthis project welcomes contributions and suggestions.  most contributions require you to agree to a\ncontributor license agreement (cla) declaring that you have the right to, and actually do, grant us the rights to use your contribution. for details, visit https://cla.microsoft.com.\n\nwhen you submit a pull request, a cla-bot will automatically determine whether you need to provide a cla and decorate the\npr appropriately (e.g., label, comment). simply follow the instructions provided by the bot. you will only need to do this once across all repos using our cla.\n\nthis project has adopted the [microsoft open source code of conduct](https://opensource.microsoft.com/codeofconduct/).\nfor more information see the [code of conduct faq](https://opensource.microsoft.com/codeofconduct/faq/) or contact [opencode@microsoft.com](mailto:opencode@microsoft.com) with any additional questions or comments.\n\n[avro]: https://avro.apache.org/\n[api_reference]: https://docs.microsoft.com/python/api/overview/azure/eventhub-readme\n[schemaregistry_service]: https://aka.ms/schemaregistry\n[schemaregistry_repo]: https://github.com/azure/azure-sdk-for-python/tree/main/sdk/schemaregistry/azure-schemaregistry\n[schemaregistry_avroencoder_repo]: https://github.com/azure/azure-sdk-for-python/tree/main/sdk/schemaregistry/azure-schemaregistry-avroencoder\n\n![impressions](https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-python/sdk/eventhub/azure-eventhub/readme.png)\n\n\n# release history\n\n## 5.11.5 (2023-11-13)\n\n### bugs fixed\n\n- fixed a pyamqp error where events split across multiple transferframes were depleting the link credit by more than 1 credit per message. ([#32767](https://github.com/azure/azure-sdk-for-python/pull/32767))\n\n## 5.11.4 (2023-08-08)\n\n### features added\n\n- a new float keyword argument `socket_timeout` has been added to the sync and async `eventhubconsumerclient` and `eventhubproducerclient`.\n\n### bugs fixed\n\n- fixed bug [#31258](https://github.com/azure/azure-sdk-for-python/issues/31258) where async `blobcheckpointstore` was reprocessing old events after an error.\n\n## 5.11.3 (2023-07-12)\n\n### bugs fixed\n\n- fixed the error `end frame received on invalid channel` which was raised when a disconnect was sent by the service ([#30860](https://github.com/azure/azure-sdk-for-python/pull/30860))\n- fixed the error `link already closed` which was raised when the client was closing and disconnecting from the service ([#30836](https://github.com/azure/azure-sdk-for-python/pull/30836))\n\n### other changes\n\n - updated tracing ([#29934](https://github.com/azure/azure-sdk-for-python/pull/29934)):\n   - span names renamed:\n     - `azure.eventhubs.send` to `eventhubs.send`\n     - `azure.eventhubs.message` to `eventhubs.message`\n     - `azure.eventhubs.process` to `eventhubs.process`\n   - an `eventhubs.receive` span will be created upon receiving events.\n   - additional attributes added to spans:\n     - `messaging.system` - messaging system (i.e., `eventhubs`)\n     - `messaging.operation` - type of operation (i.e., `publish`, `receive`, or `process`)\n     - `messaging.batch.message_count` - number of messages sent, received, or processed (if more than one)\n   - the `component` attribute was removed from all spans.\n   - all `send` spans now contain links to `message` spans. now, `message` spans will no longer contain a link to the `send` span.\n   - message application properties will now contain values for `traceparent` (and `tracestate` if applicable)\n   - process spans will now be a direct children of message span contexts in when event handling on a per-message basis. ([#30537](https://github.com/azure/azure-sdk-for-python/pull/30537))\n\n## 5.11.2 (2023-03-20)\n\n### bugs fixed\n\n- fixed a bug that would prevent reconnect after a long idle period, network drop (issue #28996)\n\n## 5.11.1 (2023-01-25)\n\n### bugs fixed\n\n- fixed a bug where, when `websocket-client` was not installed, the error was not caught/raised properly (issue #28453).\n\n## 5.11.0 (2023-01-19)\n\nversion 5.11.0 is our first stable release of the azure event hubs client library based on a pure python implemented amqp stack.\n\n### features added\n\n- a new boolean keyword argument `uamqp_transport` has been added to sync and async `eventhubproducerclient`/`eventhubconsumerclient` constructors which indicates whether to use the `uamqp` library or the default pure python amqp library as the underlying transport.\n\n### bugs fixed\n\n- fixed a bug that caused an error when sending batches with tracing enabled (issue #27986).\n- fixed a bug where `eventhubsharedkeycredential` returned an `accesstoken.token` of type `bytes` and not `str`, now matching the documentation.\n\n### other changes\n\n- the `message` attribute on `eventdata`/`eventdatabatch`, which previously exposed the `uamqp.message`, has been deprecated.\n  - `legacymessage`/`legacybatchmessage` objects returned by the `message` attribute on `eventdata`/`eventdatabatch` have been introduced to help facilitate the transition.\n- removed uamqp from required dependencies.\n- adding `uamqp >= 1.6.3` as an optional dependency for use with the `uamqp_transport` keyword.\n  - added support for python 3.11.\n\n## 5.8.0b2 (2022-10-11)\n\n### features added\n\n- updated the optional dependency for async transport using amqp over websocket from `websocket-client` to `aiohttp` (issue #24315, thanks @hansmbakker for the suggestion).\n\n## 5.8.0b1 (2022-09-22)\n\nthis version and all future versions will require python 3.7+. python 3.6 is no longer supported.\n\n### other changes\n\n- added the `uamqp_transport` optional parameter to the clients, to allow switching to the `uamqp` library as the transport.\n\n## 5.10.1 (2022-08-22)\n\nthis version and all future versions will require python 3.7+, python 3.6 is no longer supported.\n\n### bugs fixed\n\n- fixed a bug in async `bufferedproducer` that would block when flushing the queue causing the client to freeze up (issue #23510).\n- fixed a bug in the async `eventhubproducerclient` and `eventhubconsumerclient` that set the default value of the `transport_type` parameter in the `from_connection_string` methods to `none` rather than `transporttype.amqp`.\n\n### other changes\n\n- internal refactoring to support upcoming pure python amqp-based release.\n- updated uamqp dependency to 1.6.0.\n\n## 5.8.0a5 (2022-07-19)\n\n### bugs fixed\n\n- fixed bug that prevented token refresh at regular intervals.\n- fixed bug that was improperly passing the debug keyword argument, so that network trace debug logs are output when requested.\n\n### other changes\n\n- added logging added in to track proper token refreshes & fetches, output exception reason for producer init failure.\n\n## 5.10.0 (2022-06-08)\n\n### features added\n\n- includes the following features related to buffered sending of events:\n  - a new method `send_event` to `eventhubproducerclient` which allows sending single `eventdata` or `amqpannotatedmessage`.\n  - buffered mode sending to `eventhubproducerclient` which is intended to allow for efficient publishing of events\n   without having to explicitly manage batches in the application.\n    - the constructor of `eventhubproducerclient` and `from_connection_string` method takes the following new keyword arguments\n     for configuration:\n      - `buffered_mode`: the flag to enable/disable buffered mode sending.\n      - `on_success`: the callback to be called once events have been successfully published.\n      - `on_error`: the callback to be called once events have failed to be published.\n      - `max_buffer_length`: the total number of events per partition that can be buffered before a flush will be triggered.\n      - `max_wait_time`: the amount of time to wait for a batch to be built with events in the buffer before publishing.\n    - a new method `eventhubproducerclient.flush` which flushes events in the buffer to be sent immediately.\n    - a new method `eventhubproducerclient.get_buffered_event_count` which returns the number of events that are buffered and waiting to be published for a given partition.\n    - a new property `eventhubproducerclient.total_buffered_event_count` which returns the total number of events that are currently buffered and waiting to be published, across all partitions.\n    - a new boolean keyword argument `flush` to `eventhubproducerclient.close` which indicates whether to flush the buffer or not while closing.\n\n## 5.8.0a4 (2022-06-07)\n\n### features added\n\n- added support for connection using websocket and http proxy.\n- added support for custom endpoint connection over websocket.\n\n## 5.9.0 (2022-05-10)\n\n### features added\n\n- the classmethod `from_message_content` has been added to `eventdata` for interoperability with the schema registry avro encoder library, and takes `content` and `content_type` as positional parameters.\n\n### other changes\n\n- features related to buffered sending of events are still in beta and will not be included in this release.\n\n## 5.9.0b3 (2022-04-20)\n\n### features added\n\n- introduced new method `send_event` to `eventhubproducerclient` which allows sending single `eventdata` or `amqpannotatedmessage`.\n- introduced buffered mode sending to `eventhubproducerclient` which is intended to allow for efficient publishing of events\n without having to explicitly manage batches in the application.\n  - the constructor of `eventhubproducerclient` and `from_connection_string` method now takes the following new keyword arguments\n   for configuration:\n    - `buffered_mode`: the flag to enable/disable buffered mode sending.\n    - `on_success`: the callback to be called once events have been successfully published.\n    - `on_error`: the callback to be called once events have failed to be published.\n    - `max_buffer_length`: the total number of events per partition that can be buffered before a flush will be triggered.\n    - `max_wait_time`: the amount of time to wait for a batch to be built with events in the buffer before publishing.\n  - introduced new method `eventhubproducerclient.flush` which flushes events in the buffer to be sent immediately.\n  - introduced new method `eventhubproducerclient.get_buffered_event_count` which returns the number of events that are buffered and waiting to be published for a given partition.\n  - introduced new property `eventhubproducerclient.total_buffered_event_count` which returns the total number of events that are currently buffered and waiting to be published, across all partitions.\n  - introduced new boolean keyword argument `flush` to `eventhubproducerclient.close` which indicates whether to flush the buffer or not while closing.\n\n### other changes\n\n- updated `eventdata` internals for interoperability with the schema registry avro encoder library.\n\n## 5.9.0b2 (2022-03-09)\n\n### breaking changes\n\n- `from_message_data` on `eventdata` has been renamed `from_message_content` for interoperability with the schema registry avro encoder library. the `data` parameter has been renamed to `content`.\n\n## 5.8.0a3 (2022-03-08)\n\n### other changes\n\n- improved the performance of async sending and receiving.\n\n## 5.9.0b1 (2022-02-09)\n\n- the following features have been temporarily pulled out of async `eventhubproducerclient` and `eventhubconsumerclient` which will be added back in future previews as we work towards a stable release:\n  - passing the following keyword arguments to the constructors and `from_connection_string` methods of the `eventhubproducerclient` and `eventhubconsumerclient` is not supported:  `transport_type`, `http_proxy`, `custom_endpoint_address`, and `connection_verify`.\n\n## 5.8.0a2 (2022-02-09)\n\n### features added\n\n- added support for async `eventhubproducerclient` and `eventhubconsumerclient`.\n\n## 5.8.0a1 (2022-01-13)\n\nversion 5.8.0a1 is our first efforts to build an azure event hubs client library based on pure python implemented amqp stack.\n\n### breaking changes\n\n- the following features have been temporarily pulled out which will be added back in future previews as we work towards a stable release:\n  - async is not supported.\n  - passing the following keyword arguments to the constructors and `from_connection_string` methods of the `eventhubproducerclient` and `eventhubconsumerclient` is not supported:  `transport_type`, `http_proxy`, `custom_endpoint_address`, and `connection_verify`.\n\n### other changes\n\n- uamqp dependency is removed.\n\n## 5.7.0 (2022-01-12)\n\nthis version and all future versions will require python 3.6+. python 2.7 is no longer supported.\n\n### features added\n\n- added support for fixed (linear) retry backoff:\n  - sync/async `eventhubproducerclient` and `eventhubconsumerclient` constructors and `from_connection_string` take `retry_mode` as a keyword argument.\n\n### bugs fixed\n\n- fixed a bug that `eventhubproducerclient` could be reopened for sending events instead of encountering with `keyerror` when the client is previously closed (issue #21849).\n\n### other changes\n\n- improved token refresh timing to prevent potentially blocking main flow when the token is about to get expired soon.\n- updated uamqp dependency to 1.5.1.\n\n## 5.6.1 (2021-10-06)\n\n### bugs fixed\n\n- fixed a bug for checking that `azure.eventhub.amqp.amqpmessageheader` and `azure.eventhub.amqp.amqpmessageproperties` contain specific properties using the `in` keyword.\n\n### other changes\n\n- updated uamqp dependency to 1.4.3.\n  - added support for python 3.10.\n  - fixed memory leak in win32 socketio and tlsio (issue #19777).\n  - fixed memory leak in the process of converting amqpvalue into string (issue #19777).\n\n## 5.6.0 (2021-07-07)\n\n### features added\n\n- added support for sending amqp annotated message which allows full access to the amqp message fields.\n  - introduced new namespace `azure.eventhub.amqp`.\n  - added new enum class `azure.eventhub.amqp.amqpmessagebodytype` to represent the body type of the message which includes:\n    - `data`: the body of message consists of one or more data sections and each section contains opaque binary data.\n    - `sequence`: the body of message consists of one or more sequence sections and each section contains an arbitrary number of structured data elements.\n    - `value`: the body of message consists of one amqp-value section and the section contains a single amqp value.\n  - introduced new class `azure.eventhub.amqp.amqpannotatedmessage` for accessing low-level amqp message sections which can be instantiated for sending.\n  - introduced new classes `azure.eventhub.amqp.amqpmessageheader` and `azure.eventhub.amqp.amqpmessageproperties` for accessing amqp header and properties.\n  - added new property `body_type` on `azure.eventhub.eventdata` which returns `azure.eventhub.amqp.amqpmessagebodytype`.\n  - added new read-only property `raw_amqp_message` on `azure.eventhub.eventdata` which returns `azure.eventhub.amqp.amqpannotatedmessage`.\n\n### fixed\n\n- updated uamqp dependency to 1.4.1.\n  - fixed a bug that attributes creation_time, absolute_expiry_time and group_sequence on messageproperties should be compatible with integer types on python 2.7.\n\n## 5.5.0 (2021-05-13)\n\n**new features**\n\n- added support for using `azure.core.credentials.azurenamedkeycredential` as credential for authenticating producer and consumer clients.\n\n**bug fixes**\n\n- fixed bug that custom user agent string should be put in front of the built-in user agent string instead of being appended.\n- updated uamqp dependency to 1.4.0.\n  - fixed memory leaks in the process of link attach where source and target cython objects are not properly deallocated (#15747).\n  - improved management operation callback not to parse description value of non amqp_type_string type as string (#18361).\n\n**notes**\n\n- updated azure-core dependency to 1.14.0.\n\n## 5.4.0 (2021-04-07)\n\nthis version follows from version 5.3.1, rather than 5.4.0b1 so that the preview idempotent producer feature is not included.\n\n**new features**\n\n- added support for using `azure.core.credentials.azuresascredential` as credential for authenticating producer and consumer clients.\n- updated `list_ownership`, `claim_ownership`, `update_checkpoint`, `list_checkpoints` on sync and async `checkpointstore` to support taking `**kwargs`.\n  - warning: implementing a custom checkpointstore that does not support taking `**kwargs` in the methods listed previously will result in the following pylint error: `w0221: parameters differ from overridden ________ method (arguments-differ)`.\n- updated `update_checkpoint` on sync and async `partitioncontext` to support taking `**kwargs`.\n\n**bug fixes**\n\n- updated uamqp dependency to 1.3.0.\n  - fixed bug that sending message of large size triggering segmentation fault when the underlying socket connection is lost (#13739, #14543).\n  - fixed bug in link flow control where link credit and delivery count should be calculated based on per message instead of per transfer frame (#16934).\n\n**notes**\n\n- updated azure-core dependency to 1.13.0.\n\n## 5.4.0b1 (2021-03-09)\n\nthis version and all future versions will require python 2.7 or python 3.6+, python 3.5 is no longer supported.\n\n**new features**\n\n- added support for idempotent publishing which is supported by the service to endeavor to reduce the number of duplicate\n  events that are published.\n  - `eventhubproducerclient` constructor accepts two new parameters for idempotent publishing:\n    - `enable_idempotent_partitions`: a boolean value to tell the `eventhubproducerclient` whether to enable idempotency.\n    - `partition_config`: the set of configurations that can be specified to influence publishing behavior\n     specific to the configured event hub partition.\n  - introduced a new method `get_partition_publishing_properties` on `eventhubproducerclient` to inspect the information\n    about the state of publishing for a partition.\n  - introduced a new property `published_sequence_number` on `eventdata` to get the publishing sequence number assigned\n    to the event at the time it was successfully published.\n  - introduced a new property `starting_published_sequence_number` on `eventdatabatch` to get the publishing sequence\n    number assigned to the first event in the batch at the time the batch was successfully published.\n  - introduced a new class `azure.eventhub.partitionpublishingconfiguration` which is a set of configurations that can be\n    specified to influence the behavior when publishing directly to an event hub partition.\n\n**notes**\n\n- updated uamqp dependency to 1.2.15.\n\n## 5.3.1 (2021-03-09)\n\nthis version will be the last version to officially support python 3.5, future versions will require python 2.7 or python 3.6+.\n\n**bug fixes**\n\n- sending empty `event_data_batch` will be a no-op now instead of raising error.\n\n## 5.3.0 (2021-02-08)\n\n**new features**\n\n- added a `parse_connection_string` method which parses a connection string into a properties bag, `eventhubconnectionstringproperties`, containing its component parts.\n- the constructor and `from_connection_string` method of `eventhubconsumerclient` and `eventhubproducerclient` now accept two new optional arguments:\n  - `custom_endpoint_address` which allows for specifying a custom endpoint to use when communicating with the event hubs service,\nand is useful when your network does not allow communicating to the standard event hubs endpoint.\n  - `connection_verify` which allows for specifying the path to the custom ca_bundle file of the ssl certificate which is used to authenticate\nthe identity of the connection endpoint.\n\n**notes**\n\n- updated uamqp dependency to 1.2.14.\n\n## 5.2.1 (2021-01-11)\n\n**bug fixes**\n\n- updated `azure.eventhub.extension.__init__.py` to be compatible with pkgutil-style namespace (pr #13210, thanks @pjachowi).\n- updated uamqp dependency to 1.2.13\n  - added support for python 3.9.\n  - fixed bug that macos was unable to detect network error (#15473).\n  - fixed bug that `uamqp.receiveclient` and `uamqp.receiveclientasync` receive messages during connection establishment (#15555).\n  - fixed bug where connection establishment on macos with clang 12 triggering unrecognized selector exception (#15567).\n  - fixed bug in accessing message properties triggering segmentation fault when the underlying c bytes are null (#15568).\n\n## 5.2.0 (2020-09-08)\n\n**new features**\n\n- connection strings used with `from_connection_string` methods now supports using the `sharedaccesssignature` key in leiu of `sharedaccesskey` and `sharedaccesskeyname`, taking the string of the properly constructed token as value.\n\n## 5.2.0b1 (2020-07-06)\n\n**new features**\n\n- `eventhubconsumerclient` constructor accepts two new parameters for the load balancer.\n    - `load_balancing_strategy`, which can be \"greedy\" or \"balanced\".\n     with greedy strategy, one execution of load balancing will claim as many partitions as required to balance the load\n     whereas with balanced strategy one execution of load balancing will claim at most 1 partition.\n    - `partition_ownership_expiration_interval`, which allows you to customize the partition ownership expiration for load balancing.\n     a consumer client may lose its owned partitions more often with a smaller expiration interval. but a larger interval\n     may result in idle partitions not being claimed for longer time.\n- added enum class `azure.eventhub.loadbalancingstrategy` for `load_balancing_strategy`.\n\n## 5.1.0 (2020-05-04)\n\n**new features**\n\n- `eventhubproducerclient.send_batch` accepts either an `eventdatabatch` or a finite list of `eventdata`. #9181\n- added enqueuetime to span links of distributed tracing. #9599\n\n**bug fixes**\n\n- fixed a bug that turned `azure.eventhub.eventhubconsumerclient` into an exclusive receiver when it has no checkpoint store. #11181\n- updated uamqp dependency to 1.2.7.\n  - fixed bug in setting certificate of tlsio on macos. #7201\n  - fixed bug that caused segmentation fault in network tracing on macos when setting `logging_enable` to `true` in `eventhubconsumerclient` and `eventhubproducerclient`.\n\n## 5.1.0b1 (2020-04-06)\n\n**new features**\n\n- added `eventhubconsumerclient.receive_batch()` to receive and process events in batches instead of one by one. #9184\n- `eventhubconsumercliuent.receive()` has a new param `max_wait_time`.\n`on_event` is called every `max_wait_time` when no events are received and `max_wait_time` is not `none` or 0.\n- param event of `partitioncontext.update_checkpoint` is now optional. the last received event is used when param event is not passed in.\n- `eventdata.system_properties` has added missing properties when consuming messages from iothub. #10408\n\n## 5.0.1 (2020-03-09)\n\n**bug fixes**\n\n- fixed a bug that swallowed errors when receiving events with `azure.eventhub.eventhubconsumerclient`  #9660\n- fixed a bug that caused `get_eventhub_properties`, `get_partition_ids`, and `get_partition_properties` to raise\nan error on azure stack #9920\n\n## 5.0.0 (2020-01-13)\n\n**breaking changes**\n\n- `eventdata`\n    - removed deprecated property `application_properties` and deprecated method `encode_message()`.\n- `eventhubconsumerclient`\n    - `on_error` would be called when `eventhubconsumerclient` failed to claim ownership of partitions.\n    - `on_partition_close` and `on_partition_initialize` would be called in the case of exceptions raised by `on_event` callback.\n        -  `eventhubconsumerclient` would close and re-open the internal partition receiver in this case.\n    - default starting position from where `eventhubconsumerclient` should resume receiving after recovering from an error has been re-prioritized.\n        - if there is checkpoint, it will resume from the checkpoint.\n        - if there is no checkpoint but `starting_position` is provided, it will resume from `starting_posititon`.\n        - if there is no checkpoint or `starting_position`, it will resume from the latest position.\n- `partitioncontext`\n    - `update_checkpoint` would do in-memory checkpoint instead of doing nothing when checkpoint store is not explicitly provided.\n        - the in-memory checkpoints would be used for `eventhubconsumerclient` receiving recovering.\n- `get_partition_ids`, `get_partition_properties`, `get_eventhub_properties` would raise error in the case of service returning an error status code.\n    - `authenticationerror` would be raised when service returning error code 401.\n    - `connecterror` would be raised when service returning error code 404.\n    - `eventhuberror` would be raised when service returning other error codes.\n\n## 5.0.0b6 (2019-12-03)\n\n**breaking changes**\n\n- all exceptions should now be imported from `azure.eventhub.exceptions`.\n- introduced separate `eventhubsharedkeycredential` objects for synchronous and asynchronous operations.\n  for async, import the credentials object from the `azure.eventhub.aio` namespace.\n- `eventdata`\n    - renamed property `application_properties` to `properties`.\n    - `eventdata` no longer has attribute `last_enqueued_event_properties` - use this on `partitioncontext` instead.\n- `evendatabatch`\n    - `eventdatabatch.try_add` has been renamed to `eventdatabatch.add`.\n    - renamed property `size` to `size_in_bytes`.\n    - renamed attribute `max_size` to `max_size_in_bytes`.\n- `eventhubconsumerclient` and `eventhubproducerclient`\n    - renamed method `get_properties` to `get_eventhub_properties`.\n    - renamed parameters in constructor: `host` to `fully_qualified_namespace`, `event_hub_path` to `eventhub_name`.\n    - renamed parameters in `get_partition_properties`: `partition` to `partition_id`.\n    - renamed parameter `consumer_group_name` to `consumer_group` and moved that parameter from `receive` method to the constructor of `eventhubconsumerclient`.\n    - renamed parameter `initial_event_position` to `starting_position` on the `receive` method of `eventhubconsumerclient`.\n    - renamed parameter `event_hub_path` to `eventhub_name` in constructor and `from_connection_string` method of the client object.\n    - `eventhubproducerclient.send` has been renamed to `send_batch` which will only accept `eventdatabatch` object as input.\n    - `eventhubproducerclient.create_batch` now also takes the `partition_id` and `partition_key` as optional parameters (which are no longer specified at send).\n- renamed module `partitionmanager` to `checkpointstore`.\n- receive event callback parameter has been renamed to `on_event` and now operates on a single event rather than a list of events.\n- removed class `eventpostition`.\n    - the `starting_position` parameter of the `receive` method accepts offset(`str`), sequence number(`int`), datetime (`datetime.datetime`) or `dict` of these types.\n    - the `starting_position_inclusive` parameter of the `receive` method accepts `bool` or `dict` indicating whether the given event position is inclusive or not.\n- `partitioncontext` no longer has attribute `owner_id`.\n- `partitioncontext` now has attribute `last_enqueued_event_properties` which is populated if `track_last_enqueued_event_properties` is set to `true` in the `receive` method.\n\n**new features**\n\n- added new parameter `idle_timeout` in construct and `from_connection_string` to `eventhubconsumerclient` and `eventhubproducerclient`\nafter which the underlying connection will close if there is no further activity.\n\n## 5.0.0b5 (2019-11-04)\n\n**breaking changes**\n\n- `eventhubclient`, `eventhubconsumer` and `eventhubproducer` has been removed. use `eventhubproducerclient` and `eventhubconsumerclient` instead.\n    - construction of both objects is the same as it was for the previous client.\n- introduced `eventhubproducerclient` as substitution for`eventhubproducer`.\n    - `eventhubproducerclient` supports sending events to different partitions.\n- introduced `eventhubconsumerclient` as substitution for `eventhubconsumer`.\n    - `eventhubconsumerclient` supports receiving events from single/all partitions.\n    - there are no longer methods which directly return `eventdata`, all receiving is done via callback method: `on_events`.\n- `eventhubconsumerclient` has taken on the responsibility of `eventprocessor`.\n    - `eventhubconsumerclient` now accepts `partitionmanager` to do load-balancing and checkpoint.\n- replaced `partitionprocessor`by four independent callback methods accepted by the `receive` method on `eventhubconsumerclient`.\n    - `on_events(partition_context, events)` called when events are received.\n    - `on_error(partition_context, exception` called when errors occur.\n    - `on_partition_initialize(partition_context)` called when a partition consumer is opened.\n    - `on_partition_close(partition_context, reason)` called when a partition consumer is closed.\n- some modules and classes that were importable from several different places have been removed:\n    - `azure.eventhub.common` has been removed. import from `azure.eventhub` instead.\n    - `azure.eventhub.client_abstract` has been removed. use `azure.eventhub.eventhubproducerclient` or `azure.eventhub.eventhubconsumerclient` instead.\n    - `azure.eventhub.client` has been removed. use `azure.eventhub.eventhubproducerclient` or `azure.eventhub.eventhubconsumerclient` instead.\n    - `azure.eventhub.producer` has been removed. use `azure.eventhub.eventhubproducerclient` instead.\n    - `azure.eventhub.consumer` has been removed. use `azure.eventhub.eventhubconsumerclient` instead.\n    - `azure.eventhub.aio.client_async` has been removed. use `azure.eventhub.aio.eventhubproducerclient` or `azure.eventhub.aio.eventhubconsumerclient` instead.\n    - `azure.eventhub.aio.producer_async` has been removed. use `azure.eventhub.aio.eventhubproducerclient` instead.\n    - `azure.eventhub.aio.consumer_async` has been removed. use `azure.eventhub.aio.eventhubconsumerclient` instead.\n    - `azure.eventhub.aio.event_processor.event_processor` has been removed. use `azure.eventhub.aio.eventhubconsumerclient` instead.\n    - `azure.eventhub.aio.event_processor.partition_processor` has been removed. use callback methods instead.\n    - `azure.eventhub.aio.event_processor.partition_manager` has been removed. import from `azure.eventhub.aio` instead.\n    - `azure.eventhub.aio.event_processor.partition_context` has been removed. import from `azure.eventhub.aio` instead.\n    - `azure.eventhub.aio.event_processor.sample_partition_manager` has been removed.\n\n**bug fixes**\n\n- fixed bug in user-agent string not being parsed.\n\n## 5.0.0b4 (2019-10-08)\n\n**new features**\n\n- added support for tracing (issue #7153).\n- added the capability of tracking last enqueued event properties of the partition to `eventhubconsumer` .\n    - added new boolean type parameter`track_last_enqueued_event_properties` in method `eventhubclient.create_consumer()`.\n    - added new property `last_enqueued_event_properties` of `eventhubconsumer` which contains sequence_number, offset, enqueued_time and retrieval_time information.\n    - by default the capability is disabled as it will cost extra bandwidth for transferring more information if turned on.\n\n**breaking changes**\n\n- removed support for iot hub direct connection.\n    - [eventhubs compatible connection string](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-messages-read-builtin) of an iothub can be used to create `eventhubclient` and read properties or events from an iot hub.\n- removed support for sending eventdata to iot hub.\n- removed parameter `exception` in method `close()` of `eventhubconsumer` and `eventhubprocuer`.\n- updated uamqp dependency to 1.2.3.\n\n## 5.0.0b3 (2019-09-10)\n\n**new features**\n\n- added support for automatic load balancing among multiple `eventprocessor`.\n- added `blobpartitionmanager` which implements `partitionmanager`.\n    - azure blob storage is applied for storing data used by `eventprocessor`.\n    - packaged separately as a plug-in to `eventprocessor`.\n    - for details, please refer to [azure blob storage partition manager](https://github.com/azure/azure-sdk-for-python/tree/main/sdk/eventhub/azure-eventhub-checkpointstoreblob-aio).\n- added property `system_properties` on `eventdata`.\n\n**breaking changes**\n\n- removed constructor method of `partitionprocessor`. for initialization please implement the method `initialize`.\n- replaced `checkpointmanager` by `partitioncontext`.\n    - `partitioncontext` has partition context information and method `update_checkpoint`.\n- updated all methods of `partitionprocessor` to include `partitioncontext` as part of the arguments.\n- updated accessibility of class members in `eventhub/eventhubconsumer/eventhubproducer`to be private.\n- moved `azure.eventhub.eventprocessor` under `aio` package, which now becomes `azure.eventhub.aio.eventprocessor`.\n\n## 5.0.0b2 (2019-08-06)\n\n**new features**\n\n- added method `create_batch` on the `eventhubproducer` to create an `eventdatabatch` that can then be used to add events until the maximum size is reached.\n    - this batch object can then be used in the `send()` method to send all the added events to event hubs.\n    - this allows publishers to build batches without the possibility of encountering the error around the message size exceeding the supported limit when sending events.\n    - it also allows publishers with bandwidth concerns to control the size of each batch published.\n- added new configuration parameters for exponential delay between retry operations.\n    - `retry_total`: the total number of attempts to redo the failed operation.\n    - `backoff_factor`: the delay time factor.\n    - `backoff_max`: the maximum delay time in total.\n- added support for context manager on `eventhubclient`.\n- added new error type `operationtimeouterror` for send operation.\n- introduced a new class `eventprocessor` which replaces the older concept of [event processor host](https://docs.microsoft.com/azure/event-hubs/event-hubs-event-processor-host). this early preview is intended to allow users to test the new design using a single instance of `eventprocessor`. the ability to checkpoints to a durable store will be added in future updates.\n    - `eventprocessor`: eventprocessor creates and runs consumers for all partitions of the eventhub.\n    - `partitionmanager`: partitionmanager defines the interface for getting/claiming ownerships of partitions and updating checkpoints.\n    - `partitionprocessor`: partitionprocessor defines the interface for processing events.\n    - `checkpointmanager`: checkpointmanager takes responsibility for updating checkpoints during events processing.\n\n**breaking changes**\n\n- `eventprocessorhost` was replaced by `eventprocessor`, please read the new features for details.\n- replaced `max_retries` configuration parameter of the eventhubclient with `retry_total`.\n\n\n## 5.0.0b1 (2019-06-25)\n\nversion 5.0.0b1 is a preview of our efforts to create a client library that is user friendly and idiomatic to the python ecosystem. the reasons for most of the changes in this update can be found in the [azure sdk design guidelines for python](https://azuresdkspecs.z5.web.core.windows.net/pythonspec.html). for more information, please visit https://aka.ms/azure-sdk-preview1-python.\n\n**new features**\n\n- added new configuration parameters for creating eventhubclient.\n  - `credential`: the credential object used for authentication which implements `tokencredential` interface of getting tokens.\n  - `transport_type`: the type of transport protocol that will be used for communicating with the event hubs service.\n  - `max_retries`: the max number of attempts to redo the failed operation when an error happened.\n  - for detailed information about the configuration parameters, please read the reference documentation.\n- added new methods `get_partition_properties` and `get_partition_ids` to eventhubclient.\n- added support for http proxy.\n- added support for authentication using azure-identity credential.\n- added support for transport using amqp over websocket.\n\n**breaking changes**\n\n- new error hierarchy\n  - `azure.error.eventhuberror`\n  - `azure.error.connectionlosterror`\n  - `azure.error.connecterror`\n  - `azure.error.authenticationerror`\n  - `azure.error.eventdataerror`\n  - `azure.error.eventdatasenderror`\n- renamed sender/receiver to eventhubproducer/eventhubconsumer.\n  - renamed `add_sender` to `create_producer` and `add_receiver` to `create_consumer` in eventhubclient.\n  - eventhubconsumer is now iterable.\n- rename class azure.eventhub.offset to azure.eventhub.eventposition.\n- rename method `get_eventhub_info` to `get_properties` of eventhubclient.\n- reorganized connection management, eventhubclient is no longer responsible for opening/closing eventhubproducer/eventhubconsumer.\n  - each eventhubproducer/eventhubconsumer is responsible for its own connection management.\n  - added support for context manager on eventhubproducer and eventhubconsumer.\n- reorganized async apis into \"azure.eventhub.aio\" namespace and rename to drop the \"_async\" suffix.\n- updated uamqp dependency to 1.2.\n\n## 1.3.1 (2019-02-28)\n\n**bugfixes**\n\n- fixed bug where datetime offset filter was using a local timestamp rather than utc.\n- fixed stackoverflow error in continuous connection reconnect attempts.\n\n\n## 1.3.0 (2019-01-29)\n\n**bugfixes**\n\n- added support for auto reconnect on token expiration and other auth errors (issue #89).\n\n**features**\n\n- added ability to create servicebusclient from an existing sas auth token, including\n  providing a function to auto-renew that token on expiry.\n- added support for storing a custom eph context value in checkpoint (pr #84, thanks @konstantinmiller)\n\n\n## 1.2.0 (2018-11-29)\n\n- support for python 2.7 in azure.eventhub module (azure.eventprocessorhost will not support python 2.7).\n- parse eventdata.enqueued_time as a utc timestamp (issue #72, thanks @vjrantal)\n\n\n## 1.1.1 (2018-10-03)\n\n- fixed bug in azure namespace package.\n\n\n## 1.1.0 (2018-09-21)\n\n- changes to `azurestoragecheckpointleasemanager` parameters to support other connection options (issue #61):\n  - the `storage_account_name`, `storage_account_key` and `lease_container_name` arguments are now optional keyword arguments.\n  - added a `sas_token` argument that must be specified with `storage_account_name` in place of `storage_account_key`.\n  - added an `endpoint_suffix` argument to support storage endpoints in national clouds.\n  - added a `connection_string` argument that, if specified, overrides all other endpoint arguments.\n  - the `lease_container_name` argument now defaults to `\"eph-leases\"` if not specified.\n\n- fix for clients failing to start if run called multipled times (issue #64).\n- added convenience methods `body_as_str` and `body_as_json` to eventdata object for easier processing of message data.\n\n\n## 1.0.0 (2018-08-22)\n\n- api stable.\n- renamed internal `_async` module to `async_ops` for docs generation.\n- added optional `auth_timeout` parameter to `eventhubclient` and `eventhubclientasync` to configure how long to allow for token\n  negotiation to complete. default is 60 seconds.\n- added optional `send_timeout` parameter to `eventhubclient.add_sender` and `eventhubclientasync.add_async_sender` to determine the\n  timeout for events to be successfully sent. default value is 60 seconds.\n- reformatted logging for performance.\n\n\n## 0.2.0 (2018-08-06)\n\n- stability improvements for eph.\n- updated uamqp version.\n- added new configuration options for sender and receiver; `keep_alive` and `auto_reconnect`.\n  these flags have been added to the following:\n\n  - `eventhubclient.add_receiver`\n  - `eventhubclient.add_sender`\n  - `eventhubclientasync.add_async_receiver`\n  - `eventhubclientasync.add_async_sender`\n  - `ephoptions.keey_alive_interval`\n  - `ephoptions.auto_reconnect_on_error`\n\n\n## 0.2.0rc2 (2018-07-29)\n\n- **breaking change** `eventdata.offset` will now return an object of type `~uamqp.common.offset` rather than str.\n  the original string value can be retrieved from `~uamqp.common.offset.value`.\n- each sender/receiver will now run in its own independent connection.\n- updated uamqp dependency to 0.2.0\n- fixed issue with iothub clients not being able to retrieve partition information.\n- added support for http proxy settings to both eventhubclient and eph.\n- added error handling policy to automatically reconnect on retryable error.\n- added keep-alive thread for maintaining an unused connection.\n\n\n## 0.2.0rc1 (2018-07-06)\n\n- **breaking change** restructured library to support python 3.7. submodule `async` has been renamed and all classes from\n  this module can now be imported from azure.eventhub directly.\n- **breaking change** removed optional `callback` argument from `receiver.receive` and `asyncreceiver.receive`.\n- **breaking change** `eventdata.properties` has been renamed to `eventdata.application_properties`.\n  this removes the potential for messages to be processed via callback for not yet returned\n  in the batch.\n- updated uamqp dependency to v0.1.0\n- added support for constructing iothub connections.\n- fixed memory leak in receive operations.\n- dropped python 2.7 wheel support.\n\n\n## 0.2.0b2 (2018-05-29)\n\n- added `namespace_suffix` to eventhubconfig() to support national clouds.\n- added `device_id` attribute to eventdata to support iot hub use cases.\n- added message header to workaround service bug for partitionkey support.\n- updated uamqp dependency to vrc1.\n\n\n## 0.2.0b1 (2018-04-20)\n\n- updated uamqp to latest version.\n- further testing and minor bug fixes.\n\n\n## 0.2.0a2 (2018-04-02)\n\n- updated uaqmp dependency.\n",
  "docs_url": null,
  "keywords": "azure,azure sdk",
  "license": "mit license",
  "name": "azure-eventhub",
  "package_url": "https://pypi.org/project/azure-eventhub/",
  "project_url": "https://pypi.org/project/azure-eventhub/",
  "project_urls": {
    "Homepage": "https://github.com/Azure/azure-sdk-for-python/tree/main/sdk/eventhub/azure-eventhub"
  },
  "release_url": "https://pypi.org/project/azure-eventhub/5.11.5/",
  "requires_dist": [
    "azure-core<2.0.0,>=1.14.0",
    "typing-extensions>=4.0.1"
  ],
  "requires_python": ">=3.7",
  "summary": "microsoft azure event hubs client library for python",
  "version": "5.11.5",
  "releases": [],
  "developers": [
    "azpysdkhelp@microsoft.com",
    "microsoft_corporation"
  ],
  "kwds": "azure azuresdkdocs azuresdkspecs eventhubs eventhub",
  "license_kwds": "mit license",
  "libtype": "pypi",
  "id": "pypi_azure_eventhub",
  "homepage": "https://github.com/azure/azure-sdk-for-python/tree/main/sdk/eventhub/azure-eventhub",
  "release_count": 54,
  "dependency_ids": [
    "pypi_azure_core",
    "pypi_typing_extensions"
  ]
}