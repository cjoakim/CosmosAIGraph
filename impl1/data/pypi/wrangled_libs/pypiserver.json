{
  "classifiers": [
    "development status :: 5 - production/stable",
    "environment :: web environment",
    "intended audience :: developers",
    "intended audience :: system administrators",
    "license :: osi approved :: bsd license",
    "license :: osi approved :: zlib/libpng license",
    "operating system :: macos :: macos x",
    "operating system :: microsoft :: windows",
    "operating system :: os independent",
    "operating system :: posix",
    "programming language :: python :: 3",
    "programming language :: python :: 3.10",
    "programming language :: python :: 3.6",
    "programming language :: python :: 3.7",
    "programming language :: python :: 3.8",
    "programming language :: python :: 3.9",
    "programming language :: python :: implementation :: cpython",
    "programming language :: python :: implementation :: pypy",
    "topic :: software development :: build tools",
    "topic :: system :: software distribution"
  ],
  "description": "![pypi server logo](docs/__resources__/pypiserver_logo.png)\n\n[**pypiserver - minimal pypi server for use with pip/easy_install**](<>)\n\n[![pypi badge](https://img.shields.io/pypi/v/pypiserver.svg)](https://shields.io/)\n[![ci workflow](https://github.com/pypiserver/pypiserver/actions/workflows/ci.yml/badge.svg)](https://github.com/pypiserver/pypiserver/actions/workflows/ci.yml)\n[![generic badge](https://img.shields.io/badge/python-3.6%7c3.7%7c3.8+-blue.svg)](https://pypi.org/project/pypiserver/)\n[![generic badge](https://img.shields.io/badge/license-mit%7czlib/libpng-blue.svg)](https://raw.githubusercontent.com/pypiserver/pypiserver/master/license.txt)\n\n| name        | description                                                                                                                                                                                                                                     |\n| :---------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| version     | 2.0.1                                                                                                                                                                                                                                           |\n| date:       | 2023-10-01                                                                                                                                                                                                                                      |\n| source      | https://github.com/pypiserver/pypiserver                                                                                                                                                                                                        |\n| pypi        | https://pypi.org/project/pypiserver/                                                                                                                                                                                                            |\n| tests       | https://github.com/pypiserver/pypiserver/actions                                                                                                                                                                                                |\n| maintainers | kostis anagnostopoulos <ankostis@gmail.com>, matthew planchard <mplanchard@gmail.com>,  dmitrii orlov <dmtree.dev@yahoo.com>,  **someone new?** we are looking for new maintainers! [#397](https://github.com/pypiserver/pypiserver/issues/397) |\n| license     | zlib/libpng + mit                                                                                                                                                                                                                               |\n| community   | https://pypiserver.zulipchat.com                                                                                                                                                                                                                |\n\nchat with us on [zulip](https://pypiserver.zulipchat.com)!\n\n**pypiserver** is a minimal [pypi](https://pypi.org/) compatible server for **pip** or **easy_install**.\nit is based on [bottle](http://bottlepy.org/) and serves packages from regular directories.\nwheels, bdists, eggs and accompanying pgp-signatures can be uploaded\neither with **pip**, **setuptools**, **twine**, **pypi-uploader**, or simply copied\nwith **scp**.\n\nnote\nthe official software powering [pypi](https://pypi.org/) is\n[warehouse](https://github.com/pypa/warehouse/). however,\n[warehouse](https://github.com/pypa/warehouse/)\nis fairly specialized to be **pypi.org**'s own software, and should not\nbe used in other contexts. in particular, it does not officially support\nbeing used as a custom package index by users wishing to serve their own\npackages.\n\n**pypiserver** implements the same interfaces as [pypi](https://pypi.org/), allowing\nstandard python packaging tooling such as **pip** and **twine** to\ninteract with it as a package index just as they would with [pypi](https://pypi.org/), while\nmaking it much easier to get a running index server.\n\n# pypiserver\n\ntable of contents\n\n- [pypiserver - minimal pypi server for use with pip/easy_install](#pypiserver---minimal-pypi-server-for-use-with-pipeasy_install)\n  - [quickstart installation and usage](#quickstart-installation-and-usage)\n    - [more details about pypi-server run](#more-details-about-pypi-server-run)\n    - [more details about pypi-server update](#more-details-about-pypi-server-update)\n  - [client-side configurations](#client-side-configurations)\n    - [configuring pip](#configuring-pip)\n    - [configuring easy_install](#configuring-easy_install)\n  - [uploading packages remotely](#uploading-packages-remotely)\n    - [apache like authentication ( htpasswd )](#apache-like-authentication)\n    - [upload with setuptools](#upload-with-setuptools)\n    - [upload with twine](#upload-with-twine)\n  - [using the docker image](#using-the-docker-image)\n  - [alternative installation methods](#alternative-installation-methods)\n    - [installing the very latest version](#installing-the-very-latest-version)\n  - [recipes](#recipes)\n    - [managing the package directory](#managing-the-package-directory)\n    - [serving thousands of packages](#serving-thousands-of-packages)\n    - [managing automated startup](#managing-automated-startup)\n      - [running as a systemd service](#running-as-a-systemd-service)\n      - [launching through supervisor](#launching-through-supervisor)\n      - [running as a service with nssm (windows)](#running-as-a-service-with-nssm)\n    - [using a different wsgi server](#using-a-different-wsgi-server)\n      - [apache](#apache)\n      - [gunicorn](#gunicorn)\n      - [paste](#paste)\n    - [behind a reverse proxy](#behind-a-reverse-proxy)\n      - [nginx](#nginx)\n      - [supporting https](#supporting-https)\n      - [traefik](#traefik)\n    - [utilizing the api](#utilizing-the-api)\n      - [using ad-hoc authentication providers](#using-ad-hoc-authentication-providers)\n    - [use with micropython](#use-with-micropython)\n    - [custom health check endpoint](#custom-health-check-endpoint)\n      - [configure a custom health check by cli arguments](#configure-a-custom-health-check-by-cli-arguments)\n      - [configure a custom health endpoint by script](#configure-a-custom-health-endpoint-by-script)\n    - [sources](#sources)\n    - [known limitations](#known-limitations)\n    - [similar projects](#similar-projects)\n      - [unmaintained or archived](#unmaintained-or-archived)\n    - [related projects](#related-projects)\n    - [license](#license)\n\n## quickstart installation and usage\n\n**pypiserver** works with python 3.6+ and pypy3.\n\nolder python versions may still work, but they are not tested.\n\nfor legacy python versions, use **pypiserver-1.x** series. note that these are\nnot officially supported, and will not receive bugfixes or new features.\n\ntip\n\nthe commands below work on a unix-like operating system with a posix shell.\nthe **'~'** character expands to user's home directory.\n\nif you're using windows, you'll have to use their \"windows counterparts\".\nthe same is true for the rest of this documentation.\n\n1. install **pypiserver** with this command\n\n```shell\n   pip install pypiserver                # or: pypiserver[passlib,cache]\n   mkdir ~/packages                      # copy packages into this directory.\n```\n\nsee also [alternative installation methods](<>)\n\n2. copy some packages into your **~/packages** folder and then\n   get your **pypiserver** up and running\n\n```shell\n   pypi-server run -p 8080 ~/packages &      # will listen to all ips.\n```\n\n3. from the client computer, type this\n\n```shell\n   # download and install hosted packages.\n   pip install --extra-index-url http://localhost:8080/simple/ ...\n\n   # or\n   pip install --extra-index-url http://localhost:8080 ...\n\n   # search hosted packages.\n   pip search --index http://localhost:8080 ...\n\n   # note that pip search does not currently work with the /simple/ endpoint.\n```\n\nsee also [client-side configurations](#client-side-configurations) for avoiding tedious typing.\n\n4. enter **pypi-server -h** in the cmd-line to print a detailed usage message\n\n```text\nusage: pypi-server [-h] [-v] [--log-file file] [--log-stream stream]\n                   [--log-frmt format] [--hash-algo hash_algo]\n                   [--backend {auto,simple-dir,cached-dir}] [--version]\n                   {run,update} ...\n\nstart pypi compatible package server serving packages from packages_directory. if packages_directory is not given on the command line, it uses the default ~/packages. pypiserver scans this directory recursively for packages. it skips packages and directories starting with a dot. multiple package directories may be specified.\n\npositional arguments:\n  {run,update}\n    run                 run pypiserver, serving packages from\n                        packages_directory\n    update              handle updates of packages managed by pypiserver. by\n                        default, a pip command to update the packages is\n                        printed to stdout for introspection or pipelining. see\n                        the `-x` option for updating packages directly.\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -v, --verbose         enable verbose logging; repeat for more verbosity.\n  --log-file file       write logging info into this file, as well as to\n                        stdout or stderr, if configured.\n  --log-stream stream   log messages to the specified stream. valid values are\n                        stdout, stderr, and none\n  --log-frmt format     the logging format-string.  (see `logging.logrecord`\n                        class from standard python library)\n  --hash-algo hash_algo\n                        any `hashlib` available algorithm to use for\n                        generating fragments on package links. can be disabled\n                        with one of (0, no, off, false).\n  --backend {auto,simple-dir,cached-dir}\n                        a backend implementation. keep the default 'auto' to\n                        automatically determine whether to activate caching or\n                        not\n  --version             show program's version number and exit\n\nvisit https://github.com/pypiserver/pypiserver for more information\n \n\n```\n\n### more details about pypi server run\n\nenter **pypi-server run -h** in the cmd-line to print a detailed usage\n\n```text\nusage: pypi-server run [-h] [-v] [--log-file file] [--log-stream stream]\n                       [--log-frmt format] [--hash-algo hash_algo]\n                       [--backend {auto,simple-dir,cached-dir}] [--version]\n                       [-p port] [-i host] [-a authenticate]\n                       [-p password_file] [--disable-fallback]\n                       [--fallback-url fallback_url]\n                       [--health-endpoint health_endpoint] [--server method]\n                       [-o] [--welcome html_file] [--cache-control age]\n                       [--log-req-frmt format] [--log-res-frmt format]\n                       [--log-err-frmt format]\n                       [package_directory [package_directory ...]]\n\npositional arguments:\n  package_directory     the directory from which to serve packages.\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -v, --verbose         enable verbose logging; repeat for more verbosity.\n  --log-file file       write logging info into this file, as well as to\n                        stdout or stderr, if configured.\n  --log-stream stream   log messages to the specified stream. valid values are\n                        stdout, stderr, and none\n  --log-frmt format     the logging format-string.  (see `logging.logrecord`\n                        class from standard python library)\n  --hash-algo hash_algo\n                        any `hashlib` available algorithm to use for\n                        generating fragments on package links. can be disabled\n                        with one of (0, no, off, false).\n  --backend {auto,simple-dir,cached-dir}\n                        a backend implementation. keep the default 'auto' to\n                        automatically determine whether to activate caching or\n                        not\n  --version             show program's version number and exit\n  -p port, --port port  listen on port port (default: 8080)\n  -i host, -h host, --interface host, --host host\n                        listen on interface interface (default: 0.0.0.0)\n  -a authenticate, --authenticate authenticate\n                        comma-separated list of (case-insensitive) actions to\n                        authenticate (options: download, list, update;\n                        default: update).\n                         \n                         any actions not specified are not authenticated, so\n                         to authenticate downloads and updates, but allow\n                         unauthenticated viewing of the package list, you would\n                         use:\n                         \n                          pypi-server -a 'download, update' -p\n                          ./my_passwords.htaccess\n                         \n                        to disable authentication, use:\n                         \n                          pypi-server -a . -p .\n                         \n                        see the `-p` option for configuring users and\n                        passwords.\n                         \n                        note that when uploads are not protected, the\n                        `register` command is not necessary, but `~/.pypirc`\n                        still needs username and password fields, even if\n                        bogus.\n  -p password_file, --passwords password_file\n                        use an apache htpasswd file password_file to set\n                        usernames and passwords for authentication.\n                         \n                        to allow unauthorized access, use:\n                         \n                          pypi-server -a . -p .\n                         \n  --disable-fallback    disable the default redirect to pypi for packages not\n                        found in the local index.\n  --fallback-url fallback_url\n                        redirect to fallback_url for packages not found in the\n                        local index.\n  --health-endpoint health_endpoint\n                        configure a custom liveness endpoint. it always\n                        returns 200 ok if the service is up. otherwise, it\n                        means that the service is not responsive.\n  --server method       use method to run the server. valid values include\n                        paste, cherrypy, twisted, gunicorn, gevent, wsgiref,\n                        and auto. the default is to use \"auto\", which chooses\n                        one of paste, cherrypy, twisted, or wsgiref.\n  -o, --overwrite       allow overwriting existing package files during\n                        upload.\n  --welcome html_file   use the contents of html_file as a custom welcome\n                        message on the home page.\n  --cache-control age   add \"cache-control: max-age=age\" header to package\n                        downloads. pip 6+ requires this for caching.age is\n                        specified in seconds.\n  --log-req-frmt format\n                        a format-string selecting http-request properties to\n                        log; set to '%s' to see them all.\n  --log-res-frmt format\n                        a format-string selecting http-response properties to\n                        log; set to '%s' to see them all.\n  --log-err-frmt format\n                        a format-string selecting http-error properties to\n                        log; set to '%s' to see them all.\n\n```\n\n### more details about pypi-server update\n\nmore details about **pypi-server update**\n\n```text\nusage: pypi-server update [-h] [-v] [--log-file file] [--log-stream stream]\n                          [--log-frmt format] [--hash-algo hash_algo]\n                          [--backend {auto,simple-dir,cached-dir}] [--version]\n                          [-x] [-d download_directory] [-u]\n                          [--blacklist-file ignorelist_file]\n                          [package_directory [package_directory ...]]\n\npositional arguments:\n  package_directory     the directory from which to serve packages.\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -v, --verbose         enable verbose logging; repeat for more verbosity.\n  --log-file file       write logging info into this file, as well as to\n                        stdout or stderr, if configured.\n  --log-stream stream   log messages to the specified stream. valid values are\n                        stdout, stderr, and none\n  --log-frmt format     the logging format-string. (see `logging.logrecord`\n                        class from standard python library)\n  --hash-algo hash_algo\n                        any `hashlib` available algorithm to use for\n                        generating fragments on package links. can be disabled\n                        with one of (0, no, off, false).\n  --backend {auto,simple-dir,cached-dir}\n                        a backend implementation. keep the default 'auto' to\n                        automatically determine whether to activate caching or\n                        not\n  --version             show program's version number and exit\n  -x, --execute         execute the pip commands rather than printing to\n                        stdout\n  -d download_directory, --download-directory download_directory\n                        specify a directory where packages updates will be\n                        downloaded. the default behavior is to use the\n                        directory which contains the package being updated.\n  -u, --allow-unstable  allow updating to unstable versions (alpha, beta, rc,\n                        dev, etc.)\n  --blacklist-file ignorelist_file, --ignorelist-file ignorelist_file\n                        don't update packages listed in this file (one package\n                        name per line, without versions, '#' comments\n                        honored). this can be useful if you upload private\n                        packages into pypiserver, but also keep a mirror of\n                        public packages that you regularly update. attempting\n                        to pull an update of a private package from `pypi.org`\n                        might pose a security risk - e.g. a malicious user\n                        might publish a higher version of the private package,\n                        containing arbitrary code.\n\n\n```\n\n## client-side configurations\n\nalways specifying the pypi url on the command line is a bit\ncumbersome. since **pypiserver** redirects **pip/easy_install** to the\n**pypi.org** index if it doesn't have a requested package, it is a\ngood idea to configure them to always use your local pypi index.\n\n### configuring pip\n\nfor **pip** command this can be done by setting the environment variable\n**[pip_extra_index_url](https://packaging.python.org/en/latest/guides/hosting-your-own-index/)** in your **.bashr/.profile/.zshrc**\n\n```shell\nexport pip_extra_index_url=http://localhost:8080/simple/\n```\n\nor by adding the following lines to **~/.pip/pip.conf**\n\n```shell\n[global]\nextra-index-url = http://localhost:8080/simple/\n```\n\nnote\n\nif you have installed **pypiserver** on a remote url without *https*\nyou will receive an \"untrusted\" warning from *pip*, urging you to append\nthe **--trusted-host** option.  you can also include this option permanently\nin your configuration-files or environment variables.\n\n### configuring easy_install\n\nfor **easy_install** command you may set the following configuration in\n**~/.pydistutils.cfg**\n\n```shell\n[easy_install]\nindex_url = http://localhost:8080/simple/\n```\n\n### uploading packages remotely\n\ninstead of copying packages directly to the server's folder (i.e. with **scp**),\nyou may use python tools for the task, e.g. **python setup.py upload**.\nin that case, **pypiserver** is responsible for authenticating the upload-requests.\n\nnote\n\nwe strongly advise to password-protected your uploads!\n\nit is possible to disable authentication for uploads (e.g. in intranets).\nto avoid lazy security decisions, read help for **-p** and **-a** options.\n\n#### apache like authentication (htpasswd)\n\n1. first make sure you have the **passlib** module installed (note that\n   **passlib>=1.6** is required), which is needed for parsing the apache\n   *htpasswd* file specified by the **-p**, **--passwords** option\n   (see next steps)\n\n```shell\n    pip install passlib\n```\n\n2. create the apache **htpasswd** file with at least one user/password pair\n   with this command (you'll be prompted for a password)\n\n```shell\n    htpasswd -sc htpasswd.txt <some_username>\n\n```\n\ntip\n\nread this [so](http://serverfault.com/questions/152950/how-to-create-and-edit-htaccess-and-htpasswd-locally-on-my-computer-and-then-u) question for running `htpasswd` cmd under *windows*\nor if you have bogus passwords that you don't care because they are for\nan internal service (which is still \"bad\", from a security perspective...)\nyou may use this [public service](http://www.htaccesstools.com/htpasswd-generator/)\n\ntip\n\nwhen accessing pypiserver via the api, alternate authentication\nmethods are available via the **auther** config flag. any callable\nreturning a boolean can be passed through to the pypiserver config in\norder to provide custom authentication. for example, to configure\npypiserver to authenticate using the [python-pam](https://pypi.org/project/python-pam/)\n\n```shell\n    import pam\n    pypiserver.default_config(auther=pam.authenticate)\n\n```\n\nplease see `using ad-hoc authentication providers`\\_ for more information.\n\n3. you  need to restart the server with the **-p** option only once\n   (but user/password pairs can later be added or updated on the fly)\n\n```shell\n    ./pypi-server run -p 8080 -p htpasswd.txt ~/packages &\n```\n\n#### upload with setuptools\n\n1. on client-side, edit or create a **~/.pypirc** file with a similar content:\n\n```shell\n     [distutils]\n     index-servers =\n       pypi\n       local\n\n     [pypi]\n     username:<your_pypi_username>\n     password:<your_pypi_passwd>\n\n     [local]\n     repository: http://localhost:8080\n     username: <some_username>\n     password: <some_passwd>\n```\n\n2. then from within the directory of the python-project you wish to upload,\n   issue this command:\n\n```shell\n     python setup.py sdist upload -r local\n```\n\n#### upload with twine\n\nto avoid storing you passwords on disk, in clear text, you may either:\n\n- use the **register** *setuptools*'s command with the **-r** option,\n  like that\n\n```shell\n  python setup.py sdist register -r local upload -r local\n```\n\n- use *twine* library, which\n  breaks the procedure in two steps.  in addition, it supports signing\n  your files with pgp-signatures and uploading the generated *.asc* files\n  to **pypiserver**::\n\n```shell\n  twine upload -r local --sign -identity user_name ./foo-1.zip\n```\n\n## using the docker image\n\nstarting with version 1.2.5, official docker images will be built for each\npush to master, each dev, alpha, or beta release, and each final release.\nthe most recent full release will always be available under the tag **latest**,\nand the current master branch will always be available under the tag\n**unstable**.\n\nyou can always check to see what tags are currently available at our\n[*docker repo*](https://hub.docker.com/r/pypiserver/pypiserver/tags/).\n\nto run the most recent release of **pypiserver** with docker, simply\n\n```shell\n    docker run pypiserver/pypiserver:latest run\n```\n\nthis starts **pypiserver** serving packages from the **/data/packages**\ndirectory inside the container, listening on the container port 8080.\n\nthe container takes all the same arguments as the normal **pypi-server**\nexecutable, with the exception of the internal container port (**-p**),\nwhich will always be 8080.\n\nof course, just running a container isn't that interesting. to map\nport 80 on the host to port 8080 on the container::\n\n```shell\n    docker run -p 80:8080 pypiserver/pypiserver:latest run\n```\n\nyou can now access your **pypiserver** at **localhost:80** in a web browser.\n\nto serve packages from a directory on the host, e.g. **~/packages**\n\n```shell\n    docker run -p 80:8080 -v ~/packages:/data/packages pypiserver/pypiserver:latest run\n```\n\nto authenticate against a local **.htpasswd** file::\n\n```shell\n    docker run -p 80:8080 -v ~/.htpasswd:/data/.htpasswd pypiserver/pypiserver:latest run -p .htpasswd packages\n```\n\nyou can also specify **pypiserver** to run as a docker service using a\ncomposefile. an example composefile is [provided](https://github.com/pypiserver/pypiserver/blob/master/docker-compose.yml)\n\n## alternative installation methods\n\nwhen trying the methods below, first use the following command to check whether\nprevious versions of **pypiserver** already exist, and (optionally) uninstall them::\n\n```shell\n# version-check: fails if not installed.\npypi-server --version\n\n# uninstall: invoke again until it fails.\npip uninstall pypiserver\n```\n\n### installing the very latest version\n\nin case the latest version in *pypi* is a pre-release, you have to use\n*pip*'s *--pre* option.  and to update an existing installation combine it\nwith `--ignore-installed`\n\n```shell\npip install pypiserver --pre -i\n```\n\nyou can even install the latest **pypiserver** directly from *github* with the\nfollowing command, assuming you have *git* installed on your **path**\n\n```shell\npip install git+git://github.com/pypiserver/pypiserver.git\n```\n\n## recipes\n\n### managing the package directory\n\nthe **pypi-server** command has the **update** command that searches for updates of\navailable packages. it scans the package directory for available\npackages and searches on pypi.org for updates. without further\noptions **pypi-server update** will just print a list of commands which must\nbe run in order to get the latest version of each package. output\nlooks like\n\n```shell\n    $ ./pypi-server update \n    checking 106 packages for newer version\n\n    .........u.e...........e..u.............\n    .....e..............................e...\n    ..........................\n\n    no releases found on pypi for pyxml, pymacs, mercurial, setuptools\n\n    # update raven from 1.4.3 to 1.4.4\n    pip -q install --no-deps  --extra-index-url https://pypi.org/simple/ -d /home/ralf/packages/mirror raven==1.4.4\n\n    # update greenlet from 0.3.3 to 0.3.4\n    pip -q install --no-deps  --extra-index-url https://pypi.org/simple/ -d /home/ralf/packages/mirror greenlet==0.3.4\n```\n\nit first prints for each package a single character after checking the\navailable versions on pypi. a dot(.) means the package is up-to-date, **'u'**\nmeans the package can be updated and **'e'** means the list of releases on\npypi is empty. after that it shows a *pip* command line which can be used\nto update a one package. either copy and paste that or run\n**pypi-server update -x** in order to really execute those commands. you need\nto have *pip* installed for that to work however.\n\nspecifying an additional **-u** option will also allow alpha, beta and\nrelease candidates to be downloaded. without this option these\nreleases won't be considered.\n\n### serving thousands of packages\n\nby default, **pypiserver** scans the entire packages directory each time an\nincoming http request occurs. this isn't a problem for a small number of\npackages, but causes noticeable slow-downs when serving thousands of packages.\n\nif you run into this problem, significant speedups can be gained by enabling\npypiserver's directory caching functionality. the only requirement is to\ninstall the **watchdog** package, or it can be installed during **pypiserver**\ninstallation, by specifying the **cache** extras option::\n\n```shell\n    pip install pypiserver[cache]\n```\n\nadditional speedups can be obtained by using your webserver's builtin\ncaching functionality. for example, if you are using `nginx` as a\nreverse-proxy as described below in `behind a reverse proxy`, you can\neasily enable caching. for example, to allow nginx to cache up to\n10 gigabytes of data for up to 1 hour::\n\n```shell\n    proxy_cache_path /data/nginx/cache\n                     levels=1:2\n                     keys_zone=pypiserver_cache:10m\n                     max_size=10g\n                     inactive=60m\n                     use_temp_path=off;\n\n    server {\n        # ...\n        location / {\n            proxy_cache pypiserver_cache;\n            proxy_pass http://localhost:8080;\n        }\n    }\n\n```\n\nusing webserver caching is especially helpful if you have high request\nvolume. using nginx caching, a real-world pypiserver installation was\nable to easily support over 1000 package downloads/min at peak load.\n\n### managing automated startup\n\nthere are a variety of options for handling the automated starting of\npypiserver upon system startup. two of the most common are *systemd* and\n*supervisor* for linux systems. for windows creating services with scripts isn't\nan easy task without a third party tool such as *nssm*.\n\n#### running as a systemd service\n\n**systemd** is installed by default on most modern linux systems and as such,\nit is an excellent option for managing the pypiserver process. an example\nconfig file for **systemd** can be seen below\n\n```shell\n    [unit]\n    description=a minimal pypi server for use with pip/easy_install.\n    after=network.target\n\n    [service]\n    type=simple\n    # systemd requires absolute path here too.\n    pidfile=/var/run/pypiserver.pid\n    user=www-data\n    group=www-data\n\n    execstart=/usr/local/bin/pypi-server run -p 8080 -a update,download --log-file /var/log/pypiserver.log -p /etc/nginx/.htpasswd /var/www/pypi\n    execstop=/bin/kill -term $mainpid\n    execreload=/bin/kill -hup $mainpid\n    restart=always\n\n    workingdirectory=/var/www/pypi\n\n    timeoutstartsec=3\n    restartsec=5\n\n    [install]\n    wantedby=multi-user.target\n```\n\nadjusting the paths and adding this file as **pypiserver.service** into your\n**systemd/system** directory will allow management of the pypiserver process with\n**systemctl**, e.g. **systemctl start pypiserver**.\n\nmore useful information about *systemd* can be found at\nhttps://www.digitalocean.com/community/tutorials/how-to-use-systemctl-to-manage-systemd-services-and-units\n\n#### launching through supervisor\n\n[supervisor](http://supervisord.org/) has the benefit of being a pure python\npackage and as such, it provides excellent cross-platform support for process\nmanagement. an example configuration file for **supervisor** is given below\n\n```shell\n    [program:pypi]\n    command=/home/pypi/pypi-venv/bin/pypi-server run -p 7001 -p /home/pypi/.htpasswd /home/pypi/packages\n    directory=/home/pypi\n    user=pypi\n    autostart=true\n    autorestart=true\n    stderr_logfile=/var/log/pypiserver.err.log\n    stdout_logfile=/var/log/pypiserver.out.log\n```\n\nfrom there, the process can be managed via **supervisord** using **supervisorctl**.\n\n#### running as a service with nssm\n\nfor windows download nssm from https://nssm.cc unzip to a desired location such as program files. decide whether you are going\nto use win32 or win64, and add that exe to environment path.\n\ncreate a start_pypiserver.bat\n\n```shell\n    pypi-server run -p 8080 c:\\path\\to\\packages &\n```\n\ntest the batch file by running it first before creating the service. make sure you can access\nthe server remotely, and install packages. if you can, proceed, if not troubleshoot until you can.\nthis will ensure you know the server works, before adding nssm into the mix.\n\nfrom the command prompt\n\n```shell\n    nssm install pypiserver\n```\n\nthis command will launch a nssm gui application\n\n```shell\n    path: c:\\path\\to\\start_pypiserver.bat\n    startup directory: auto generates when selecting path\n    service name: pypiserver\n```\n\nthere are more tabs, but that is the basic setup. if the service needs to be running with a certain\nlogin credentials, make sure you enter those credentials in the logon tab.\n\nstart the service\n\n```shell\n    nssm start pypiserver\n```\n\nother useful commands\n\n```shell\n    nssm --help\n    nssm stop <servicename>\n    nssm restart <servicename>\n    nssm status <servicename>\n\n```\n\nfor detailed information please visit https://nssm.cc\n\n### using a different wsgi server\n\n- the **bottle** web-server which supports many wsgi-servers, among others,\n  **paste**, **cherrypy**, **twisted** and **wsgiref** (part of python); you select\n  them using the **--server** flag.\n\n- you may view all supported wsgi servers using the following interactive code\n\n```python\n    >>> from pypiserver import bottle\n    >>> list(bottle.server_names.keys())\n    ['cgi', 'gunicorn', 'cherrypy', 'eventlet', 'tornado', 'geventsocketio',\n   'rocket', 'diesel', 'twisted', 'wsgiref', 'fapws3', 'bjoern', 'gevent',\n   'meinheld', 'auto', 'aiohttp', 'flup', 'gae', 'paste', 'waitress']\n\n```\n\n- if none of the above servers matches your needs, invoke just the\n  **pypiserver:app()** method which returns the internal wsgi-app without\n  starting-up a server - you may then send it to any wsgi server you like.\n  read also the [utilizing the api](#utilizing-the-api) section.\n\n- some examples are given below - you may find more details in [bottle\n  site](http://bottlepy.org/docs/dev/deployment.html#switching-the-server-backend%3e).\n\n#### apache\n\nto use your *apache2* with **pypiserver**, prefer to utilize **mod_wsgi** as\nexplained in [bottle's documentation](http://bottlepy.org/docs/dev/deployment.html#apache-mod-wsgi%3e).\n\nnote\nif you choose instead to go with **mod_proxy**, mind that you may bump into problems\nwith the prefix-path (see [#155](https://github.com/pypiserver/pypiserver/issues/155%3e)).\n\n1. adapt and place the following *apache* configuration either into top-level scope,\n   or inside some **<virtualhost>** (contributed by thomas waldmann):\n\n```shell\n        wsgiscriptalias   /     /yoursite/wsgi/pypiserver-wsgi.py\n        wsgidaemonprocess       pypisrv user=pypisrv group=pypisrv umask=0007 \\\n                                processes=1 threads=5 maximum-requests=500 \\\n                                display-name=wsgi-pypisrv inactivity-timeout=300\n        wsgiprocessgroup        pypisrv\n        wsgipassauthorization on    # required for authentication (https://github.com/pypiserver/pypiserver/issues/288)\n\n        <directory /yoursite/wsgi >\n            require all granted\n        </directory>\n```\n\nor if using older **apache \\< 2.4**, substitute the last part with this::\n\n```shell\n        <directory /yoursite/wsgi >\n            order deny,allow\n            allow from all\n        </directory>\n```\n\n2. then create the **/yoursite/cfg/pypiserver.wsgi** file and make sure that\n   the **user** and **group** of the **wsgidaemonprocess** directive\n   (**pypisrv:pypisrv** in the example) have the read permission on it\n\n```python\n\n        import pypiserver\n\n        conf = pypiserver.default_config(\n            root =          \"/yoursite/packages\",\n            password_file = \"/yoursite/htpasswd\", )\n        application = pypiserver.app(**conf)\n\n```\n\ntip\nif you have installed **pypiserver** in a virtualenv, follow **mod_wsgi**'s\n[instructions](http://modwsgi.readthedocs.io/en/develop/user-guides/virtual-environments.html)\nand prepend the python code above with the following\n\n```python\n    import site\n\n    site.addsitedir('/yoursite/venv/lib/pythonx.x/site-packages')\n```\n\nnote\nfor security reasons, notice that the **directory** directive grants access\nto a directory holding the **wsgi** start-up script, alone; nothing else.\n\nnote\nto enable https support on apache, configure the directive that contains the\nwsgi configuration to use ssl.\n\n#### gunicorn\n\nthe following command uses **gunicorn** to start **pypiserver**\n\n```shell\n  gunicorn -w4 'pypiserver:app(root=\"/home/ralf/packages\")'\n```\n\nor when using multiple roots\n\n```shell\n  gunicorn -w4 'pypiserver:app(root=[\"/home/ralf/packages\", \"/home/ralf/experimental\"])'\n```\n\n#### paste\n\n[paste](http://pythonpaste.org) allows to run multiple wsgi applications\nunder different url paths. therefore, it is possible to serve different set\nof packages on different paths.\n\nthe following example **paste.ini** could be used to serve stable and\nunstable packages on different paths\n\n```shell\n    [composite:main]\n    use = egg:paste#urlmap\n    /unstable/ = unstable\n    / = stable\n\n    [app:stable]\n    use = egg:pypiserver#main\n    root = ~/stable-packages\n\n    [app:unstable]\n    use = egg:pypiserver#main\n    root = ~/stable-packages\n       ~/unstable-packages\n\n    [server:main]\n    use = egg:gunicorn#main\n    host = 0.0.0.0\n    port = 9000\n    workers = 5\n    accesslog = -\n\n```\n\nnote\nyou need to install some more dependencies for this to work, like::\n\n```shell\n  pip install paste pastedeploy gunicorn pypiserver\n```\n\nthe server can then start with\n\n```shell\n  gunicorn_paster paste.ini\n```\n\n### behind a reverse proxy\n\nyou can run **pypiserver** behind a reverse proxy as well.\n\n#### nginx\n\nextend your nginx configuration\n\n```shell\n    upstream pypi {\n      server              pypiserver.example.com:12345 fail_timeout=0;\n    }\n\n    server {\n      server_name         myproxy.example.com;\n\n      location / {\n        proxy_set_header  host $host:$server_port;\n        proxy_set_header  x-forwarded-proto $scheme;\n        proxy_set_header  x-real-ip $remote_addr;\n        proxy_pass        http://pypi;\n      }\n    }\n\n```\n\nas of pypiserver 1.3, you may also use the `x-forwarded-host` header in your\nreverse proxy config to enable changing the base url. for example if you\nwant to host pypiserver under a particular path on your server\n\n```shell\n    upstream pypi {\n      server              localhost:8000;\n    }\n\n    server {\n      location /pypi/ {\n          proxy_set_header  x-forwarded-host $host:$server_port/pypi;\n          proxy_set_header  x-forwarded-proto $scheme;\n          proxy_set_header  x-forwarded-for $proxy_add_x_forwarded_for;\n          proxy_set_header  x-real-ip $remote_addr;\n          proxy_pass        http://pypi;\n      }\n    }\n```\n\n#### supporting https\n\nusing a reverse proxy is the preferred way of getting pypiserver behind\nhttps. for example, to put pypiserver behind https on port 443, with\nautomatic http redirection, using `nginx`\n\n```shell\n    upstream pypi {\n      server               localhost:8000;\n    }\n\n    server {\n      listen              80 default_server;\n      server_name         _;\n      return              301 https://$host$request_uri;\n    }\n\n    server {\n      listen              443 ssl;\n      server_name         pypiserver.example.com;\n\n      ssl_certificate     /etc/star.example.com.crt;\n      ssl_certificate_key /etc/star.example.com.key;\n      ssl_protocols       tlsv1 tlsv1.1 tlsv1.2;\n      ssl_ciphers         high:!anull:!md5;\n\n      location / {\n        proxy_set_header  host $host:$server_port;\n        proxy_set_header  x-forwarded-proto $scheme;\n        proxy_set_header  x-real-ip $remote_addr;\n        proxy_pass        http://pypi;\n      }\n    }\n\n```\n\nplease see [nginx's https docs for more details](http://nginx.org/en/docs/http/configuring_https_servers.html).\n\ngetting and keeping your certificates up-to-date can be simplified using,\nfor example, using [certbot and letsencrypt](https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-18-04%3e).\n\n#### traefik\n\nit is also possible to use [traefik](https://docs.traefik.io/) to put pypiserver behind https on port 443, with\nautomatic http redirection using docker compose. please see the provided [docker-compose.yml](https://github.com/pypiserver/pypiserver/blob/master/docker-compose.yml) example for more information.\n\n### utilizing the api\n\nin order to enable ad-hoc authentication-providers or to use wsgi-servers\nnot supported by *bottle* out-of-the-box, you needed to launch **pypiserver**\nvia its api.\n\n- the main entry-point for configuring **pypiserver** is the [pypiserver:app()](https://github.com/pypiserver/pypiserver/blob/master/pypiserver/__init__.py#l116)\n  function.  this function returns the internal wsgi-app that you my then\n  send to any wsgi-server you like.\n\n- to get all **pypiserver:app()** keywords and their explanations, read the\n  function [pypiserver:default_config()](https://github.com/pypiserver/pypiserver/blob/master/pypiserver/__init__.py#l35)\n\n- finally, to fire-up a wsgi-server with the configured app, invoke\n  the **bottle:run(app, host, port, server)** function.\n  note that **pypiserver** ships with its own copy of *bottle*; to use it,\n  import it like that: **from pypiserver import bottle**\n\n#### using ad-hoc authentication providers\n\nthe **auther** keyword of **pypiserver:app()** function maybe set only using\nthe api. this can be any callable that returns a boolean when passed\nthe *username* and the *password* for a given request.\n\nfor example, to authenticate users based on the **/etc/passwd** file under unix,\nyou may delegate such decisions to the [python-pam](https://pypi.org/project/python-pam/) library by following\nthese steps:\n\n1. ensure **python-pam** module is installed\n\n   pip install python-pam\n\n1. create a python-script along these lines\n\n```shell\n   $ cat > pypiserver-start.py\n   import pypiserver\n   from pypiserver import bottle\n   import pam\n   app = pypiserver.app(root='./packages', auther=pam.authenticate)\n   bottle.run(app=app, host='0.0.0.0', port=80, server='auto')\n\n   [ctrl+ d]\n```\n\n3. invoke the python-script to start-up **pypiserver**\n\n```shell\n   $ python pypiserver-start.py\n```\n\nnote\nthe [python-pam](https://pypi.org/project/python-pam/) module, requires *read* access to **/etc/shadow** file;\nyou may add the user under which **pypiserver** runs into the *shadow*\ngroup, with a command like this: **sudo usermod -a -g shadow pypy-user**.\n\n### use with micropython\n\nthe micropython interpreter for embedded devices can install packages with the\nmodule **upip.py**. the module uses a specialized json-endpoint to retrieve\npackage information. this endpoint is supported by **pypiserver**.\n\nit can be tested with the unix port of **micropython**\n\n```shell\n    cd micropython\n    ports/unix/micropython -m tools.upip install -i http://my-server:8080 -p /tmp/mymodules micropython-foobar\n\n```\n\ninstalling packages from the repl of an embedded device works in this way:\n\n```python\n    import network\n    import upip\n\n    sta_if = network.wlan(network.sta_if)\n    sta_if.active(true)\n    sta_if.connect('<your essid>', '<your password>')\n    upip.index_urls = [\"http://my-server:8080\"]\n    upip.install(\"micropython-foobar\")\n```\n\nfurther information on micropython-packaging can be found here: https://docs.micropython.org/en/latest/reference/packages.html\n\n### custom health check endpoint\n\n**pypiserver** provides a default health endpoint at **/health**. it always returns\n**200 ok** if the service is up. otherwise, it means that the service is not responsive.\n\nin addition, **pypiserver** allows users to customize the health endpoint.\nalphanumeric characters, hyphens, forward slashes and underscores are allowed\nand the endpoint should not overlap with any existing routes.\nvalid examples: **/healthz**, **/health/live-1**, **/api_health**, **/action/health**\n\n#### configure a custom health endpoint by cli arguments\n\nrun pypiserver with **--health-endpoint** argument:\n\n```shell\n    pypi-server run --health-endpoint /action/health\n```\n\n#### configure a custom health endpoint by script\n\n````python\n    import pypiserver\n    from pypiserver import bottle\n    app = pypiserver.app(root=\"./packages\", health_endpoint=\"/action/health\")\n    bottle.run(app=app, host=\"\n\n```python\n    import pypiserver\n    from pypiserver import bottle\n    app = pypiserver.app(root=\"./packages\", health_endpoint=\"/action/health\")\n    bottle.run(app=app, host=\"0.0.0.0\", port=8080, server=\"auto\")\n````\n\ntry **curl http://localhost:8080/action/health**\n\n## sources\n\nto create a copy of the repository, use\n\n```shell\n    git clone https://github.com/pypiserver/pypiserver.git\n    cd pypiserver\n```\n\nto receive any later changes, in the above folder use:\n\n```shell\n    git pull\n```\n\n## known limitations\n\n**pypiserver** does not implement the full api as seen on [pypi](https://pypi.org/). it\nimplements just enough to make **easy_install**, **pip install**, and\n**search** work.\n\nthe following limitations are known:\n\n- command **pypi -u** that compares uploaded packages with *pypi* to see if\n  they are outdated, does not respect a http-proxy environment variable\n  (see [#19](https://github.com/pypiserver/pypiserver/issues/19).\n- it accepts documentation uploads but does not save them to\n  disk (see [#47](https://github.com/pypiserver/pypiserver/issues/47) for a\n  discussion)\n- it does not handle misspelled packages as *pypi-repo* does,\n  therefore it is suggested to use it with **--extra-index-url** instead\n  of **--index-url** (see [#38](https://github.com/pypiserver/pypiserver/issues/38%3e)).\n\nplease use github's [bugtracker](https://github.com/pypiserver/pypiserver/issues%3e)\nfor other bugs you find.\n\n## similar projects\n\nthere are lots of other projects, which allow you to run your own\npypi server. if **pypiserver** doesn't work for you, the following are\namong the most popular alternatives:\n\n- [devpi-server](https://pypi.org/project/devpi/):\n  a reliable fast pypi.org caching server, part of\n  the comprehensive [github-style pypi index server and packaging meta tool](https://pypi.org/project/devpi/).\n  (version: 2.1.4, access date: 8/3/2015)\n\n- check this so question: [how to roll my own pypi](http://stackoverflow.com/questions/1235331/how-to-roll-my-own-pypi)\n\n### unmaintained or archived\n\nthese projects were once alternatives to pypiserver but are now either unmaintained or archived.\n\n- [pip2pi](https://github.com/wolever/pip2pi)\n  a simple cmd-line tool that builds a pypi-compatible local folder from pip requirements\n\n- [flask-pypi-proxy](http://flask-pypi-proxy.readthedocs.org/)\n  a proxy for pypi that also enables uploading custom packages.\n\n## related software\n\nthough not direct alternatives for **pypiserver**'s use as an index\nserver, the following is a list of related software projects that you\nmay want to familiarize with:\n\n- [pypi-uploader](https://pypi.org/project/pypi-uploader/):\n  a command-line utility to upload packages to your **pypiserver** from pypi without\n  having to store them locally first.\n\n- [twine](https://pypi.org/project/twine/):\n  a command-line utility for interacting with pypi or **pypiserver**.\n\n- [warehouse](https://github.com/pypa/warehouse/):\n  the software that powers [pypi](https://pypi.org/) itself. it is not generally intended to\n  be run by end-users.\n\n# licensing\n\n**pypiserver** contains a copy of [bottle](http://bottlepy.org/) which is available under the\nmit license, and the remaining part is distributed under the zlib/libpng license.\nsee the **license.txt** file.\n",
  "docs_url": null,
  "keywords": "",
  "license": "",
  "name": "pypiserver",
  "package_url": "https://pypi.org/project/pypiserver/",
  "project_url": "https://pypi.org/project/pypiserver/",
  "project_urls": {
    "Homepage": "https://github.com/pypiserver/pypiserver"
  },
  "release_url": "https://pypi.org/project/pypiserver/2.0.1/",
  "requires_dist": [
    "pip >=7",
    "watchdog ; extra == 'cache'",
    "passlib >=1.6 ; extra == 'passlib'"
  ],
  "requires_python": ">=3.6",
  "summary": "a minimal pypi server for use with pip/easy_install.",
  "version": "2.0.1",
  "releases": [],
  "developers": [
    "ankostis@gmail.com"
  ],
  "kwds": "pypiserver_logo pypy3 badge pypi start_pypiserver",
  "license_kwds": "",
  "libtype": "pypi",
  "id": "pypi_pypiserver",
  "homepage": "https://github.com/pypiserver/pypiserver",
  "release_count": 55,
  "dependency_ids": [
    "pypi_passlib",
    "pypi_pip",
    "pypi_watchdog"
  ]
}