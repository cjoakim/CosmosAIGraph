{
  "libtype": "pypi",
  "libname": "guidance",
  "url": "https://github.com/guidance-ai/guidance",
  "html": "<!DOCTYPE html><html  lang=\"en\"    data-color-mode=\"auto\" data-light-theme=\"light\" data-dark-theme=\"dark\"  data-a11y-animated-images=\"system\" data-a11y-link-underlines=\"true\"  >  <head>    <meta charset=\"utf-8\">  <link rel=\"dns-prefetch\" href=\"https://github.githubassets.com\">  <link rel=\"dns-prefetch\" href=\"https://avatars.githubusercontent.com\">  <link rel=\"dns-prefetch\" href=\"https://github-cloud.s3.amazonaws.com\">  <link rel=\"dns-prefetch\" href=\"https://user-images.githubusercontent.com/\">  <link rel=\"preconnect\" href=\"https://github.githubassets.com\" crossorigin>  <link rel=\"preconnect\" href=\"https://avatars.githubusercontent.com\">    <link crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" href=\"https://github.githubassets.com/assets/light-0eace2597ca3.css\" /><link crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" href=\"https://github.githubassets.com/assets/dark-a167e256da9c.css\" /><link data-color-theme=\"dark_dimmed\" crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" data-href=\"https://github.githubassets.com/assets/dark_dimmed-d11f2cf8009b.css\" /><link data-color-theme=\"dark_high_contrast\" crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" data-href=\"https://github.githubassets.com/assets/dark_high_contrast-ea7373db06c8.css\" /><link data-color-theme=\"dark_colorblind\" crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" data-href=\"https://github.githubassets.com/assets/dark_colorblind-afa99dcf40f7.css\" /><link data-color-theme=\"light_colorblind\" crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" data-href=\"https://github.githubassets.com/assets/light_colorblind-af6c685139ba.css\" /><link data-color-theme=\"light_high_contrast\" crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" data-href=\"https://github.githubassets.com/assets/light_high_contrast-578cdbc8a5a9.css\" /><link data-color-theme=\"light_tritanopia\" crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" data-href=\"https://github.githubassets.com/assets/light_tritanopia-5cb699a7e247.css\" /><link data-color-theme=\"dark_tritanopia\" crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" data-href=\"https://github.githubassets.com/assets/dark_tritanopia-9b32204967c6.css\" />    <link crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" href=\"https://github.githubassets.com/assets/primer-primitives-2ef2a46b27ee.css\" />    <link crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" href=\"https://github.githubassets.com/assets/primer-711f412bb361.css\" />    <link crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" href=\"https://github.githubassets.com/assets/global-4803cd254267.css\" />    <link crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" href=\"https://github.githubassets.com/assets/github-f4d857cbc96a.css\" />  <link crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" href=\"https://github.githubassets.com/assets/repository-6247ca238fd4.css\" /><link crossorigin=\"anonymous\" media=\"all\" rel=\"stylesheet\" href=\"https://github.githubassets.com/assets/code-6d7b4ef0ea51.css\" />    <script type=\"application/json\" id=\"client-env\">{\"locale\":\"en\",\"featureFlags\":[\"code_vulnerability_scanning\",\"copilot_conversational_ux_history_refs\",\"copilot_chat_attach_knowledge\",\"copilot_chat_knowledge_base_copy\",\"copilot_smell_icebreaker_ux\",\"copilot_implicit_context\",\"docset_management_ui\",\"copilot_chat_settings\",\"failbot_handle_non_errors\",\"geojson_azure_maps\",\"image_metric_tracking\",\"marketing_forms_api_integration_contact_request\",\"marketing_pages_search_explore_provider\",\"turbo_experiment_risky\",\"sample_network_conn_type\",\"no_character_key_shortcuts_in_inputs\",\"custom_inp\",\"remove_child_patch\"]}</script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/wp-runtime-47578fb192fd.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_dompurify_dist_purify_js-6890e890956f.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-a4c183-79f9611c275b.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_hydro-analytics-client_dist_analytics-client_js-node_modules_gith-6a10dd-e66ebda625fb.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/ui_packages_failbot_failbot_ts-479802999bcc.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/environment-fe7570f3bc38.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_selector-observer_dist_index_esm_js-9f960d9b217c.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_behaviors_dist_esm_focus-zone_js-086f7a27bac0.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_relative-time-element_dist_index_js-c76945c5961a.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_delegated-events_dist_index_js-node_modules_github_details-dialog-elemen-29dc30-a2a71f11a507.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_auto-complete-element_dist_index_js-12366198e7a5.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_text-expander-element_dist_index_js-8a621df59e80.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_filter-input-element_dist_index_js-node_modules_github_remote-inp-b7d8f4-654130b7cde5.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_primer_view-co-5dccdf-e5e2b9fa3c0c.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/github-elements-e4eda4896b4e.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/element-registry-b99c9d8fad1d.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_catalyst_lib_index_js-node_modules_github_hydro-analytics-client_-978abc0-add939c751ce.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_lit-html_lit-html_js-5b376145beff.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_alive-client_dist-bf5aa2-1b562c29ab8e.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_morphdom_dist_morphdom-esm_js-5bff297a06de.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js-c91f4ad18b62.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_color-convert_index_js-72c9fbde5ad4.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_remote-form_dist_index_js-node_modules_scroll-anchoring_dist_scro-231ccf-aa129238d13b.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_behaviors_dist_esm_dimensions_js-node_modules_github_jtml_lib_index_js-95b84ee6bc34.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_session-resume_dist_index_js-node_modules_primer_behaviors_dist_e-da6ec6-3f39339c9d98.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_paste-markdown_dist_index_esm_js-node_modules_github_quote-select-67e0dc-1aa35af077a4.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/app_assets_modules_github_updatable-content_ts-ee3fc84d7fb0.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/app_assets_modules_github_behaviors_task-list_ts-app_assets_modules_github_onfocus_ts-app_ass-421cec-9de4213015af.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/app_assets_modules_github_sticky-scroll-into-view_ts-94209c43e6af.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/app_assets_modules_github_behaviors_ajax-error_ts-app_assets_modules_github_behaviors_include-467754-f9bd433e9591.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/app_assets_modules_github_behaviors_commenting_edit_ts-app_assets_modules_github_behaviors_ht-83c235-9285faa0e011.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/app_assets_modules_github_blob-anchor_ts-app_assets_modules_github_filter-sort_ts-app_assets_-c96432-da3733f430b8.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/behaviors-1fb9e5061509.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_delegated-events_dist_index_js-node_modules_github_catalyst_lib_index_js-d0256ebff5cd.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/notifications-global-352d84c6cc82.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_virtualized-list_es_index_js-node_modules_github_template-parts_lib_index_js-878844713bc9.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_remote-form_dist_index_js-node_modules_delegated-events_dist_inde-c537341-c7f6a41a084c.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/app_assets_modules_github_ref-selector_ts-b593b93f23f5.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/codespaces-1a8626dd714a.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_filter-input-element_dist_index_js-node_modules_github_mini-throt-08ab15-3e0517baca99.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_github_mini-th-55cf52-e14cb4b719b4.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/repositories-69068e0899f9.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/code-menu-614feb194539.js\"></script>    <title>GitHub - guidance-ai/guidance: A guidance language for controlling large language models.</title>  <meta name=\"route-pattern\" content=\"/:user_id/:repository\" data-turbo-transient>  <meta name=\"route-controller\" content=\"files\" data-turbo-transient>  <meta name=\"route-action\" content=\"disambiguate\" data-turbo-transient>      <meta name=\"current-catalog-service-hash\" content=\"82c569b93da5c18ed649ebd4c2c79437db4611a6a1373e805a3cb001c64130b7\">  <meta name=\"request-id\" content=\"C030:0E4A:A0563D:EC7B8C:65E78BBF\" data-pjax-transient=\"true\"/><meta name=\"html-safe-nonce\" content=\"476e561cd39130949cd556dc3c3a66fb67b37aa278e55c3396486fc3e2bb4d43\" data-pjax-transient=\"true\"/><meta name=\"visitor-payload\" content=\"eyJyZWZlcnJlciI6IiIsInJlcXVlc3RfaWQiOiJDMDMwOjBFNEE6QTA1NjNEOkVDN0I4Qzo2NUU3OEJCRiIsInZpc2l0b3JfaWQiOiI1OTMxMTQ4OTY2MTYwMjA2NzgzIiwicmVnaW9uX2VkZ2UiOiJpYWQiLCJyZWdpb25fcmVuZGVyIjoiaWFkIn0=\" data-pjax-transient=\"true\"/><meta name=\"visitor-hmac\" content=\"8b5b875f53a6063b149dcf13d5d83ef5cd3e95ad2753dfbc3b8d9addfc391b83\" data-pjax-transient=\"true\"/>    <meta name=\"hovercard-subject-tag\" content=\"repository:564443255\" data-turbo-transient>  <meta name=\"github-keyboard-shortcuts\" content=\"repository,copilot\" data-turbo-transient=\"true\" />    <meta name=\"selected-link\" value=\"repo_source\" data-turbo-transient>  <link rel=\"assets\" href=\"https://github.githubassets.com/\">    <meta name=\"google-site-verification\" content=\"c1kuD-K2HIVF635lypcsWPoD4kilo5-jA_wBFyT4uMY\">  <meta name=\"google-site-verification\" content=\"KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU\">  <meta name=\"google-site-verification\" content=\"ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA\">  <meta name=\"google-site-verification\" content=\"GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc\">  <meta name=\"google-site-verification\" content=\"Apib7-x98H0j5cPqHWwSMm6dNU4GmODRoqxLiDzdx9I\"><meta name=\"octolytics-url\" content=\"https://collector.github.com/github/collect\" />  <meta name=\"analytics-location\" content=\"/&lt;user-name&gt;/&lt;repo-name&gt;\" data-turbo-transient=\"true\" />        <meta name=\"user-login\" content=\"\">      <meta name=\"viewport\" content=\"width=device-width\">          <meta name=\"description\" content=\"A guidance language for controlling large language models. - guidance-ai/guidance\">      <link rel=\"search\" type=\"application/opensearchdescription+xml\" href=\"/opensearch.xml\" title=\"GitHub\">    <link rel=\"fluid-icon\" href=\"https://github.com/fluidicon.png\" title=\"GitHub\">    <meta property=\"fb:app_id\" content=\"1401488693436528\">    <meta name=\"apple-itunes-app\" content=\"app-id=1477376905, app-argument=https://github.com/guidance-ai/guidance\" />      <meta name=\"twitter:image:src\" content=\"https://opengraph.githubassets.com/37739da55393b92fc7859f40026fc26d840fede05f48dea8ce9a2095cbae2729/guidance-ai/guidance\" /><meta name=\"twitter:site\" content=\"@github\" /><meta name=\"twitter:card\" content=\"summary_large_image\" /><meta name=\"twitter:title\" content=\"GitHub - guidance-ai/guidance: A guidance language for controlling large language models.\" /><meta name=\"twitter:description\" content=\"A guidance language for controlling large language models. - guidance-ai/guidance\" />      <meta property=\"og:image\" content=\"https://opengraph.githubassets.com/37739da55393b92fc7859f40026fc26d840fede05f48dea8ce9a2095cbae2729/guidance-ai/guidance\" /><meta property=\"og:image:alt\" content=\"A guidance language for controlling large language models. - guidance-ai/guidance\" /><meta property=\"og:image:width\" content=\"1200\" /><meta property=\"og:image:height\" content=\"600\" /><meta property=\"og:site_name\" content=\"GitHub\" /><meta property=\"og:type\" content=\"object\" /><meta property=\"og:title\" content=\"GitHub - guidance-ai/guidance: A guidance language for controlling large language models.\" /><meta property=\"og:url\" content=\"https://github.com/guidance-ai/guidance\" /><meta property=\"og:description\" content=\"A guidance language for controlling large language models. - guidance-ai/guidance\" />              <meta name=\"hostname\" content=\"github.com\">        <meta name=\"expected-hostname\" content=\"github.com\">  <meta http-equiv=\"x-pjax-version\" content=\"b9fa4cafade57d606c6dcfafff1d08bd597980af7b9837ed473fdf0cdea8a3bc\" data-turbo-track=\"reload\">  <meta http-equiv=\"x-pjax-csp-version\" content=\"5dcfbec3488c5fd5a334e287ce6a17058b7d4beb91db2d4d184e4d55bbf1d7d7\" data-turbo-track=\"reload\">  <meta http-equiv=\"x-pjax-css-version\" content=\"d33c7c2fcff40783f3002896023f41e2c17ec62b12ddbe7434e2001d743fb853\" data-turbo-track=\"reload\">  <meta http-equiv=\"x-pjax-js-version\" content=\"4ba4a7cc07194c8d5f24291dea4fbc790ffd83ba40beacaf8d0117187b571b4d\" data-turbo-track=\"reload\">  <meta name=\"turbo-cache-control\" content=\"no-preview\" data-turbo-transient=\"\">      <meta data-hydrostats=\"publish\">  <meta name=\"go-import\" content=\"github.com/guidance-ai/guidance git https://github.com/guidance-ai/guidance.git\">  <meta name=\"octolytics-dimension-user_id\" content=\"142035062\" /><meta name=\"octolytics-dimension-user_login\" content=\"guidance-ai\" /><meta name=\"octolytics-dimension-repository_id\" content=\"564443255\" /><meta name=\"octolytics-dimension-repository_nwo\" content=\"guidance-ai/guidance\" /><meta name=\"octolytics-dimension-repository_public\" content=\"true\" /><meta name=\"octolytics-dimension-repository_is_fork\" content=\"false\" /><meta name=\"octolytics-dimension-repository_network_root_id\" content=\"564443255\" /><meta name=\"octolytics-dimension-repository_network_root_nwo\" content=\"guidance-ai/guidance\" />    <link rel=\"canonical\" href=\"https://github.com/guidance-ai/guidance\" data-turbo-transient>  <meta name=\"turbo-body-classes\" content=\"logged-out env-production page-responsive\">  <meta name=\"browser-stats-url\" content=\"https://api.github.com/_private/browser/stats\">  <meta name=\"browser-errors-url\" content=\"https://api.github.com/_private/browser/errors\">  <link rel=\"mask-icon\" href=\"https://github.githubassets.com/assets/pinned-octocat-093da3e6fa40.svg\" color=\"#000000\">  <link rel=\"alternate icon\" class=\"js-site-favicon\" type=\"image/png\" href=\"https://github.githubassets.com/favicons/favicon.png\">  <link rel=\"icon\" class=\"js-site-favicon\" type=\"image/svg+xml\" href=\"https://github.githubassets.com/favicons/favicon.svg\"><meta name=\"theme-color\" content=\"#1e2327\"><meta name=\"color-scheme\" content=\"light dark\" />  <link rel=\"manifest\" href=\"/manifest.json\" crossOrigin=\"use-credentials\">  </head>  <body class=\"logged-out env-production page-responsive\" style=\"word-wrap: break-word;\">    <div data-turbo-body class=\"logged-out env-production page-responsive\" style=\"word-wrap: break-word;\">          <div class=\"position-relative js-header-wrapper \">      <a href=\"#start-of-content\" class=\"px-2 py-4 color-bg-accent-emphasis color-fg-on-emphasis show-on-focus js-skip-to-content\">Skip to content</a>      <span data-view-component=\"true\" class=\"progress-pjax-loader Progress position-fixed width-full\">    <span style=\"width: 0%;\" data-view-component=\"true\" class=\"Progress-item progress-pjax-loader-bar left-0 top-0 color-bg-accent-emphasis\"></span></span>              <script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_Button_IconButton_js-node_modules_primer_react_lib--23bcad-a89698f38643.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/keyboard-shortcuts-dialog-a23eda2bcf8d.js\"></script><react-partial  partial-name=\"keyboard-shortcuts-dialog\"  data-ssr=\"false\">    <script type=\"application/json\" data-target=\"react-partial.embeddedData\">{\"props\":{}}</script>  <div data-target=\"react-partial.reactRoot\"></div></react-partial>                          <script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_github_remote-form_dist_index_js-node_modules_delegated-events_dist_inde-94fd67-99519581d0f8.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/sessions-585a7232e50a.js\"></script><header class=\"Header-old header-logged-out js-details-container Details position-relative f4 py-3\" role=\"banner\" data-color-mode=light data-light-theme=light data-dark-theme=dark>  <button type=\"button\" class=\"Header-backdrop d-lg-none border-0 position-fixed top-0 left-0 width-full height-full js-details-target\" aria-label=\"Toggle navigation\">    <span class=\"d-none\">Toggle navigation</span>  </button>  <div class=\" d-flex flex-column flex-lg-row flex-items-center p-responsive height-full position-relative z-1\">    <div class=\"d-flex flex-justify-between flex-items-center width-full width-lg-auto\">      <a class=\"mr-lg-3 color-fg-inherit flex-order-2\" href=\"https://github.com/\" aria-label=\"Homepage\" data-ga-click=\"(Logged out) Header, go to homepage, icon:logo-wordmark\">        <svg height=\"32\" aria-hidden=\"true\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"32\" data-view-component=\"true\" class=\"octicon octicon-mark-github\">    <path d=\"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z\"></path></svg>      </a>      <div class=\"flex-1\">        <a href=\"/login?return_to=https%3A%2F%2Fgithub.com%2Fguidance-ai%2Fguidance\"          class=\"d-inline-block d-lg-none flex-order-1 f5 no-underline border color-border-default rounded-2 px-2 py-1 color-fg-inherit\"          data-hydro-click=\"{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/guidance-ai/guidance&quot;,&quot;user_id&quot;:null}}\" data-hydro-click-hmac=\"a936f70ebc53fd5d82504cb8c77d9c1f412c19a5e275b7c0fa01e4ece1a3223c\"          data-ga-click=\"(Logged out) Header, clicked Sign in, text:sign-in\">          Sign in        </a>      </div>      <div class=\"flex-1 flex-order-2 text-right\">        <button aria-label=\"Toggle navigation\" aria-expanded=\"false\" type=\"button\" data-view-component=\"true\" class=\"js-details-target Button--link Button--medium Button d-lg-none color-fg-inherit p-1\">  <span class=\"Button-content\">    <span class=\"Button-label\"><div class=\"HeaderMenu-toggle-bar rounded my-1\"></div>            <div class=\"HeaderMenu-toggle-bar rounded my-1\"></div>            <div class=\"HeaderMenu-toggle-bar rounded my-1\"></div></span>  </span></button>      </div>    </div>    <div class=\"HeaderMenu--logged-out p-responsive height-fit position-lg-relative d-lg-flex flex-column flex-auto pt-7 pb-4 top-0\">      <div class=\"header-menu-wrapper d-flex flex-column flex-self-end flex-lg-row flex-justify-between flex-auto p-3 p-lg-0 rounded rounded-lg-0 mt-3 mt-lg-0\">          <nav class=\"mt-0 px-3 px-lg-0 mb-3 mb-lg-0\" aria-label=\"Global\">            <ul class=\"d-lg-flex list-style-none\">                <li class=\"HeaderMenu-item position-relative flex-wrap flex-justify-between flex-items-center d-block d-lg-flex flex-lg-nowrap flex-lg-items-center js-details-container js-header-menu-item\">      <button type=\"button\" class=\"HeaderMenu-link border-0 width-full width-lg-auto px-0 px-lg-2 py-3 py-lg-2 no-wrap d-flex flex-items-center flex-justify-between js-details-target\" aria-expanded=\"false\">        Product        <svg opacity=\"0.5\" aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-chevron-down HeaderMenu-icon ml-1\">    <path d=\"M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z\"></path></svg>      </button>      <div class=\"HeaderMenu-dropdown dropdown-menu rounded m-0 p-0 py-2 py-lg-4 position-relative position-lg-absolute left-0 left-lg-n3 d-lg-flex dropdown-menu-wide\">          <div class=\"px-lg-4 border-lg-right mb-4 mb-lg-0 pr-lg-7\">            <ul class=\"list-style-none f5\" >                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center pb-lg-3\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Actions&quot;,&quot;label&quot;:&quot;ref_cta:Actions;&quot;}\" href=\"/features/actions\">      <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-workflow color-fg-subtle mr-3\">    <path d=\"M1 3a2 2 0 0 1 2-2h6.5a2 2 0 0 1 2 2v6.5a2 2 0 0 1-2 2H7v4.063C7 16.355 7.644 17 8.438 17H12.5v-2.5a2 2 0 0 1 2-2H21a2 2 0 0 1 2 2V21a2 2 0 0 1-2 2h-6.5a2 2 0 0 1-2-2v-2.5H8.437A2.939 2.939 0 0 1 5.5 15.562V11.5H3a2 2 0 0 1-2-2Zm2-.5a.5.5 0 0 0-.5.5v6.5a.5.5 0 0 0 .5.5h6.5a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5ZM14.5 14a.5.5 0 0 0-.5.5V21a.5.5 0 0 0 .5.5H21a.5.5 0 0 0 .5-.5v-6.5a.5.5 0 0 0-.5-.5Z\"></path></svg>      <div>        <div class=\"color-fg-default h4\">Actions</div>        Automate any workflow      </div>    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center pb-lg-3\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Packages&quot;,&quot;label&quot;:&quot;ref_cta:Packages;&quot;}\" href=\"/features/packages\">      <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-package color-fg-subtle mr-3\">    <path d=\"M12.876.64V.639l8.25 4.763c.541.313.875.89.875 1.515v9.525a1.75 1.75 0 0 1-.875 1.516l-8.25 4.762a1.748 1.748 0 0 1-1.75 0l-8.25-4.763a1.75 1.75 0 0 1-.875-1.515V6.917c0-.625.334-1.202.875-1.515L11.126.64a1.748 1.748 0 0 1 1.75 0Zm-1 1.298L4.251 6.34l7.75 4.474 7.75-4.474-7.625-4.402a.248.248 0 0 0-.25 0Zm.875 19.123 7.625-4.402a.25.25 0 0 0 .125-.216V7.639l-7.75 4.474ZM3.501 7.64v8.803c0 .09.048.172.125.216l7.625 4.402v-8.947Z\"></path></svg>      <div>        <div class=\"color-fg-default h4\">Packages</div>        Host and manage packages      </div>    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center pb-lg-3\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Security&quot;,&quot;label&quot;:&quot;ref_cta:Security;&quot;}\" href=\"/features/security\">      <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-shield-check color-fg-subtle mr-3\">    <path d=\"M16.53 9.78a.75.75 0 0 0-1.06-1.06L11 13.19l-1.97-1.97a.75.75 0 0 0-1.06 1.06l2.5 2.5a.75.75 0 0 0 1.06 0l5-5Z\"></path><path d=\"m12.54.637 8.25 2.675A1.75 1.75 0 0 1 22 4.976V10c0 6.19-3.771 10.704-9.401 12.83a1.704 1.704 0 0 1-1.198 0C5.77 20.705 2 16.19 2 10V4.976c0-.758.489-1.43 1.21-1.664L11.46.637a1.748 1.748 0 0 1 1.08 0Zm-.617 1.426-8.25 2.676a.249.249 0 0 0-.173.237V10c0 5.46 3.28 9.483 8.43 11.426a.199.199 0 0 0 .14 0C17.22 19.483 20.5 15.461 20.5 10V4.976a.25.25 0 0 0-.173-.237l-8.25-2.676a.253.253 0 0 0-.154 0Z\"></path></svg>      <div>        <div class=\"color-fg-default h4\">Security</div>        Find and fix vulnerabilities      </div>    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center pb-lg-3\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Codespaces&quot;,&quot;label&quot;:&quot;ref_cta:Codespaces;&quot;}\" href=\"/features/codespaces\">      <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-codespaces color-fg-subtle mr-3\">    <path d=\"M3.5 3.75C3.5 2.784 4.284 2 5.25 2h13.5c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0 1 18.75 13H5.25a1.75 1.75 0 0 1-1.75-1.75Zm-2 12c0-.966.784-1.75 1.75-1.75h17.5c.966 0 1.75.784 1.75 1.75v4a1.75 1.75 0 0 1-1.75 1.75H3.25a1.75 1.75 0 0 1-1.75-1.75ZM5.25 3.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h13.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Zm-2 12a.25.25 0 0 0-.25.25v4c0 .138.112.25.25.25h17.5a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25Z\"></path><path d=\"M10 17.75a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Zm-4 0a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Z\"></path></svg>      <div>        <div class=\"color-fg-default h4\">Codespaces</div>        Instant dev environments      </div>    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center pb-lg-3\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Copilot&quot;,&quot;label&quot;:&quot;ref_cta:Copilot;&quot;}\" href=\"/features/copilot\">      <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-copilot color-fg-subtle mr-3\">    <path d=\"M23.922 16.992c-.861 1.495-5.859 5.023-11.922 5.023-6.063 0-11.061-3.528-11.922-5.023A.641.641 0 0 1 0 16.736v-2.869a.841.841 0 0 1 .053-.22c.372-.935 1.347-2.292 2.605-2.656.167-.429.414-1.055.644-1.517a10.195 10.195 0 0 1-.052-1.086c0-1.331.282-2.499 1.132-3.368.397-.406.89-.717 1.474-.952 1.399-1.136 3.392-2.093 6.122-2.093 2.731 0 4.767.957 6.166 2.093.584.235 1.077.546 1.474.952.85.869 1.132 2.037 1.132 3.368 0 .368-.014.733-.052 1.086.23.462.477 1.088.644 1.517 1.258.364 2.233 1.721 2.605 2.656a.832.832 0 0 1 .053.22v2.869a.641.641 0 0 1-.078.256ZM12.172 11h-.344a4.323 4.323 0 0 1-.355.508C10.703 12.455 9.555 13 7.965 13c-1.725 0-2.989-.359-3.782-1.259a2.005 2.005 0 0 1-.085-.104L4 11.741v6.585c1.435.779 4.514 2.179 8 2.179 3.486 0 6.565-1.4 8-2.179v-6.585l-.098-.104s-.033.045-.085.104c-.793.9-2.057 1.259-3.782 1.259-1.59 0-2.738-.545-3.508-1.492a4.323 4.323 0 0 1-.355-.508h-.016.016Zm.641-2.935c.136 1.057.403 1.913.878 2.497.442.544 1.134.938 2.344.938 1.573 0 2.292-.337 2.657-.751.384-.435.558-1.15.558-2.361 0-1.14-.243-1.847-.705-2.319-.477-.488-1.319-.862-2.824-1.025-1.487-.161-2.192.138-2.533.529-.269.307-.437.808-.438 1.578v.021c0 .265.021.562.063.893Zm-1.626 0c.042-.331.063-.628.063-.894v-.02c-.001-.77-.169-1.271-.438-1.578-.341-.391-1.046-.69-2.533-.529-1.505.163-2.347.537-2.824 1.025-.462.472-.705 1.179-.705 2.319 0 1.211.175 1.926.558 2.361.365.414 1.084.751 2.657.751 1.21 0 1.902-.394 2.344-.938.475-.584.742-1.44.878-2.497Z\"></path><path d=\"M14.5 14.25a1 1 0 0 1 1 1v2a1 1 0 0 1-2 0v-2a1 1 0 0 1 1-1Zm-5 0a1 1 0 0 1 1 1v2a1 1 0 0 1-2 0v-2a1 1 0 0 1 1-1Z\"></path></svg>      <div>        <div class=\"color-fg-default h4\">Copilot</div>        Write better code with AI      </div>    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center pb-lg-3\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Code review&quot;,&quot;label&quot;:&quot;ref_cta:Code review;&quot;}\" href=\"/features/code-review\">      <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-code-review color-fg-subtle mr-3\">    <path d=\"M10.3 6.74a.75.75 0 0 1-.04 1.06l-2.908 2.7 2.908 2.7a.75.75 0 1 1-1.02 1.1l-3.5-3.25a.75.75 0 0 1 0-1.1l3.5-3.25a.75.75 0 0 1 1.06.04Zm3.44 1.06a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.908-2.7-2.908-2.7Z\"></path><path d=\"M1.5 4.25c0-.966.784-1.75 1.75-1.75h17.5c.966 0 1.75.784 1.75 1.75v12.5a1.75 1.75 0 0 1-1.75 1.75h-9.69l-3.573 3.573A1.458 1.458 0 0 1 5 21.043V18.5H3.25a1.75 1.75 0 0 1-1.75-1.75ZM3.25 4a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h2.5a.75.75 0 0 1 .75.75v3.19l3.72-3.72a.749.749 0 0 1 .53-.22h10a.25.25 0 0 0 .25-.25V4.25a.25.25 0 0 0-.25-.25Z\"></path></svg>      <div>        <div class=\"color-fg-default h4\">Code review</div>        Manage code changes      </div>    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center pb-lg-3\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Issues&quot;,&quot;label&quot;:&quot;ref_cta:Issues;&quot;}\" href=\"/features/issues\">      <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-issue-opened color-fg-subtle mr-3\">    <path d=\"M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Zm9.5 2a2 2 0 1 1-.001-3.999A2 2 0 0 1 12 14Z\"></path></svg>      <div>        <div class=\"color-fg-default h4\">Issues</div>        Plan and track work      </div>    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Discussions&quot;,&quot;label&quot;:&quot;ref_cta:Discussions;&quot;}\" href=\"/features/discussions\">      <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 24 24\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-comment-discussion color-fg-subtle mr-3\">    <path d=\"M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z\"></path><path d=\"M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z\"></path></svg>      <div>        <div class=\"color-fg-default h4\">Discussions</div>        Collaborate outside of code      </div>    </a></li>            </ul>          </div>          <div class=\"px-lg-4\">              <span class=\"d-block h4 color-fg-default my-1\" id=\"product-explore-heading\">Explore</span>            <ul class=\"list-style-none f5\" aria-labelledby=\"product-explore-heading\">                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to All features&quot;,&quot;label&quot;:&quot;ref_cta:All features;&quot;}\" href=\"/features\">      All features    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" target=\"_blank\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Documentation&quot;,&quot;label&quot;:&quot;ref_cta:Documentation;&quot;}\" href=\"https://docs.github.com\">      Documentation    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-link-external HeaderMenu-external-icon color-fg-subtle\">    <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path></svg></a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" target=\"_blank\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to GitHub Skills&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Skills;&quot;}\" href=\"https://skills.github.com/\">      GitHub Skills    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-link-external HeaderMenu-external-icon color-fg-subtle\">    <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path></svg></a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" target=\"_blank\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Product&quot;,&quot;action&quot;:&quot;click to go to Blog&quot;,&quot;label&quot;:&quot;ref_cta:Blog;&quot;}\" href=\"https://github.blog\">      Blog    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-link-external HeaderMenu-external-icon color-fg-subtle\">    <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path></svg></a></li>            </ul>          </div>      </div></li>                <li class=\"HeaderMenu-item position-relative flex-wrap flex-justify-between flex-items-center d-block d-lg-flex flex-lg-nowrap flex-lg-items-center js-details-container js-header-menu-item\">      <button type=\"button\" class=\"HeaderMenu-link border-0 width-full width-lg-auto px-0 px-lg-2 py-3 py-lg-2 no-wrap d-flex flex-items-center flex-justify-between js-details-target\" aria-expanded=\"false\">        Solutions        <svg opacity=\"0.5\" aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-chevron-down HeaderMenu-icon ml-1\">    <path d=\"M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z\"></path></svg>      </button>      <div class=\"HeaderMenu-dropdown dropdown-menu rounded m-0 p-0 py-2 py-lg-4 position-relative position-lg-absolute left-0 left-lg-n3 px-lg-4\">          <div class=\"border-bottom pb-3 mb-3\">              <span class=\"d-block h4 color-fg-default my-1\" id=\"solutions-for-heading\">For</span>            <ul class=\"list-style-none f5\" aria-labelledby=\"solutions-for-heading\">                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to Enterprise&quot;,&quot;label&quot;:&quot;ref_cta:Enterprise;&quot;}\" href=\"/enterprise\">      Enterprise    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to Teams&quot;,&quot;label&quot;:&quot;ref_cta:Teams;&quot;}\" href=\"/team\">      Teams    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to Startups&quot;,&quot;label&quot;:&quot;ref_cta:Startups;&quot;}\" href=\"/enterprise/startups\">      Startups    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" target=\"_blank\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to Education&quot;,&quot;label&quot;:&quot;ref_cta:Education;&quot;}\" href=\"https://education.github.com\">      Education    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-link-external HeaderMenu-external-icon color-fg-subtle\">    <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path></svg></a></li>            </ul>          </div>          <div class=\"border-bottom pb-3 mb-3\">              <span class=\"d-block h4 color-fg-default my-1\" id=\"solutions-by-solution-heading\">By Solution</span>            <ul class=\"list-style-none f5\" aria-labelledby=\"solutions-by-solution-heading\">                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to CI/CD &amp;amp; Automation&quot;,&quot;label&quot;:&quot;ref_cta:CI/CD &amp;amp; Automation;&quot;}\" href=\"/solutions/ci-cd/\">      CI/CD &amp; Automation    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to DevOps&quot;,&quot;label&quot;:&quot;ref_cta:DevOps;&quot;}\" href=\"/solutions/devops/\">      DevOps    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" target=\"_blank\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to DevSecOps&quot;,&quot;label&quot;:&quot;ref_cta:DevSecOps;&quot;}\" href=\"https://resources.github.com/devops/fundamentals/devsecops/\">      DevSecOps    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-link-external HeaderMenu-external-icon color-fg-subtle\">    <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path></svg></a></li>            </ul>          </div>          <div class=\"\">              <span class=\"d-block h4 color-fg-default my-1\" id=\"solutions-resources-heading\">Resources</span>            <ul class=\"list-style-none f5\" aria-labelledby=\"solutions-resources-heading\">                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" target=\"_blank\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to Learning Pathways&quot;,&quot;label&quot;:&quot;ref_cta:Learning Pathways;&quot;}\" href=\"https://resources.github.com/learn/pathways/\">      Learning Pathways    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-link-external HeaderMenu-external-icon color-fg-subtle\">    <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path></svg></a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" target=\"_blank\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to White papers, Ebooks, Webinars&quot;,&quot;label&quot;:&quot;ref_cta:White papers, Ebooks, Webinars;&quot;}\" href=\"https://resources.github.com/\">      White papers, Ebooks, Webinars    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-link-external HeaderMenu-external-icon color-fg-subtle\">    <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path></svg></a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to Customer Stories&quot;,&quot;label&quot;:&quot;ref_cta:Customer Stories;&quot;}\" href=\"/customer-stories\">      Customer Stories    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" target=\"_blank\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Solutions&quot;,&quot;action&quot;:&quot;click to go to Partners&quot;,&quot;label&quot;:&quot;ref_cta:Partners;&quot;}\" href=\"https://partner.github.com/\">      Partners    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-link-external HeaderMenu-external-icon color-fg-subtle\">    <path d=\"M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z\"></path></svg></a></li>            </ul>          </div>      </div></li>                <li class=\"HeaderMenu-item position-relative flex-wrap flex-justify-between flex-items-center d-block d-lg-flex flex-lg-nowrap flex-lg-items-center js-details-container js-header-menu-item\">      <button type=\"button\" class=\"HeaderMenu-link border-0 width-full width-lg-auto px-0 px-lg-2 py-3 py-lg-2 no-wrap d-flex flex-items-center flex-justify-between js-details-target\" aria-expanded=\"false\">        Open Source        <svg opacity=\"0.5\" aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-chevron-down HeaderMenu-icon ml-1\">    <path d=\"M12.78 5.22a.749.749 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.06 0L3.22 6.28a.749.749 0 1 1 1.06-1.06L8 8.939l3.72-3.719a.749.749 0 0 1 1.06 0Z\"></path></svg>      </button>      <div class=\"HeaderMenu-dropdown dropdown-menu rounded m-0 p-0 py-2 py-lg-4 position-relative position-lg-absolute left-0 left-lg-n3 px-lg-4\">          <div class=\"border-bottom pb-3 mb-3\">            <ul class=\"list-style-none f5\" >                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to GitHub Sponsors&quot;,&quot;label&quot;:&quot;ref_cta:GitHub Sponsors;&quot;}\" href=\"/sponsors\">            <div>        <div class=\"color-fg-default h4\">GitHub Sponsors</div>        Fund open source developers      </div>    </a></li>            </ul>          </div>          <div class=\"border-bottom pb-3 mb-3\">            <ul class=\"list-style-none f5\" >                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary d-flex flex-items-center\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to The ReadME Project&quot;,&quot;label&quot;:&quot;ref_cta:The ReadME Project;&quot;}\" href=\"/readme\">            <div>        <div class=\"color-fg-default h4\">The ReadME Project</div>        GitHub community articles      </div>    </a></li>            </ul>          </div>          <div class=\"\">              <span class=\"d-block h4 color-fg-default my-1\" id=\"open-source-repositories-heading\">Repositories</span>            <ul class=\"list-style-none f5\" aria-labelledby=\"open-source-repositories-heading\">                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to Topics&quot;,&quot;label&quot;:&quot;ref_cta:Topics;&quot;}\" href=\"/topics\">      Topics    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to Trending&quot;,&quot;label&quot;:&quot;ref_cta:Trending;&quot;}\" href=\"/trending\">      Trending    </a></li>                <li>  <a class=\"HeaderMenu-dropdown-link lh-condensed d-block no-underline position-relative py-2 Link--secondary\" data-analytics-event=\"{&quot;category&quot;:&quot;Header dropdown (logged out), Open Source&quot;,&quot;action&quot;:&quot;click to go to Collections&quot;,&quot;label&quot;:&quot;ref_cta:Collections;&quot;}\" href=\"/collections\">      Collections    </a></li>            </ul>          </div>      </div></li>                <li class=\"HeaderMenu-item position-relative flex-wrap flex-justify-between flex-items-center d-block d-lg-flex flex-lg-nowrap flex-lg-items-center js-details-container js-header-menu-item\">    <a class=\"HeaderMenu-link no-underline px-0 px-lg-2 py-3 py-lg-2 d-block d-lg-inline-block\" data-analytics-event=\"{&quot;category&quot;:&quot;Header menu top item (logged out)&quot;,&quot;action&quot;:&quot;click to go to Pricing&quot;,&quot;label&quot;:&quot;ref_cta:Pricing;&quot;}\" href=\"/pricing\">Pricing</a></li>            </ul>          </nav>        <div class=\"d-lg-flex flex-items-center mb-3 mb-lg-0 text-center text-lg-left ml-3\" style=\"\">                <qbsearch-input class=\"search-input\" data-scope=\"repo:guidance-ai/guidance\" data-custom-scopes-path=\"/search/custom_scopes\" data-delete-custom-scopes-csrf=\"IlzH9h4YifC20IHOadJl5nQtSnJ9615kzz7c9WYHYNMykRjim0z8gr2SpcTScqWfDxYGj50vTfOnKyd6nk4_tg\" data-max-custom-scopes=\"10\" data-header-redesign-enabled=\"false\" data-initial-value=\"\" data-blackbird-suggestions-path=\"/search/suggestions\" data-jump-to-suggestions-path=\"/_graphql/GetSuggestedNavigationDestinations\" data-current-repository=\"guidance-ai/guidance\" data-current-org=\"guidance-ai\" data-current-owner=\"\" data-logged-in=\"false\" data-copilot-chat-enabled=\"false\" data-blackbird-indexed-repo-csrf=\"<esi:include src=&quot;/_esi/rails_csrf_token_form_hidden?r=yCnjtKcis3sWGW5I8%2BA4wUwwK%2Fl9YNQ0WjQkwhK7Sy6pGs0mqVyw1cJ3ujdvmyM9%2B58wiUGZkkjVflmRO52RY9hTiUKY%2Bum3EndTQbVYqopBo9a1IncGLryKUdmaUOn1G%2FFNxT4voLJCbBKhXsRt5Ehzw8X%2Fa1KK9jMvg%2FYqXs%2BlppWEZgLnf3UMt3ZtAfypOl6DUHEZn9X42F9k7Joc6WrbhdzfISWl%2FXve3mNRBvn3o8ntpLHE9F71ObAJwndrNW5InVucetw8PbslxiZboQlv5cJBvM93xcRLV952dzTXWmPARC00bX49dT401LagKRn5l7bf6QJRIjD6Sd3HTSxAHMwkS0U7pmL%2Fgll6xHpAbVAQ4UUeHwJWiSVP6FP8BEsUA%2FSrJTz0LfIe2B7VPADy2zN7coimKZFE8R9g7lUZ1dysh2Uc84Wsanp5AeT3rSRsLT3MTUMZKzxoOEEPYEyungU0F70Ok%2B0Mf0gtbAHpbYg7kh6wBo1LpWJffJ5R%2BVzC%2B6%2FHTzNDR16SZvrkBuL%2F--ZqHUvVbtjKcb5Dr1--FcYt0BtQbCZXzKm5kUE6dg%3D%3D&quot; />\">  <div    class=\"search-input-container search-with-dialog position-relative d-flex flex-row flex-items-center mr-4 rounded\"    data-action=\"click:qbsearch-input#searchInputContainerClicked\"  >      <button        type=\"button\"        class=\"header-search-button placeholder  input-button form-control d-flex flex-1 flex-self-stretch flex-items-center no-wrap width-full py-0 pl-2 pr-0 text-left border-0 box-shadow-none\"        data-target=\"qbsearch-input.inputButton\"        placeholder=\"Search or jump to...\"        data-hotkey=s,/        autocapitalize=\"off\"        data-action=\"click:qbsearch-input#handleExpand\"      >        <div class=\"mr-2 color-fg-muted\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-search\">    <path d=\"M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z\"></path></svg>        </div>        <span class=\"flex-1\" data-target=\"qbsearch-input.inputButtonText\">Search or jump to...</span>          <div class=\"d-flex\" data-target=\"qbsearch-input.hotkeyIndicator\">            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"22\" height=\"20\" aria-hidden=\"true\" class=\"mr-1\"><path fill=\"none\" stroke=\"#979A9C\" opacity=\".4\" d=\"M3.5.5h12c1.7 0 3 1.3 3 3v13c0 1.7-1.3 3-3 3h-12c-1.7 0-3-1.3-3-3v-13c0-1.7 1.3-3 3-3z\"></path><path fill=\"#979A9C\" d=\"M11.8 6L8 15.1h-.9L10.8 6h1z\"></path></svg>          </div>      </button>    <input type=\"hidden\" name=\"type\" class=\"js-site-search-type-field\">    <div class=\"Overlay--hidden \" data-modal-dialog-overlay>  <modal-dialog data-action=\"close:qbsearch-input#handleClose cancel:qbsearch-input#handleClose\" data-target=\"qbsearch-input.searchSuggestionsDialog\" role=\"dialog\" id=\"search-suggestions-dialog\" aria-modal=\"true\" aria-labelledby=\"search-suggestions-dialog-header\" data-view-component=\"true\" class=\"Overlay Overlay--width-large Overlay--height-auto\">      <h1 id=\"search-suggestions-dialog-header\" class=\"sr-only\">Search code, repositories, users, issues, pull requests...</h1>    <div class=\"Overlay-body Overlay-body--paddingNone\">                <div data-view-component=\"true\">        <div class=\"search-suggestions position-fixed width-full color-shadow-large border color-fg-default color-bg-default overflow-hidden d-flex flex-column query-builder-container\"          style=\"border-radius: 12px;\"          data-target=\"qbsearch-input.queryBuilderContainer\"          hidden        >          <!-- '\"` --><!-- </textarea></xmp> --></option></form><form id=\"query-builder-test-form\" action=\"\" accept-charset=\"UTF-8\" method=\"get\">  <query-builder data-target=\"qbsearch-input.queryBuilder\" id=\"query-builder-query-builder-test\" data-filter-key=\":\" data-view-component=\"true\" class=\"QueryBuilder search-query-builder\">    <div class=\"FormControl FormControl--fullWidth\">      <label id=\"query-builder-test-label\" for=\"query-builder-test\" class=\"FormControl-label sr-only\">        Search      </label>      <div        class=\"QueryBuilder-StyledInput width-fit \"        data-target=\"query-builder.styledInput\"      >          <span id=\"query-builder-test-leadingvisual-wrap\" class=\"FormControl-input-leadingVisualWrap QueryBuilder-leadingVisualWrap\">            <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-search FormControl-input-leadingVisual\">    <path d=\"M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z\"></path></svg>          </span>        <div data-target=\"query-builder.styledInputContainer\" class=\"QueryBuilder-StyledInputContainer\">          <div            aria-hidden=\"true\"            class=\"QueryBuilder-StyledInputContent\"            data-target=\"query-builder.styledInputContent\"          ></div>          <div class=\"QueryBuilder-InputWrapper\">            <div aria-hidden=\"true\" class=\"QueryBuilder-Sizer\" data-target=\"query-builder.sizer\"></div>            <input id=\"query-builder-test\" name=\"query-builder-test\" value=\"\" autocomplete=\"off\" type=\"text\" role=\"combobox\" spellcheck=\"false\" aria-expanded=\"false\" aria-describedby=\"validation-231b5b0f-8e94-478a-8e7f-3297e48cd1c1\" data-target=\"query-builder.input\" data-action=\"          input:query-builder#inputChange          blur:query-builder#inputBlur          keydown:query-builder#inputKeydown          focus:query-builder#inputFocus        \" data-view-component=\"true\" class=\"FormControl-input QueryBuilder-Input FormControl-medium\" />          </div>        </div>          <span class=\"sr-only\" id=\"query-builder-test-clear\">Clear</span>          <button role=\"button\" id=\"query-builder-test-clear-button\" aria-labelledby=\"query-builder-test-clear query-builder-test-label\" data-target=\"query-builder.clearButton\" data-action=\"                click:query-builder#clear                focus:query-builder#clearButtonFocus                blur:query-builder#clearButtonBlur              \" variant=\"small\" hidden=\"hidden\" type=\"button\" data-view-component=\"true\" class=\"Button Button--iconOnly Button--invisible Button--medium mr-1 px-2 py-0 d-flex flex-items-center rounded-1 color-fg-muted\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-x-circle-fill Button-visual\">    <path d=\"M2.343 13.657A8 8 0 1 1 13.658 2.343 8 8 0 0 1 2.343 13.657ZM6.03 4.97a.751.751 0 0 0-1.042.018.751.751 0 0 0-.018 1.042L6.94 8 4.97 9.97a.749.749 0 0 0 .326 1.275.749.749 0 0 0 .734-.215L8 9.06l1.97 1.97a.749.749 0 0 0 1.275-.326.749.749 0 0 0-.215-.734L9.06 8l1.97-1.97a.749.749 0 0 0-.326-1.275.749.749 0 0 0-.734.215L8 6.94Z\"></path></svg></button>      </div>      <template id=\"search-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-search\">    <path d=\"M10.68 11.74a6 6 0 0 1-7.922-8.982 6 6 0 0 1 8.982 7.922l3.04 3.04a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215ZM11.5 7a4.499 4.499 0 1 0-8.997 0A4.499 4.499 0 0 0 11.5 7Z\"></path></svg></template><template id=\"code-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-code\">    <path d=\"m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z\"></path></svg></template><template id=\"file-code-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-file-code\">    <path d=\"M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0 1 14.25 15h-9a.75.75 0 0 1 0-1.5h9a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 10 4.25V1.5H5.75a.25.25 0 0 0-.25.25v2.5a.75.75 0 0 1-1.5 0Zm1.72 4.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.47-1.47-1.47-1.47a.75.75 0 0 1 0-1.06ZM3.28 7.78 1.81 9.25l1.47 1.47a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-2-2a.75.75 0 0 1 0-1.06l2-2a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Zm8.22-6.218V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg></template><template id=\"history-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-history\">    <path d=\"m.427 1.927 1.215 1.215a8.002 8.002 0 1 1-1.6 5.685.75.75 0 1 1 1.493-.154 6.5 6.5 0 1 0 1.18-4.458l1.358 1.358A.25.25 0 0 1 3.896 6H.25A.25.25 0 0 1 0 5.75V2.104a.25.25 0 0 1 .427-.177ZM7.75 4a.75.75 0 0 1 .75.75v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5A.75.75 0 0 1 7.75 4Z\"></path></svg></template><template id=\"repo-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-repo\">    <path d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z\"></path></svg></template><template id=\"bookmark-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-bookmark\">    <path d=\"M3 2.75C3 1.784 3.784 1 4.75 1h6.5c.966 0 1.75.784 1.75 1.75v11.5a.75.75 0 0 1-1.227.579L8 11.722l-3.773 3.107A.751.751 0 0 1 3 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.91l3.023-2.489a.75.75 0 0 1 .954 0l3.023 2.49V2.75a.25.25 0 0 0-.25-.25Z\"></path></svg></template><template id=\"plus-circle-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-plus-circle\">    <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7.25-3.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z\"></path></svg></template><template id=\"circle-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-dot-fill\">    <path d=\"M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"></path></svg></template><template id=\"trash-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-trash\">    <path d=\"M11 1.75V3h2.25a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1 0-1.5H5V1.75C5 .784 5.784 0 6.75 0h2.5C10.216 0 11 .784 11 1.75ZM4.496 6.675l.66 6.6a.25.25 0 0 0 .249.225h5.19a.25.25 0 0 0 .249-.225l.66-6.6a.75.75 0 0 1 1.492.149l-.66 6.6A1.748 1.748 0 0 1 10.595 15h-5.19a1.75 1.75 0 0 1-1.741-1.575l-.66-6.6a.75.75 0 1 1 1.492-.15ZM6.5 1.75V3h3V1.75a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25Z\"></path></svg></template><template id=\"team-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-people\">    <path d=\"M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4 4 0 0 0-7.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a3.001 3.001 0 0 1 2.22 5.018 5.01 5.01 0 0 1 2.56 3.012.749.749 0 0 1-.885.954.752.752 0 0 1-.549-.514 3.507 3.507 0 0 0-2.522-2.372.75.75 0 0 1-.574-.73v-.352a.75.75 0 0 1 .416-.672A1.5 1.5 0 0 0 11 5.5.75.75 0 0 1 11 4Zm-5.5-.5a2 2 0 1 0-.001 3.999A2 2 0 0 0 5.5 3.5Z\"></path></svg></template><template id=\"project-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-project\">    <path d=\"M1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0ZM1.5 1.75v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25ZM11.75 3a.75.75 0 0 1 .75.75v7.5a.75.75 0 0 1-1.5 0v-7.5a.75.75 0 0 1 .75-.75Zm-8.25.75a.75.75 0 0 1 1.5 0v5.5a.75.75 0 0 1-1.5 0ZM8 3a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 3Z\"></path></svg></template><template id=\"pencil-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-pencil\">    <path d=\"M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-8.61 8.61c-.21.21-.47.364-.756.445l-3.251.93a.75.75 0 0 1-.927-.928l.929-3.25c.081-.286.235-.547.445-.758l8.61-8.61Zm.176 4.823L9.75 4.81l-6.286 6.287a.253.253 0 0 0-.064.108l-.558 1.953 1.953-.558a.253.253 0 0 0 .108-.064Zm1.238-3.763a.25.25 0 0 0-.354 0L10.811 3.75l1.439 1.44 1.263-1.263a.25.25 0 0 0 0-.354Z\"></path></svg></template><template id=\"copilot-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-copilot\">    <path d=\"M7.998 15.035c-4.562 0-7.873-2.914-7.998-3.749V9.338c.085-.628.677-1.686 1.588-2.065.013-.07.024-.143.036-.218.029-.183.06-.384.126-.612-.201-.508-.254-1.084-.254-1.656 0-.87.128-1.769.693-2.484.579-.733 1.494-1.124 2.724-1.261 1.206-.134 2.262.034 2.944.765.05.053.096.108.139.165.044-.057.094-.112.143-.165.682-.731 1.738-.899 2.944-.765 1.23.137 2.145.528 2.724 1.261.566.715.693 1.614.693 2.484 0 .572-.053 1.148-.254 1.656.066.228.098.429.126.612.012.076.024.148.037.218.924.385 1.522 1.471 1.591 2.095v1.872c0 .766-3.351 3.795-8.002 3.795Zm0-1.485c2.28 0 4.584-1.11 5.002-1.433V7.862l-.023-.116c-.49.21-1.075.291-1.727.291-1.146 0-2.059-.327-2.71-.991A3.222 3.222 0 0 1 8 6.303a3.24 3.24 0 0 1-.544.743c-.65.664-1.563.991-2.71.991-.652 0-1.236-.081-1.727-.291l-.023.116v4.255c.419.323 2.722 1.433 5.002 1.433ZM6.762 2.83c-.193-.206-.637-.413-1.682-.297-1.019.113-1.479.404-1.713.7-.247.312-.369.789-.369 1.554 0 .793.129 1.171.308 1.371.162.181.519.379 1.442.379.853 0 1.339-.235 1.638-.54.315-.322.527-.827.617-1.553.117-.935-.037-1.395-.241-1.614Zm4.155-.297c-1.044-.116-1.488.091-1.681.297-.204.219-.359.679-.242 1.614.091.726.303 1.231.618 1.553.299.305.784.54 1.638.54.922 0 1.28-.198 1.442-.379.179-.2.308-.578.308-1.371 0-.765-.123-1.242-.37-1.554-.233-.296-.693-.587-1.713-.7Z\"></path><path d=\"M6.25 9.037a.75.75 0 0 1 .75.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 .75-.75Zm4.25.75v1.501a.75.75 0 0 1-1.5 0V9.787a.75.75 0 0 1 1.5 0Z\"></path></svg></template><template id=\"workflow-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-workflow\">    <path d=\"M0 1.75C0 .784.784 0 1.75 0h3.5C6.216 0 7 .784 7 1.75v3.5A1.75 1.75 0 0 1 5.25 7H4v4a1 1 0 0 0 1 1h4v-1.25C9 9.784 9.784 9 10.75 9h3.5c.966 0 1.75.784 1.75 1.75v3.5A1.75 1.75 0 0 1 14.25 16h-3.5A1.75 1.75 0 0 1 9 14.25v-.75H5A2.5 2.5 0 0 1 2.5 11V7h-.75A1.75 1.75 0 0 1 0 5.25Zm1.75-.25a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25Zm9 9a.25.25 0 0 0-.25.25v3.5c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-3.5a.25.25 0 0 0-.25-.25Z\"></path></svg></template><template id=\"book-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-book\">    <path d=\"M0 1.75A.75.75 0 0 1 .75 1h4.253c1.227 0 2.317.59 3 1.501A3.743 3.743 0 0 1 11.006 1h4.245a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-4.507a2.25 2.25 0 0 0-1.591.659l-.622.621a.75.75 0 0 1-1.06 0l-.622-.621A2.25 2.25 0 0 0 5.258 13H.75a.75.75 0 0 1-.75-.75Zm7.251 10.324.004-5.073-.002-2.253A2.25 2.25 0 0 0 5.003 2.5H1.5v9h3.757a3.75 3.75 0 0 1 1.994.574ZM8.755 4.75l-.004 7.322a3.752 3.752 0 0 1 1.992-.572H14.5v-9h-3.495a2.25 2.25 0 0 0-2.25 2.25Z\"></path></svg></template><template id=\"code-review-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-code-review\">    <path d=\"M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 13H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25v-8.5C0 1.784.784 1 1.75 1ZM1.5 2.75v8.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Zm5.28 1.72a.75.75 0 0 1 0 1.06L5.31 7l1.47 1.47a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-2-2a.75.75 0 0 1 0-1.06l2-2a.75.75 0 0 1 1.06 0Zm2.44 0a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L10.69 7 9.22 5.53a.75.75 0 0 1 0-1.06Z\"></path></svg></template><template id=\"codespaces-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-codespaces\">    <path d=\"M0 11.25c0-.966.784-1.75 1.75-1.75h12.5c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm2-9.5C2 .784 2.784 0 3.75 0h8.5C13.216 0 14 .784 14 1.75v5a1.75 1.75 0 0 1-1.75 1.75h-8.5A1.75 1.75 0 0 1 2 6.75Zm1.75-.25a.25.25 0 0 0-.25.25v5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-5a.25.25 0 0 0-.25-.25Zm-2 9.5a.25.25 0 0 0-.25.25v3c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-3a.25.25 0 0 0-.25-.25Z\"></path><path d=\"M7 12.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Zm-4 0a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Z\"></path></svg></template><template id=\"comment-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-comment\">    <path d=\"M1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0 1 13.25 12H9.06l-2.573 2.573A1.458 1.458 0 0 1 4 13.543V12H2.75A1.75 1.75 0 0 1 1 10.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h4.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z\"></path></svg></template><template id=\"comment-discussion-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-comment-discussion\">    <path d=\"M1.75 1h8.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 10.25 10H7.061l-2.574 2.573A1.458 1.458 0 0 1 2 11.543V10h-.25A1.75 1.75 0 0 1 0 8.25v-5.5C0 1.784.784 1 1.75 1ZM1.5 2.75v5.5c0 .138.112.25.25.25h1a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h3.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13 2a.25.25 0 0 0-.25-.25h-.5a.75.75 0 0 1 0-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 14.25 12H14v1.543a1.458 1.458 0 0 1-2.487 1.03L9.22 12.28a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l2.22 2.22v-2.19a.75.75 0 0 1 .75-.75h1a.25.25 0 0 0 .25-.25Z\"></path></svg></template><template id=\"organization-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-organization\">    <path d=\"M1.75 16A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0h8.5C11.216 0 12 .784 12 1.75v12.5c0 .085-.006.168-.018.25h2.268a.25.25 0 0 0 .25-.25V8.285a.25.25 0 0 0-.111-.208l-1.055-.703a.749.749 0 1 1 .832-1.248l1.055.703c.487.325.779.871.779 1.456v5.965A1.75 1.75 0 0 1 14.25 16h-3.5a.766.766 0 0 1-.197-.026c-.099.017-.2.026-.303.026h-3a.75.75 0 0 1-.75-.75V14h-1v1.25a.75.75 0 0 1-.75.75Zm-.25-1.75c0 .138.112.25.25.25H4v-1.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 .75.75v1.25h2.25a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25ZM3.75 6h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM3 3.75A.75.75 0 0 1 3.75 3h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 3.75Zm4 3A.75.75 0 0 1 7.75 6h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 7 6.75ZM7.75 3h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5ZM3 9.75A.75.75 0 0 1 3.75 9h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 9.75ZM7.75 9h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Z\"></path></svg></template><template id=\"rocket-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-rocket\">    <path d=\"M14.064 0h.186C15.216 0 16 .784 16 1.75v.186a8.752 8.752 0 0 1-2.564 6.186l-.458.459c-.314.314-.641.616-.979.904v3.207c0 .608-.315 1.172-.833 1.49l-2.774 1.707a.749.749 0 0 1-1.11-.418l-.954-3.102a1.214 1.214 0 0 1-.145-.125L3.754 9.816a1.218 1.218 0 0 1-.124-.145L.528 8.717a.749.749 0 0 1-.418-1.11l1.71-2.774A1.748 1.748 0 0 1 3.31 4h3.204c.288-.338.59-.665.904-.979l.459-.458A8.749 8.749 0 0 1 14.064 0ZM8.938 3.623h-.002l-.458.458c-.76.76-1.437 1.598-2.02 2.5l-1.5 2.317 2.143 2.143 2.317-1.5c.902-.583 1.74-1.26 2.499-2.02l.459-.458a7.25 7.25 0 0 0 2.123-5.127V1.75a.25.25 0 0 0-.25-.25h-.186a7.249 7.249 0 0 0-5.125 2.123ZM3.56 14.56c-.732.732-2.334 1.045-3.005 1.148a.234.234 0 0 1-.201-.064.234.234 0 0 1-.064-.201c.103-.671.416-2.273 1.15-3.003a1.502 1.502 0 1 1 2.12 2.12Zm6.94-3.935c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 0 0 .119-.213ZM3.678 8.116 5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 0 0-.213.119l-1.2 1.95ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path></svg></template><template id=\"shield-check-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-shield-check\">    <path d=\"m8.533.133 5.25 1.68A1.75 1.75 0 0 1 15 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.697 1.697 0 0 1-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 0 1 1.217-1.667l5.25-1.68a1.748 1.748 0 0 1 1.066 0Zm-.61 1.429.001.001-5.25 1.68a.251.251 0 0 0-.174.237V7c0 1.36.275 2.666 1.057 3.859.784 1.194 2.121 2.342 4.366 3.298a.196.196 0 0 0 .154 0c2.245-.957 3.582-2.103 4.366-3.297C13.225 9.666 13.5 8.358 13.5 7V3.48a.25.25 0 0 0-.174-.238l-5.25-1.68a.25.25 0 0 0-.153 0ZM11.28 6.28l-3.5 3.5a.75.75 0 0 1-1.06 0l-1.5-1.5a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l.97.97 2.97-2.97a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z\"></path></svg></template><template id=\"heart-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-heart\">    <path d=\"m8 14.25.345.666a.75.75 0 0 1-.69 0l-.008-.004-.018-.01a7.152 7.152 0 0 1-.31-.17 22.055 22.055 0 0 1-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.066 22.066 0 0 1-3.744 2.584l-.018.01-.006.003h-.002ZM4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.58 20.58 0 0 0 8 13.393a20.58 20.58 0 0 0 3.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.749.749 0 0 1-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5Z\"></path></svg></template><template id=\"server-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-server\">    <path d=\"M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v4c0 .372-.116.717-.314 1 .198.283.314.628.314 1v4a1.75 1.75 0 0 1-1.75 1.75H1.75A1.75 1.75 0 0 1 0 12.75v-4c0-.358.109-.707.314-1a1.739 1.739 0 0 1-.314-1v-4C0 1.784.784 1 1.75 1ZM1.5 2.75v4c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Zm.25 5.75a.25.25 0 0 0-.25.25v4c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-4a.25.25 0 0 0-.25-.25ZM7 4.75A.75.75 0 0 1 7.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5A.75.75 0 0 1 7 4.75ZM7.75 10h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM3 4.75A.75.75 0 0 1 3.75 4h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 3 4.75ZM3.75 10h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1 0-1.5Z\"></path></svg></template><template id=\"globe-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-globe\">    <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM5.78 8.75a9.64 9.64 0 0 0 1.363 4.177c.255.426.542.832.857 1.215.245-.296.551-.705.857-1.215A9.64 9.64 0 0 0 10.22 8.75Zm4.44-1.5a9.64 9.64 0 0 0-1.363-4.177c-.307-.51-.612-.919-.857-1.215a9.927 9.927 0 0 0-.857 1.215A9.64 9.64 0 0 0 5.78 7.25Zm-5.944 1.5H1.543a6.507 6.507 0 0 0 4.666 5.5c-.123-.181-.24-.365-.352-.552-.715-1.192-1.437-2.874-1.581-4.948Zm-2.733-1.5h2.733c.144-2.074.866-3.756 1.58-4.948.12-.197.237-.381.353-.552a6.507 6.507 0 0 0-4.666 5.5Zm10.181 1.5c-.144 2.074-.866 3.756-1.58 4.948-.12.197-.237.381-.353.552a6.507 6.507 0 0 0 4.666-5.5Zm2.733-1.5a6.507 6.507 0 0 0-4.666-5.5c.123.181.24.365.353.552.714 1.192 1.436 2.874 1.58 4.948Z\"></path></svg></template><template id=\"issue-opened-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-issue-opened\">    <path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\"></path><path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z\"></path></svg></template><template id=\"device-mobile-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-device-mobile\">    <path d=\"M3.75 0h8.5C13.216 0 14 .784 14 1.75v12.5A1.75 1.75 0 0 1 12.25 16h-8.5A1.75 1.75 0 0 1 2 14.25V1.75C2 .784 2.784 0 3.75 0ZM3.5 1.75v12.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25ZM8 13a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\"></path></svg></template><template id=\"package-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-package\">    <path d=\"m8.878.392 5.25 3.045c.54.314.872.89.872 1.514v6.098a1.75 1.75 0 0 1-.872 1.514l-5.25 3.045a1.75 1.75 0 0 1-1.756 0l-5.25-3.045A1.75 1.75 0 0 1 1 11.049V4.951c0-.624.332-1.201.872-1.514L7.122.392a1.75 1.75 0 0 1 1.756 0ZM7.875 1.69l-4.63 2.685L8 7.133l4.755-2.758-4.63-2.685a.248.248 0 0 0-.25 0ZM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432Zm6.25 8.271 4.625-2.683a.25.25 0 0 0 .125-.216V5.677L8.75 8.432Z\"></path></svg></template><template id=\"credit-card-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-credit-card\">    <path d=\"M10.75 9a.75.75 0 0 0 0 1.5h1.5a.75.75 0 0 0 0-1.5h-1.5Z\"></path><path d=\"M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25ZM14.5 6.5h-13v5.75c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25Zm0-2.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25V5h13Z\"></path></svg></template><template id=\"play-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-play\">    <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z\"></path></svg></template><template id=\"gift-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-gift\">    <path d=\"M2 2.75A2.75 2.75 0 0 1 4.75 0c.983 0 1.873.42 2.57 1.232.268.318.497.668.68 1.042.183-.375.411-.725.68-1.044C9.376.42 10.266 0 11.25 0a2.75 2.75 0 0 1 2.45 4h.55c.966 0 1.75.784 1.75 1.75v2c0 .698-.409 1.301-1 1.582v4.918A1.75 1.75 0 0 1 13.25 16H2.75A1.75 1.75 0 0 1 1 14.25V9.332C.409 9.05 0 8.448 0 7.75v-2C0 4.784.784 4 1.75 4h.55c-.192-.375-.3-.8-.3-1.25ZM7.25 9.5H2.5v4.75c0 .138.112.25.25.25h4.5Zm1.5 0v5h4.5a.25.25 0 0 0 .25-.25V9.5Zm0-4V8h5.5a.25.25 0 0 0 .25-.25v-2a.25.25 0 0 0-.25-.25Zm-7 0a.25.25 0 0 0-.25.25v2c0 .138.112.25.25.25h5.5V5.5h-5.5Zm3-4a1.25 1.25 0 0 0 0 2.5h2.309c-.233-.818-.542-1.401-.878-1.793-.43-.502-.915-.707-1.431-.707ZM8.941 4h2.309a1.25 1.25 0 0 0 0-2.5c-.516 0-1 .205-1.43.707-.337.392-.646.975-.879 1.793Z\"></path></svg></template><template id=\"code-square-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-code-square\">    <path d=\"M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25Zm7.47 3.97a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L10.69 8 9.22 6.53a.75.75 0 0 1 0-1.06ZM6.78 6.53 5.31 8l1.47 1.47a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215l-2-2a.75.75 0 0 1 0-1.06l2-2a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z\"></path></svg></template><template id=\"device-desktop-icon\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-device-desktop\">    <path d=\"M14.25 1c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0 1 14.25 12h-3.727c.099 1.041.52 1.872 1.292 2.757A.752.752 0 0 1 11.25 16h-6.5a.75.75 0 0 1-.565-1.243c.772-.885 1.192-1.716 1.292-2.757H1.75A1.75 1.75 0 0 1 0 10.25v-7.5C0 1.784.784 1 1.75 1ZM1.75 2.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25ZM9.018 12H6.982a5.72 5.72 0 0 1-.765 2.5h3.566a5.72 5.72 0 0 1-.765-2.5Z\"></path></svg></template>        <div class=\"position-relative\">                <ul                  role=\"listbox\"                  class=\"ActionListWrap QueryBuilder-ListWrap\"                  aria-label=\"Suggestions\"                  data-action=\"                    combobox-commit:query-builder#comboboxCommit                    mousedown:query-builder#resultsMousedown                  \"                  data-target=\"query-builder.resultsList\"                  data-persist-list=false                  id=\"query-builder-test-results\"                ></ul>        </div>      <div class=\"FormControl-inlineValidation\" id=\"validation-231b5b0f-8e94-478a-8e7f-3297e48cd1c1\" hidden=\"hidden\">        <span class=\"FormControl-inlineValidation--visual\">          <svg aria-hidden=\"true\" height=\"12\" viewBox=\"0 0 12 12\" version=\"1.1\" width=\"12\" data-view-component=\"true\" class=\"octicon octicon-alert-fill\">    <path d=\"M4.855.708c.5-.896 1.79-.896 2.29 0l4.675 8.351a1.312 1.312 0 0 1-1.146 1.954H1.33A1.313 1.313 0 0 1 .183 9.058ZM7 7V3H5v4Zm-1 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\"></path></svg>        </span>        <span></span></div>    </div>    <div data-target=\"query-builder.screenReaderFeedback\" aria-live=\"polite\" aria-atomic=\"true\" class=\"sr-only\"></div></query-builder></form>          <div class=\"d-flex flex-row color-fg-muted px-3 text-small color-bg-default search-feedback-prompt\">            <a target=\"_blank\" href=\"https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax\" data-view-component=\"true\" class=\"Link color-fg-accent text-normal ml-2\">              Search syntax tips</a>            <div class=\"d-flex flex-1\"></div>          </div>        </div></div>    </div></modal-dialog></div>  </div>  <div data-action=\"click:qbsearch-input#retract\" class=\"dark-backdrop position-fixed\" hidden data-target=\"qbsearch-input.darkBackdrop\"></div>  <div class=\"color-fg-default\">    <dialog-helper>  <dialog data-target=\"qbsearch-input.feedbackDialog\" data-action=\"close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose\" id=\"feedback-dialog\" aria-modal=\"true\" aria-labelledby=\"feedback-dialog-title\" aria-describedby=\"feedback-dialog-description\" data-view-component=\"true\" class=\"Overlay Overlay-whenNarrow Overlay--size-medium Overlay--motion-scaleFade\">    <div data-view-component=\"true\" class=\"Overlay-header\">  <div class=\"Overlay-headerContentWrap\">    <div class=\"Overlay-titleWrap\">      <h1 class=\"Overlay-title \" id=\"feedback-dialog-title\">        Provide feedback      </h1>    </div>    <div class=\"Overlay-actionWrap\">      <button data-close-dialog-id=\"feedback-dialog\" aria-label=\"Close\" type=\"button\" data-view-component=\"true\" class=\"close-button Overlay-closeButton\"><svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-x\">    <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path></svg></button>    </div>  </div></div>      <scrollable-region data-labelled-by=\"feedback-dialog-title\">        <div data-view-component=\"true\" class=\"Overlay-body\">        <!-- '\"` --><!-- </textarea></xmp> --></option></form><form id=\"code-search-feedback-form\" data-turbo=\"false\" action=\"/search/feedback\" accept-charset=\"UTF-8\" method=\"post\"><input type=\"hidden\" data-csrf=\"true\" name=\"authenticity_token\" value=\"eLUd8rOM31WD+CQoSYrrDuACwp2P/ic+42m5JhYQOzKeQJvsopXtyY3MDiPUdixPw1n/C54rag6nQsKX5Ejfpg==\" />          <p>We read every piece of feedback, and take your input very seriously.</p>          <textarea name=\"feedback\" class=\"form-control width-full mb-2\" style=\"height: 120px\" id=\"feedback\"></textarea>          <input name=\"include_email\" id=\"include_email\" aria-label=\"Include my email address so I can be contacted\" class=\"form-control mr-2\" type=\"checkbox\">          <label for=\"include_email\" style=\"font-weight: normal\">Include my email address so I can be contacted</label></form></div>      </scrollable-region>      <div data-view-component=\"true\" class=\"Overlay-footer Overlay-footer--alignEnd\">          <button data-close-dialog-id=\"feedback-dialog\" type=\"button\" data-view-component=\"true\" class=\"btn\">    Cancel</button>          <button form=\"code-search-feedback-form\" data-action=\"click:qbsearch-input#submitFeedback\" type=\"submit\" data-view-component=\"true\" class=\"btn-primary btn\">    Submit feedback</button></div></dialog></dialog-helper>    <custom-scopes data-target=\"qbsearch-input.customScopesManager\">    <dialog-helper>  <dialog data-target=\"custom-scopes.customScopesModalDialog\" data-action=\"close:qbsearch-input#handleDialogClose cancel:qbsearch-input#handleDialogClose\" id=\"custom-scopes-dialog\" aria-modal=\"true\" aria-labelledby=\"custom-scopes-dialog-title\" aria-describedby=\"custom-scopes-dialog-description\" data-view-component=\"true\" class=\"Overlay Overlay-whenNarrow Overlay--size-medium Overlay--motion-scaleFade\">    <div data-view-component=\"true\" class=\"Overlay-header Overlay-header--divided\">  <div class=\"Overlay-headerContentWrap\">    <div class=\"Overlay-titleWrap\">      <h1 class=\"Overlay-title \" id=\"custom-scopes-dialog-title\">        Saved searches      </h1>        <h2 id=\"custom-scopes-dialog-description\" class=\"Overlay-description\">Use saved searches to filter your results more quickly</h2>    </div>    <div class=\"Overlay-actionWrap\">      <button data-close-dialog-id=\"custom-scopes-dialog\" aria-label=\"Close\" type=\"button\" data-view-component=\"true\" class=\"close-button Overlay-closeButton\"><svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-x\">    <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path></svg></button>    </div>  </div></div>      <scrollable-region data-labelled-by=\"custom-scopes-dialog-title\">        <div data-view-component=\"true\" class=\"Overlay-body\">        <div data-target=\"custom-scopes.customScopesModalDialogFlash\"></div>        <div hidden class=\"create-custom-scope-form\" data-target=\"custom-scopes.createCustomScopeForm\">        <!-- '\"` --><!-- </textarea></xmp> --></option></form><form id=\"custom-scopes-dialog-form\" data-turbo=\"false\" action=\"/search/custom_scopes\" accept-charset=\"UTF-8\" method=\"post\"><input type=\"hidden\" data-csrf=\"true\" name=\"authenticity_token\" value=\"Y8qbV7NZBLnCOAM3tt7dcPqfnSRUQ9SCQFp/T1iJcX8+5kc1t9ll0FA/m4Wcdi9SsqS7MgGJnwONA6Q3RrVHDw==\" />          <div data-target=\"custom-scopes.customScopesModalDialogFlash\"></div>          <input type=\"hidden\" id=\"custom_scope_id\" name=\"custom_scope_id\" data-target=\"custom-scopes.customScopesIdField\">          <div class=\"form-group\">            <label for=\"custom_scope_name\">Name</label>            <auto-check src=\"/search/custom_scopes/check_name\" required>              <input                type=\"text\"                name=\"custom_scope_name\"                id=\"custom_scope_name\"                data-target=\"custom-scopes.customScopesNameField\"                class=\"form-control\"                autocomplete=\"off\"                placeholder=\"github-ruby\"                required                maxlength=\"50\">              <input type=\"hidden\" data-csrf=\"true\" value=\"7pGu7x06+51ACSdXGzS1IsbGiFoOaC8q67AZfmC5hZLdDSWy6IsV3eUcPLhUNoWgH/tMBcNipiWE3cL/QP1oFg==\" />            </auto-check>          </div>          <div class=\"form-group\">            <label for=\"custom_scope_query\">Query</label>            <input              type=\"text\"              name=\"custom_scope_query\"              id=\"custom_scope_query\"              data-target=\"custom-scopes.customScopesQueryField\"              class=\"form-control\"              autocomplete=\"off\"              placeholder=\"(repo:mona/a OR repo:mona/b) AND lang:python\"              required              maxlength=\"500\">          </div>          <p class=\"text-small color-fg-muted\">            To see all available qualifiers, see our <a class=\"Link--inTextBlock\" href=\"https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax\">documentation</a>.          </p></form>        </div>        <div data-target=\"custom-scopes.manageCustomScopesForm\">          <div data-target=\"custom-scopes.list\"></div>        </div></div>      </scrollable-region>      <div data-view-component=\"true\" class=\"Overlay-footer Overlay-footer--alignEnd Overlay-footer--divided\">          <button data-action=\"click:custom-scopes#customScopesCancel\" type=\"button\" data-view-component=\"true\" class=\"btn\">    Cancel</button>          <button form=\"custom-scopes-dialog-form\" data-action=\"click:custom-scopes#customScopesSubmit\" data-target=\"custom-scopes.customScopesSubmitButton\" type=\"submit\" data-view-component=\"true\" class=\"btn-primary btn\">    Create saved search</button></div></dialog></dialog-helper>    </custom-scopes>  </div></qbsearch-input><input type=\"hidden\" data-csrf=\"true\" class=\"js-data-jump-to-suggestions-path-csrf\" value=\"ymftRRMJpdrQKB87wriDVUXmWD9qHrHKne+iUmzS14mY0UoIE0FLuuD/D6pSLvaSI9yzkMYNPLWHL+aE5Aa/dA==\" />          <div class=\"position-relative mr-lg-3 d-lg-inline-block\">            <a href=\"/login?return_to=https%3A%2F%2Fgithub.com%2Fguidance-ai%2Fguidance\"              class=\"HeaderMenu-link HeaderMenu-link--sign-in flex-shrink-0 no-underline d-block d-lg-inline-block border border-lg-0 rounded rounded-lg-0 p-2 p-lg-0\"              data-hydro-click=\"{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/guidance-ai/guidance&quot;,&quot;user_id&quot;:null}}\" data-hydro-click-hmac=\"a936f70ebc53fd5d82504cb8c77d9c1f412c19a5e275b7c0fa01e4ece1a3223c\"              data-ga-click=\"(Logged out) Header, clicked Sign in, text:sign-in\">              Sign in            </a>          </div>            <a href=\"/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&amp;source=header-repo&amp;source_repo=guidance-ai%2Fguidance\"              class=\"HeaderMenu-link HeaderMenu-link--sign-up flex-shrink-0 d-none d-lg-inline-block no-underline border color-border-default rounded px-2 py-1\"              data-hydro-click=\"{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;site header menu&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;SIGN_UP&quot;,&quot;originating_url&quot;:&quot;https://github.com/guidance-ai/guidance&quot;,&quot;user_id&quot;:null}}\" data-hydro-click-hmac=\"a936f70ebc53fd5d82504cb8c77d9c1f412c19a5e275b7c0fa01e4ece1a3223c\"              data-analytics-event=\"{&quot;category&quot;:&quot;Sign up&quot;,&quot;action&quot;:&quot;click to sign up for account&quot;,&quot;label&quot;:&quot;ref_page:/&lt;user-name&gt;/&lt;repo-name&gt;;ref_cta:Sign up;ref_loc:header logged out&quot;}\"            >              Sign up            </a>        </div>      </div>    </div>  </div></header>      <div hidden=\"hidden\" data-view-component=\"true\" class=\"js-stale-session-flash stale-session-flash flash flash-warn flash-full mb-3\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path></svg>        <span class=\"js-stale-session-flash-signed-in\" hidden>You signed in with another tab or window. <a class=\"Link--inTextBlock\" href=\"\">Reload</a> to refresh your session.</span>        <span class=\"js-stale-session-flash-signed-out\" hidden>You signed out in another tab or window. <a class=\"Link--inTextBlock\" href=\"\">Reload</a> to refresh your session.</span>        <span class=\"js-stale-session-flash-switched\" hidden>You switched accounts on another tab or window. <a class=\"Link--inTextBlock\" href=\"\">Reload</a> to refresh your session.</span>    <button id=\"icon-button-af794dfe-d61a-44e2-bce9-1aa4e726468b\" aria-labelledby=\"tooltip-2cfb3e12-c8c6-40d2-8378-839b9c7be84e\" type=\"button\" data-view-component=\"true\" class=\"Button Button--iconOnly Button--invisible Button--medium flash-close js-flash-close\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-x Button-visual\">    <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path></svg></button><tool-tip id=\"tooltip-2cfb3e12-c8c6-40d2-8378-839b9c7be84e\" for=\"icon-button-af794dfe-d61a-44e2-bce9-1aa4e726468b\" popover=\"manual\" data-direction=\"s\" data-type=\"label\" data-view-component=\"true\" class=\"sr-only position-absolute\">Dismiss alert</tool-tip>  </div>    </div>  <div id=\"start-of-content\" class=\"show-on-focus\"></div>    <div id=\"js-flash-container\" data-turbo-replace>  <template class=\"js-flash-template\">    <div class=\"flash flash-full   {{ className }}\">  <div class=\"px-2\" >    <button autofocus class=\"flash-close js-flash-close\" type=\"button\" aria-label=\"Dismiss this message\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-x\">    <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path></svg>    </button>    <div aria-atomic=\"true\" role=\"alert\" class=\"js-flash-alert\">            <div>{{ message }}</div>    </div>  </div></div>  </template></div>        <include-fragment class=\"js-notification-shelf-include-fragment\" data-base-src=\"https://github.com/notifications/beta/shelf\"></include-fragment>  <div    class=\"application-main \"    data-commit-hovercards-enabled    data-discussion-hovercards-enabled    data-issue-and-pr-hovercards-enabled  >        <div itemscope itemtype=\"http://schema.org/SoftwareSourceCode\" class=\"\">    <main id=\"js-repo-pjax-container\" >                        <div id=\"repository-container-header\"  class=\"pt-3 hide-full-screen\" style=\"background-color: var(--page-header-bgColor, var(--color-page-header-bg));\" data-turbo-replace>      <div class=\"d-flex flex-wrap flex-justify-end mb-3  px-3 px-md-4 px-lg-5\" style=\"gap: 1rem;\">        <div class=\"flex-auto min-width-0 width-fit mr-3\">              <div class=\" d-flex flex-wrap flex-items-center wb-break-word f3 text-normal\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-repo color-fg-muted mr-2\">    <path d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0 1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z\"></path></svg>        <span class=\"author flex-self-stretch\" itemprop=\"author\">      <a class=\"url fn\" rel=\"author\" data-hovercard-type=\"organization\" data-hovercard-url=\"/orgs/guidance-ai/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"/guidance-ai\">        guidance-ai</a>    </span>    <span class=\"mx-1 flex-self-stretch color-fg-muted\">/</span>    <strong itemprop=\"name\" class=\"mr-2 flex-self-stretch\">      <a data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" href=\"/guidance-ai/guidance\">guidance</a>    </strong>    <span></span><span class=\"Label Label--secondary v-align-middle mr-1\">Public</span>  </div>        </div>        <div id=\"repository-details-container\" data-turbo-replace>            <ul class=\"pagehead-actions flex-shrink-0 d-none d-md-inline\" style=\"padding: 2px 0;\">            <li>            <a href=\"/login?return_to=%2Fguidance-ai%2Fguidance\" rel=\"nofollow\" data-hydro-click=\"{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;notification subscription menu watch&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://github.com/guidance-ai/guidance&quot;,&quot;user_id&quot;:null}}\" data-hydro-click-hmac=\"3bd06119a397355437efb9e24773c5999051d7727d8d5a3ff61f9889c5641bad\" aria-label=\"You must be signed in to change notification settings\" data-view-component=\"true\" class=\"tooltipped tooltipped-s btn-sm btn\">    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-bell mr-2\">    <path d=\"M8 16a2 2 0 0 0 1.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 0 0 8 16ZM3 5a5 5 0 0 1 10 0v2.947c0 .05.015.098.042.139l1.703 2.555A1.519 1.519 0 0 1 13.482 13H2.518a1.516 1.516 0 0 1-1.263-2.36l1.703-2.554A.255.255 0 0 0 3 7.947Zm5-3.5A3.5 3.5 0 0 0 4.5 5v2.947c0 .346-.102.683-.294.97l-1.703 2.556a.017.017 0 0 0-.003.01l.001.006c0 .002.002.004.004.006l.006.004.007.001h10.964l.007-.001.006-.004.004-.006.001-.007a.017.017 0 0 0-.003-.01l-1.703-2.554a1.745 1.745 0 0 1-.294-.97V5A3.5 3.5 0 0 0 8 1.5Z\"></path></svg>Notifications</a>  </li>  <li>          <a icon=\"repo-forked\" id=\"fork-button\" href=\"/login?return_to=%2Fguidance-ai%2Fguidance\" rel=\"nofollow\" data-hydro-click=\"{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;repo details fork button&quot;,&quot;repository_id&quot;:564443255,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://github.com/guidance-ai/guidance&quot;,&quot;user_id&quot;:null}}\" data-hydro-click-hmac=\"a021342639ae2755a162330fa9265439a449138e53a770a62bf6a93e18a4ca23\" data-view-component=\"true\" class=\"btn-sm btn\">    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-repo-forked mr-2\">    <path d=\"M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z\"></path></svg>Fork    <span id=\"repo-network-counter\" data-pjax-replace=\"true\" data-turbo-replace=\"true\" title=\"898\" data-view-component=\"true\" class=\"Counter\">898</span></a>  </li>  <li>        <div data-view-component=\"true\" class=\"BtnGroup d-flex\">        <a href=\"/login?return_to=%2Fguidance-ai%2Fguidance\" rel=\"nofollow\" data-hydro-click=\"{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;star button&quot;,&quot;repository_id&quot;:564443255,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://github.com/guidance-ai/guidance&quot;,&quot;user_id&quot;:null}}\" data-hydro-click-hmac=\"ae6d152687d92b65ba9afaf9490d094e3825cfd5b545cdd6f19e5be0f4efca19\" aria-label=\"You must be signed in to star a repository\" data-view-component=\"true\" class=\"tooltipped tooltipped-s btn-sm btn BtnGroup-item\">    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-star v-align-text-bottom d-inline-block mr-2\">    <path d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z\"></path></svg><span data-view-component=\"true\" class=\"d-inline\">          Star</span>          <span id=\"repo-stars-counter-star\" aria-label=\"16488 users starred this repository\" data-singular-suffix=\"user starred this repository\" data-plural-suffix=\"users starred this repository\" data-turbo-replace=\"true\" title=\"16,488\" data-view-component=\"true\" class=\"Counter js-social-count\">16.5k</span></a>        <button aria-label=\"You must be signed in to add this repository to a list\" type=\"button\" disabled=\"disabled\" data-view-component=\"true\" class=\"btn-sm btn BtnGroup-item px-2\">    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-triangle-down\">    <path d=\"m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z\"></path></svg></button></div>  </li>    <li>            </li></ul>        </div>      </div>        <div id=\"responsive-meta-container\" data-turbo-replace>      <div class=\"d-block d-md-none mb-2 px-3 px-md-4 px-lg-5\">      <p class=\"f4 mb-3 \">        A guidance language for controlling large language models.      </p>          <h3 class=\"sr-only\">License</h3>  <div class=\"mb-2\">    <a href=\"/guidance-ai/guidance/blob/main/LICENSE.md\"      class=\"Link--muted\"            data-analytics-event=\"{&quot;category&quot;:&quot;Repository Overview&quot;,&quot;action&quot;:&quot;click&quot;,&quot;label&quot;:&quot;location:sidebar;file:license&quot;}\"    >      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-law mr-2\">    <path d=\"M8.75.75V2h.985c.304 0 .603.08.867.231l1.29.736c.038.022.08.033.124.033h2.234a.75.75 0 0 1 0 1.5h-.427l2.111 4.692a.75.75 0 0 1-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.006.005-.01.01-.045.04c-.21.176-.441.327-.686.45C14.556 10.78 13.88 11 13 11a4.498 4.498 0 0 1-2.023-.454 3.544 3.544 0 0 1-.686-.45l-.045-.04-.016-.015-.006-.006-.004-.004v-.001a.75.75 0 0 1-.154-.838L12.178 4.5h-.162c-.305 0-.604-.079-.868-.231l-1.29-.736a.245.245 0 0 0-.124-.033H8.75V13h2.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1 0-1.5h2.5V3.5h-.984a.245.245 0 0 0-.124.033l-1.289.737c-.265.15-.564.23-.869.23h-.162l2.112 4.692a.75.75 0 0 1-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.016.015-.045.04c-.21.176-.441.327-.686.45C4.556 10.78 3.88 11 3 11a4.498 4.498 0 0 1-2.023-.454 3.544 3.544 0 0 1-.686-.45l-.045-.04-.016-.015-.006-.006-.004-.004v-.001a.75.75 0 0 1-.154-.838L2.178 4.5H1.75a.75.75 0 0 1 0-1.5h2.234a.249.249 0 0 0 .125-.033l1.288-.737c.265-.15.564-.23.869-.23h.984V.75a.75.75 0 0 1 1.5 0Zm2.945 8.477c.285.135.718.273 1.305.273s1.02-.138 1.305-.273L13 6.327Zm-10 0c.285.135.718.273 1.305.273s1.02-.138 1.305-.273L3 6.327Z\"></path></svg>     MIT license    </a>  </div>    <div class=\"mb-3\">        <a class=\"Link--secondary no-underline mr-3\" href=\"/guidance-ai/guidance/stargazers\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-star mr-1\">    <path d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z\"></path></svg>          <span class=\"text-bold\">16.5k</span>          stars</a>        <a class=\"Link--secondary no-underline mr-3\" href=\"/guidance-ai/guidance/forks\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-repo-forked mr-1\">    <path d=\"M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z\"></path></svg>          <span class=\"text-bold\">898</span>          forks</a>          <a class=\"Link--secondary no-underline mr-3 d-inline-block\" href=\"/guidance-ai/guidance/branches\">            <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-git-branch mr-1\">    <path d=\"M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z\"></path></svg>            <span>Branches</span></a>          <a class=\"Link--secondary no-underline d-inline-block\" href=\"/guidance-ai/guidance/tags\">            <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-tag mr-1\">    <path d=\"M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z\"></path></svg>            <span>Tags</span></a>        <a class=\"Link--secondary no-underline d-inline-block\" href=\"/guidance-ai/guidance/activity\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-pulse mr-1\">    <path d=\"M6 2c.306 0 .582.187.696.471L10 10.731l1.304-3.26A.751.751 0 0 1 12 7h3.25a.75.75 0 0 1 0 1.5h-2.742l-1.812 4.528a.751.751 0 0 1-1.392 0L6 4.77 4.696 8.03A.75.75 0 0 1 4 8.5H.75a.75.75 0 0 1 0-1.5h2.742l1.812-4.529A.751.751 0 0 1 6 2Z\"></path></svg>          <span>Activity</span></a>    </div>      <div class=\"d-flex flex-wrap gap-2\">        <div class=\"flex-1\">            <div data-view-component=\"true\" class=\"BtnGroup d-flex\">        <a href=\"/login?return_to=%2Fguidance-ai%2Fguidance\" rel=\"nofollow\" data-hydro-click=\"{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;star button&quot;,&quot;repository_id&quot;:564443255,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://github.com/guidance-ai/guidance&quot;,&quot;user_id&quot;:null}}\" data-hydro-click-hmac=\"ae6d152687d92b65ba9afaf9490d094e3825cfd5b545cdd6f19e5be0f4efca19\" aria-label=\"You must be signed in to star a repository\" data-view-component=\"true\" class=\"tooltipped tooltipped-s btn-sm btn btn-block BtnGroup-item\">    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-star v-align-text-bottom d-inline-block mr-2\">    <path d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z\"></path></svg><span data-view-component=\"true\" class=\"d-inline\">          Star</span></a>        <button aria-label=\"You must be signed in to add this repository to a list\" type=\"button\" disabled=\"disabled\" data-view-component=\"true\" class=\"btn-sm btn BtnGroup-item px-2\">    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-triangle-down\">    <path d=\"m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z\"></path></svg></button></div>        </div>        <div class=\"flex-1\">                <a href=\"/login?return_to=%2Fguidance-ai%2Fguidance\" rel=\"nofollow\" data-hydro-click=\"{&quot;event_type&quot;:&quot;authentication.click&quot;,&quot;payload&quot;:{&quot;location_in_page&quot;:&quot;notification subscription menu watch&quot;,&quot;repository_id&quot;:null,&quot;auth_type&quot;:&quot;LOG_IN&quot;,&quot;originating_url&quot;:&quot;https://github.com/guidance-ai/guidance&quot;,&quot;user_id&quot;:null}}\" data-hydro-click-hmac=\"3bd06119a397355437efb9e24773c5999051d7727d8d5a3ff61f9889c5641bad\" aria-label=\"You must be signed in to change notification settings\" data-view-component=\"true\" class=\"tooltipped tooltipped-s btn-sm btn btn-block\">    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-bell mr-2\">    <path d=\"M8 16a2 2 0 0 0 1.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 0 0 8 16ZM3 5a5 5 0 0 1 10 0v2.947c0 .05.015.098.042.139l1.703 2.555A1.519 1.519 0 0 1 13.482 13H2.518a1.516 1.516 0 0 1-1.263-2.36l1.703-2.554A.255.255 0 0 0 3 7.947Zm5-3.5A3.5 3.5 0 0 0 4.5 5v2.947c0 .346-.102.683-.294.97l-1.703 2.556a.017.017 0 0 0-.003.01l.001.006c0 .002.002.004.004.006l.006.004.007.001h10.964l.007-.001.006-.004.004-.006.001-.007a.017.017 0 0 0-.003-.01l-1.703-2.554a1.745 1.745 0 0 1-.294-.97V5A3.5 3.5 0 0 0 8 1.5Z\"></path></svg>Notifications</a>        </div>          <span>                      </span>      </div>  </div></div>          <nav data-pjax=\"#js-repo-pjax-container\" aria-label=\"Repository\" data-view-component=\"true\" class=\"js-repo-nav js-sidenav-container-pjax js-responsive-underlinenav overflow-hidden UnderlineNav px-3 px-md-4 px-lg-5\">  <ul data-view-component=\"true\" class=\"UnderlineNav-body list-style-none\">      <li data-view-component=\"true\" class=\"d-inline-flex\">  <a id=\"code-tab\" href=\"/guidance-ai/guidance\" data-tab-item=\"i0code-tab\" data-selected-links=\"repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages repo_deployments repo_attestations /guidance-ai/guidance\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-hotkey=\"g c\" data-analytics-event=\"{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Code&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}\" aria-current=\"page\" data-view-component=\"true\" class=\"UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item selected\">                  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-code UnderlineNav-octicon d-none d-sm-inline\">    <path d=\"m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z\"></path></svg>        <span data-content=\"Code\">Code</span>          <span id=\"code-repo-tab-count\" data-pjax-replace=\"\" data-turbo-replace=\"\" title=\"Not available\" data-view-component=\"true\" class=\"Counter\"></span>    </a></li>      <li data-view-component=\"true\" class=\"d-inline-flex\">  <a id=\"issues-tab\" href=\"/guidance-ai/guidance/issues\" data-tab-item=\"i1issues-tab\" data-selected-links=\"repo_issues repo_labels repo_milestones /guidance-ai/guidance/issues\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-hotkey=\"g i\" data-analytics-event=\"{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Issues&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}\" data-view-component=\"true\" class=\"UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item\">                  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-issue-opened UnderlineNav-octicon d-none d-sm-inline\">    <path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\"></path><path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z\"></path></svg>        <span data-content=\"Issues\">Issues</span>          <span id=\"issues-repo-tab-count\" data-pjax-replace=\"\" data-turbo-replace=\"\" title=\"144\" data-view-component=\"true\" class=\"Counter\">144</span>    </a></li>      <li data-view-component=\"true\" class=\"d-inline-flex\">  <a id=\"pull-requests-tab\" href=\"/guidance-ai/guidance/pulls\" data-tab-item=\"i2pull-requests-tab\" data-selected-links=\"repo_pulls checks /guidance-ai/guidance/pulls\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-hotkey=\"g p\" data-analytics-event=\"{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Pull requests&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}\" data-view-component=\"true\" class=\"UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item\">                  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-git-pull-request UnderlineNav-octicon d-none d-sm-inline\">    <path d=\"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z\"></path></svg>        <span data-content=\"Pull requests\">Pull requests</span>          <span id=\"pull-requests-repo-tab-count\" data-pjax-replace=\"\" data-turbo-replace=\"\" title=\"37\" data-view-component=\"true\" class=\"Counter\">37</span>    </a></li>      <li data-view-component=\"true\" class=\"d-inline-flex\">  <a id=\"discussions-tab\" href=\"/guidance-ai/guidance/discussions\" data-tab-item=\"i3discussions-tab\" data-selected-links=\"repo_discussions /guidance-ai/guidance/discussions\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-hotkey=\"g g\" data-analytics-event=\"{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Discussions&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}\" data-view-component=\"true\" class=\"UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item\">                  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-comment-discussion UnderlineNav-octicon d-none d-sm-inline\">    <path d=\"M1.75 1h8.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 10.25 10H7.061l-2.574 2.573A1.458 1.458 0 0 1 2 11.543V10h-.25A1.75 1.75 0 0 1 0 8.25v-5.5C0 1.784.784 1 1.75 1ZM1.5 2.75v5.5c0 .138.112.25.25.25h1a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h3.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13 2a.25.25 0 0 0-.25-.25h-.5a.75.75 0 0 1 0-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 14.25 12H14v1.543a1.458 1.458 0 0 1-2.487 1.03L9.22 12.28a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l2.22 2.22v-2.19a.75.75 0 0 1 .75-.75h1a.25.25 0 0 0 .25-.25Z\"></path></svg>        <span data-content=\"Discussions\">Discussions</span>          <span id=\"discussions-repo-tab-count\" data-pjax-replace=\"\" data-turbo-replace=\"\" title=\"Not available\" data-view-component=\"true\" class=\"Counter\"></span>    </a></li>      <li data-view-component=\"true\" class=\"d-inline-flex\">  <a id=\"actions-tab\" href=\"/guidance-ai/guidance/actions\" data-tab-item=\"i4actions-tab\" data-selected-links=\"repo_actions /guidance-ai/guidance/actions\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-hotkey=\"g a\" data-analytics-event=\"{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Actions&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}\" data-view-component=\"true\" class=\"UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item\">                  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-play UnderlineNav-octicon d-none d-sm-inline\">    <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z\"></path></svg>        <span data-content=\"Actions\">Actions</span>          <span id=\"actions-repo-tab-count\" data-pjax-replace=\"\" data-turbo-replace=\"\" title=\"Not available\" data-view-component=\"true\" class=\"Counter\"></span>    </a></li>      <li data-view-component=\"true\" class=\"d-inline-flex\">  <a id=\"projects-tab\" href=\"/guidance-ai/guidance/projects\" data-tab-item=\"i5projects-tab\" data-selected-links=\"repo_projects new_repo_project repo_project /guidance-ai/guidance/projects\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-hotkey=\"g b\" data-analytics-event=\"{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Projects&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}\" data-view-component=\"true\" class=\"UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item\">                  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-table UnderlineNav-octicon d-none d-sm-inline\">    <path d=\"M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM6.5 6.5v8h7.75a.25.25 0 0 0 .25-.25V6.5Zm8-1.5V1.75a.25.25 0 0 0-.25-.25H6.5V5Zm-13 1.5v7.75c0 .138.112.25.25.25H5v-8ZM5 5V1.5H1.75a.25.25 0 0 0-.25.25V5Z\"></path></svg>        <span data-content=\"Projects\">Projects</span>          <span id=\"projects-repo-tab-count\" data-pjax-replace=\"\" data-turbo-replace=\"\" title=\"0\" hidden=\"hidden\" data-view-component=\"true\" class=\"Counter\">0</span>    </a></li>      <li data-view-component=\"true\" class=\"d-inline-flex\">  <a id=\"security-tab\" href=\"/guidance-ai/guidance/security\" data-tab-item=\"i6security-tab\" data-selected-links=\"security overview alerts policy token_scanning code_scanning /guidance-ai/guidance/security\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-hotkey=\"g s\" data-analytics-event=\"{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Security&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}\" data-view-component=\"true\" class=\"UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item\">                  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-shield UnderlineNav-octicon d-none d-sm-inline\">    <path d=\"M7.467.133a1.748 1.748 0 0 1 1.066 0l5.25 1.68A1.75 1.75 0 0 1 15 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.697 1.697 0 0 1-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 0 1 1.217-1.667Zm.61 1.429a.25.25 0 0 0-.153 0l-5.25 1.68a.25.25 0 0 0-.174.238V7c0 1.358.275 2.666 1.057 3.86.784 1.194 2.121 2.34 4.366 3.297a.196.196 0 0 0 .154 0c2.245-.956 3.582-2.104 4.366-3.298C13.225 9.666 13.5 8.36 13.5 7V3.48a.251.251 0 0 0-.174-.237l-5.25-1.68ZM8.75 4.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 1.5 0ZM9 10.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path></svg>        <span data-content=\"Security\">Security</span>          <include-fragment src=\"/guidance-ai/guidance/security/overall-count\" accept=\"text/fragment+html\"></include-fragment>    </a></li>      <li data-view-component=\"true\" class=\"d-inline-flex\">  <a id=\"insights-tab\" href=\"/guidance-ai/guidance/pulse\" data-tab-item=\"i7insights-tab\" data-selected-links=\"repo_graphs repo_contributors dependency_graph dependabot_updates pulse people community /guidance-ai/guidance/pulse\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" data-analytics-event=\"{&quot;category&quot;:&quot;Underline navbar&quot;,&quot;action&quot;:&quot;Click tab&quot;,&quot;label&quot;:&quot;Insights&quot;,&quot;target&quot;:&quot;UNDERLINE_NAV.TAB&quot;}\" data-view-component=\"true\" class=\"UnderlineNav-item no-wrap js-responsive-underlinenav-item js-selected-navigation-item\">                  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-graph UnderlineNav-octicon d-none d-sm-inline\">    <path d=\"M1.5 1.75V13.5h13.75a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75V1.75a.75.75 0 0 1 1.5 0Zm14.28 2.53-5.25 5.25a.75.75 0 0 1-1.06 0L7 7.06 4.28 9.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.25-3.25a.75.75 0 0 1 1.06 0L10 7.94l4.72-4.72a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z\"></path></svg>        <span data-content=\"Insights\">Insights</span>          <span id=\"insights-repo-tab-count\" data-pjax-replace=\"\" data-turbo-replace=\"\" title=\"Not available\" data-view-component=\"true\" class=\"Counter\"></span>    </a></li></ul>    <div style=\"visibility:hidden;\" data-view-component=\"true\" class=\"UnderlineNav-actions js-responsive-underlinenav-overflow position-absolute pr-3 pr-md-4 pr-lg-5 right-0\">      <action-menu data-select-variant=\"none\" data-view-component=\"true\">  <focus-group direction=\"vertical\" mnemonics retain>    <button id=\"action-menu-54f625ab-9205-41e1-8de6-cffaeca28cab-button\" popovertarget=\"action-menu-54f625ab-9205-41e1-8de6-cffaeca28cab-overlay\" aria-controls=\"action-menu-54f625ab-9205-41e1-8de6-cffaeca28cab-list\" aria-haspopup=\"true\" aria-labelledby=\"tooltip-a5657208-8c85-488c-8f11-fbdec0edab60\" type=\"button\" data-view-component=\"true\" class=\"Button Button--iconOnly Button--secondary Button--medium UnderlineNav-item\">  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-kebab-horizontal Button-visual\">    <path d=\"M8 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm13 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\"></path></svg></button><tool-tip id=\"tooltip-a5657208-8c85-488c-8f11-fbdec0edab60\" for=\"action-menu-54f625ab-9205-41e1-8de6-cffaeca28cab-button\" popover=\"manual\" data-direction=\"s\" data-type=\"label\" data-view-component=\"true\" class=\"sr-only position-absolute\">Additional navigation options</tool-tip><anchored-position id=\"action-menu-54f625ab-9205-41e1-8de6-cffaeca28cab-overlay\" anchor=\"action-menu-54f625ab-9205-41e1-8de6-cffaeca28cab-button\" align=\"start\" side=\"outside-bottom\" anchor-offset=\"normal\" popover=\"auto\" data-view-component=\"true\">  <div data-view-component=\"true\" class=\"Overlay Overlay--size-auto\">          <div data-view-component=\"true\" class=\"Overlay-body Overlay-body--paddingNone\">          <div data-view-component=\"true\">  <ul aria-labelledby=\"action-menu-54f625ab-9205-41e1-8de6-cffaeca28cab-button\" id=\"action-menu-54f625ab-9205-41e1-8de6-cffaeca28cab-list\" role=\"menu\" data-view-component=\"true\" class=\"ActionListWrap--inset ActionListWrap\">      <li hidden=\"hidden\" data-menu-item=\"i0code-tab\" data-targets=\"action-list.items action-list.items\" role=\"none\" data-view-component=\"true\" class=\"ActionListItem\">        <a tabindex=\"-1\" id=\"item-83cd2161-d1a3-484b-9a33-8dde44fb60aa\" href=\"/guidance-ai/guidance\" role=\"menuitem\" data-view-component=\"true\" class=\"ActionListContent ActionListContent--visual16\">        <span class=\"ActionListItem-visual ActionListItem-visual--leading\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-code\">    <path d=\"m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z\"></path></svg>        </span>              <span data-view-component=\"true\" class=\"ActionListItem-label\">          Code</span></a>    </li>      <li hidden=\"hidden\" data-menu-item=\"i1issues-tab\" data-targets=\"action-list.items action-list.items\" role=\"none\" data-view-component=\"true\" class=\"ActionListItem\">        <a tabindex=\"-1\" id=\"item-3a3f8ed9-9c27-4594-a9e6-c1eac7101963\" href=\"/guidance-ai/guidance/issues\" role=\"menuitem\" data-view-component=\"true\" class=\"ActionListContent ActionListContent--visual16\">        <span class=\"ActionListItem-visual ActionListItem-visual--leading\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-issue-opened\">    <path d=\"M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\"></path><path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z\"></path></svg>        </span>              <span data-view-component=\"true\" class=\"ActionListItem-label\">          Issues</span></a>    </li>      <li hidden=\"hidden\" data-menu-item=\"i2pull-requests-tab\" data-targets=\"action-list.items action-list.items\" role=\"none\" data-view-component=\"true\" class=\"ActionListItem\">        <a tabindex=\"-1\" id=\"item-16ed3061-59df-47ee-b9ee-d2e3b61afc10\" href=\"/guidance-ai/guidance/pulls\" role=\"menuitem\" data-view-component=\"true\" class=\"ActionListContent ActionListContent--visual16\">        <span class=\"ActionListItem-visual ActionListItem-visual--leading\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-git-pull-request\">    <path d=\"M1.5 3.25a2.25 2.25 0 1 1 3 2.122v5.256a2.251 2.251 0 1 1-1.5 0V5.372A2.25 2.25 0 0 1 1.5 3.25Zm5.677-.177L9.573.677A.25.25 0 0 1 10 .854V2.5h1A2.5 2.5 0 0 1 13.5 5v5.628a2.251 2.251 0 1 1-1.5 0V5a1 1 0 0 0-1-1h-1v1.646a.25.25 0 0 1-.427.177L7.177 3.427a.25.25 0 0 1 0-.354ZM3.75 2.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm0 9.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm8.25.75a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Z\"></path></svg>        </span>              <span data-view-component=\"true\" class=\"ActionListItem-label\">          Pull requests</span></a>    </li>      <li hidden=\"hidden\" data-menu-item=\"i3discussions-tab\" data-targets=\"action-list.items action-list.items\" role=\"none\" data-view-component=\"true\" class=\"ActionListItem\">        <a tabindex=\"-1\" id=\"item-5327d03d-eb3d-4568-842c-11e9868ba29e\" href=\"/guidance-ai/guidance/discussions\" role=\"menuitem\" data-view-component=\"true\" class=\"ActionListContent ActionListContent--visual16\">        <span class=\"ActionListItem-visual ActionListItem-visual--leading\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-comment-discussion\">    <path d=\"M1.75 1h8.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 10.25 10H7.061l-2.574 2.573A1.458 1.458 0 0 1 2 11.543V10h-.25A1.75 1.75 0 0 1 0 8.25v-5.5C0 1.784.784 1 1.75 1ZM1.5 2.75v5.5c0 .138.112.25.25.25h1a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h3.5a.25.25 0 0 0 .25-.25v-5.5a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13 2a.25.25 0 0 0-.25-.25h-.5a.75.75 0 0 1 0-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0 1 14.25 12H14v1.543a1.458 1.458 0 0 1-2.487 1.03L9.22 12.28a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215l2.22 2.22v-2.19a.75.75 0 0 1 .75-.75h1a.25.25 0 0 0 .25-.25Z\"></path></svg>        </span>              <span data-view-component=\"true\" class=\"ActionListItem-label\">          Discussions</span></a>    </li>      <li hidden=\"hidden\" data-menu-item=\"i4actions-tab\" data-targets=\"action-list.items action-list.items\" role=\"none\" data-view-component=\"true\" class=\"ActionListItem\">        <a tabindex=\"-1\" id=\"item-df6e8fbc-57e1-4d5e-a4f4-cfc3ccbc2dee\" href=\"/guidance-ai/guidance/actions\" role=\"menuitem\" data-view-component=\"true\" class=\"ActionListContent ActionListContent--visual16\">        <span class=\"ActionListItem-visual ActionListItem-visual--leading\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-play\">    <path d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm4.879-2.773 4.264 2.559a.25.25 0 0 1 0 .428l-4.264 2.559A.25.25 0 0 1 6 10.559V5.442a.25.25 0 0 1 .379-.215Z\"></path></svg>        </span>              <span data-view-component=\"true\" class=\"ActionListItem-label\">          Actions</span></a>    </li>      <li hidden=\"hidden\" data-menu-item=\"i5projects-tab\" data-targets=\"action-list.items action-list.items\" role=\"none\" data-view-component=\"true\" class=\"ActionListItem\">        <a tabindex=\"-1\" id=\"item-0049dcdc-244d-4909-bf59-99de62e62013\" href=\"/guidance-ai/guidance/projects\" role=\"menuitem\" data-view-component=\"true\" class=\"ActionListContent ActionListContent--visual16\">        <span class=\"ActionListItem-visual ActionListItem-visual--leading\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-table\">    <path d=\"M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0 1 14.25 16H1.75A1.75 1.75 0 0 1 0 14.25ZM6.5 6.5v8h7.75a.25.25 0 0 0 .25-.25V6.5Zm8-1.5V1.75a.25.25 0 0 0-.25-.25H6.5V5Zm-13 1.5v7.75c0 .138.112.25.25.25H5v-8ZM5 5V1.5H1.75a.25.25 0 0 0-.25.25V5Z\"></path></svg>        </span>              <span data-view-component=\"true\" class=\"ActionListItem-label\">          Projects</span></a>    </li>      <li hidden=\"hidden\" data-menu-item=\"i6security-tab\" data-targets=\"action-list.items action-list.items\" role=\"none\" data-view-component=\"true\" class=\"ActionListItem\">        <a tabindex=\"-1\" id=\"item-44981fc8-d46e-427e-a7cc-24fb7a1d5d2c\" href=\"/guidance-ai/guidance/security\" role=\"menuitem\" data-view-component=\"true\" class=\"ActionListContent ActionListContent--visual16\">        <span class=\"ActionListItem-visual ActionListItem-visual--leading\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-shield\">    <path d=\"M7.467.133a1.748 1.748 0 0 1 1.066 0l5.25 1.68A1.75 1.75 0 0 1 15 3.48V7c0 1.566-.32 3.182-1.303 4.682-.983 1.498-2.585 2.813-5.032 3.855a1.697 1.697 0 0 1-1.33 0c-2.447-1.042-4.049-2.357-5.032-3.855C1.32 10.182 1 8.566 1 7V3.48a1.75 1.75 0 0 1 1.217-1.667Zm.61 1.429a.25.25 0 0 0-.153 0l-5.25 1.68a.25.25 0 0 0-.174.238V7c0 1.358.275 2.666 1.057 3.86.784 1.194 2.121 2.34 4.366 3.297a.196.196 0 0 0 .154 0c2.245-.956 3.582-2.104 4.366-3.298C13.225 9.666 13.5 8.36 13.5 7V3.48a.251.251 0 0 0-.174-.237l-5.25-1.68ZM8.75 4.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 1.5 0ZM9 10.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path></svg>        </span>              <span data-view-component=\"true\" class=\"ActionListItem-label\">          Security</span></a>    </li>      <li hidden=\"hidden\" data-menu-item=\"i7insights-tab\" data-targets=\"action-list.items action-list.items\" role=\"none\" data-view-component=\"true\" class=\"ActionListItem\">        <a tabindex=\"-1\" id=\"item-b715817c-b318-46e3-bfa5-692918500138\" href=\"/guidance-ai/guidance/pulse\" role=\"menuitem\" data-view-component=\"true\" class=\"ActionListContent ActionListContent--visual16\">        <span class=\"ActionListItem-visual ActionListItem-visual--leading\">          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-graph\">    <path d=\"M1.5 1.75V13.5h13.75a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75V1.75a.75.75 0 0 1 1.5 0Zm14.28 2.53-5.25 5.25a.75.75 0 0 1-1.06 0L7 7.06 4.28 9.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.25-3.25a.75.75 0 0 1 1.06 0L10 7.94l4.72-4.72a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z\"></path></svg>        </span>              <span data-view-component=\"true\" class=\"ActionListItem-label\">          Insights</span></a>    </li></ul>  </div></div>      </div></anchored-position>  </focus-group></action-menu></div></nav>  </div>  <turbo-frame id=\"repo-content-turbo-frame\" target=\"_top\" data-turbo-action=\"advance\" class=\"\">    <div id=\"repo-content-pjax-container\" class=\"repository-content \" >                <h1 class='sr-only'>guidance-ai/guidance</h1>  <div class=\"clearfix container-xl px-md-4 px-lg-5 px-3\">    <div>  <div id=\"spoof-warning\" class=\"mt-0 pb-3\" hidden aria-hidden>  <div data-view-component=\"true\" class=\"flash flash-warn mt-0 clearfix\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert float-left mt-1\">    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path></svg>      <div class=\"overflow-hidden\">This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.</div>  </div></div>  <include-fragment src=\"/guidance-ai/guidance/spoofed_commit_check/ccf8b9ffb894c9413a31bb6ea1da309fbdce9ee4\" data-test-selector=\"spoofed-commit-check\"></include-fragment>  <div style=\"max-width: 100%\" data-view-component=\"true\" class=\"Layout Layout--flowRow-until-md react-repos-overview-margin Layout--sidebarPosition-end Layout--sidebarPosition-flowRow-end\">  <div data-view-component=\"true\" class=\"Layout-main\">        <script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/react-lib-1fbfc5be2c18.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_octicons-react_dist_index_esm_js-node_modules_primer_react_lib-es-2e8e7c-adc8451a70cf.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_Box_Box_js-8f8c5e2a2cbf.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_Button_Button_js-67fe00b5266a.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_ActionList_index_js-2dd4d13d3ae6.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_Overlay_Overlay_js-node_modules_primer_react_lib-es-fa1130-829932cf63db.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_Text_Text_js-node_modules_primer_react_lib-esm_Text-85a14b-236dc9716ad0.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-eaf74522e470.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_react-router-dom_dist_index_js-3b41341d50fe.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_Dialog_js-node_modules_primer_react_lib-esm_Label_L-857e1c-77794958a54a.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_UnderlineNav_index_js-89fa5806aa3c.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/vendors-node_modules_primer_react_lib-esm_AvatarStack_AvatarStack_js-node_modules_primer_reac-e445e7-175b51e43dcc.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/ui_packages_react-core_create-browser-history_ts-ui_packages_react-core_AppContextProvider_ts-809ab9-bf008735d0bb.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/ui_packages_paths_index_ts-7137b25aa38b.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/ui_packages_ref-selector_RefSelector_tsx-dbbdef4348e2.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/ui_packages_commit-attribution_index_ts-ui_packages_commit-checks-status_index_ts-ui_packages-ffbe33-4c4ddf7d268d.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/app_assets_modules_react-code-view_components_directory_DirectoryContent_index_ts-app_assets_-1fd1f5-c96303590595.js\"></script><script crossorigin=\"anonymous\" defer=\"defer\" type=\"application/javascript\" src=\"https://github.githubassets.com/assets/repos-overview-523b8f59ec33.js\"></script><react-partial  partial-name=\"repos-overview\"  data-ssr=\"true\">    <script type=\"application/json\" data-target=\"react-partial.embeddedData\">{\"props\":{\"initialPayload\":{\"allShortcutsEnabled\":false,\"path\":\"/\",\"repo\":{\"id\":564443255,\"defaultBranch\":\"main\",\"name\":\"guidance\",\"ownerLogin\":\"guidance-ai\",\"currentUserCanPush\":false,\"isFork\":false,\"isEmpty\":false,\"createdAt\":\"2022-11-10T18:21:45.000Z\",\"ownerAvatar\":\"https://avatars.githubusercontent.com/u/142035062?v=4\",\"public\":true,\"private\":false,\"isOrgOwned\":true},\"currentUser\":null,\"refInfo\":{\"name\":\"main\",\"listCacheKey\":\"v0:1706741927.0\",\"canEdit\":false,\"refType\":\"branch\",\"currentOid\":\"ccf8b9ffb894c9413a31bb6ea1da309fbdce9ee4\"},\"tree\":{\"items\":[{\"name\":\".github\",\"path\":\".github\",\"contentType\":\"directory\"},{\"name\":\"client/src\",\"path\":\"client/src\",\"contentType\":\"directory\",\"hasSimplifiedPath\":true},{\"name\":\"docs\",\"path\":\"docs\",\"contentType\":\"directory\"},{\"name\":\"guidance\",\"path\":\"guidance\",\"contentType\":\"directory\"},{\"name\":\"notebooks\",\"path\":\"notebooks\",\"contentType\":\"directory\"},{\"name\":\"tests\",\"path\":\"tests\",\"contentType\":\"directory\"},{\"name\":\".gitignore\",\"path\":\".gitignore\",\"contentType\":\"file\"},{\"name\":\"CONTRIBUTING.md\",\"path\":\"CONTRIBUTING.md\",\"contentType\":\"file\"},{\"name\":\"GOVERNANCE.md\",\"path\":\"GOVERNANCE.md\",\"contentType\":\"file\"},{\"name\":\"LICENSE.md\",\"path\":\"LICENSE.md\",\"contentType\":\"file\"},{\"name\":\"MAINTAINERS.md\",\"path\":\"MAINTAINERS.md\",\"contentType\":\"file\"},{\"name\":\"README.md\",\"path\":\"README.md\",\"contentType\":\"file\"},{\"name\":\"pyproject.toml\",\"path\":\"pyproject.toml\",\"contentType\":\"file\"},{\"name\":\"setup.py\",\"path\":\"setup.py\",\"contentType\":\"file\"}],\"templateDirectorySuggestionUrl\":null,\"readme\":null,\"totalCount\":14,\"showBranchInfobar\":false},\"fileTree\":null,\"fileTreeProcessingTime\":null,\"foldersToFetch\":[],\"treeExpanded\":false,\"symbolsExpanded\":false,\"isOverview\":true,\"overview\":{\"banners\":{\"shouldRecommendReadme\":false,\"isPersonalRepo\":false,\"showUseActionBanner\":false,\"actionSlug\":null,\"actionId\":null,\"showProtectBranchBanner\":false,\"recentlyTouchedDataChannel\":null,\"publishBannersInfo\":{\"dismissActionNoticePath\":\"/settings/dismiss-notice/publish_action_from_repo\",\"releasePath\":\"/guidance-ai/guidance/releases/new?marketplace=true\",\"showPublishActionBanner\":false},\"interactionLimitBanner\":null,\"showInvitationBanner\":false,\"inviterName\":null},\"codeButton\":{\"contactPath\":\"/contact\",\"isEnterprise\":false,\"local\":{\"protocolInfo\":{\"httpAvailable\":true,\"sshAvailable\":null,\"httpUrl\":\"https://github.com/guidance-ai/guidance.git\",\"showCloneWarning\":null,\"sshUrl\":null,\"sshCertificatesRequired\":null,\"sshCertificatesAvailable\":null,\"ghCliUrl\":\"gh repo clone guidance-ai/guidance\",\"defaultProtocol\":\"http\",\"newSshKeyUrl\":\"/settings/ssh/new\",\"setProtocolPath\":\"/users/set_protocol\"},\"platformInfo\":{\"cloneUrl\":\"https://desktop.github.com\",\"showVisualStudioCloneButton\":false,\"visualStudioCloneUrl\":\"https://windows.github.com\",\"showXcodeCloneButton\":false,\"xcodeCloneUrl\":\"https://developer.apple.com\",\"zipballUrl\":\"/guidance-ai/guidance/archive/refs/heads/main.zip\"}},\"newCodespacePath\":\"/codespaces/new?hide_repo_select=true\\u0026repo=564443255\"},\"popovers\":{\"rename\":null,\"renamedParentRepo\":null},\"commitCount\":\"1,198\",\"overviewFiles\":[{\"displayName\":\"README.md\",\"repoName\":\"guidance\",\"refName\":\"main\",\"path\":\"README.md\",\"preferredFileType\":\"readme\",\"tabName\":\"README\",\"richText\":\"\\u003carticle class=\\\"markdown-body entry-content container-lg\\\" itemprop=\\\"text\\\"\\u003e\\u003cdiv align=\\\"right\\\" dir=\\\"auto\\\"\\u003e\\u003ca href=\\\"https://guidance.readthedocs.org\\\" rel=\\\"nofollow\\\"\\u003e\\u003cimg src=\\\"https://camo.githubusercontent.com/b41712113f784f9e9f17845c9a8454ee6b6367a04aec4d33fd4eb13fd45726da/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f67756964616e63652f62616467652f3f76657273696f6e3d6c6174657374267374796c653d666c6174\\\" data-canonical-src=\\\"https://readthedocs.org/projects/guidance/badge/?version=latest\\u0026amp;style=flat\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cdiv align=\\\"center\\\" dir=\\\"auto\\\"\\u003e\\u003cthemed-picture data-catalyst-inline=\\\"true\\\"\\u003e\\u003cpicture\\u003e\\n  \\u003csource media=\\\"(prefers-color-scheme: dark)\\\" srcset=\\\"/guidance-ai/guidance/raw/main/docs/figures/guidance_logo_blue_dark.svg\\\"\\u003e\\n  \\u003cimg alt=\\\"guidance\\\" src=\\\"/guidance-ai/guidance/raw/main/docs/figures/guidance_logo_blue.svg\\\" width=\\\"300\\u0026quot;\\\"\\u003e\\n\\u003c/picture\\u003e\\u003c/themed-picture\\u003e\\u003c/div\\u003e\\n\\u003cbr\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003cem\\u003eNote that v0.1 is a dramatically new version developed while releases had to be paused over the summer. If you are looking for the old version based on handlebars, you can use v0.0.64, but you should instead try porting over to the much better new version :)\\u003c/em\\u003e\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003cstrong\\u003e\\u003ccode\\u003eguidance\\u003c/code\\u003e\\u003c/strong\\u003e is a programming paradigm that offers superior control and efficiency compared to conventional prompting and chaining. It allows users to constrain generation (e.g. with regex and CFGs) as well as to interleave control (conditional, loops) and generation seamlessly. Here are some important features:\\u003c/p\\u003e\\n\\u003col dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003ePure, beautiful python\\u003c/strong\\u003e with additional LM functionality. E.g. here is \\u003ca href=\\\"#basic-generation\\\"\\u003ebasic generation\\u003c/a\\u003e:\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import models, gen\\n\\n# load a model (could be Transformers, LlamaCpp, VertexAI, OpenAI...)\\nllama2 = models.LlamaCpp(path) \\n\\n# append text or generations to the model\\nllama2 + f'Do you want a joke or a poem? ' + gen(stop='.')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003egen\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# load a model (could be Transformers, LlamaCpp, VertexAI, OpenAI...)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eLlamaCpp\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003epath\\u003c/span\\u003e) \\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# append text or generations to the model\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Do you want a joke or a poem? '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'.'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"/guidance-ai/guidance/blob/main/docs/figures/simple_gen_llama2_7b.png\\\"\\u003e\\u003cimg alt=\\\"Do you want a joke or a poem? I'll give you a poem\\\" src=\\\"/guidance-ai/guidance/raw/main/docs/figures/simple_gen_llama2_7b.png\\\" width=\\\"354\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"2\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#constrained-generation\\\"\\u003e\\u003cstrong\\u003eConstrained generation\\u003c/strong\\u003e\\u003c/a\\u003e with \\u003ca href=\\\"#select-basic\\\"\\u003eselects\\u003c/a\\u003e, \\u003ca href=\\\"#regular-expressions\\\"\\u003eregular expressions\\u003c/a\\u003e, and \\u003ca href=\\\"#context-free-grammars\\\"\\u003econtext-free grammars\\u003c/a\\u003e.\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import select\\n\\n# a simple select between two options\\nllama2 + f'Do you want a joke or a poem? A ' + select(['joke', 'poem'])\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eselect\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# a simple select between two options\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Do you want a joke or a poem? A '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'joke'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'poem'\\u003c/span\\u003e])\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"/guidance-ai/guidance/blob/main/docs/figures/simple_select_llama2_7b.png\\\"\\u003e\\u003cimg alt=\\\"Do you want a joke or a poem? A poem\\\" src=\\\"/guidance-ai/guidance/raw/main/docs/figures/simple_select_llama2_7b.png\\\" width=\\\"277\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"3\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eRich templates with f-strings\\u003c/strong\\u003e:\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"llama2 + f'''\\\\\\nDo you want a joke or a poem? A {select(['joke', 'poem'])}.\\nOkay, here is a one-liner: \\u0026quot;{gen(stop='\\u0026quot;')}\\u0026quot;\\n'''\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'''\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\u003c/span\\u003eDo you want a joke or a poem? A \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'joke'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'poem'\\u003c/span\\u003e])\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003eOkay, here is a one-liner: \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\"'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\"\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e'''\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282866560-486ca968-89b1-4c02-b914-3b9714fe5890.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg2NjU2MC00ODZjYTk2OC04OWIxLTRjMDItYjkxNC0zYjk3MTRmZTU4OTAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWEyZmIzMGQ1MzA5MDI1ZDFlZDVlZjgzOTQwYmQ5MThjYzkxM2E4ZDA5NmQ1M2U2Yzg1ZmJlNzkyNmQyMjk1NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.-FzhP9_mMlSlHZWQ6hpV3c-E53pNA1UB8Wr6yNUVXGQ\\\"\\u003e\\u003cimg width=\\\"358\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282866560-486ca968-89b1-4c02-b914-3b9714fe5890.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg2NjU2MC00ODZjYTk2OC04OWIxLTRjMDItYjkxNC0zYjk3MTRmZTU4OTAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWEyZmIzMGQ1MzA5MDI1ZDFlZDVlZjgzOTQwYmQ5MThjYzkxM2E4ZDA5NmQ1M2U2Yzg1ZmJlNzkyNmQyMjk1NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.-FzhP9_mMlSlHZWQ6hpV3c-E53pNA1UB8Wr6yNUVXGQ\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"4\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#stateful-control--generation\\\"\\u003e\\u003cstrong\\u003eStateful control + generation\\u003c/strong\\u003e\\u003c/a\\u003e makes it easy to interleave prompting / logic / generation, no need for intermediate parsers:\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"# capture our selection under the name 'answer'\\nlm = llama2 + f\\u0026quot;Do you want a joke or a poem? A {select(['joke', 'poem'], name='answer')}.\\\\n\\u0026quot;\\n\\n# make a choice based on the model's previous selection\\nif lm[\\u0026quot;answer\\u0026quot;] == \\u0026quot;joke\\u0026quot;:\\n    lm += f\\u0026quot;Here is a one-line joke about cats: \\u0026quot; + gen('output', stop='\\\\n')\\nelse:\\n    lm += f\\u0026quot;Here is a one-line poem about dogs: \\u0026quot; + gen('output', stop='\\\\n')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-c\\\"\\u003e# capture our selection under the name 'answer'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef\\\"Do you want a joke or a poem? A \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'joke'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'poem'\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'answer'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e.\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e\\\"\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# make a choice based on the model's previous selection\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003eif\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"answer\\\"\\u003c/span\\u003e] \\u003cspan class=\\\"pl-c1\\\"\\u003e==\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"joke\\\"\\u003c/span\\u003e:\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef\\\"Here is a one-line joke about cats: \\\"\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'output'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e)\\n\\u003cspan class=\\\"pl-k\\\"\\u003eelse\\u003c/span\\u003e:\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef\\\"Here is a one-line poem about dogs: \\\"\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'output'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282867311-66d47ce7-1d5a-4dbd-b676-66b9c1094184.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg2NzMxMS02NmQ0N2NlNy0xZDVhLTRkYmQtYjY3Ni02NmI5YzEwOTQxODQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTFkZjM1NDgzZGMyNjY5N2JmZjk2OWVkZGU0MjY4YjA3ODVhNGEzZjgzMjE4YmRjMTNjN2ZmYWIxMWFiZGZhMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.mw2JbqQETSk4N3vu4OY-TsnD2IrGFEpiaAMUywwoTF0\\\"\\u003e\\u003cimg width=\\\"393\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282867311-66d47ce7-1d5a-4dbd-b676-66b9c1094184.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg2NzMxMS02NmQ0N2NlNy0xZDVhLTRkYmQtYjY3Ni02NmI5YzEwOTQxODQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTFkZjM1NDgzZGMyNjY5N2JmZjk2OWVkZGU0MjY4YjA3ODVhNGEzZjgzMjE4YmRjMTNjN2ZmYWIxMWFiZGZhMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.mw2JbqQETSk4N3vu4OY-TsnD2IrGFEpiaAMUywwoTF0\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"5\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eAbstract chat interface\\u003c/strong\\u003e that uses the correct special tokens for any chat model:\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import user, assistant\\n\\n# load a chat model\\nchat_lm = models.LlamaCppChat(path)\\n\\n# wrap with chat block contexts\\nwith user():\\n    lm = chat_lm + 'Do you want a joke or a poem?'\\n\\nwith assistant():\\n    lm += f\\u0026quot;A {select(['joke', 'poem'])}.\\u0026quot;`\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003euser\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003eassistant\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# load a chat model\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003echat_lm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eLlamaCppChat\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003epath\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# wrap with chat block contexts\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003euser\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003echat_lm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Do you want a joke or a poem?'\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eassistant\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef\\\"A \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'joke'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'poem'\\u003c/span\\u003e])\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e.\\\"\\u003c/span\\u003e`\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282870969-89c3e0e2-ed0a-4715-8366-2efca74b7b71.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MDk2OS04OWMzZTBlMi1lZDBhLTQ3MTUtODM2Ni0yZWZjYTc0YjdiNzEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzBjZmE3MTk2YTJiZWVmMTdmZDY4ZjVhY2M4ZGNjMjRmMDhhOTFjM2EzMzljZGVlNjg4YWVkOGI3YmIzZTMxMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.d5d-NI8pZkjtbvdU_yeAwrXiia_Kul4ZZK9Y2uYDx20\\\"\\u003e\\u003cimg width=\\\"331\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282870969-89c3e0e2-ed0a-4715-8366-2efca74b7b71.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MDk2OS04OWMzZTBlMi1lZDBhLTQ3MTUtODM2Ni0yZWZjYTc0YjdiNzEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzBjZmE3MTk2YTJiZWVmMTdmZDY4ZjVhY2M4ZGNjMjRmMDhhOTFjM2EzMzljZGVlNjg4YWVkOGI3YmIzZTMxMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.d5d-NI8pZkjtbvdU_yeAwrXiia_Kul4ZZK9Y2uYDx20\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"6\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eEasy to write reusable components\\u003c/strong\\u003e\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"import guidance\\n\\n@guidance\\ndef one_line_thing(lm, thing, topic):\\n    lm += f'Here is a one-line {thing} about {topic}: ' + gen(stop='\\\\n')\\n    return lm # return our updated model\\n\\n# pick either a joke or a poem\\nlm = llama2 + f\\u0026quot;Do you want a joke or a poem? A {select(['joke', 'poem'], name='thing')}.\\\\n\\u0026quot;\\n\\n# call our guidance function\\nlm += one_line_thing(lm['thing'], 'cats')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eone_line_thing\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003ething\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003etopic\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Here is a one-line \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ething\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e about \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003etopic\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e)\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c\\\"\\u003e# return our updated model\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# pick either a joke or a poem\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef\\\"Do you want a joke or a poem? A \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'joke'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'poem'\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'thing'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e.\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e\\\"\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# call our guidance function\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eone_line_thing\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'thing'\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s\\\"\\u003e'cats'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282871157-60071680-8bbb-4fa5-a298-613d4fd55fa7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTE1Ny02MDA3MTY4MC04YmJiLTRmYTUtYTI5OC02MTNkNGZkNTVmYTcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OTA4ODNhZmU2MDQ5NjI3OWMwMGJjZGEzODIwNmI3OGI4ZTdmYmNjNzk4YzFmMzkyNTAzMWE4MmMxZmZjYjA4MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.aG07Ee-esdK2zUFCcQNZ3BZy_XRj3GZLTj-lOzEc34Q\\\"\\u003e\\u003cimg width=\\\"386\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282871157-60071680-8bbb-4fa5-a298-613d4fd55fa7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTE1Ny02MDA3MTY4MC04YmJiLTRmYTUtYTI5OC02MTNkNGZkNTVmYTcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OTA4ODNhZmU2MDQ5NjI3OWMwMGJjZGEzODIwNmI3OGI4ZTdmYmNjNzk4YzFmMzkyNTAzMWE4MmMxZmZjYjA4MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.aG07Ee-esdK2zUFCcQNZ3BZy_XRj3GZLTj-lOzEc34Q\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"7\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eA library of pre-built components\\u003c/strong\\u003e, e.g. substring:\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import substring\\n\\n# define a set of possible statements\\ntext = 'guidance is awesome. guidance is so great. guidance is the best thing since sliced bread.'\\n\\n# force the model to make an exact quote\\nllama2 + f'Here is a true statement about the guidance library: \\u0026quot;{substring(text)}\\u0026quot;'\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003esubstring\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# define a set of possible statements\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003etext\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'guidance is awesome. guidance is so great. guidance is the best thing since sliced bread.'\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# force the model to make an exact quote\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Here is a true statement about the guidance library: \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003esubstring\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003etext\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\"'\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282871631-9a7178ad-ed73-4e6b-b418-f9d2a3a76b88.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTYzMS05YTcxNzhhZC1lZDczLTRlNmItYjQxOC1mOWQyYTNhNzZiODgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OWU1ZDEzN2E2ZTk1NGRmNWFiY2ViY2I1OTY0MDM0ZTMzYmY0ZjQyZDgyM2VkM2NmNzY5MzI3ZTc1ZWM3OGYxOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.FbHtNIkySxSVbtMiyRAzuxOPEYdJ-3NHGYJNv4jk7A8\\\"\\u003e\\u003cimg width=\\\"589\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282871631-9a7178ad-ed73-4e6b-b418-f9d2a3a76b88.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTYzMS05YTcxNzhhZC1lZDczLTRlNmItYjQxOC1mOWQyYTNhNzZiODgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OWU1ZDEzN2E2ZTk1NGRmNWFiY2ViY2I1OTY0MDM0ZTMzYmY0ZjQyZDgyM2VkM2NmNzY5MzI3ZTc1ZWM3OGYxOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.FbHtNIkySxSVbtMiyRAzuxOPEYdJ-3NHGYJNv4jk7A8\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"8\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#automatic-interleaving-of-control-and-generation-tool-use\\\"\\u003e\\u003cstrong\\u003eEasy tool use\\u003c/strong\\u003e\\u003c/a\\u003e, where the model stops generation when a tool is called, calls the tool, then resumes generation. For example, here is a simple version of a calculator, via four separate 'tools':\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"@guidance\\ndef add(lm, input1, input2):\\n    lm += f' = {int(input1) + int(input2)}'\\n    return lm\\n@guidance\\ndef subtract(lm, input1, input2):\\n    lm += f' = {int(input1) - int(input2)}'\\n    return lm\\n@guidance\\ndef multiply(lm, input1, input2):\\n    lm += f' = {float(input1) * float(input2)}'\\n    return lm\\n@guidance\\ndef divide(lm, input1, input2):\\n    lm += f' = {float(input1) / float(input2)}'\\n    return lm\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eadd\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput1\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput2\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef' = \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eint\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput1\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eint\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput2\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003esubtract\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput1\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput2\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef' = \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eint\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput1\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e-\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eint\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput2\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003emultiply\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput1\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput2\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef' = \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003efloat\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput1\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e*\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003efloat\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput2\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003edivide\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput1\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput2\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef' = \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003efloat\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput1\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e/\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003efloat\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput2\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eNow we call \\u003ccode\\u003egen\\u003c/code\\u003e with these tools as options. Notice how generation is stopped and restarted automatically:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + '''\\\\\\n1 + 1 = add(1, 1) = 2\\n2 - 3 = subtract(2, 3) = -1\\n'''\\nlm + gen(max_tokens=15, tools=[add, subtract, multiply, divide])\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'''\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\u003c/span\\u003e1 + 1 = add(1, 1) = 2\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e2 - 3 = subtract(2, 3) = -1\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e'''\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e15\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003etools\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s1\\\"\\u003eadd\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003esubtract\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emultiply\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003edivide\\u003c/span\\u003e])\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282871991-646e1a7d-0206-419b-8206-1d835c3a0e0a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTk5MS02NDZlMWE3ZC0wMjA2LTQxOWItODIwNi0xZDgzNWMzYTBlMGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDE4ZjRlMzliNWI5NGM1YTEyZjZhOTBkZjA5NjcwNTRkNDNjZjcxNDFmYTU4YjE2MTYwMGYxMzhmYWY2OGE5OCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Qz1JQ9Uy5HKeYaAW4HA8TuBq0Z1sm4hnQahZI2LgNDo\\\"\\u003e\\u003cimg width=\\\"201\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282871991-646e1a7d-0206-419b-8206-1d835c3a0e0a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTk5MS02NDZlMWE3ZC0wMjA2LTQxOWItODIwNi0xZDgzNWMzYTBlMGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDE4ZjRlMzliNWI5NGM1YTEyZjZhOTBkZjA5NjcwNTRkNDNjZjcxNDFmYTU4YjE2MTYwMGYxMzhmYWY2OGE5OCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Qz1JQ9Uy5HKeYaAW4HA8TuBq0Z1sm4hnQahZI2LgNDo\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"9\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003cstrong\\u003eSpeed\\u003c/strong\\u003e: In contrast to chaining, \\u003ccode\\u003eguidance\\u003c/code\\u003e programs are the equivalent of a single LLM call. More so, whatever non-generated text that gets appended is batched, so that \\u003ccode\\u003eguidance\\u003c/code\\u003e programs are \\u003cstrong\\u003efaster\\u003c/strong\\u003e than having the LM generate intermediate text when you have a set structure.\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003cstrong\\u003eToken healing\\u003c/strong\\u003e: Users deal with text (or bytes) rather than tokens, and thus don't have to worry about \\u003ca href=\\\"https://towardsdatascience.com/the-art-of-prompt-design-prompt-boundaries-and-token-healing-3b2448b0be38\\\" rel=\\\"nofollow\\\"\\u003eperverse token boundaries issues\\u003c/a\\u003e such as 'prompt ending in whitespace'.\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003cstrong\\u003eStreaming support\\u003c/strong\\u003e, also integrated with jupyter notebooks:\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + 'Here is a cute 5-line poem about cats and dogs:\\\\n'\\nfor i in range(5):\\n    lm += f\\u0026quot;LINE {i+1}: \\u0026quot; + gen(temperature=0.8, suffix=\\u0026quot;\\\\n\\u0026quot;)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Here is a cute 5-line poem about cats and dogs:\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003efor\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003ein\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003erange\\u003c/span\\u003e(\\u003cspan class=\\\"pl-c1\\\"\\u003e5\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef\\\"LINE \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e1\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e: \\\"\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003etemperature\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e0.8\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003esuffix\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e\\\"\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"/guidance-ai/guidance/blob/main/docs/figures/simple_streaming_example.gif\\\"\\u003e\\u003cimg src=\\\"/guidance-ai/guidance/raw/main/docs/figures/simple_streaming_example.gif\\\" width=\\\"337\\\" data-animated-image=\\\"\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"13\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eHigh compatibility:\\u003c/strong\\u003e works with Transformers, llama.cpp, VertexAI, OpenAI. Users can write one guidance program and execute it on many backends. (note that the most powerful control features require endpoint integration, and for now work best with Transformers and llama.cpp).\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"gpt = models.OpenAI(\\u0026quot;gpt-3.5-turbo\\u0026quot;)\\n\\nwith user():\\n    lm = gpt + \\u0026quot;What is the capital of France?\\u0026quot;\\n\\nwith assistant():\\n    lm += gen(\\u0026quot;capital\\u0026quot;)\\n\\nwith user():\\n    lm += \\u0026quot;What is one short surprising fact about it?\\u0026quot;\\n\\nwith assistant():\\n    lm += gen(\\u0026quot;fact\\u0026quot;)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003egpt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eOpenAI\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"gpt-3.5-turbo\\\"\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003euser\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003egpt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"What is the capital of France?\\\"\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eassistant\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"capital\\\"\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003euser\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"What is one short surprising fact about it?\\\"\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eassistant\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"fact\\\"\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282881266-f31ed7b8-1868-44d2-b14c-4842b0a40e5c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4MTI2Ni1mMzFlZDdiOC0xODY4LTQ0ZDItYjE0Yy00ODQyYjBhNDBlNWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NTFjMTM5ODhlM2VhOWY2MTJiOThhODQzMzQ2OTExY2YyNDIxNmZiNDEzN2QyNzYzNjRhMTg4YjE5NWNmZjY0NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.UsjqQmiMq-KaYD0NlaAZpILKbbEIwisZNSCPvu8zMa8\\\"\\u003e\\u003cimg width=\\\"645\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282881266-f31ed7b8-1868-44d2-b14c-4842b0a40e5c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4MTI2Ni1mMzFlZDdiOC0xODY4LTQ0ZDItYjE0Yy00ODQyYjBhNDBlNWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NTFjMTM5ODhlM2VhOWY2MTJiOThhODQzMzQ2OTExY2YyNDIxNmZiNDEzN2QyNzYzNjRhMTg4YjE5NWNmZjY0NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.UsjqQmiMq-KaYD0NlaAZpILKbbEIwisZNSCPvu8zMa8\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003col start=\\\"14\\\" dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eMulti-modal support.\\u003c/strong\\u003e\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import image\\n\\ngemini = models.VertexAI(\\u0026quot;gemini-pro-vision\\u0026quot;)\\n\\nwith user():\\n    lm = gemini + \\u0026quot;What is this a picture of?\\u0026quot; + image(\\u0026quot;longs_peak.jpg\\u0026quot;)\\n\\nwith assistant():\\n    lm += gen(\\u0026quot;answer\\u0026quot;)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eimage\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-s1\\\"\\u003egemini\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eVertexAI\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"gemini-pro-vision\\\"\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003euser\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003egemini\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"What is this a picture of?\\\"\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eimage\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"longs_peak.jpg\\\"\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eassistant\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"answer\\\"\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/290679730-6450d05d-52e9-4ef5-b280-8b57e733d46d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI5MDY3OTczMC02NDUwZDA1ZC01MmU5LTRlZjUtYjI4MC04YjU3ZTczM2Q0NmQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NjAwNDU3ZWZlZjA4NzUyOTgyZjhiNDAwMDA4MjFjMDJiODVhYmM5YWI3YmEyMmI3OTJlYjk1YzZmNzBjYWUzNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Ky6tX_qPI1DKUqD4MxdLJEmCdtcYNa_ncpe3kmgM_us\\\"\\u003e\\u003cimg width=\\\"673\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/290679730-6450d05d-52e9-4ef5-b280-8b57e733d46d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI5MDY3OTczMC02NDUwZDA1ZC01MmU5LTRlZjUtYjI4MC04YjU3ZTczM2Q0NmQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NjAwNDU3ZWZlZjA4NzUyOTgyZjhiNDAwMDA4MjFjMDJiODVhYmM5YWI3YmEyMmI3OTJlYjk1YzZmNzBjYWUzNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Ky6tX_qPI1DKUqD4MxdLJEmCdtcYNa_ncpe3kmgM_us\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eTable of Contents\\u003c/h2\\u003e\\u003ca id=\\\"user-content-table-of-contents\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Table of Contents\\\" href=\\\"#table-of-contents\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cul dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#install\\\"\\u003eInstall\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#loading-models\\\"\\u003eLoading models\\u003c/a\\u003e\\n\\u003cul dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#llamacpp\\\"\\u003ellama.cpp\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#transformers\\\"\\u003etransformers\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#vertex-ai\\\"\\u003eVertex\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#openai\\\"\\u003eOpenAI\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#example-notebooks\\\"\\u003eExample notebooks\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#basic-generation\\\"\\u003eBasic generation\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#constrained-generation\\\"\\u003eConstrained Generation\\u003c/a\\u003e\\n\\u003cul dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#select-basic\\\"\\u003eSelect (basic)\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#regular-expressions\\\"\\u003eRegular expressions\\u003c/a\\u003e\\n\\u003cul dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#regex-to-constrain-generation\\\"\\u003eRegex to constrain generation\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#regex-as-stopping-criterion\\\"\\u003eRegex as stopping criterion\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#context-free-grammars\\\"\\u003eContext-free grammars\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#stateful-control--generation\\\"\\u003eStateful control + generation\\u003c/a\\u003e\\n\\u003cul dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#state-in-immutable-objects\\\"\\u003eState in immutable objects\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#stateful-guidance-functions\\\"\\u003eStateful guidance functions\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#example-react\\\"\\u003eExample: ReAct\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#example-changing-intermediate-step-of-a-chat-session\\\"\\u003eExample: Changing intermediate step of a Chat session\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#automatic-interleaving-of-control-and-generation-tool-use\\\"\\u003eAutomatic interleaving of control and generation: tool use\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#gsm8k-example\\\"\\u003eGsm8k example\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#automatic-call-grammar-for-guidance-functions\\\"\\u003eAutomatic call grammar for @guidance functions\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#text-not-tokens\\\"\\u003eText, not tokens\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#fast\\\"\\u003eFast\\u003c/a\\u003e\\n\\u003cul dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#integrated-stateful-control-is-faster\\\"\\u003eIntegrated stateful control is faster\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"#guidance-acceleration\\\"\\u003eGuidance acceleration\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eInstall\\u003c/h2\\u003e\\u003ca id=\\\"user-content-install\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Install\\\" href=\\\"#install\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-shell notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"pip install guidance\\\"\\u003e\\u003cpre\\u003epip install guidance\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eLoading models\\u003c/h2\\u003e\\u003ca id=\\\"user-content-loading-models\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Loading models\\\" href=\\\"#loading-models\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003ellama.cpp\\u003c/h3\\u003e\\u003ca id=\\\"user-content-llamacpp\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: llama.cpp\\\" href=\\\"#llamacpp\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eInstall the python bindings:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-shell notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"CMAKE_ARGS=\\u0026quot;-DLLAMA_CUBLAS=on\\u0026quot; pip install llama-cpp-python\\\"\\u003e\\u003cpre\\u003eCMAKE_ARGS=\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003cspan class=\\\"pl-pds\\\"\\u003e\\\"\\u003c/span\\u003e-DLLAMA_CUBLAS=on\\u003cspan class=\\\"pl-pds\\\"\\u003e\\\"\\u003c/span\\u003e\\u003c/span\\u003e pip install llama-cpp-python\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eLoading the model:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import models\\nlm = models.LlamaCpp(path_to_model, n_gpu_layers=-1)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eLlamaCpp\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003epath_to_model\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003en_gpu_layers\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e-\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e1\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eTransformers\\u003c/h3\\u003e\\u003ca id=\\\"user-content-transformers\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Transformers\\\" href=\\\"#transformers\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eInstall transformers:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import models\\nlm = models.Transformers(model_name_or_path)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eTransformers\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emodel_name_or_path\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eVertex AI\\u003c/h3\\u003e\\u003ca id=\\\"user-content-vertex-ai\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Vertex AI\\\" href=\\\"#vertex-ai\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eRemote endpoints that don't have explicit guidance integration are run \\\"optimistically\\\". This means that all the text that can be forced is given to the model as a prompt (or chat context) and then the model is run in streaming mode without hard constrants (since the remote API doesn't support them). If the model ever violates the contraints then the model stream is stopped and we optionally try it again at that point. This means that all the API-supported control work as expected, and more complex controls/parsing that is not supported by the API work if the model stays consistent with the program.\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"palm2 = models.VertexAI(\\u0026quot;text-bison@001\\u0026quot;)\\n\\nwith instruction():\\n    lm = palm2 + \\u0026quot;What is one funny fact about Seattle?\\u0026quot;\\n\\nlm + gen(\\u0026quot;fact\\u0026quot;, max_tokens=100)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003epalm2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eVertexAI\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"text-bison@001\\\"\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003einstruction\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003epalm2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"What is one funny fact about Seattle?\\\"\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"fact\\\"\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e100\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282886474-693ae08f-68f7-4368-bd25-19afc9bfc0a5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4NjQ3NC02OTNhZTA4Zi02OGY3LTQzNjgtYmQyNS0xOWFmYzliZmMwYTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmE5ODM3M2Y0Y2U2YzBkOTg3NTNhZWFlODZjNmI1MGU2MDQzNmQxODBmYjBmMzQzZmUwZjQ4NjQyMmFlYTEyNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.25Q7MFCAR8i4Y7QcfpKqe4pBti0M2w5zcqaqQuO9TtI\\\"\\u003e\\u003cimg width=\\\"635\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282886474-693ae08f-68f7-4368-bd25-19afc9bfc0a5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4NjQ3NC02OTNhZTA4Zi02OGY3LTQzNjgtYmQyNS0xOWFmYzliZmMwYTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmE5ODM3M2Y0Y2U2YzBkOTg3NTNhZWFlODZjNmI1MGU2MDQzNmQxODBmYjBmMzQzZmUwZjQ4NjQyMmFlYTEyNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.25Q7MFCAR8i4Y7QcfpKqe4pBti0M2w5zcqaqQuO9TtI\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eOpenAI\\u003c/h3\\u003e\\u003ca id=\\\"user-content-openai\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: OpenAI\\\" href=\\\"#openai\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eOpenAI endpoint don't have direct support for guidance grammars, but through optimistic running we can still control them in ways that match the model type:\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003cem\\u003eLegacy completion models:\\u003c/em\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"curie = models.OpenAI(\\u0026quot;text-curie-001\\u0026quot;)\\n\\ncurie + \\u0026quot;The smallest cats are\\u0026quot; + gen(stop=\\u0026quot;.\\u0026quot;)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ecurie\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eOpenAI\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"text-curie-001\\\"\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ecurie\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"The smallest cats are\\\"\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e\\\".\\\"\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282887922-116a906c-ea77-4a13-a83a-682029d5e5c8.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4NzkyMi0xMTZhOTA2Yy1lYTc3LTRhMTMtYTgzYS02ODIwMjlkNWU1YzgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MmU4ZjE5NWMwMTM2YzZkMjRkY2FhMGZhMzMzZWVmMjAyYmE5YmQ1OWRiOTUyMmU0MzE4MTg0ZTE5NTZmOWU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.eaYzk7BWkH2gvt8WrYekqpDDA-aCRIMI14lp_kA3mHs\\\"\\u003e\\u003cimg width=\\\"263\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282887922-116a906c-ea77-4a13-a83a-682029d5e5c8.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4NzkyMi0xMTZhOTA2Yy1lYTc3LTRhMTMtYTgzYS02ODIwMjlkNWU1YzgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MmU4ZjE5NWMwMTM2YzZkMjRkY2FhMGZhMzMzZWVmMjAyYmE5YmQ1OWRiOTUyMmU0MzE4MTg0ZTE5NTZmOWU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.eaYzk7BWkH2gvt8WrYekqpDDA-aCRIMI14lp_kA3mHs\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003cem\\u003eInstruct tuned models:\\u003c/em\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"gpt_instruct = models.OpenAI(\\u0026quot;gpt-3.5-turbo-instruct\\u0026quot;)\\n\\nwith instruction():\\n    lm = gpt_instruct + \\u0026quot;What are the smallest cats?\\u0026quot;\\n    \\nlm += gen(stop=\\u0026quot;.\\u0026quot;)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003egpt_instruct\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eOpenAI\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"gpt-3.5-turbo-instruct\\\"\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003einstruction\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003egpt_instruct\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"What are the smallest cats?\\\"\\u003c/span\\u003e\\n    \\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e\\\".\\\"\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282888489-56a53ce1-89f5-4e9d-bdb8-86fb3eebf309.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4ODQ4OS01NmE1M2NlMS04OWY1LTRlOWQtYmRiOC04NmZiM2VlYmYzMDkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTg4YzExZjA5YzdhYzRhYWRlMTQ3NzhhMGZmNmIyMjlmNmU2OWVlOWIwOTJlYTJhODQ3ZWQ3NzQxNTFmMGM0OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.2GoiKBPhg2zXtBPFjt3hYsTJCm_s5EVSoD1valeUpRA\\\"\\u003e\\u003cimg width=\\\"574\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282888489-56a53ce1-89f5-4e9d-bdb8-86fb3eebf309.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4ODQ4OS01NmE1M2NlMS04OWY1LTRlOWQtYmRiOC04NmZiM2VlYmYzMDkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTg4YzExZjA5YzdhYzRhYWRlMTQ3NzhhMGZmNmIyMjlmNmU2OWVlOWIwOTJlYTJhODQ3ZWQ3NzQxNTFmMGM0OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.2GoiKBPhg2zXtBPFjt3hYsTJCm_s5EVSoD1valeUpRA\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003cem\\u003eChat models:\\u003c/em\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"gpt = models.OpenAI(\\u0026quot;gpt-3.5-turbo\\u0026quot;)\\n\\nwith system():\\n    lm = gpt + \\u0026quot;You are a cat expert.\\u0026quot;\\n\\nwith user():\\n    lm += \\u0026quot;What are the smallest cats?\\u0026quot;\\n\\nwith assistant():\\n    lm += gen(\\u0026quot;answer\\u0026quot;, stop=\\u0026quot;.\\u0026quot;)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003egpt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eOpenAI\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"gpt-3.5-turbo\\\"\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003esystem\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003egpt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"You are a cat expert.\\\"\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003euser\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e\\\"What are the smallest cats?\\\"\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eassistant\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"answer\\\"\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e\\\".\\\"\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282888917-46102f0f-37dc-4bb1-99b7-e5895bdee772.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4ODkxNy00NjEwMmYwZi0zN2RjLTRiYjEtOTliNy1lNTg5NWJkZWU3NzIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2Q5OTllNDZmMzliMzNjNzg2ZDRjZTQzMWJjNmJkMzUxMjQ1YjA5NjU1ZDQ1NTM5MzRjMTdhYTA3YzUzZDlhZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.9sZpBamyU6zBLogDS4YYNjIIxYi8lQ4jf2tkUnTuSMA\\\"\\u003e\\u003cimg width=\\\"367\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282888917-46102f0f-37dc-4bb1-99b7-e5895bdee772.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4ODkxNy00NjEwMmYwZi0zN2RjLTRiYjEtOTliNy1lNTg5NWJkZWU3NzIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2Q5OTllNDZmMzliMzNjNzg2ZDRjZTQzMWJjNmJkMzUxMjQ1YjA5NjU1ZDQ1NTM5MzRjMTdhYTA3YzUzZDlhZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.9sZpBamyU6zBLogDS4YYNjIIxYi8lQ4jf2tkUnTuSMA\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eExample notebooks\\u003c/h2\\u003e\\u003ca id=\\\"user-content-example-notebooks\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Example notebooks\\\" href=\\\"#example-notebooks\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eWe are working on updating our example notebooks. The following ones have been updated:\\u003c/p\\u003e\\n\\u003cul dir=\\\"auto\\\"\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"/guidance-ai/guidance/blob/main/notebooks/tutorials/intro_to_guidance.ipynb\\\"\\u003eBasic tutorial\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ca href=\\\"/guidance-ai/guidance/blob/main/notebooks/chat_with_search.ipynb\\\"\\u003eChatbot with search\\u003c/a\\u003e\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eMore coming soon\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eBasic generation\\u003c/h2\\u003e\\u003ca id=\\\"user-content-basic-generation\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Basic generation\\\" href=\\\"#basic-generation\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eAn \\u003ccode\\u003elm\\u003c/code\\u003e object is immutable, so you change it by creating new copies of it. By default, when you append things to \\u003ccode\\u003elm\\u003c/code\\u003e, it creates a copy, e.g.:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import models, gen, select\\nllama2 = models.LlamaCpp(model)\\n\\n# llama2 is not modified, `lm` is a copy of `llama2` with 'This is a prompt' appended to its state\\nlm = llama2 + 'This is a prompt'\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003egen\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003eselect\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eLlamaCpp\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emodel\\u003c/span\\u003e)\\n\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# llama2 is not modified, `lm` is a copy of `llama2` with 'This is a prompt' appended to its state\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'This is a prompt'\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282892561-c1e96b2b-8f4a-44ee-a8f4-a694a8d7784b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MjU2MS1jMWU5NmIyYi04ZjRhLTQ0ZWUtYThmNC1hNjk0YThkNzc4NGIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZGUxYTc2YzRjN2UwNWRlNGYzMWI1MTY2YzY2YjM4ZjE2N2NmMjRkYmEwNzIzZjYzOTE5OGZlNGQ2ZjA1YjllNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.sfKerT8HqTx7iYYRb-uyDcJN3uCCdepkqFAezy-r_T8\\\"\\u003e\\u003cimg width=\\\"124\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282892561-c1e96b2b-8f4a-44ee-a8f4-a694a8d7784b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MjU2MS1jMWU5NmIyYi04ZjRhLTQ0ZWUtYThmNC1hNjk0YThkNzc4NGIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZGUxYTc2YzRjN2UwNWRlNGYzMWI1MTY2YzY2YjM4ZjE2N2NmMjRkYmEwNzIzZjYzOTE5OGZlNGQ2ZjA1YjllNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.sfKerT8HqTx7iYYRb-uyDcJN3uCCdepkqFAezy-r_T8\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eYou can append \\u003cem\\u003egeneration\\u003c/em\\u003e calls to model objects, e.g.\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + 'This is a prompt' + gen(max_tokens=10)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'This is a prompt'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e10\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282892775-d2e5ed34-ba9d-4bdd-872d-2b76f8e3cf85.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mjc3NS1kMmU1ZWQzNC1iYTlkLTRiZGQtODcyZC0yYjc2ZjhlM2NmODUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTBiY2I2YjFjNmMxN2ZmZjc2ZjY5NWVmMWRiNDkzZTNlNTZmY2Y4ZGVhODg1MTg1YmQ0YWJmMGYwZDc2Mjg0YSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.HbiQJWjGcfiVCHvfsCqzBfy3d0uYSlVjFM_A0Dhy4qY\\\"\\u003e\\u003cimg width=\\\"267\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282892775-d2e5ed34-ba9d-4bdd-872d-2b76f8e3cf85.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mjc3NS1kMmU1ZWQzNC1iYTlkLTRiZGQtODcyZC0yYjc2ZjhlM2NmODUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTBiY2I2YjFjNmMxN2ZmZjc2ZjY5NWVmMWRiNDkzZTNlNTZmY2Y4ZGVhODg1MTg1YmQ0YWJmMGYwZDc2Mjg0YSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.HbiQJWjGcfiVCHvfsCqzBfy3d0uYSlVjFM_A0Dhy4qY\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eYou can also interleave generation calls with plain text, or control flows:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"# Note how we set stop tokens\\nlm = llama2 + 'I like to play with my ' + gen(stop=' ') + ' in' + gen(stop=['\\\\n', '.', '!'])\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-c\\\"\\u003e# Note how we set stop tokens\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'I like to play with my '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e' '\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e' in'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'.'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'!'\\u003c/span\\u003e])\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282892963-2d47fd65-1982-4dd8-9ba9-a01e62fba455.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mjk2My0yZDQ3ZmQ2NS0xOTgyLTRkZDgtOWJhOS1hMDFlNjJmYmE0NTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZjE2NjM5YjdkYmZkMGU5YTJkODIwNTA2NTM5YjYxZjRhZDQ3Y2ViNmYxNTc0OGM3OTA3N2M1NDk5ZmQzMzRkNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.9W3CWyguId4RRAC2ktsjnyitXfUac3BGnjzZp7VpKls\\\"\\u003e\\u003cimg width=\\\"279\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282892963-2d47fd65-1982-4dd8-9ba9-a01e62fba455.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mjk2My0yZDQ3ZmQ2NS0xOTgyLTRkZDgtOWJhOS1hMDFlNjJmYmE0NTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZjE2NjM5YjdkYmZkMGU5YTJkODIwNTA2NTM5YjYxZjRhZDQ3Y2ViNmYxNTc0OGM3OTA3N2M1NDk5ZmQzMzRkNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.9W3CWyguId4RRAC2ktsjnyitXfUac3BGnjzZp7VpKls\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eConstrained Generation\\u003c/h2\\u003e\\u003ca id=\\\"user-content-constrained-generation\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Constrained Generation\\\" href=\\\"#constrained-generation\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eSelect (basic)\\u003c/h3\\u003e\\u003ca id=\\\"user-content-select-basic\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Select (basic)\\\" href=\\\"#select-basic\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ccode\\u003eselect\\u003c/code\\u003e constrains generation to a set of options:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + 'I like the color ' + select(['red', 'blue', 'green'])\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'I like the color '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'red'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'blue'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'green'\\u003c/span\\u003e])\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282893084-f0b97629-78a9-439d-90b2-06af31fdc40e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzA4NC1mMGI5NzYyOS03OGE5LTQzOWQtOTBiMi0wNmFmMzFmZGM0MGUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YTRiMzQ1M2UyNmViN2QzZmViZTZiMWYyNzZiNTk4ZWYzMTAzYjFkNjFiZWFmNDJhNTdhYzQ4YmM3Yjk2ZDdmNSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.q-ijpmF67Juab2-ajmbKXREIEaQ17eb16N_un1flOMM\\\"\\u003e\\u003cimg width=\\\"137\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282893084-f0b97629-78a9-439d-90b2-06af31fdc40e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzA4NC1mMGI5NzYyOS03OGE5LTQzOWQtOTBiMi0wNmFmMzFmZGM0MGUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YTRiMzQ1M2UyNmViN2QzZmViZTZiMWYyNzZiNTk4ZWYzMTAzYjFkNjFiZWFmNDJhNTdhYzQ4YmM3Yjk2ZDdmNSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.q-ijpmF67Juab2-ajmbKXREIEaQ17eb16N_un1flOMM\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eRegular expressions\\u003c/h3\\u003e\\u003ca id=\\\"user-content-regular-expressions\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Regular expressions\\\" href=\\\"#regular-expressions\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ccode\\u003egen\\u003c/code\\u003e has optional arguments \\u003ccode\\u003eregex\\u003c/code\\u003e and \\u003ccode\\u003estop_regex\\u003c/code\\u003e, which allow generation (and stopping, respectively) to be controlled by a regex.\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch4 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eRegex to constrain generation\\u003c/h4\\u003e\\u003ca id=\\\"user-content-regex-to-constrain-generation\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Regex to constrain generation\\\" href=\\\"#regex-to-constrain-generation\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eUnconstrained:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + 'Question: Luke has ten balls. He gives three to his brother.\\\\n'\\nlm += 'How many balls does he have left?\\\\n'\\nlm += 'Answer: ' + gen(stop='\\\\n')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Question: Luke has ten balls. He gives three to his brother.\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'How many balls does he have left?\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Answer: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282893236-55fb66ea-a717-417a-8a70-14c46eba4c66.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzIzNi01NWZiNjZlYS1hNzE3LTQxN2EtOGE3MC0xNGM0NmViYTRjNjYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjBjOGMzNzFiZGJkZWM0ODE4NzgyZWYxZGVkOWFhNGE0ZWYzMDEwM2E4MzgwZGUzMWRiZTQyMDIwZjNhM2VmZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.254Y3il4UXB7xUvqwh2sq8pkwyVx4YMNwnMmQYQ_-bw\\\"\\u003e\\u003cimg width=\\\"405\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282893236-55fb66ea-a717-417a-8a70-14c46eba4c66.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzIzNi01NWZiNjZlYS1hNzE3LTQxN2EtOGE3MC0xNGM0NmViYTRjNjYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjBjOGMzNzFiZGJkZWM0ODE4NzgyZWYxZGVkOWFhNGE0ZWYzMDEwM2E4MzgwZGUzMWRiZTQyMDIwZjNhM2VmZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.254Y3il4UXB7xUvqwh2sq8pkwyVx4YMNwnMmQYQ_-bw\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eConstrained by regex:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + 'Question: Luke has ten balls. He gives three to his brother.\\\\n'\\nlm += 'How many balls does he have left?\\\\n'\\nlm += 'Answer: ' + gen(regex='\\\\d+')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Question: Luke has ten balls. He gives three to his brother.\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'How many balls does he have left?\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Answer: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eregex\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\\d+'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282893318-b45a5a79-55e0-4c15-884a-fba830c0a153.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzMxOC1iNDVhNWE3OS01NWUwLTRjMTUtODg0YS1mYmE4MzBjMGExNTMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGU2ZjhiMTdjYTRiMzU0MjkwYzkzYzE1ODQzNTAxMGJlYWZlY2IwZWI3ZDcwNDFiNDE1ZWVjODE1MzIzY2Y5MyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.lmUwircm8hMcS6GJ5y40tL7AXV50YBlZxzkDdfVQ0UA\\\"\\u003e\\u003cimg width=\\\"404\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282893318-b45a5a79-55e0-4c15-884a-fba830c0a153.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzMxOC1iNDVhNWE3OS01NWUwLTRjMTUtODg0YS1mYmE4MzBjMGExNTMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGU2ZjhiMTdjYTRiMzU0MjkwYzkzYzE1ODQzNTAxMGJlYWZlY2IwZWI3ZDcwNDFiNDE1ZWVjODE1MzIzY2Y5MyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.lmUwircm8hMcS6GJ5y40tL7AXV50YBlZxzkDdfVQ0UA\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch4 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eRegex as stopping criterion\\u003c/h4\\u003e\\u003ca id=\\\"user-content-regex-as-stopping-criterion\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Regex as stopping criterion\\\" href=\\\"#regex-as-stopping-criterion\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eUnconstrained:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + '19, 18,' + gen(max_tokens=50)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'19, 18,'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e50\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282893796-5dd13454-cc42-4e27-a52c-19a31237891c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mzc5Ni01ZGQxMzQ1NC1jYzQyLTRlMjctYTUyYy0xOWEzMTIzNzg5MWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjIwZThmNGMzOWU2OGU5YTU1NWEyZDg2ZjY5ZjEyMGM3ODYzZDhlMTE2YjNmMDViZjlhNzBiYWVmODAyMjEyMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.VnM5yhH2jJ3dV-Elf1Kt-Cuf3lMoLK6KWgSaFKEhFOU\\\"\\u003e\\u003cimg width=\\\"359\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282893796-5dd13454-cc42-4e27-a52c-19a31237891c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mzc5Ni01ZGQxMzQ1NC1jYzQyLTRlMjctYTUyYy0xOWEzMTIzNzg5MWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjIwZThmNGMzOWU2OGU5YTU1NWEyZDg2ZjY5ZjEyMGM3ODYzZDhlMTE2YjNmMDViZjlhNzBiYWVmODAyMjEyMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.VnM5yhH2jJ3dV-Elf1Kt-Cuf3lMoLK6KWgSaFKEhFOU\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eStop with traditional stop text, whenever the model generates the number 7:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + '19, 18,' + gen(max_tokens=50, stop='7')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'19, 18,'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e50\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'7'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282893854-fc96d7c3-381d-4766-8bee-c930669f518a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mzg1NC1mYzk2ZDdjMy0zODFkLTQ3NjYtOGJlZS1jOTMwNjY5ZjUxOGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDY3MDAxOTFkYWRmZTVkNzQyYzc0ZWUzMDJmOGVjNjc0OTA0YjNlN2M2ZmJiNDRmZGJjZmVjOGYyMTUxNWQxMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.dIzFgwv7gc7PuX0gjcxl9lkc6X6zyuM4mc9r-tQzQcA\\\"\\u003e\\u003cimg width=\\\"73\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282893854-fc96d7c3-381d-4766-8bee-c930669f518a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mzg1NC1mYzk2ZDdjMy0zODFkLTQ3NjYtOGJlZS1jOTMwNjY5ZjUxOGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDY3MDAxOTFkYWRmZTVkNzQyYzc0ZWUzMDJmOGVjNjc0OTA0YjNlN2M2ZmJiNDRmZGJjZmVjOGYyMTUxNWQxMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.dIzFgwv7gc7PuX0gjcxl9lkc6X6zyuM4mc9r-tQzQcA\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eStop whenever the model generates the character \\u003ccode\\u003e7\\u003c/code\\u003e without any numbers around it:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + '19, 18,' + gen(max_tokens=50, stop_regex='[^\\\\d]7[^\\\\d]')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'19, 18,'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e50\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop_regex\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'[^\\\\d]7[^\\\\d]'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282893900-a657e566-b1a4-447a-82a5-b88977b5fedf.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzkwMC1hNjU3ZTU2Ni1iMWE0LTQ0N2EtODJhNS1iODg5NzdiNWZlZGYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTMyZWM5Mzk1OTVhZjdjMGU1MjkyZDcxZmM2NzJiODdiMDZlNDA3ZTAzMTVjNDM3YjIzNjVhZjliNmQwOGFkYiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.hDKh0GO84EX3xoBLWRzRI0GmmpLvCg5yipCuHvFh5J8\\\"\\u003e\\u003cimg width=\\\"293\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282893900-a657e566-b1a4-447a-82a5-b88977b5fedf.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzkwMC1hNjU3ZTU2Ni1iMWE0LTQ0N2EtODJhNS1iODg5NzdiNWZlZGYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTMyZWM5Mzk1OTVhZjdjMGU1MjkyZDcxZmM2NzJiODdiMDZlNDA3ZTAzMTVjNDM3YjIzNjVhZjliNmQwOGFkYiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.hDKh0GO84EX3xoBLWRzRI0GmmpLvCg5yipCuHvFh5J8\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eContext-free grammars\\u003c/h3\\u003e\\u003ca id=\\\"user-content-context-free-grammars\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Context-free grammars\\\" href=\\\"#context-free-grammars\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eWe expose a variety of operators that make it easy to define CFGs, which in turn can be used to constrain generation.\\nFor example, we can use the \\u003ccode\\u003eselect\\u003c/code\\u003e operator (it accepts CFGs as options), \\u003ccode\\u003ezero_or_more\\u003c/code\\u003e and \\u003ccode\\u003eone_or_more\\u003c/code\\u003e to define a grammar for mathematical expressions:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"import guidance\\nfrom guidance import one_or_more, select, zero_or_more\\n# stateless=True indicates this function does not depend on LLM generations\\n@guidance(stateless=True)\\ndef number(lm):\\n    n = one_or_more(select(['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']))\\n    # Allow for negative or positive numbers\\n    return lm + select(['-' + n, n])\\n\\n@guidance(stateless=True)\\ndef operator(lm):\\n    return lm + select(['+' , '*', '**', '/', '-'])\\n\\n@guidance(stateless=True)\\ndef expression(lm):\\n    # Either\\n    # 1. A number (terminal)\\n    # 2. two expressions with an operator and optional whitespace\\n    # 3. An expression with parentheses around it\\n    return lm + select([\\n        number(),\\n        expression() + zero_or_more(' ') +  operator() + zero_or_more(' ') +  expression(),\\n        '(' + expression() + ')'\\n    ])\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eone_or_more\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003eselect\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003ezero_or_more\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-c\\\"\\u003e# stateless=True indicates this function does not depend on LLM generations\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-en\\\"\\u003eguidance\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estateless\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003enumber\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003en\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eone_or_more\\u003c/span\\u003e(\\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'0'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'1'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'2'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'3'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'4'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'5'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'6'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'7'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'8'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'9'\\u003c/span\\u003e]))\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# Allow for negative or positive numbers\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'-'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003en\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003en\\u003c/span\\u003e])\\n\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-en\\\"\\u003eguidance\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estateless\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eoperator\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'+'\\u003c/span\\u003e , \\u003cspan class=\\\"pl-s\\\"\\u003e'*'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'**'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'/'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'-'\\u003c/span\\u003e])\\n\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-en\\\"\\u003eguidance\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estateless\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# Either\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# 1. A number (terminal)\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# 2. two expressions with an operator and optional whitespace\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# 3. An expression with parentheses around it\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\n        \\u003cspan class=\\\"pl-en\\\"\\u003enumber\\u003c/span\\u003e(),\\n        \\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e() \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ezero_or_more\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e' '\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e  \\u003cspan class=\\\"pl-en\\\"\\u003eoperator\\u003c/span\\u003e() \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ezero_or_more\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e' '\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e  \\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e(),\\n        \\u003cspan class=\\\"pl-s\\\"\\u003e'('\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e() \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e')'\\u003c/span\\u003e\\n    ])\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eThe \\u003ccode\\u003e@guidance(stateless=True)\\u003c/code\\u003e decorator makes it such that a function (e.g. \\u003ccode\\u003eexpression\\u003c/code\\u003e) lives as a stateless grammar that does not get 'executed' until we call call \\u003ccode\\u003elm + expression()\\u003c/code\\u003e or \\u003ccode\\u003elm += expression()\\u003c/code\\u003e. For example, here is an example of \\u003cem\\u003eunconstrained\\u003c/em\\u003e generation:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"# Without constraints\\nlm = llama2 + 'Problem: Luke has a hundred and six balls. He then loses thirty six.\\\\n'\\nlm += 'Equivalent arithmetic expression: ' + gen(stop='\\\\n') + '\\\\n'\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-c\\\"\\u003e# Without constraints\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Problem: Luke has a hundred and six balls. He then loses thirty six.\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Equivalent arithmetic expression: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282895618-54af1909-cad4-4fb1-8987-dfdfc02f8f42.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NTYxOC01NGFmMTkwOS1jYWQ0LTRmYjEtODk4Ny1kZmRmYzAyZjhmNDIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTA4MzdjMjQ1ZjJiMWUyZTY1M2U1YzMxYTFhNWUxNDA1YWNjZjhhNDRkYjhlYzc0NmFhMWUzMTBhMmE4ZWJmNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.5Ns5nRTEYUJlqL5h-GTCAdlkifW9YdVbbzocTDTodAQ\\\"\\u003e\\u003cimg width=\\\"462\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282895618-54af1909-cad4-4fb1-8987-dfdfc02f8f42.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NTYxOC01NGFmMTkwOS1jYWQ0LTRmYjEtODk4Ny1kZmRmYzAyZjhmNDIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTA4MzdjMjQ1ZjJiMWUyZTY1M2U1YzMxYTFhNWUxNDA1YWNjZjhhNDRkYjhlYzc0NmFhMWUzMTBhMmE4ZWJmNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.5Ns5nRTEYUJlqL5h-GTCAdlkifW9YdVbbzocTDTodAQ\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eNotice how the model wrote the right equation but solved it (incorrectly). If we wanted to constrain the model such that it only writes valid expressions (without trying to solve them), we can just append our grammar to it:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"grammar = expression()\\nlm = llama2 + 'Problem: Luke has a hundred and six balls. He then loses thirty six.\\\\n'\\nlm += 'Equivalent arithmetic expression: ' + grammar + '\\\\n'\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003egrammar\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e()\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Problem: Luke has a hundred and six balls. He then loses thirty six.\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Equivalent arithmetic expression: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003egrammar\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282895816-dbda0ff8-8edd-4384-b63d-fc98792e0689.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NTgxNi1kYmRhMGZmOC04ZWRkLTQzODQtYjYzZC1mYzk4NzkyZTA2ODkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDMzOGQ1ZmRhZmQxMmUwNDEzMGE1NTU5N2Y2YjUyOTdjYTA5OGIwODE2YzhmNWY1YzM2ZjA3NzMxZjU3MjdjMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.jc4p85L92yXGWZKoNPVNeDX41S4GpPB7WGKwzKQXymg\\\"\\u003e\\u003cimg width=\\\"460\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282895816-dbda0ff8-8edd-4384-b63d-fc98792e0689.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NTgxNi1kYmRhMGZmOC04ZWRkLTQzODQtYjYzZC1mYzk4NzkyZTA2ODkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDMzOGQ1ZmRhZmQxMmUwNDEzMGE1NTU5N2Y2YjUyOTdjYTA5OGIwODE2YzhmNWY1YzM2ZjA3NzMxZjU3MjdjMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.jc4p85L92yXGWZKoNPVNeDX41S4GpPB7WGKwzKQXymg\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eGrammars are very easy to compose. For example, let's say we want a grammar that generates either a mathematical expression or an expression followed by a solution followed by another expression. Creating this grammar is easy:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import regex\\ngrammar = select([expression(), expression() +  regex(' = \\\\d+; ') + expression()])\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eregex\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003egrammar\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e(), \\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e() \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e  \\u003cspan class=\\\"pl-en\\\"\\u003eregex\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e' = \\\\d+; '\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e()])\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eWe can generate according to it:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"llama2 + 'Here is a math expression for two plus two: ' + grammar\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Here is a math expression for two plus two: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003egrammar\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282898124-283e6973-0b8d-4153-a82b-9f5db1460da9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5ODEyNC0yODNlNjk3My0wYjhkLTQxNTMtYTgyYi05ZjVkYjE0NjBkYTkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NjliOThjOGIyMTUzZGY2NTk0MTRmNzVhY2U1YzZiMjE1MzdjMzMyNTNiZjkxOWQwYzdjYmM5MTcwY2ZiYmQyMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.RWugZGTSwdr_d7Ih055YVtRQGiv4wr64k7A9uKqURKY\\\"\\u003e\\u003cimg width=\\\"346\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282898124-283e6973-0b8d-4153-a82b-9f5db1460da9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5ODEyNC0yODNlNjk3My0wYjhkLTQxNTMtYTgyYi05ZjVkYjE0NjBkYTkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NjliOThjOGIyMTUzZGY2NTk0MTRmNzVhY2U1YzZiMjE1MzdjMzMyNTNiZjkxOWQwYzdjYmM5MTcwY2ZiYmQyMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.RWugZGTSwdr_d7Ih055YVtRQGiv4wr64k7A9uKqURKY\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"llama2 + '2 + 2 = 4; 3+3\\\\n' + grammar\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'2 + 2 = 4; 3+3\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003egrammar\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282897027-d584a93c-bf24-43d5-8f8d-501e7eb88422.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzAyNy1kNTg0YTkzYy1iZjI0LTQzZDUtOGY4ZC01MDFlN2ViODg0MjIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTM2ZmI3ZTUyN2Q1ZDAwMGUxZDE0OWUyNGMxODMwNjdiYzczODY4NjYzMzVmOGVjZDdmZTczMDMxYjE3MGFlOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.qnu3DaW9ytkoiVD9pbx0lrj9dPqe7ntruWvlQFTA7aY\\\"\\u003e\\u003cimg width=\\\"109\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282897027-d584a93c-bf24-43d5-8f8d-501e7eb88422.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzAyNy1kNTg0YTkzYy1iZjI0LTQzZDUtOGY4ZC01MDFlN2ViODg0MjIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTM2ZmI3ZTUyN2Q1ZDAwMGUxZDE0OWUyNGMxODMwNjdiYzczODY4NjYzMzVmOGVjZDdmZTczMDMxYjE3MGFlOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.qnu3DaW9ytkoiVD9pbx0lrj9dPqe7ntruWvlQFTA7aY\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eEven if you don't like thinking in terms of recursive grammars, this formalism makes it easy to constrain generation. For example, let's say we have the following one-shot prompt:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"@guidance(stateless=True)\\ndef ner_instruction(lm, input):\\n    lm += f'''\\\\\\n    Please tag each word in the input with PER, ORG, LOC, or nothing\\n    ---\\n    Input: John worked at Apple.\\n    Output:\\n    John: PER\\n    worked: \\n    at: \\n    Apple: ORG\\n    .: \\n    ---\\n    Input: {input}\\n    Output:\\n    '''\\n    return lm\\ninput = 'Julia never went to Morocco in her life!!'\\nllama2 + ner_instruction(input) + gen(stop='---')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-en\\\"\\u003eguidance\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estateless\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ener_instruction\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'''\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\u003c/span\\u003e    Please tag each word in the input with PER, ORG, LOC, or nothing\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    ---\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Input: John worked at Apple.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Output:\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    John: PER\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    worked: \\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    at: \\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Apple: ORG\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    .: \\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    ---\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Input: \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003einput\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Output:\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    '''\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003einput\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Julia never went to Morocco in her life!!'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ener_instruction\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'---'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282897184-8ecf5ad4-68b8-4e7a-b107-b1a5613e4c68.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzE4NC04ZWNmNWFkNC02OGI4LTRlN2EtYjEwNy1iMWE1NjEzZTRjNjgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NDQ3MTNlYmFhOGYyZWJkNWE3NGI4ZWYyODgwMWVlYWI2NjM0ODU1MjQ1NWI0YjVjNDI5MTYxNTUxZWUyNDRiMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.ZNmrmQEeDIz7RKfFa3GO_lxnrGFVFqBgOLtbzDrjE_0\\\"\\u003e\\u003cimg width=\\\"465\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282897184-8ecf5ad4-68b8-4e7a-b107-b1a5613e4c68.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzE4NC04ZWNmNWFkNC02OGI4LTRlN2EtYjEwNy1iMWE1NjEzZTRjNjgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NDQ3MTNlYmFhOGYyZWJkNWE3NGI4ZWYyODgwMWVlYWI2NjM0ODU1MjQ1NWI0YjVjNDI5MTYxNTUxZWUyNDRiMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.ZNmrmQEeDIz7RKfFa3GO_lxnrGFVFqBgOLtbzDrjE_0\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eNotice that the model did not spell the word 'Morocco' correctly. Sometimes the model might also hallucinate a tag that doesn't exist. We can improve this by adding more few-shot examples, etc, but we can also constrain generation to the exact format we want:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"import re\\n\\n@guidance(stateless=True)\\ndef constrained_ner(lm, input):\\n    # Split into words\\n    words = [x for x in re.split('([^a-zA-Z0-9])', input) if x and not re.match('\\\\s', x)]\\n    ret = ''\\n    for x in words:\\n        ret += x + ': ' + select(['PER', 'ORG', 'LOC', '']) + '\\\\n'\\n    return lm + ret\\nllama2 + ner_instruction(input) + constrained_ner(input)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ere\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-en\\\"\\u003eguidance\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estateless\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003econstrained_ner\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# Split into words\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003ewords\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e [\\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003efor\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003ein\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ere\\u003c/span\\u003e.\\u003cspan class=\\\"pl-en\\\"\\u003esplit\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'([^a-zA-Z0-9])'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003einput\\u003c/span\\u003e) \\u003cspan class=\\\"pl-k\\\"\\u003eif\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003eand\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003enot\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ere\\u003c/span\\u003e.\\u003cspan class=\\\"pl-en\\\"\\u003ematch\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\\s'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e)]\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003eret\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e''\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003efor\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003ein\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ewords\\u003c/span\\u003e:\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003eret\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e': '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'PER'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'ORG'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'LOC'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e''\\u003c/span\\u003e]) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eret\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ener_instruction\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003econstrained_ner\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003einput\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282897429-72545093-ef16-479a-b666-bd97c54a5dc7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzQyOS03MjU0NTA5My1lZjE2LTQ3OWEtYjY2Ni1iZDk3YzU0YTVkYzcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2RkNDM4ODg3ZWQwYWI0ODlhYTkxMGRiZDMxNjFiMWNkZTg1YTBkMzQwMTNlZDY4MWUxOWFiOTFjOTU4Yjk4OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.qZSVPngJuSej8sTDu8GJZ6QLs0v7TaSMCTB_PZva9YM\\\"\\u003e\\u003cimg width=\\\"462\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282897429-72545093-ef16-479a-b666-bd97c54a5dc7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzQyOS03MjU0NTA5My1lZjE2LTQ3OWEtYjY2Ni1iZDk3YzU0YTVkYzcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2RkNDM4ODg3ZWQwYWI0ODlhYTkxMGRiZDMxNjFiMWNkZTg1YTBkMzQwMTNlZDY4MWUxOWFiOTFjOTU4Yjk4OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.qZSVPngJuSej8sTDu8GJZ6QLs0v7TaSMCTB_PZva9YM\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eWhile \\u003ccode\\u003econstrained_ner(input)\\u003c/code\\u003e \\u003cstrong\\u003eis\\u003c/strong\\u003e a grammar that constrains the model generation, it \\u003cem\\u003efeels\\u003c/em\\u003e like you're just writing normal imperative python code with \\u003ccode\\u003e+=\\u003c/code\\u003e and \\u003ccode\\u003eselects\\u003c/code\\u003e.\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eStateful control + generation\\u003c/h2\\u003e\\u003ca id=\\\"user-content-stateful-control--generation\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Stateful control + generation\\\" href=\\\"#stateful-control--generation\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eState in immutable objects\\u003c/h3\\u003e\\u003ca id=\\\"user-content-state-in-immutable-objects\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: State in immutable objects\\\" href=\\\"#state-in-immutable-objects\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eWhenever you do \\u003ccode\\u003elm + grammar\\u003c/code\\u003e or \\u003ccode\\u003elm + gen\\u003c/code\\u003e, \\u003ccode\\u003elm + select\\u003c/code\\u003e, etc, you return a new lm object with additional state. For example:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"lm = llama2 + 'This is a prompt' + gen(name='test', max_tokens=10)\\nlm += select(['this', 'that'], name='test2')\\nlm['test'], lm['test2']\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'This is a prompt'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'test'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e10\\u003c/span\\u003e)\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'this'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'that'\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'test2'\\u003c/span\\u003e)\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'test'\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'test2'\\u003c/span\\u003e]\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282897719-f0f9d180-6209-40df-9401-40da35d46e1a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzcxOS1mMGY5ZDE4MC02MjA5LTQwZGYtOTQwMS00MGRhMzVkNDZlMWEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MWNjNjE1YjY0ZTlhYjBiN2IwYTQwZmJiMjI4NzExZTllM2VjYzlmOTQ5NTk1NWUwNTgzOGJlZjI3Nzg2MjM0NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.UhOCBbMoPf7MpJ17cGuKjwVsXTS58h6VmB9OeLb6t6U\\\"\\u003e\\u003cimg width=\\\"296\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282897719-f0f9d180-6209-40df-9401-40da35d46e1a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzcxOS1mMGY5ZDE4MC02MjA5LTQwZGYtOTQwMS00MGRhMzVkNDZlMWEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MWNjNjE1YjY0ZTlhYjBiN2IwYTQwZmJiMjI4NzExZTllM2VjYzlmOTQ5NTk1NWUwNTgzOGJlZjI3Nzg2MjM0NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.UhOCBbMoPf7MpJ17cGuKjwVsXTS58h6VmB9OeLb6t6U\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eStateful \\u003ccode\\u003eguidance\\u003c/code\\u003e functions\\u003c/h3\\u003e\\u003ca id=\\\"user-content-stateful-guidance-functions\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Stateful guidance functions\\\" href=\\\"#stateful-guidance-functions\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eThe guidance decorator is \\u003ccode\\u003e@guidance(stateless=False)\\u003c/code\\u003e by default, meaning that a function with this decorator depends on the lm state to execute (either prior state or state generated within the function). For example:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"@guidance(stateless=False)\\ndef test(lm):\\n    lm += 'Should I say \\u0026quot;Scott\\u0026quot;?\\\\n' + select(['yes', 'no'], name='answer') + '\\\\n'\\n    if lm['answer'] == 'yes':\\n        lm += 'Scott'\\n    else:\\n        lm += 'Not Scott'\\n    return lm\\nllama2 + test()\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-en\\\"\\u003eguidance\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estateless\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eFalse\\u003c/span\\u003e)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003etest\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Should I say \\\"Scott\\\"?\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'yes'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'no'\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'answer'\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003eif\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'answer'\\u003c/span\\u003e] \\u003cspan class=\\\"pl-c1\\\"\\u003e==\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'yes'\\u003c/span\\u003e:\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Scott'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003eelse\\u003c/span\\u003e:\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Not Scott'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003etest\\u003c/span\\u003e()\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282898842-5a55496b-aea0-46e9-8de6-b63655027653.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5ODg0Mi01YTU1NDk2Yi1hZWEwLTQ2ZTktOGRlNi1iNjM2NTUwMjc2NTMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzY2ZjIwY2M4NjM0ZjAwMjA5YTViMTAzOWFiZmNkZmEzNDgwMDI5NzgxMjUwMGM1MWI5MTBiMzk3Yjk0MWM0ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.5wl-gbfmiflKedgZwH-HgXFJVlynEkOIprtT0_PmJd8\\\"\\u003e\\u003cimg width=\\\"159\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282898842-5a55496b-aea0-46e9-8de6-b63655027653.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5ODg0Mi01YTU1NDk2Yi1hZWEwLTQ2ZTktOGRlNi1iNjM2NTUwMjc2NTMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzY2ZjIwY2M4NjM0ZjAwMjA5YTViMTAzOWFiZmNkZmEzNDgwMDI5NzgxMjUwMGM1MWI5MTBiMzk3Yjk0MWM0ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.5wl-gbfmiflKedgZwH-HgXFJVlynEkOIprtT0_PmJd8\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eExample: ReAct\\u003c/h3\\u003e\\u003ca id=\\\"user-content-example-react\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Example: ReAct\\\" href=\\\"#example-react\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eA big advantage of stateful control is that you don't have to write any intermediate parsers, and adding follow-up 'prompting' is easy, even if the follow up depends on what the model generates.\\nFor example, let's say we want to implement the first example of ReAct prompt in \\u003ca href=\\\"https://www.promptingguide.ai/techniques/react\\\" rel=\\\"nofollow\\\"\\u003ethis\\u003c/a\\u003e, and let's say the valid acts are only 'Search' or 'Finish'. We might write it like this:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"@guidance\\ndef react_prompt_example(lm, question, max_rounds=10):\\n    lm += f'Question: {question}\\\\n'\\n    i = 1\\n    while True:\\n        lm += f'Thought {i}: ' + gen(suffix='\\\\n')\\n        lm += f'Act {i}: ' + select(['Search', 'Finish'], name='act') \\n        lm += '[' + gen(name='arg', suffix=']') + '\\\\n'\\n        if lm['act'] == 'Finish' or i == max_rounds:\\n            break\\n        else:\\n            lm += f'Observation {i}: ' + search(lm['arg']) + '\\\\n'\\n        i += 1\\n    return lm\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ereact_prompt_example\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003equestion\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emax_rounds\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e10\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Question: \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003equestion\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e1\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ewhile\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e:\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Thought \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003esuffix\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e)\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Act \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e([\\u003cspan class=\\\"pl-s\\\"\\u003e'Search'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'Finish'\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'act'\\u003c/span\\u003e) \\n        \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'['\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'arg'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003esuffix\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e']'\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n        \\u003cspan class=\\\"pl-k\\\"\\u003eif\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'act'\\u003c/span\\u003e] \\u003cspan class=\\\"pl-c1\\\"\\u003e==\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Finish'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003eor\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e==\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emax_rounds\\u003c/span\\u003e:\\n            \\u003cspan class=\\\"pl-k\\\"\\u003ebreak\\u003c/span\\u003e\\n        \\u003cspan class=\\\"pl-k\\\"\\u003eelse\\u003c/span\\u003e:\\n            \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Observation \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003esearch\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'arg'\\u003c/span\\u003e]) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e1\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eNotice how we don't have to write a parser for Act and argument and hope that the model generates something valid: we enforce it. Notice also that the loop only stops once the model chooses to act with 'Finish' (or once we hit a maximum number of rounds).\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eExample: Changing intermediate step of a Chat session\\u003c/h3\\u003e\\u003ca id=\\\"user-content-example-changing-intermediate-step-of-a-chat-session\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Example: Changing intermediate step of a Chat session\\\" href=\\\"#example-changing-intermediate-step-of-a-chat-session\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eWe can also hide or change some of what the model generates. For example, below we get a Chat model (notice we use special \\u003ccode\\u003erole\\u003c/code\\u003e blocks) to name some experts to answer a question, but we always remove 'Ferriss' from the list if he is mentioned:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import user, system, assistant\\nlm = llama2\\nquery = 'How can I be more productive?'\\nwith system():\\n    lm += 'You are a helpful and terse assistant.'\\nwith user():\\n    lm += f'I want a response to the following question:\\\\n{query}\\\\n'\\n    lm += 'Name 3 world-class experts (past or present) who would be great at answering this.'\\nwith assistant():\\n    temp_lm = lm\\n    for i in range(1, 4):\\n        # This regex only allows strings that look like names (where every word is capitalized)\\n        # list_append appends the result to a list\\n        temp_lm += f'{i}. ' + gen(regex='([A-Z][a-z]*\\\\s*)+', suffix='\\\\n',\\n                                  name='experts', list_append=True)\\n    experts = [x for x in temp_lm['experts'] if 'Ferriss' not in x]\\n    # Notice that even if the model generates 'Ferriss' above,\\n    # it doesn't get added to `lm`, only to `temp_lm`\\n    lm += ', '.join(experts)\\nwith user():\\n    lm += 'Please answer the question as if these experts had collaborated in writing an anonymous answer.'\\nwith assistant():\\n    lm += gen(max_tokens=100)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003euser\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003esystem\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003eassistant\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003equery\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'How can I be more productive?'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003esystem\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'You are a helpful and terse assistant.'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003euser\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'I want a response to the following question:\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003equery\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Name 3 world-class experts (past or present) who would be great at answering this.'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eassistant\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003etemp_lm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003efor\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003ein\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003erange\\u003c/span\\u003e(\\u003cspan class=\\\"pl-c1\\\"\\u003e1\\u003c/span\\u003e, \\u003cspan class=\\\"pl-c1\\\"\\u003e4\\u003c/span\\u003e):\\n        \\u003cspan class=\\\"pl-c\\\"\\u003e# This regex only allows strings that look like names (where every word is capitalized)\\u003c/span\\u003e\\n        \\u003cspan class=\\\"pl-c\\\"\\u003e# list_append appends the result to a list\\u003c/span\\u003e\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003etemp_lm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003ei\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e. '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eregex\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'([A-Z][a-z]*\\\\s*)+'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003esuffix\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e,\\n                                  \\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'experts'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003elist_append\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e)\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003eexperts\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e [\\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003efor\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003ein\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003etemp_lm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'experts'\\u003c/span\\u003e] \\u003cspan class=\\\"pl-k\\\"\\u003eif\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Ferriss'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003enot\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003ein\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ex\\u003c/span\\u003e]\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# Notice that even if the model generates 'Ferriss' above,\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# it doesn't get added to `lm`, only to `temp_lm`\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e', '\\u003c/span\\u003e.\\u003cspan class=\\\"pl-en\\\"\\u003ejoin\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eexperts\\u003c/span\\u003e)\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003euser\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Please answer the question as if these experts had collaborated in writing an anonymous answer.'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003ewith\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003eassistant\\u003c/span\\u003e():\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e100\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282909252-d274f8b8-52e7-41a5-9635-b34f70ed50e0.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwOTI1Mi1kMjc0ZjhiOC01MmU3LTQxYTUtOTYzNS1iMzRmNzBlZDUwZTAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDUwNDExYTMzN2NhYjMyOGQwNTljMmVlZDNmMWU0NWE3OTkwZmI5NjY3NDBmZDZmYjQwMGVlOTdkM2Q5MTk4ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GdnyAk2v8WgJ-YN8llX3oC38pR3RbmV3N5f1q7q9JG0\\\"\\u003e\\u003cimg width=\\\"688\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282909252-d274f8b8-52e7-41a5-9635-b34f70ed50e0.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwOTI1Mi1kMjc0ZjhiOC01MmU3LTQxYTUtOTYzNS1iMzRmNzBlZDUwZTAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDUwNDExYTMzN2NhYjMyOGQwNTljMmVlZDNmMWU0NWE3OTkwZmI5NjY3NDBmZDZmYjQwMGVlOTdkM2Q5MTk4ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GdnyAk2v8WgJ-YN8llX3oC38pR3RbmV3N5f1q7q9JG0\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eAutomatic interleaving of control and generation: tool use\\u003c/h3\\u003e\\u003ca id=\\\"user-content-automatic-interleaving-of-control-and-generation-tool-use\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Automatic interleaving of control and generation: tool use\\\" href=\\\"#automatic-interleaving-of-control-and-generation-tool-use\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eTool use is a common case of stateful control. To make it easy to do so, \\u003ccode\\u003egen\\u003c/code\\u003e calls take \\u003ccode\\u003etools\\u003c/code\\u003e as an optional argument, where each tool is defined by (1) a grammar that triggers its call and captures the arguments (if any), and (2) the actual tool call. Then, as generation unrolls, whenever the model generates something that matches the grammar of a tool call, it (1) stops generation, (2) calls the tool (which can append whatever it wants to the LM session), and (3) continues generation.\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eFor example, here is how we might implement a calculator tool, leveraging our \\u003ccode\\u003eexpression\\u003c/code\\u003e grammar above:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import capture, Tool\\n@guidance(stateless=True)\\ndef calculator_call(lm):\\n    # capture just 'names' the expression, to be saved in the LM state\\n    return lm + 'calculator(' + capture(expression(), 'tool_args') + ')'\\n\\n@guidance\\ndef calculator(lm):\\n    expression = lm['tool_args']\\n    # You typically don't want to run eval directly for save reasons\\n    # Here we are guaranteed to only have mathematical expressions\\n    lm += f' = {eval(expression)}'\\n    return lm\\ncalculator_tool = Tool(calculator_call(), calculator)\\nlm = llama2 + 'Here are five expressions:\\\\ncalculator(3 *3) = 33\\\\ncalculator(2 + 1 * 3) = 5\\\\n'\\nlm += gen(max_tokens=30, tools=[calculator_tool], stop='\\\\n\\\\n')\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ecapture\\u003c/span\\u003e, \\u003cspan class=\\\"pl-v\\\"\\u003eTool\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-en\\\"\\u003eguidance\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estateless\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ecalculator_call\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# capture just 'names' the expression, to be saved in the LM state\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'calculator('\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ecapture\\u003c/span\\u003e(\\u003cspan class=\\\"pl-en\\\"\\u003eexpression\\u003c/span\\u003e(), \\u003cspan class=\\\"pl-s\\\"\\u003e'tool_args'\\u003c/span\\u003e) \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e')'\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ecalculator\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003eexpression\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'tool_args'\\u003c/span\\u003e]\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# You typically don't want to run eval directly for save reasons\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# Here we are guaranteed to only have mathematical expressions\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef' = \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eeval\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eexpression\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ecalculator_tool\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-v\\\"\\u003eTool\\u003c/span\\u003e(\\u003cspan class=\\\"pl-en\\\"\\u003ecalculator_call\\u003c/span\\u003e(), \\u003cspan class=\\\"pl-s1\\\"\\u003ecalculator\\u003c/span\\u003e)\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Here are five expressions:\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003ecalculator(3 *3) = 33\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003ecalculator(2 + 1 * 3) = 5\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e30\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003etools\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s1\\\"\\u003ecalculator_tool\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282902885-2d9b840a-4fad-4dab-b3e7-20887539b447.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMjg4NS0yZDliODQwYS00ZmFkLTRkYWItYjNlNy0yMDg4NzUzOWI0NDcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NTg4NDRkZTRjNTc1Y2VjMWUwZmNhNGZhZWE0MzQ2NTFiY2Q1NTkyOWU2MTdkMWM3NDNhZTMyZjI2ZTJjNGM1ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.8Canqccj0-B5H2N-4ACuancSIryiEa1JXzdrYlYQMZE\\\"\\u003e\\u003cimg width=\\\"201\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282902885-2d9b840a-4fad-4dab-b3e7-20887539b447.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMjg4NS0yZDliODQwYS00ZmFkLTRkYWItYjNlNy0yMDg4NzUzOWI0NDcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NTg4NDRkZTRjNTc1Y2VjMWUwZmNhNGZhZWE0MzQ2NTFiY2Q1NTkyOWU2MTdkMWM3NDNhZTMyZjI2ZTJjNGM1ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.8Canqccj0-B5H2N-4ACuancSIryiEa1JXzdrYlYQMZE\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eGsm8k example\\u003c/h3\\u003e\\u003ca id=\\\"user-content-gsm8k-example\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Gsm8k example\\\" href=\\\"#gsm8k-example\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eNotice that the calculator is just called seamlessly during generation. Here is a more realistic exampe of the model solving a gsm8k question:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"@guidance\\ndef math_with_calc(lm, question):\\n    # Two-shot example\\n    lm += '''\\\\\\n    Question: John starts with 2 balls. He then quintupled his number of balls. Then he lost half of them. He then gave 3 to his brother. How many does he have left?\\n    Reasoning:\\n    1. He quintupled his balls. So he has calculator(2 * 5) = 10 balls.\\n    1. He lost half. So he has calculator(10 / 2) = 5 balls.\\n    3. He gave 3 to his brother. So he has calculator(5 - 3) = 2 balls.\\n    Answer: 2\\n\\n    Question: Jill get 7 dollars a day in allowance. She uses 1 each day to by a bus pass, then gives half away. How much does she have left each day?\\n    Reasoning:\\n    1. She gets 7 dollars a day.\\n    1. She spends 1 on a bus pass. So she has calculator(5 - 1) = 6.\\n    3. She gives half away. So that makes calculator(6 / 2) = 3.\\n    Answer: 3\\n\\n    '''\\n    lm += f'Question: {question}\\\\n'\\n    lm += 'Reasoning:\\\\n' + gen(max_tokens=200, tools=[calculator_tool], stop='Answer')\\n    # Only numbers or commas\\n    lm += 'Answer: ' + gen(regex='[-\\\\d,]+')\\n    return lm\\n\\nquestion = '''Janet\u2019s ducks lay 16 eggs per day. She eats three for breakfast every morning and bakes muffins for her friends every day with four. She sells the remainder at the farmers' market daily for $2 per fresh duck egg. How much in dollars does she make every day at the farmers' market?'''\\nllama2 + math_with_calc(question)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003emath_with_calc\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003equestion\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# Two-shot example\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'''\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\u003c/span\\u003e    Question: John starts with 2 balls. He then quintupled his number of balls. Then he lost half of them. He then gave 3 to his brother. How many does he have left?\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Reasoning:\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    1. He quintupled his balls. So he has calculator(2 * 5) = 10 balls.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    1. He lost half. So he has calculator(10 / 2) = 5 balls.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    3. He gave 3 to his brother. So he has calculator(5 - 3) = 2 balls.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Answer: 2\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Question: Jill get 7 dollars a day in allowance. She uses 1 each day to by a bus pass, then gives half away. How much does she have left each day?\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Reasoning:\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    1. She gets 7 dollars a day.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    1. She spends 1 on a bus pass. So she has calculator(5 - 1) = 6.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    3. She gives half away. So that makes calculator(6 / 2) = 3.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    Answer: 3\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    '''\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef'Question: \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003equestion\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Reasoning:\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e200\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003etools\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s1\\\"\\u003ecalculator_tool\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'Answer'\\u003c/span\\u003e)\\n    \\u003cspan class=\\\"pl-c\\\"\\u003e# Only numbers or commas\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Answer: '\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eregex\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'[-\\\\d,]+'\\u003c/span\\u003e)\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-s1\\\"\\u003equestion\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'''Janet\u2019s ducks lay 16 eggs per day. She eats three for breakfast every morning and bakes muffins for her friends every day with four. She sells the remainder at the farmers' market daily for $2 per fresh duck egg. How much in dollars does she make every day at the farmers' market?'''\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003emath_with_calc\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003equestion\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282917778-0c7b8da0-b295-46cd-a312-604ecfba7b33.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzc3OC0wYzdiOGRhMC1iMjk1LTQ2Y2QtYTMxMi02MDRlY2ZiYTdiMzMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGRlYmI1ZjcyMmQ1ZjA2OWQyOTgwNTNiNjEwZTYwNmQ2YjEwY2RlYTRlYjM2MjU4ODcxYTc5N2IyZDZlMWFlZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.fNWeAb-YbqrlAItigAWFcZ5m6_JA9w5SM2Gb89RDKn4\\\"\\u003e\\u003cimg width=\\\"685\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282917778-0c7b8da0-b295-46cd-a312-604ecfba7b33.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzc3OC0wYzdiOGRhMC1iMjk1LTQ2Y2QtYTMxMi02MDRlY2ZiYTdiMzMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGRlYmI1ZjcyMmQ1ZjA2OWQyOTgwNTNiNjEwZTYwNmQ2YjEwY2RlYTRlYjM2MjU4ODcxYTc5N2IyZDZlMWFlZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.fNWeAb-YbqrlAItigAWFcZ5m6_JA9w5SM2Gb89RDKn4\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eAutomatic call grammar for @guidance functions\\u003c/h3\\u003e\\u003ca id=\\\"user-content-automatic-call-grammar-for-guidance-functions\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Automatic call grammar for @guidance functions\\\" href=\\\"#automatic-call-grammar-for-guidance-functions\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eYou can also initialize a \\u003ccode\\u003eTool\\u003c/code\\u003e with any \\u003ccode\\u003e@guidance\\u003c/code\\u003e-decorated function, and the default call grammar will be like a python call. Here is an example of using multiple such tools in the same \\u003ccode\\u003egen\\u003c/code\\u003e call:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"@guidance\\ndef say_scott(lm, n):\\n    lm += '\\\\n'\\n    for _ in range(int(n)):\\n        lm += 'Scott\\\\n'\\n    return lm\\n\\n@guidance\\ndef say_marco(lm, n):\\n    lm += '\\\\n'\\n    for _ in range(int(n)):\\n        lm += 'marco\\\\n'\\n    return lm\\n\\ntools = [Tool(callable=say_scott), Tool(callable=say_marco)]\\nllama2 + '''\\\\\\nI am going to call say_scott and say_marco a few times:\\nsay_scott(1)\\nScott\\n''' + gen(max_tokens=20, tools=tools)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003esay_scott\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003en\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003efor\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003e_\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003ein\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003erange\\u003c/span\\u003e(\\u003cspan class=\\\"pl-en\\\"\\u003eint\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003en\\u003c/span\\u003e)):\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'Scott\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003esay_marco\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003en\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003efor\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003e_\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003ein\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003erange\\u003c/span\\u003e(\\u003cspan class=\\\"pl-en\\\"\\u003eint\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003en\\u003c/span\\u003e)):\\n        \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'marco\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\n\\u003c/span\\u003e'\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\n\\u003cspan class=\\\"pl-s1\\\"\\u003etools\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e [\\u003cspan class=\\\"pl-v\\\"\\u003eTool\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003ecallable\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003esay_scott\\u003c/span\\u003e), \\u003cspan class=\\\"pl-v\\\"\\u003eTool\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003ecallable\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003esay_marco\\u003c/span\\u003e)]\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'''\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\u003c/span\\u003eI am going to call say_scott and say_marco a few times:\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003esay_scott(1)\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003eScott\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e'''\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e20\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003etools\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003etools\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282912917-8025699b-59a1-4a3f-8b1e-a895a54924e2.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxMjkxNy04MDI1Njk5Yi01OWExLTRhM2YtOGIxZS1hODk1YTU0OTI0ZTIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9N2YyNzYzMTg2MDM2Y2UyMmJiNjYzNGZmZmNiNGUxZDI3YjM1OGM5MWMxNWUzNzQ4YjE5MzBlMzAwNTRhZDI0YSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.u6GoCLOOdHHqnnRWg6WzK27xQRKzsK_iBdRQ2kfsYCw\\\"\\u003e\\u003cimg width=\\\"395\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282912917-8025699b-59a1-4a3f-8b1e-a895a54924e2.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxMjkxNy04MDI1Njk5Yi01OWExLTRhM2YtOGIxZS1hODk1YTU0OTI0ZTIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9N2YyNzYzMTg2MDM2Y2UyMmJiNjYzNGZmZmNiNGUxZDI3YjM1OGM5MWMxNWUzNzQ4YjE5MzBlMzAwNTRhZDI0YSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.u6GoCLOOdHHqnnRWg6WzK27xQRKzsK_iBdRQ2kfsYCw\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eText, not tokens\\u003c/h2\\u003e\\u003ca id=\\\"user-content-text-not-tokens\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Text, not tokens\\\" href=\\\"#text-not-tokens\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eThe standard greedy tokenizations used by most language models introduce a variety of subtle and powerful biases, which that can have all kinds of unintended consequences for your prompts.\\nFor example, take the following prompt, given to gpt-2 (standard greedy tokenization):\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003ehf_gen(prompt, max_tokens=10)\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from transformers import pipeline\\npipe = pipeline(\\u0026quot;text-generation\\u0026quot;, model=\\u0026quot;gpt2\\u0026quot;)\\ndef hf_gen(prompt, max_tokens=100):\\n    return pipe(prompt, do_sample=False, max_length=max_tokens, return_full_text=False)[0]['generated_text']\\n\\nprompt = 'http:'\\nhf_gen(prompt, max_tokens=10)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003etransformers\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003epipeline\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003epipe\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003epipeline\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"text-generation\\\"\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emodel\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e\\\"gpt2\\\"\\u003c/span\\u003e)\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003ehf_gen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e100\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003epipe\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003edo_sample\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eFalse\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emax_length\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003ereturn_full_text\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eFalse\\u003c/span\\u003e)[\\u003cspan class=\\\"pl-c1\\\"\\u003e0\\u003c/span\\u003e][\\u003cspan class=\\\"pl-s\\\"\\u003e'generated_text'\\u003c/span\\u003e]\\n\\n\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'http:'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-en\\\"\\u003ehf_gen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e10\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282916469-a0fe3e81-89e0-4b4a-8981-edf8b1a8a723.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjQ2OS1hMGZlM2U4MS04OWUwLTRiNGEtODk4MS1lZGY4YjFhOGE3MjMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDUwYTMzZDY5ZDdlN2UxMmQ1YmYzOWE2MGM4MTk4YTU3NmQxMTA0YzI1N2Q2M2Q4ZjI1ZTRhMDczOGY2MGMzMCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.k-IiVO137e-Jt8KNWeHJbBC1R2ifR75-bBBYGTwRgy0\\\"\\u003e\\u003cimg width=\\\"198\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282916469-a0fe3e81-89e0-4b4a-8981-edf8b1a8a723.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjQ2OS1hMGZlM2U4MS04OWUwLTRiNGEtODk4MS1lZGY4YjFhOGE3MjMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDUwYTMzZDY5ZDdlN2UxMmQ1YmYzOWE2MGM4MTk4YTU3NmQxMTA0YzI1N2Q2M2Q4ZjI1ZTRhMDczOGY2MGMzMCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.k-IiVO137e-Jt8KNWeHJbBC1R2ifR75-bBBYGTwRgy0\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eNotice how the output generated by the LLM does not complete the URL with the obvious next characters (two forward slashes). It instead creates an invalid URL string with a space in the middle. Why? Because the string \\u003ccode\\u003e://\\u003c/code\\u003e is its own token, and so once the model sees a colon by itself, it assumes that the next characters cannot be \\u003ccode\\u003e//\\u003c/code\\u003e; otherwise, the tokenizer would not have used \\u003ccode\\u003e:\\u003c/code\\u003e, and instead would have used \\u003ccode\\u003e://\\u003c/code\\u003e. This is why there are warnings about ending prompts in whitespace, but the problem is way more pervasive than that: any boundary that may span multiple tokens will cause problems, e.g. notice how a partial word causes incorrect completion:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"prompt = 'John is a'\\nhf_gen(prompt, max_tokens=5)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'John is a'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-en\\\"\\u003ehf_gen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e5\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282916633-44906e57-c4ca-4dc3-a1c3-2fdba040259b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjYzMy00NDkwNmU1Ny1jNGNhLTRkYzMtYTFjMy0yZmRiYTA0MDI1OWIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmNlMGRhMGRjYjYwODUxMTQwZDI2NzY5OTU1YzkzODg4ZDcxMDZjYjFlNjcyNWU0M2IyYTk2ZjQwMGUwNDJjZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.2LkYAG7hnHgNeqaEfEJW1IG2CuKQoym_kUvrDzO4UcA\\\"\\u003e\\u003cimg width=\\\"133\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282916633-44906e57-c4ca-4dc3-a1c3-2fdba040259b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjYzMy00NDkwNmU1Ny1jNGNhLTRkYzMtYTFjMy0yZmRiYTA0MDI1OWIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmNlMGRhMGRjYjYwODUxMTQwZDI2NzY5OTU1YzkzODg4ZDcxMDZjYjFlNjcyNWU0M2IyYTk2ZjQwMGUwNDJjZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.2LkYAG7hnHgNeqaEfEJW1IG2CuKQoym_kUvrDzO4UcA\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"prompt = 'John is a fo'\\nhf_gen(prompt, max_tokens=5)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'John is a fo'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-en\\\"\\u003ehf_gen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e5\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282916877-df649320-ec8e-468a-bb2f-e1994f16c9b6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjg3Ny1kZjY0OTMyMC1lYzhlLTQ2OGEtYmIyZi1lMTk5NGYxNmM5YjYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YmJlMmE1OWZjYjVjYTc0YjAyZmM0ZjEzOTU5Yjg4YzQ3NDE4MzZjMTNmYWVmODFmMTY5YmRkZWJiNjY5MGU4NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.eoX-00xhKXeGRRGbVA295RS1cbI90wBqUZFlHSnXBUY\\\"\\u003e\\u003cimg width=\\\"52\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282916877-df649320-ec8e-468a-bb2f-e1994f16c9b6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjg3Ny1kZjY0OTMyMC1lYzhlLTQ2OGEtYmIyZi1lMTk5NGYxNmM5YjYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YmJlMmE1OWZjYjVjYTc0YjAyZmM0ZjEzOTU5Yjg4YzQ3NDE4MzZjMTNmYWVmODFmMTY5YmRkZWJiNjY5MGU4NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.eoX-00xhKXeGRRGbVA295RS1cbI90wBqUZFlHSnXBUY\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eWhile problematic enough for normal prompts, these problems would be a disaster in the kinds of prompts we wrote in this readme, where there is interleaving of prompting and generation happening multiple times (and thus multiple opportunities for problems). This is why \\u003ccode\\u003eguidance\\u003c/code\\u003e implements \\u003ca href=\\\"https://towardsdatascience.com/the-art-of-prompt-design-prompt-boundaries-and-token-healing-3b2448b0be38\\\" rel=\\\"nofollow\\\"\\u003etoken healing\\u003c/a\\u003e, a feature that deals with prompt boundaries automatically, allowing users to just think in terms of \\u003cstrong\\u003etext\\u003c/strong\\u003e rather than tokens. For example:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"from guidance import models\\ngpt = models.Transformers('gpt2')\\nprompt = 'http:'\\ngpt + prompt + gen(max_tokens=10)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-k\\\"\\u003efrom\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e \\u003cspan class=\\\"pl-k\\\"\\u003eimport\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003egpt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003emodels\\u003c/span\\u003e.\\u003cspan class=\\\"pl-v\\\"\\u003eTransformers\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'gpt2'\\u003c/span\\u003e)\\n\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'http:'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003egpt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e10\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282917034-c9f26a58-52f2-457c-958a-e048f68eb388.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzAzNC1jOWYyNmE1OC01MmYyLTQ1N2MtOTU4YS1lMDQ4ZjY4ZWIzODgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDcwODgzZjFjNTIyYWE4MjkyYTQ5ZWUyYmIxYTdmNjU1YTA1NDY5NDg0OTBhMDM2MTM1NWUzYTRjNjBlMzcwMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.JRZprXumOW5INUi0kouFPlwC5IIffXKAaFF7V90CZ0w\\\"\\u003e\\u003cimg width=\\\"244\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282917034-c9f26a58-52f2-457c-958a-e048f68eb388.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzAzNC1jOWYyNmE1OC01MmYyLTQ1N2MtOTU4YS1lMDQ4ZjY4ZWIzODgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDcwODgzZjFjNTIyYWE4MjkyYTQ5ZWUyYmIxYTdmNjU1YTA1NDY5NDg0OTBhMDM2MTM1NWUzYTRjNjBlMzcwMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.JRZprXumOW5INUi0kouFPlwC5IIffXKAaFF7V90CZ0w\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"prompt = 'John is a fo'\\ngpt + prompt + gen(max_tokens=2)\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003e'John is a fo'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003egpt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003eprompt\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003emax_tokens\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e2\\u003c/span\\u003e)\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282917189-bc5e4cd4-9b82-4c09-9db2-9e890dad1d69.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzE4OS1iYzVlNGNkNC05YjgyLTRjMDktOWRiMi05ZTg5MGRhZDFkNjkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDE5YTQ1YzRjYmRhMThmODIwNmJmNzVhNDU2OWVhYmMyYTUxMzMzY2Q3MDIyZGZjNzI4NDM3NDU1NGQ0MWI3NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.cvN5viuDSbVW_edLUl4svSBbRL_u8zs0FTkCYFxFdqw\\\"\\u003e\\u003cimg width=\\\"186\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282917189-bc5e4cd4-9b82-4c09-9db2-9e890dad1d69.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzE4OS1iYzVlNGNkNC05YjgyLTRjMDktOWRiMi05ZTg5MGRhZDFkNjkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDE5YTQ1YzRjYmRhMThmODIwNmJmNzVhNDU2OWVhYmMyYTUxMzMzY2Q3MDIyZGZjNzI4NDM3NDU1NGQ0MWI3NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.cvN5viuDSbVW_edLUl4svSBbRL_u8zs0FTkCYFxFdqw\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch2 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eFast\\u003c/h2\\u003e\\u003ca id=\\\"user-content-fast\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Fast\\\" href=\\\"#fast\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eIntegrated stateful control is faster\\u003c/h3\\u003e\\u003ca id=\\\"user-content-integrated-stateful-control-is-faster\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Integrated stateful control is faster\\\" href=\\\"#integrated-stateful-control-is-faster\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eWe have full control of the decoding loop in our integration with \\u003ccode\\u003etransformers\\u003c/code\\u003e and \\u003ccode\\u003ellamacpp\\u003c/code\\u003e, allowing us to add control and additional prompt without any extra cost.\\u003cbr\\u003e\\nIf instead we're calling a server, we pay the extra cost of making additional requests, which might be ok if the server has caching, but quickly becomes impractical if the server does not have fine-grained caching. For example, note again the output from the \\u003ca href=\\\"#gsm8k-example\\\"\\u003egsm8k example with calculator\\u003c/a\\u003e above:\\u003c/p\\u003e\\n\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282915402-2c75b0f2-6997-43d9-b10e-cb9f6f2e2de5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNTQwMi0yYzc1YjBmMi02OTk3LTQzZDktYjEwZS1jYjlmNmYyZTJkZTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MmM2ZDZiZjIwN2FiMTgxMGFmZGM3M2ZlNjQ5MjIzYjU4ODQ5YTcyNGQ4N2I2MTEzOWYyYzhhYzIzMjliZWU3MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GoYQzMOQlrlIlzZBo4aDRbVsj_eSpcfqdpFrM5ppYoQ\\\"\\u003e\\u003cimg width=\\\"624\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282915402-2c75b0f2-6997-43d9-b10e-cb9f6f2e2de5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNTQwMi0yYzc1YjBmMi02OTk3LTQzZDktYjEwZS1jYjlmNmYyZTJkZTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MmM2ZDZiZjIwN2FiMTgxMGFmZGM3M2ZlNjQ5MjIzYjU4ODQ5YTcyNGQ4N2I2MTEzOWYyYzhhYzIzMjliZWU3MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GoYQzMOQlrlIlzZBo4aDRbVsj_eSpcfqdpFrM5ppYoQ\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eEvery time we call \\u003ccode\\u003ecalculator\\u003c/code\\u003e, we have to stop generation, append the result to the prompt, and resume generation. To avoid slowing down after the first call, a server would need to keep the KV cache up to '3 for breakfast. So she has calculator(16 - 3)', then roll forward generation from that point on. Even servers that \\u003cem\\u003edo\\u003c/em\\u003e have caching often don't have a way to guarantee state is preserved at each stop and start, and so user's pay a significant overhead at each interruption. The normal approach of considering everything as a new prompt would cause significant slow downs every time \\u003ccode\\u003ecalculator\\u003c/code\\u003e is called.\\u003c/p\\u003e\\n\\u003cdiv class=\\\"markdown-heading\\\" dir=\\\"auto\\\"\\u003e\\u003ch3 tabindex=\\\"-1\\\" class=\\\"heading-element\\\" dir=\\\"auto\\\"\\u003eGuidance acceleration\\u003c/h3\\u003e\\u003ca id=\\\"user-content-guidance-acceleration\\\" class=\\\"anchor-element\\\" aria-label=\\\"Permalink: Guidance acceleration\\\" href=\\\"#guidance-acceleration\\\"\\u003e\\u003csvg class=\\\"octicon octicon-link\\\" viewBox=\\\"0 0 16 16\\\" version=\\\"1.1\\\" width=\\\"16\\\" height=\\\"16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath d=\\\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eIn addition to the benefit above, \\u003ccode\\u003eguidance\\u003c/code\\u003e calls are often \\u003cstrong\\u003efaster\\u003c/strong\\u003e than running equivalent prompts the traditional way, because we can batch any additional text that is added by the user as execution unrolls (rather than generating it). Take the example below, where we generate a json with a GGUF compressed \\u003ccode\\u003ellama2\\u003c/code\\u003e 7B executed using llama.cpp:\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"@guidance\\ndef character_maker(lm, id, description, valid_weapons):\\n    lm += f\\u0026quot;\\u0026quot;\\u0026quot;\\\\\\n    The following is a character profile for an RPG game in JSON format.\\n    ```json\\n    {{\\n        \\u0026quot;id\\u0026quot;: \\u0026quot;{id}\\u0026quot;,\\n        \\u0026quot;description\\u0026quot;: \\u0026quot;{description}\\u0026quot;,\\n        \\u0026quot;name\\u0026quot;: \\u0026quot;{gen('name', stop='\\u0026quot;')}\\u0026quot;,\\n        \\u0026quot;age\\u0026quot;: {gen('age', regex='[0-9]+', stop=',')},\\n        \\u0026quot;armor\\u0026quot;: \\u0026quot;{select(options=['leather', 'chainmail', 'plate'], name='armor')}\\u0026quot;,\\n        \\u0026quot;weapon\\u0026quot;: \\u0026quot;{select(options=valid_weapons, name='weapon')}\\u0026quot;,\\n        \\u0026quot;class\\u0026quot;: \\u0026quot;{gen('class', stop='\\u0026quot;')}\\u0026quot;,\\n        \\u0026quot;mantra\\u0026quot;: \\u0026quot;{gen('mantra', stop='\\u0026quot;')}\\u0026quot;,\\n        \\u0026quot;strength\\u0026quot;: {gen('strength', regex='[0-9]+', stop=',')},\\n        \\u0026quot;items\\u0026quot;: [\\u0026quot;{gen('item', list_append=True, stop='\\u0026quot;')}\\u0026quot;, \\u0026quot;{gen('item', list_append=True, stop='\\u0026quot;')}\\u0026quot;, \\u0026quot;{gen('item', list_append=True, stop='\\u0026quot;')}\\u0026quot;]\\n    }}```\\u0026quot;\\u0026quot;\\u0026quot;\\n    return lm\\na = time.time()\\nlm = llama2 + character_maker(1, 'A nimble fighter', ['axe', 'sword', 'bow'])\\ntime.time() - a\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003echaracter_maker\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003eid\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003edescription\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003evalid_weapons\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef\\\"\\\"\\\"\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\u003c/span\\u003e    The following is a character profile for an RPG game in JSON format.\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    ```json\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    {{\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"id\\\": \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003eid\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\",\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"description\\\": \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003edescription\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\",\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"name\\\": \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'name'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\"'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\",\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"age\\\": \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'age'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003eregex\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'[0-9]+'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e','\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e,\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"armor\\\": \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eoptions\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e[\\u003cspan class=\\\"pl-s\\\"\\u003e'leather'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'chainmail'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'plate'\\u003c/span\\u003e], \\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'armor'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\",\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"weapon\\\": \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003eselect\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003eoptions\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003evalid_weapons\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003ename\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'weapon'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\",\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"class\\\": \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'class'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\"'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\",\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"mantra\\\": \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'mantra'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\"'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\",\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"strength\\\": \\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'strength'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003eregex\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'[0-9]+'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e','\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e,\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e        \\\"items\\\": [\\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'item'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003elist_append\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\"'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\", \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'item'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003elist_append\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\"'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\", \\\"\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s\\\"\\u003e'item'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003elist_append\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003eTrue\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'\\\"'\\u003c/span\\u003e)\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e\\\"]\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    }}```\\\"\\\"\\\"\\u003c/span\\u003e\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ea\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003etime\\u003c/span\\u003e.\\u003cspan class=\\\"pl-en\\\"\\u003etime\\u003c/span\\u003e()\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003echaracter_maker\\u003c/span\\u003e(\\u003cspan class=\\\"pl-c1\\\"\\u003e1\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'A nimble fighter'\\u003c/span\\u003e, [\\u003cspan class=\\\"pl-s\\\"\\u003e'axe'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'sword'\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'bow'\\u003c/span\\u003e])\\n\\u003cspan class=\\\"pl-s1\\\"\\u003etime\\u003c/span\\u003e.\\u003cspan class=\\\"pl-en\\\"\\u003etime\\u003c/span\\u003e() \\u003cspan class=\\\"pl-c1\\\"\\u003e-\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ea\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282900530-85b5a181-6e6a-4582-9203-730f49353aeb.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMDUzMC04NWI1YTE4MS02ZTZhLTQ1ODItOTIwMy03MzBmNDkzNTNhZWIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWEzOGI5M2U5NTNiYjgyMjliMjY5ZDJkODcwNDA1NWNjNGRkY2Q3NmFiNTcxMzFlMzg4YTQ5YmRkODgwOGU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.rK4uJLsba2FI1PqJd5oi_vCg2On7zJL1dmUgMbLUZmQ\\\"\\u003e\\u003cimg width=\\\"480\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282900530-85b5a181-6e6a-4582-9203-730f49353aeb.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMDUzMC04NWI1YTE4MS02ZTZhLTQ1ODItOTIwMy03MzBmNDkzNTNhZWIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWEzOGI5M2U5NTNiYjgyMjliMjY5ZDJkODcwNDA1NWNjNGRkY2Q3NmFiNTcxMzFlMzg4YTQ5YmRkODgwOGU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.rK4uJLsba2FI1PqJd5oi_vCg2On7zJL1dmUgMbLUZmQ\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003eEverything that is not green is not actually generated by the model, and is thus batched (much faster). This prompt takes about 1.2 seconds on an A100 GPU. Now, if we let the model generate everything (as in the roughly equivalent prompt below), it takes roughly \\u003ccode\\u003e2.6\\u003c/code\\u003e seconds (not only is it slower, we also have less control over generation).\\u003c/p\\u003e\\n\\u003cdiv class=\\\"highlight highlight-source-python notranslate position-relative overflow-auto\\\" dir=\\\"auto\\\" data-snippet-clipboard-copy-content=\\\"@guidance\\ndef character_maker2(lm, id, description):\\n    lm += f\\u0026quot;\\u0026quot;\\u0026quot;\\\\\\n    The following is a character profile for an RPG game in JSON format. It has fields 'id', 'description', 'name', 'age', 'armor', weapon', 'class', 'mantra', 'strength', and 'items (just the names of 3 items)'\\n    please set description to '{description}'\\n    ```json\\u0026quot;\\u0026quot;\\u0026quot; + gen(stop='```')\\n    return lm\\na = time.time()\\nlm = llama2 + character_maker2(1, 'A nimble fighter')\\ntime.time() - a\\\"\\u003e\\u003cpre\\u003e\\u003cspan class=\\\"pl-en\\\"\\u003e@\\u003cspan class=\\\"pl-s1\\\"\\u003eguidance\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-k\\\"\\u003edef\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003echaracter_maker2\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003eid\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s1\\\"\\u003edescription\\u003c/span\\u003e):\\n    \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s\\\"\\u003ef\\\"\\\"\\\"\\u003cspan class=\\\"pl-cce\\\"\\u003e\\\\\\u003c/span\\u003e\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e\\u003cspan class=\\\"pl-cce\\\"\\u003e\\u003c/span\\u003e    The following is a character profile for an RPG game in JSON format. It has fields 'id', 'description', 'name', 'age', 'armor', weapon', 'class', 'mantra', 'strength', and 'items (just the names of 3 items)'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    please set description to '\\u003cspan class=\\\"pl-s1\\\"\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e{\\u003c/span\\u003e\\u003cspan class=\\\"pl-s1\\\"\\u003edescription\\u003c/span\\u003e\\u003cspan class=\\\"pl-kos\\\"\\u003e}\\u003c/span\\u003e\\u003c/span\\u003e'\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s\\\"\\u003e    ```json\\\"\\\"\\\"\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003egen\\u003c/span\\u003e(\\u003cspan class=\\\"pl-s1\\\"\\u003estop\\u003c/span\\u003e\\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e\\u003cspan class=\\\"pl-s\\\"\\u003e'```'\\u003c/span\\u003e)\\n    \\u003cspan class=\\\"pl-k\\\"\\u003ereturn\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e\\n\\u003cspan class=\\\"pl-s1\\\"\\u003ea\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003etime\\u003c/span\\u003e.\\u003cspan class=\\\"pl-en\\\"\\u003etime\\u003c/span\\u003e()\\n\\u003cspan class=\\\"pl-s1\\\"\\u003elm\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e=\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ellama2\\u003c/span\\u003e \\u003cspan class=\\\"pl-c1\\\"\\u003e+\\u003c/span\\u003e \\u003cspan class=\\\"pl-en\\\"\\u003echaracter_maker2\\u003c/span\\u003e(\\u003cspan class=\\\"pl-c1\\\"\\u003e1\\u003c/span\\u003e, \\u003cspan class=\\\"pl-s\\\"\\u003e'A nimble fighter'\\u003c/span\\u003e)\\n\\u003cspan class=\\\"pl-s1\\\"\\u003etime\\u003c/span\\u003e.\\u003cspan class=\\\"pl-en\\\"\\u003etime\\u003c/span\\u003e() \\u003cspan class=\\\"pl-c1\\\"\\u003e-\\u003c/span\\u003e \\u003cspan class=\\\"pl-s1\\\"\\u003ea\\u003c/span\\u003e\\u003c/pre\\u003e\\u003c/div\\u003e\\n\\u003cp dir=\\\"auto\\\"\\u003e\\u003ca target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" href=\\\"https://private-user-images.githubusercontent.com/3740613/282900702-9c55500d-4c90-4f42-9343-43aa2a25efa4.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMDcwMi05YzU1NTAwZC00YzkwLTRmNDItOTM0My00M2FhMmEyNWVmYTQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjkwZGNlMGQxMGE4ZWE1ODI5NjNjZjAyZjhkNDJhNTVmMTNkNWUyZDVlN2M3YTYzZWEyMDljOTQwNWY1ZmFiOCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.aiSq4L2UCuoPBAD-zqyxx8EqVOEXIX1_eJQw1Aqd4Ao\\\"\\u003e\\u003cimg width=\\\"586\\\" alt=\\\"image\\\" src=\\\"https://private-user-images.githubusercontent.com/3740613/282900702-9c55500d-4c90-4f42-9343-43aa2a25efa4.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMDcwMi05YzU1NTAwZC00YzkwLTRmNDItOTM0My00M2FhMmEyNWVmYTQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjkwZGNlMGQxMGE4ZWE1ODI5NjNjZjAyZjhkNDJhNTVmMTNkNWUyZDVlN2M3YTYzZWEyMDljOTQwNWY1ZmFiOCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.aiSq4L2UCuoPBAD-zqyxx8EqVOEXIX1_eJQw1Aqd4Ao\\\" style=\\\"max-width: 100%;\\\"\\u003e\\u003c/a\\u003e\\u003cbr\\u003e\\u003c/p\\u003e\\n\\u003c/article\\u003e\",\"loaded\":true,\"timedOut\":false,\"errorMessage\":null,\"headerInfo\":{\"toc\":[{\"level\":2,\"text\":\"Table of Contents\",\"anchor\":\"table-of-contents\",\"htmlText\":\"Table of Contents\"},{\"level\":2,\"text\":\"Install\",\"anchor\":\"install\",\"htmlText\":\"Install\"},{\"level\":2,\"text\":\"Loading models\",\"anchor\":\"loading-models\",\"htmlText\":\"Loading models\"},{\"level\":3,\"text\":\"llama.cpp\",\"anchor\":\"llamacpp\",\"htmlText\":\"llama.cpp\"},{\"level\":3,\"text\":\"Transformers\",\"anchor\":\"transformers\",\"htmlText\":\"Transformers\"},{\"level\":3,\"text\":\"Vertex AI\",\"anchor\":\"vertex-ai\",\"htmlText\":\"Vertex AI\"},{\"level\":3,\"text\":\"OpenAI\",\"anchor\":\"openai\",\"htmlText\":\"OpenAI\"},{\"level\":2,\"text\":\"Example notebooks\",\"anchor\":\"example-notebooks\",\"htmlText\":\"Example notebooks\"},{\"level\":2,\"text\":\"Basic generation\",\"anchor\":\"basic-generation\",\"htmlText\":\"Basic generation\"},{\"level\":2,\"text\":\"Constrained Generation\",\"anchor\":\"constrained-generation\",\"htmlText\":\"Constrained Generation\"},{\"level\":3,\"text\":\"Select (basic)\",\"anchor\":\"select-basic\",\"htmlText\":\"Select (basic)\"},{\"level\":3,\"text\":\"Regular expressions\",\"anchor\":\"regular-expressions\",\"htmlText\":\"Regular expressions\"},{\"level\":4,\"text\":\"Regex to constrain generation\",\"anchor\":\"regex-to-constrain-generation\",\"htmlText\":\"Regex to constrain generation\"},{\"level\":4,\"text\":\"Regex as stopping criterion\",\"anchor\":\"regex-as-stopping-criterion\",\"htmlText\":\"Regex as stopping criterion\"},{\"level\":3,\"text\":\"Context-free grammars\",\"anchor\":\"context-free-grammars\",\"htmlText\":\"Context-free grammars\"},{\"level\":2,\"text\":\"Stateful control + generation\",\"anchor\":\"stateful-control--generation\",\"htmlText\":\"Stateful control + generation\"},{\"level\":3,\"text\":\"State in immutable objects\",\"anchor\":\"state-in-immutable-objects\",\"htmlText\":\"State in immutable objects\"},{\"level\":3,\"text\":\"Stateful guidance functions\",\"anchor\":\"stateful-guidance-functions\",\"htmlText\":\"Stateful guidance functions\"},{\"level\":3,\"text\":\"Example: ReAct\",\"anchor\":\"example-react\",\"htmlText\":\"Example: ReAct\"},{\"level\":3,\"text\":\"Example: Changing intermediate step of a Chat session\",\"anchor\":\"example-changing-intermediate-step-of-a-chat-session\",\"htmlText\":\"Example: Changing intermediate step of a Chat session\"},{\"level\":3,\"text\":\"Automatic interleaving of control and generation: tool use\",\"anchor\":\"automatic-interleaving-of-control-and-generation-tool-use\",\"htmlText\":\"Automatic interleaving of control and generation: tool use\"},{\"level\":3,\"text\":\"Gsm8k example\",\"anchor\":\"gsm8k-example\",\"htmlText\":\"Gsm8k example\"},{\"level\":3,\"text\":\"Automatic call grammar for @guidance functions\",\"anchor\":\"automatic-call-grammar-for-guidance-functions\",\"htmlText\":\"Automatic call grammar for @guidance functions\"},{\"level\":2,\"text\":\"Text, not tokens\",\"anchor\":\"text-not-tokens\",\"htmlText\":\"Text, not tokens\"},{\"level\":2,\"text\":\"Fast\",\"anchor\":\"fast\",\"htmlText\":\"Fast\"},{\"level\":3,\"text\":\"Integrated stateful control is faster\",\"anchor\":\"integrated-stateful-control-is-faster\",\"htmlText\":\"Integrated stateful control is faster\"},{\"level\":3,\"text\":\"Guidance acceleration\",\"anchor\":\"guidance-acceleration\",\"htmlText\":\"Guidance acceleration\"}],\"siteNavLoginPath\":\"/login?return_to=https%3A%2F%2Fgithub.com%2Fguidance-ai%2Fguidance\"}},{\"displayName\":\"LICENSE.md\",\"repoName\":\"guidance\",\"refName\":\"main\",\"path\":\"LICENSE.md\",\"preferredFileType\":\"license\",\"tabName\":\"MIT\",\"richText\":null,\"loaded\":false,\"timedOut\":false,\"errorMessage\":null,\"headerInfo\":{\"toc\":null,\"siteNavLoginPath\":\"/login?return_to=https%3A%2F%2Fgithub.com%2Fguidance-ai%2Fguidance\"}}],\"overviewFilesProcessingTime\":60.389948}},\"appPayload\":{\"helpUrl\":\"https://docs.github.com\",\"findFileWorkerPath\":\"/assets-cdn/worker/find-file-worker-32bb159cc57c.js\",\"findInFileWorkerPath\":\"/assets-cdn/worker/find-in-file-worker-c6704d501c10.js\",\"githubDevUrl\":null,\"enabled_features\":{\"code_nav_ui_events\":false,\"copilot_conversational_ux\":false,\"copilot_conversational_ux_embedding_update\":false,\"copilot_popover_file_editor_header\":false,\"copilot_smell_icebreaker_ux\":true,\"copilot_workspace\":false,\"codeview_firefox_inert\":true}}}}</script>  <div data-target=\"react-partial.reactRoot\"><style data-styled=\"true\" data-styled-version=\"5.3.6\">.cgQnMS{font-weight:600;font-size:32px;margin:0;}/*!sc*/data-styled.g1[id=\"Heading__StyledHeading-sc-1c1dgg0-0\"]{content:\"cgQnMS,\"}/*!sc*/.izjvBm{margin-top:16px;margin-bottom:16px;}/*!sc*/.rPQgy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/.eUMEDg{margin-bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;row-gap:16px;}/*!sc*/.eLcVee{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;padding-bottom:16px;padding-top:8px;}/*!sc*/.hsfLlq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;gap:8px;}/*!sc*/@media screen and (max-width:320px){.hsfLlq{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}}/*!sc*/.gpKoUz{position:relative;}/*!sc*/@media screen and (max-width:380px){.gpKoUz .ref-selector-button-text-container{max-width:80px;}}/*!sc*/@media screen and (max-width:320px){.gpKoUz{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.gpKoUz .overview-ref-selector{width:100%;}.gpKoUz .overview-ref-selector > span{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}.gpKoUz .overview-ref-selector > span > span[data-component=\"text\"]{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}}/*!sc*/.kkrdEu{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/.bKgizp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}/*!sc*/.iPGYsi{margin-right:4px;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.dKmYfk{font-size:14px;min-width:0;max-width:125px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}/*!sc*/.trpoQ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;pointer-events:none;}/*!sc*/.laYubZ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/@media screen and (max-width:1079px){.laYubZ{display:none;}}/*!sc*/.swnaL{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/@media screen and (min-width:1080px){.swnaL{display:none;}}/*!sc*/@media screen and (max-width:543px){.swnaL{display:none;}}/*!sc*/.bWpuBf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-left:8px;gap:8px;}/*!sc*/.grHjNb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:8px;}/*!sc*/@media screen and (max-width:543px){.grHjNb{display:none;}}/*!sc*/.dXTsqj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/@media screen and (max-width:1011px){.dXTsqj{display:none;}}/*!sc*/.dCOrmu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/@media screen and (min-width:1012px){.dCOrmu{display:none;}}/*!sc*/@media screen and (max-width:544px){.bVvbgP{display:none;}}/*!sc*/.bNDvfp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/@media screen and (min-width:544px){.bNDvfp{display:none;}}/*!sc*/.yfPnm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:16px;}/*!sc*/.cAQuiW{width:100%;border-collapse:separate;border-spacing:0;border:1px solid;border-color:var(--borderColor-default,var(--color-border-default,#d0d7de));border-radius:6px;table-layout:fixed;overflow:unset;}/*!sc*/.iiUlLN{height:0px;line-height:0px;}/*!sc*/.iiUlLN tr{height:0px;font-size:0px;}/*!sc*/.jmggSN{padding:16px;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));font-size:12px;text-align:left;height:40px;}/*!sc*/.jmggSN th{padding-left:16px;background-color:var(--bgColor-muted,var(--color-canvas-subtle,#f6f8fa));}/*!sc*/.kvYunM{width:100%;border-top-left-radius:6px;}/*!sc*/@media screen and (min-width:544px){.kvYunM{display:none;}}/*!sc*/.hrLuxA{width:40%;border-top-left-radius:6px;}/*!sc*/@media screen and (max-width:543px){.hrLuxA{display:none;}}/*!sc*/@media screen and (max-width:543px){.ePjhhA{display:none;}}/*!sc*/.cuEKae{text-align:right;padding-right:16px;width:136px;border-top-right-radius:6px;}/*!sc*/.jEbBOT{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));font-size:12px;height:40px;}/*!sc*/.bTxCvM{background-color:var(--bgColor-muted,var(--color-canvas-subtle,#f6f8fa));padding:4px;border-top-left-radius:6px;border-top-right-radius:6px;}/*!sc*/.eYedVD{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;min-width:273px;padding-right:8px;padding-left:16px;padding-top:8px;padding-bottom:8px;}/*!sc*/.jGfYmh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:8px;}/*!sc*/.lhFvfi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/.bqgLjk{display:inherit;}/*!sc*/@media screen and (min-width:544px){.bqgLjk{display:none;}}/*!sc*/@media screen and (min-width:768px){.bqgLjk{display:none;}}/*!sc*/.epsqEd{text-align:center;vertical-align:center;height:40px;border-top:1px solid;border-color:var(--borderColor-default,var(--color-border-default,#d0d7de));}/*!sc*/.ldpruc{border-top:1px solid var(--borderColor-default,var(--color-border-default));cursor:pointer;}/*!sc*/.ehcSsh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;gap:16px;}/*!sc*/.iGmlUb{border:1px solid;border-color:var(--borderColor-default,var(--color-border-default,#d0d7de));border-radius:6px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}/*!sc*/@media screen and (max-width:543px){.iGmlUb{margin-left:-16px;margin-right:-16px;max-width:calc(100% + 32px);}}/*!sc*/@media screen and (min-width:544px){.iGmlUb{max-width:100%;}}/*!sc*/.iRQGXA{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom:1px solid;border-bottom-color:var(--borderColor-default,var(--color-border-default,#d0d7de));-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-right:8px;position:-webkit-sticky;position:sticky;top:0;background-color:var(--bgColor-default,var(--color-canvas-default,#ffffff));z-index:1;border-top-left-radius:6px;border-top-right-radius:6px;}/*!sc*/.dvTdPK{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-left:8px;padding-right:8px;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;border-bottom:none;border-bottom-color:var(--borderColor-muted,var(--color-border-muted,hsla(210,18%,87%,1)));align:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:48px;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;max-width:100%;}/*!sc*/.gwuIGu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/.kOxwQs{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;margin-right:8px;}/*!sc*/.kOgeFj{font-weight:600;}/*!sc*/.bJMeLZ{padding:32px;overflow:auto;}/*!sc*/data-styled.g2[id=\"Box-sc-g0xbh4-0\"]{content:\"izjvBm,rPQgy,eUMEDg,eLcVee,hsfLlq,gpKoUz,kkrdEu,bKgizp,iPGYsi,dKmYfk,trpoQ,laYubZ,swnaL,bWpuBf,grHjNb,dXTsqj,dCOrmu,bVvbgP,bNDvfp,yfPnm,cAQuiW,iiUlLN,jmggSN,kvYunM,hrLuxA,ePjhhA,cuEKae,jEbBOT,bTxCvM,eYedVD,jGfYmh,lhFvfi,bqgLjk,epsqEd,ldpruc,ehcSsh,iGmlUb,iRQGXA,dvTdPK,gwuIGu,kOxwQs,kOgeFj,bJMeLZ,\"}/*!sc*/.bOMzPg{min-width:0;}/*!sc*/.eUGNHp{font-weight:600;}/*!sc*/.dALsKK{color:var(--fgColor-default,var(--color-fg-default,#1F2328));}/*!sc*/data-styled.g6[id=\"Text-sc-17v1xeu-0\"]{content:\"bOMzPg,eUGNHp,dALsKK,\"}/*!sc*/.dheQRw{color:var(--fgColor-accent,var(--color-accent-fg,#0969da));-webkit-text-decoration:none;text-decoration:none;}/*!sc*/[data-a11y-link-underlines='true'] .Link__StyledLink-sc-14289xe-0[data-inline='true']{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/.dheQRw:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/.dheQRw:is(button){display:inline-block;padding:0;font-size:inherit;white-space:nowrap;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}/*!sc*/.vLMkZ{color:var(--fgColor-accent,var(--color-accent-fg,#0969da));-webkit-text-decoration:none;text-decoration:none;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;color:var(--fgColor-default,var(--color-fg-default,#1F2328));text-align:center;-webkit-text-decoration:none;text-decoration:none;line-height:calc(20/14);border-radius:6px;font-size:14px;padding-left:8px;padding-right:8px;padding-top:calc((2rem - 1.25rem) / 2);padding-bottom:calc((2rem - 1.25rem) / 2);}/*!sc*/[data-a11y-link-underlines='true'] .Link__StyledLink-sc-14289xe-0[data-inline='true']{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/.vLMkZ:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/.vLMkZ:is(button){display:inline-block;padding:0;font-size:inherit;white-space:nowrap;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}/*!sc*/.vLMkZ span[data-component=\"icon\"]{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/@media (hover:hover){.vLMkZ:hover{background-color:var(--bgColor-neutral-muted,var(--color-neutral-muted,rgba(175,184,193,0.2)));-webkit-transition:background .12s ease-out;transition:background .12s ease-out;-webkit-text-decoration:none;text-decoration:none;}}/*!sc*/.vLMkZ:focus{outline:2px solid transparent;}/*!sc*/.vLMkZ:focus{box-shadow:inset 0 0 0 2px var(--fgColor-accent,var(--color-accent-fg,#0969da));}/*!sc*/.vLMkZ:focus:not(:focus-visible){box-shadow:none;}/*!sc*/.vLMkZ:focus-visible{outline:2px solid transparent;box-shadow:inset 0 0 0 2px var(--fgColor-accent,var(--color-accent-fg,#0969da));}/*!sc*/.vLMkZ span[data-content]::before{content:attr(data-content);display:block;height:0;font-weight:600;visibility:hidden;white-space:nowrap;}/*!sc*/.vLMkZ::after{position:absolute;right:50%;bottom:calc(50% - 25px);width:100%;height:2px;content:\"\";background-color:var(--underlineNav-borderColor-active,var(--color-primer-border-active,#fd8c73));border-radius:0;-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);}/*!sc*/@media (forced-colors:active){.vLMkZ::after{background-color:LinkText;}}/*!sc*/.bhqztV{color:var(--fgColor-accent,var(--color-accent-fg,#0969da));-webkit-text-decoration:none;text-decoration:none;position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;color:var(--fgColor-default,var(--color-fg-default,#1F2328));text-align:center;-webkit-text-decoration:none;text-decoration:none;line-height:calc(20/14);border-radius:6px;font-size:14px;padding-left:8px;padding-right:8px;padding-top:calc((2rem - 1.25rem) / 2);padding-bottom:calc((2rem - 1.25rem) / 2);}/*!sc*/[data-a11y-link-underlines='true'] .Link__StyledLink-sc-14289xe-0[data-inline='true']{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/.bhqztV:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/.bhqztV:is(button){display:inline-block;padding:0;font-size:inherit;white-space:nowrap;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}/*!sc*/.bhqztV span[data-component=\"icon\"]{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/@media (hover:hover){.bhqztV:hover{background-color:var(--bgColor-neutral-muted,var(--color-neutral-muted,rgba(175,184,193,0.2)));-webkit-transition:background .12s ease-out;transition:background .12s ease-out;-webkit-text-decoration:none;text-decoration:none;}}/*!sc*/.bhqztV:focus{outline:2px solid transparent;}/*!sc*/.bhqztV:focus{box-shadow:inset 0 0 0 2px var(--fgColor-accent,var(--color-accent-fg,#0969da));}/*!sc*/.bhqztV:focus:not(:focus-visible){box-shadow:none;}/*!sc*/.bhqztV:focus-visible{outline:2px solid transparent;box-shadow:inset 0 0 0 2px var(--fgColor-accent,var(--color-accent-fg,#0969da));}/*!sc*/.bhqztV span[data-content]::before{content:attr(data-content);display:block;height:0;font-weight:600;visibility:hidden;white-space:nowrap;}/*!sc*/.bhqztV::after{position:absolute;right:50%;bottom:calc(50% - 25px);width:100%;height:2px;content:\"\";background-color:transparent;border-radius:0;-webkit-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);transform:translate(50%,-50%);}/*!sc*/@media (forced-colors:active){.bhqztV::after{background-color:transparent;}}/*!sc*/data-styled.g8[id=\"Link__StyledLink-sc-14289xe-0\"]{content:\"dheQRw,vLMkZ,bhqztV,\"}/*!sc*/.izDscS{border-radius:6px;border:1px solid;border-color:var(--button-default-borderColor-rest,var(--button-default-borderColor-rest,var(--color-btn-border,rgba(31,35,40,0.15))));font-family:inherit;font-weight:500;font-size:14px;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-text-decoration:none;text-decoration:none;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:32px;padding:0 12px;gap:8px;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;-webkit-transition:80ms cubic-bezier(0.65,0,0.35,1);transition:80ms cubic-bezier(0.65,0,0.35,1);-webkit-transition-property:color,fill,background-color,border-color;transition-property:color,fill,background-color,border-color;color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));background-color:var(--button-default-bgColor-rest,var(--color-btn-bg,#f6f8fa));box-shadow:var(--button-default-shadow-resting,var(--color-btn-shadow,0 1px 0 rgba(31,35,40,0.04))),var(--button-default-shadow-inset,var(--color-btn-inset-shadow,inset 0 1px 0 rgba(255,255,255,0.25)));}/*!sc*/.izDscS:focus:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.izDscS:focus:not(:disabled):not(:focus-visible){outline:solid 1px transparent;}/*!sc*/.izDscS:focus-visible:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.izDscS[href]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}/*!sc*/.izDscS[href]:hover{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.izDscS:hover{-webkit-transition-duration:80ms;transition-duration:80ms;}/*!sc*/.izDscS:active{-webkit-transition:none;transition:none;}/*!sc*/.izDscS[data-inactive]{cursor:auto;}/*!sc*/.izDscS:disabled{cursor:not-allowed;box-shadow:none;color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));border-color:var(--button-default-borderColor-disabled,var(--button-default-borderColor-rest,var(--color-btn-border,rgba(31,35,40,0.15))));}/*!sc*/.izDscS:disabled [data-component=ButtonCounter]{color:inherit;}/*!sc*/@media (forced-colors:active){.izDscS:focus{outline:solid 1px transparent;}}/*!sc*/.izDscS [data-component=ButtonCounter]{font-size:12px;background-color:var(--buttonCounter-default-bgColor-rest,var(--color-btn-counter-bg,rgba(31,35,40,0.08)));}/*!sc*/.izDscS[data-component=IconButton]{display:inline-grid;padding:unset;place-content:center;width:32px;min-width:unset;}/*!sc*/.izDscS[data-size=\"small\"]{padding:0 8px;height:28px;gap:4px;font-size:12px;}/*!sc*/.izDscS[data-size=\"small\"] [data-component=\"text\"]{line-height:calc(20 / 12);}/*!sc*/.izDscS[data-size=\"small\"] [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.izDscS[data-size=\"small\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:4px;}/*!sc*/.izDscS[data-size=\"small\"][data-component=IconButton]{width:28px;padding:unset;}/*!sc*/.izDscS[data-size=\"large\"]{padding:0 16px;height:40px;gap:8px;}/*!sc*/.izDscS[data-size=\"large\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.izDscS[data-size=\"large\"][data-component=IconButton]{width:40px;padding:unset;}/*!sc*/.izDscS[data-block=\"block\"]{width:100%;}/*!sc*/.izDscS[data-inactive]:not([disabled]){background-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));border-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));color:var(--button-inactive-fgColor,var(--button-inactive-fgColor-rest,var(--color-btn-inactive-text,#57606a)));}/*!sc*/.izDscS[data-inactive]:not([disabled]):focus-visible{box-shadow:none;}/*!sc*/.izDscS [data-component=\"leadingVisual\"]{grid-area:leadingVisual;}/*!sc*/.izDscS [data-component=\"text\"]{grid-area:text;line-height:calc(20/14);white-space:nowrap;}/*!sc*/.izDscS [data-component=\"trailingVisual\"]{grid-area:trailingVisual;}/*!sc*/.izDscS [data-component=\"trailingAction\"]{margin-right:-4px;}/*!sc*/.izDscS [data-component=\"buttonContent\"]{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:grid;grid-template-areas:\"leadingVisual text trailingVisual\";grid-template-columns:min-content minmax(0,auto) min-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}/*!sc*/.izDscS [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.izDscS:hover:not([disabled]):not([data-inactive]){background-color:var(--button-default-bgColor-hover,var(--color-btn-hover-bg,#f3f4f6));border-color:var(--button-default-borderColor-hover,var(--button-default-borderColor-hover,var(--color-btn-hover-border,rgba(31,35,40,0.15))));}/*!sc*/.izDscS:active:not([disabled]):not([data-inactive]){background-color:var(--button-default-bgColor-active,var(--color-btn-active-bg,hsla(220,14%,93%,1)));border-color:var(--button-default-borderColor-active,var(--button-default-borderColor-active,var(--color-btn-active-border,rgba(31,35,40,0.15))));}/*!sc*/.izDscS[aria-expanded=true]{background-color:var(--button-default-bgColor-active,var(--color-btn-active-bg,hsla(220,14%,93%,1)));border-color:var(--button-default-borderColor-active,var(--button-default-borderColor-active,var(--color-btn-active-border,rgba(31,35,40,0.15))));}/*!sc*/.izDscS [data-component=\"leadingVisual\"],.izDscS [data-component=\"trailingVisual\"],.izDscS [data-component=\"trailingAction\"]{color:var(--button-color,var(--fgColor-muted,var(--color-fg-muted,#656d76)));}/*!sc*/.izDscS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/.izDscS svg{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.izDscS > span{width:inherit;}/*!sc*/.cuOWTR{border-radius:6px;border:1px solid;border-color:transparent;font-family:inherit;font-weight:500;font-size:14px;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-text-decoration:none;text-decoration:none;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:32px;padding:0 12px;gap:8px;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;-webkit-transition:80ms cubic-bezier(0.65,0,0.35,1);transition:80ms cubic-bezier(0.65,0,0.35,1);-webkit-transition-property:color,fill,background-color,border-color;transition-property:color,fill,background-color,border-color;color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));background-color:transparent;box-shadow:none;}/*!sc*/.cuOWTR:focus:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.cuOWTR:focus:not(:disabled):not(:focus-visible){outline:solid 1px transparent;}/*!sc*/.cuOWTR:focus-visible:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.cuOWTR[href]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}/*!sc*/.cuOWTR[href]:hover{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.cuOWTR:hover{-webkit-transition-duration:80ms;transition-duration:80ms;}/*!sc*/.cuOWTR:active{-webkit-transition:none;transition:none;}/*!sc*/.cuOWTR[data-inactive]{cursor:auto;}/*!sc*/.cuOWTR:disabled{cursor:not-allowed;box-shadow:none;color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));}/*!sc*/.cuOWTR:disabled [data-component=ButtonCounter],.cuOWTR:disabled [data-component=\"leadingVisual\"],.cuOWTR:disabled [data-component=\"trailingAction\"]{color:inherit;}/*!sc*/@media (forced-colors:active){.cuOWTR:focus{outline:solid 1px transparent;}}/*!sc*/.cuOWTR [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.cuOWTR[data-component=IconButton]{display:inline-grid;padding:unset;place-content:center;width:32px;min-width:unset;}/*!sc*/.cuOWTR[data-size=\"small\"]{padding:0 8px;height:28px;gap:4px;font-size:12px;}/*!sc*/.cuOWTR[data-size=\"small\"] [data-component=\"text\"]{line-height:calc(20 / 12);}/*!sc*/.cuOWTR[data-size=\"small\"] [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.cuOWTR[data-size=\"small\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:4px;}/*!sc*/.cuOWTR[data-size=\"small\"][data-component=IconButton]{width:28px;padding:unset;}/*!sc*/.cuOWTR[data-size=\"large\"]{padding:0 16px;height:40px;gap:8px;}/*!sc*/.cuOWTR[data-size=\"large\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.cuOWTR[data-size=\"large\"][data-component=IconButton]{width:40px;padding:unset;}/*!sc*/.cuOWTR[data-block=\"block\"]{width:100%;}/*!sc*/.cuOWTR[data-inactive]:not([disabled]){background-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));border-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));color:var(--button-inactive-fgColor,var(--button-inactive-fgColor-rest,var(--color-btn-inactive-text,#57606a)));}/*!sc*/.cuOWTR[data-inactive]:not([disabled]):focus-visible{box-shadow:none;}/*!sc*/.cuOWTR [data-component=\"leadingVisual\"]{grid-area:leadingVisual;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.cuOWTR [data-component=\"text\"]{grid-area:text;line-height:calc(20/14);white-space:nowrap;}/*!sc*/.cuOWTR [data-component=\"trailingVisual\"]{grid-area:trailingVisual;}/*!sc*/.cuOWTR [data-component=\"trailingAction\"]{margin-right:-4px;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.cuOWTR [data-component=\"buttonContent\"]{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:grid;grid-template-areas:\"leadingVisual text trailingVisual\";grid-template-columns:min-content minmax(0,auto) min-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}/*!sc*/.cuOWTR [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.cuOWTR:hover:not([disabled]){background-color:var(--control-transparent-bgColor-hover,var(--color-action-list-item-default-hover-bg,rgba(208,215,222,0.32)));}/*!sc*/.cuOWTR:active:not([disabled]){background-color:var(--control-transparent-bgColor-active,var(--color-action-list-item-default-active-bg,rgba(208,215,222,0.48)));}/*!sc*/.cuOWTR[aria-expanded=true]{background-color:var(--control-transparent-bgColor-selected,var(--color-action-list-item-default-selected-bg,rgba(208,215,222,0.24)));}/*!sc*/.cuOWTR[data-component=\"IconButton\"][data-no-visuals]{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.cuOWTR[data-no-visuals]{color:var(--fgColor-accent,var(--color-accent-fg,#0969da));}/*!sc*/.cuOWTR:has([data-component=\"ButtonCounter\"]){color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));}/*!sc*/.cuOWTR:disabled[data-no-visuals]{color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));}/*!sc*/.cuOWTR:disabled[data-no-visuals] [data-component=ButtonCounter]{color:inherit;}/*!sc*/.cuOWTR{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));padding-left:4px;padding-right:4px;}/*!sc*/.cuOWTR span[data-component=\"leadingVisual\"]{margin-right:4px !important;}/*!sc*/.tDSzd{border-radius:6px;border:1px solid;border-color:transparent;font-family:inherit;font-weight:500;font-size:14px;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-text-decoration:none;text-decoration:none;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:32px;padding:0 12px;gap:8px;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;-webkit-transition:80ms cubic-bezier(0.65,0,0.35,1);transition:80ms cubic-bezier(0.65,0,0.35,1);-webkit-transition-property:color,fill,background-color,border-color;transition-property:color,fill,background-color,border-color;color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));background-color:transparent;box-shadow:none;}/*!sc*/.tDSzd:focus:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.tDSzd:focus:not(:disabled):not(:focus-visible){outline:solid 1px transparent;}/*!sc*/.tDSzd:focus-visible:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.tDSzd[href]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}/*!sc*/.tDSzd[href]:hover{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.tDSzd:hover{-webkit-transition-duration:80ms;transition-duration:80ms;}/*!sc*/.tDSzd:active{-webkit-transition:none;transition:none;}/*!sc*/.tDSzd[data-inactive]{cursor:auto;}/*!sc*/.tDSzd:disabled{cursor:not-allowed;box-shadow:none;color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));}/*!sc*/.tDSzd:disabled [data-component=ButtonCounter],.tDSzd:disabled [data-component=\"leadingVisual\"],.tDSzd:disabled [data-component=\"trailingAction\"]{color:inherit;}/*!sc*/@media (forced-colors:active){.tDSzd:focus{outline:solid 1px transparent;}}/*!sc*/.tDSzd [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.tDSzd[data-component=IconButton]{display:inline-grid;padding:unset;place-content:center;width:32px;min-width:unset;}/*!sc*/.tDSzd[data-size=\"small\"]{padding:0 8px;height:28px;gap:4px;font-size:12px;}/*!sc*/.tDSzd[data-size=\"small\"] [data-component=\"text\"]{line-height:calc(20 / 12);}/*!sc*/.tDSzd[data-size=\"small\"] [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.tDSzd[data-size=\"small\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:4px;}/*!sc*/.tDSzd[data-size=\"small\"][data-component=IconButton]{width:28px;padding:unset;}/*!sc*/.tDSzd[data-size=\"large\"]{padding:0 16px;height:40px;gap:8px;}/*!sc*/.tDSzd[data-size=\"large\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.tDSzd[data-size=\"large\"][data-component=IconButton]{width:40px;padding:unset;}/*!sc*/.tDSzd[data-block=\"block\"]{width:100%;}/*!sc*/.tDSzd[data-inactive]:not([disabled]){background-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));border-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));color:var(--button-inactive-fgColor,var(--button-inactive-fgColor-rest,var(--color-btn-inactive-text,#57606a)));}/*!sc*/.tDSzd[data-inactive]:not([disabled]):focus-visible{box-shadow:none;}/*!sc*/.tDSzd [data-component=\"leadingVisual\"]{grid-area:leadingVisual;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.tDSzd [data-component=\"text\"]{grid-area:text;line-height:calc(20/14);white-space:nowrap;}/*!sc*/.tDSzd [data-component=\"trailingVisual\"]{grid-area:trailingVisual;}/*!sc*/.tDSzd [data-component=\"trailingAction\"]{margin-right:-4px;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.tDSzd [data-component=\"buttonContent\"]{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:grid;grid-template-areas:\"leadingVisual text trailingVisual\";grid-template-columns:min-content minmax(0,auto) min-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}/*!sc*/.tDSzd [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.tDSzd:hover:not([disabled]){background-color:var(--control-transparent-bgColor-hover,var(--color-action-list-item-default-hover-bg,rgba(208,215,222,0.32)));}/*!sc*/.tDSzd:active:not([disabled]){background-color:var(--control-transparent-bgColor-active,var(--color-action-list-item-default-active-bg,rgba(208,215,222,0.48)));}/*!sc*/.tDSzd[aria-expanded=true]{background-color:var(--control-transparent-bgColor-selected,var(--color-action-list-item-default-selected-bg,rgba(208,215,222,0.24)));}/*!sc*/.tDSzd[data-component=\"IconButton\"][data-no-visuals]{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.tDSzd[data-no-visuals]{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.tDSzd:has([data-component=\"ButtonCounter\"]){color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));}/*!sc*/.tDSzd:disabled[data-no-visuals]{color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));}/*!sc*/.tDSzd:disabled[data-no-visuals] [data-component=ButtonCounter]{color:inherit;}/*!sc*/.ftZGca{border-radius:6px;border:1px solid;border-color:var(--button-default-borderColor-rest,var(--button-default-borderColor-rest,var(--color-btn-border,rgba(31,35,40,0.15))));font-family:inherit;font-weight:500;font-size:14px;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-text-decoration:none;text-decoration:none;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:32px;padding:0 12px;gap:8px;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;-webkit-transition:80ms cubic-bezier(0.65,0,0.35,1);transition:80ms cubic-bezier(0.65,0,0.35,1);-webkit-transition-property:color,fill,background-color,border-color;transition-property:color,fill,background-color,border-color;color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));background-color:var(--button-default-bgColor-rest,var(--color-btn-bg,#f6f8fa));box-shadow:var(--button-default-shadow-resting,var(--color-btn-shadow,0 1px 0 rgba(31,35,40,0.04))),var(--button-default-shadow-inset,var(--color-btn-inset-shadow,inset 0 1px 0 rgba(255,255,255,0.25)));}/*!sc*/.ftZGca:focus:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.ftZGca:focus:not(:disabled):not(:focus-visible){outline:solid 1px transparent;}/*!sc*/.ftZGca:focus-visible:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.ftZGca[href]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}/*!sc*/.ftZGca[href]:hover{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.ftZGca:hover{-webkit-transition-duration:80ms;transition-duration:80ms;}/*!sc*/.ftZGca:active{-webkit-transition:none;transition:none;}/*!sc*/.ftZGca[data-inactive]{cursor:auto;}/*!sc*/.ftZGca:disabled{cursor:not-allowed;box-shadow:none;color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));border-color:var(--button-default-borderColor-disabled,var(--button-default-borderColor-rest,var(--color-btn-border,rgba(31,35,40,0.15))));}/*!sc*/.ftZGca:disabled [data-component=ButtonCounter]{color:inherit;}/*!sc*/@media (forced-colors:active){.ftZGca:focus{outline:solid 1px transparent;}}/*!sc*/.ftZGca [data-component=ButtonCounter]{font-size:12px;background-color:var(--buttonCounter-default-bgColor-rest,var(--color-btn-counter-bg,rgba(31,35,40,0.08)));}/*!sc*/.ftZGca[data-component=IconButton]{display:inline-grid;padding:unset;place-content:center;width:32px;min-width:unset;}/*!sc*/.ftZGca[data-size=\"small\"]{padding:0 8px;height:28px;gap:4px;font-size:12px;}/*!sc*/.ftZGca[data-size=\"small\"] [data-component=\"text\"]{line-height:calc(20 / 12);}/*!sc*/.ftZGca[data-size=\"small\"] [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.ftZGca[data-size=\"small\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:4px;}/*!sc*/.ftZGca[data-size=\"small\"][data-component=IconButton]{width:28px;padding:unset;}/*!sc*/.ftZGca[data-size=\"large\"]{padding:0 16px;height:40px;gap:8px;}/*!sc*/.ftZGca[data-size=\"large\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.ftZGca[data-size=\"large\"][data-component=IconButton]{width:40px;padding:unset;}/*!sc*/.ftZGca[data-block=\"block\"]{width:100%;}/*!sc*/.ftZGca[data-inactive]:not([disabled]){background-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));border-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));color:var(--button-inactive-fgColor,var(--button-inactive-fgColor-rest,var(--color-btn-inactive-text,#57606a)));}/*!sc*/.ftZGca[data-inactive]:not([disabled]):focus-visible{box-shadow:none;}/*!sc*/.ftZGca [data-component=\"leadingVisual\"]{grid-area:leadingVisual;}/*!sc*/.ftZGca [data-component=\"text\"]{grid-area:text;line-height:calc(20/14);white-space:nowrap;}/*!sc*/.ftZGca [data-component=\"trailingVisual\"]{grid-area:trailingVisual;}/*!sc*/.ftZGca [data-component=\"trailingAction\"]{margin-right:-4px;}/*!sc*/.ftZGca [data-component=\"buttonContent\"]{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:grid;grid-template-areas:\"leadingVisual text trailingVisual\";grid-template-columns:min-content minmax(0,auto) min-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}/*!sc*/.ftZGca [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.ftZGca:hover:not([disabled]):not([data-inactive]){background-color:var(--button-default-bgColor-hover,var(--color-btn-hover-bg,#f3f4f6));border-color:var(--button-default-borderColor-hover,var(--button-default-borderColor-hover,var(--color-btn-hover-border,rgba(31,35,40,0.15))));}/*!sc*/.ftZGca:active:not([disabled]):not([data-inactive]){background-color:var(--button-default-bgColor-active,var(--color-btn-active-bg,hsla(220,14%,93%,1)));border-color:var(--button-default-borderColor-active,var(--button-default-borderColor-active,var(--color-btn-active-border,rgba(31,35,40,0.15))));}/*!sc*/.ftZGca[aria-expanded=true]{background-color:var(--button-default-bgColor-active,var(--color-btn-active-bg,hsla(220,14%,93%,1)));border-color:var(--button-default-borderColor-active,var(--button-default-borderColor-active,var(--color-btn-active-border,rgba(31,35,40,0.15))));}/*!sc*/.ftZGca [data-component=\"leadingVisual\"],.ftZGca [data-component=\"trailingVisual\"],.ftZGca [data-component=\"trailingAction\"]{color:var(--button-color,var(--fgColor-muted,var(--color-fg-muted,#656d76)));}/*!sc*/.gYvpXq{border-radius:6px;border:1px solid;border-color:var(--button-primary-borderColor-rest,var(--color-btn-primary-border,rgba(31,35,40,0.15)));font-family:inherit;font-weight:500;font-size:14px;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-text-decoration:none;text-decoration:none;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:32px;padding:0 12px;gap:8px;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;-webkit-transition:80ms cubic-bezier(0.65,0,0.35,1);transition:80ms cubic-bezier(0.65,0,0.35,1);-webkit-transition-property:color,fill,background-color,border-color;transition-property:color,fill,background-color,border-color;color:var(--button-primary-fgColor-rest,var(--color-btn-primary-text,#ffffff));background-color:var(--button-primary-bgColor-rest,var(--color-btn-primary-bg,#1f883d));box-shadow:var(--shadow-resting-small,var(--color-btn-primary-shadow,0 1px 0 rgba(31,35,40,0.1)));}/*!sc*/.gYvpXq:focus:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.gYvpXq:focus:not(:disabled):not(:focus-visible){outline:solid 1px transparent;}/*!sc*/.gYvpXq:focus-visible:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.gYvpXq[href]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}/*!sc*/.gYvpXq[href]:hover{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.gYvpXq:hover{-webkit-transition-duration:80ms;transition-duration:80ms;}/*!sc*/.gYvpXq:active{-webkit-transition:none;transition:none;}/*!sc*/.gYvpXq[data-inactive]{cursor:auto;}/*!sc*/.gYvpXq:disabled{cursor:not-allowed;box-shadow:none;color:var(--button-primary-fgColor-disabled,var(--color-btn-primary-disabled-text,rgba(255,255,255,0.8)));background-color:var(--button-primary-bgColor-disabled,var(--color-btn-primary-disabled-bg,#94d3a2));border-color:var(--button-primary-borderColor-disabled,var(--color-btn-primary-disabled-border,rgba(31,35,40,0.15)));}/*!sc*/.gYvpXq:disabled [data-component=ButtonCounter]{color:inherit;}/*!sc*/@media (forced-colors:active){.gYvpXq:focus{outline:solid 1px transparent;}}/*!sc*/.gYvpXq [data-component=ButtonCounter]{font-size:12px;background-color:var(--buttonCounter-primary-bgColor-rest,var(--color-btn-primary-counter-bg,rgba(0,45,17,0.2)));color:var(--button-primary-fgColor-rest,var(--color-btn-primary-text,#ffffff));}/*!sc*/.gYvpXq[data-component=IconButton]{display:inline-grid;padding:unset;place-content:center;width:32px;min-width:unset;}/*!sc*/.gYvpXq[data-size=\"small\"]{padding:0 8px;height:28px;gap:4px;font-size:12px;}/*!sc*/.gYvpXq[data-size=\"small\"] [data-component=\"text\"]{line-height:calc(20 / 12);}/*!sc*/.gYvpXq[data-size=\"small\"] [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.gYvpXq[data-size=\"small\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:4px;}/*!sc*/.gYvpXq[data-size=\"small\"][data-component=IconButton]{width:28px;padding:unset;}/*!sc*/.gYvpXq[data-size=\"large\"]{padding:0 16px;height:40px;gap:8px;}/*!sc*/.gYvpXq[data-size=\"large\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.gYvpXq[data-size=\"large\"][data-component=IconButton]{width:40px;padding:unset;}/*!sc*/.gYvpXq[data-block=\"block\"]{width:100%;}/*!sc*/.gYvpXq[data-inactive]:not([disabled]){background-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));border-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));color:var(--button-inactive-fgColor,var(--button-inactive-fgColor-rest,var(--color-btn-inactive-text,#57606a)));}/*!sc*/.gYvpXq[data-inactive]:not([disabled]):focus-visible{box-shadow:none;}/*!sc*/.gYvpXq [data-component=\"leadingVisual\"]{grid-area:leadingVisual;}/*!sc*/.gYvpXq [data-component=\"text\"]{grid-area:text;line-height:calc(20/14);white-space:nowrap;}/*!sc*/.gYvpXq [data-component=\"trailingVisual\"]{grid-area:trailingVisual;}/*!sc*/.gYvpXq [data-component=\"trailingAction\"]{margin-right:-4px;}/*!sc*/.gYvpXq [data-component=\"buttonContent\"]{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:grid;grid-template-areas:\"leadingVisual text trailingVisual\";grid-template-columns:min-content minmax(0,auto) min-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}/*!sc*/.gYvpXq [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.gYvpXq:hover:not([disabled]):not([data-inactive]){color:btn.primary.hoverText;background-color:var(--button-primary-bgColor-hover,var(--color-btn-primary-hover-bg,#1a7f37));}/*!sc*/.gYvpXq:focus:not([disabled]){box-shadow:inset 0 0 0 3px;}/*!sc*/.gYvpXq:focus-visible:not([disabled]){box-shadow:inset 0 0 0 3px;}/*!sc*/.gYvpXq:active:not([disabled]):not([data-inactive]){background-color:var(--button-primary-bgColor-active,var(--color-btn-primary-selected-bg,hsla(137,66%,28%,1)));box-shadow:var(--button-primary-shadow-selected,var(--color-btn-primary-selected-shadow,inset 0 1px 0 rgba(0,45,17,0.2)));}/*!sc*/.gYvpXq[aria-expanded=true]{background-color:var(--button-primary-bgColor-active,var(--color-btn-primary-selected-bg,hsla(137,66%,28%,1)));box-shadow:var(--button-primary-shadow-selected,var(--color-btn-primary-selected-shadow,inset 0 1px 0 rgba(0,45,17,0.2)));}/*!sc*/.gYvpXq svg{color:fg.primary;}/*!sc*/.fAkXQN{border-radius:6px;border:1px solid;border-color:transparent;font-family:inherit;font-weight:500;font-size:14px;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-text-decoration:none;text-decoration:none;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:32px;padding:0 12px;gap:8px;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;-webkit-transition:80ms cubic-bezier(0.65,0,0.35,1);transition:80ms cubic-bezier(0.65,0,0.35,1);-webkit-transition-property:color,fill,background-color,border-color;transition-property:color,fill,background-color,border-color;color:var(--fgColor-default,var(--color-fg-default,#1F2328));background-color:transparent;box-shadow:none;}/*!sc*/.fAkXQN:focus:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.fAkXQN:focus:not(:disabled):not(:focus-visible){outline:solid 1px transparent;}/*!sc*/.fAkXQN:focus-visible:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.fAkXQN[href]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}/*!sc*/.fAkXQN[href]:hover{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.fAkXQN:hover{-webkit-transition-duration:80ms;transition-duration:80ms;}/*!sc*/.fAkXQN:active{-webkit-transition:none;transition:none;}/*!sc*/.fAkXQN[data-inactive]{cursor:auto;}/*!sc*/.fAkXQN:disabled{cursor:not-allowed;box-shadow:none;color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));}/*!sc*/.fAkXQN:disabled [data-component=ButtonCounter],.fAkXQN:disabled [data-component=\"leadingVisual\"],.fAkXQN:disabled [data-component=\"trailingAction\"]{color:inherit;}/*!sc*/@media (forced-colors:active){.fAkXQN:focus{outline:solid 1px transparent;}}/*!sc*/.fAkXQN [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.fAkXQN[data-component=IconButton]{display:inline-grid;padding:unset;place-content:center;width:32px;min-width:unset;}/*!sc*/.fAkXQN[data-size=\"small\"]{padding:0 8px;height:28px;gap:4px;font-size:12px;}/*!sc*/.fAkXQN[data-size=\"small\"] [data-component=\"text\"]{line-height:calc(20 / 12);}/*!sc*/.fAkXQN[data-size=\"small\"] [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.fAkXQN[data-size=\"small\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:4px;}/*!sc*/.fAkXQN[data-size=\"small\"][data-component=IconButton]{width:28px;padding:unset;}/*!sc*/.fAkXQN[data-size=\"large\"]{padding:0 16px;height:40px;gap:8px;}/*!sc*/.fAkXQN[data-size=\"large\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.fAkXQN[data-size=\"large\"][data-component=IconButton]{width:40px;padding:unset;}/*!sc*/.fAkXQN[data-block=\"block\"]{width:100%;}/*!sc*/.fAkXQN[data-inactive]:not([disabled]){background-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));border-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));color:var(--button-inactive-fgColor,var(--button-inactive-fgColor-rest,var(--color-btn-inactive-text,#57606a)));}/*!sc*/.fAkXQN[data-inactive]:not([disabled]):focus-visible{box-shadow:none;}/*!sc*/.fAkXQN [data-component=\"leadingVisual\"]{grid-area:leadingVisual;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.fAkXQN [data-component=\"text\"]{grid-area:text;line-height:calc(20/14);white-space:nowrap;}/*!sc*/.fAkXQN [data-component=\"trailingVisual\"]{grid-area:trailingVisual;}/*!sc*/.fAkXQN [data-component=\"trailingAction\"]{margin-right:-4px;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.fAkXQN [data-component=\"buttonContent\"]{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:grid;grid-template-areas:\"leadingVisual text trailingVisual\";grid-template-columns:min-content minmax(0,auto) min-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}/*!sc*/.fAkXQN [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.fAkXQN:hover:not([disabled]){background-color:var(--control-transparent-bgColor-hover,var(--color-action-list-item-default-hover-bg,rgba(208,215,222,0.32)));-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.fAkXQN:active:not([disabled]){background-color:var(--control-transparent-bgColor-active,var(--color-action-list-item-default-active-bg,rgba(208,215,222,0.48)));-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.fAkXQN[aria-expanded=true]{background-color:var(--control-transparent-bgColor-selected,var(--color-action-list-item-default-selected-bg,rgba(208,215,222,0.24)));}/*!sc*/.fAkXQN[data-component=\"IconButton\"][data-no-visuals]{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.fAkXQN[data-no-visuals]{color:var(--fgColor-accent,var(--color-accent-fg,#0969da));}/*!sc*/.fAkXQN:has([data-component=\"ButtonCounter\"]){color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));}/*!sc*/.fAkXQN:disabled[data-no-visuals]{color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));}/*!sc*/.fAkXQN:disabled[data-no-visuals] [data-component=ButtonCounter]{color:inherit;}/*!sc*/.fAkXQN:focus:not([disabled]){-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.jPraEl{border-radius:6px;border:1px solid;border-color:transparent;font-family:inherit;font-weight:500;font-size:14px;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-text-decoration:none;text-decoration:none;text-align:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:32px;padding:0 12px;gap:8px;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;-webkit-transition:80ms cubic-bezier(0.65,0,0.35,1);transition:80ms cubic-bezier(0.65,0,0.35,1);-webkit-transition-property:color,fill,background-color,border-color;transition-property:color,fill,background-color,border-color;color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));background-color:transparent;box-shadow:none;}/*!sc*/.jPraEl:focus:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.jPraEl:focus:not(:disabled):not(:focus-visible){outline:solid 1px transparent;}/*!sc*/.jPraEl:focus-visible:not(:disabled){box-shadow:none;outline:2px solid var(--fgColor-accent,var(--color-accent-fg,#0969da));outline-offset:-2px;}/*!sc*/.jPraEl[href]{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}/*!sc*/.jPraEl[href]:hover{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/.jPraEl:hover{-webkit-transition-duration:80ms;transition-duration:80ms;}/*!sc*/.jPraEl:active{-webkit-transition:none;transition:none;}/*!sc*/.jPraEl[data-inactive]{cursor:auto;}/*!sc*/.jPraEl:disabled{cursor:not-allowed;box-shadow:none;color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));}/*!sc*/.jPraEl:disabled [data-component=ButtonCounter],.jPraEl:disabled [data-component=\"leadingVisual\"],.jPraEl:disabled [data-component=\"trailingAction\"]{color:inherit;}/*!sc*/@media (forced-colors:active){.jPraEl:focus{outline:solid 1px transparent;}}/*!sc*/.jPraEl [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.jPraEl[data-component=IconButton]{display:inline-grid;padding:unset;place-content:center;width:32px;min-width:unset;}/*!sc*/.jPraEl[data-size=\"small\"]{padding:0 8px;height:28px;gap:4px;font-size:12px;}/*!sc*/.jPraEl[data-size=\"small\"] [data-component=\"text\"]{line-height:calc(20 / 12);}/*!sc*/.jPraEl[data-size=\"small\"] [data-component=ButtonCounter]{font-size:12px;}/*!sc*/.jPraEl[data-size=\"small\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:4px;}/*!sc*/.jPraEl[data-size=\"small\"][data-component=IconButton]{width:28px;padding:unset;}/*!sc*/.jPraEl[data-size=\"large\"]{padding:0 16px;height:40px;gap:8px;}/*!sc*/.jPraEl[data-size=\"large\"] [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.jPraEl[data-size=\"large\"][data-component=IconButton]{width:40px;padding:unset;}/*!sc*/.jPraEl[data-block=\"block\"]{width:100%;}/*!sc*/.jPraEl[data-inactive]:not([disabled]){background-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));border-color:var(--button-inactive-bgColor,var(--button-inactive-bgColor-rest,var(--color-btn-inactive-bg,#eaeef2)));color:var(--button-inactive-fgColor,var(--button-inactive-fgColor-rest,var(--color-btn-inactive-text,#57606a)));}/*!sc*/.jPraEl[data-inactive]:not([disabled]):focus-visible{box-shadow:none;}/*!sc*/.jPraEl [data-component=\"leadingVisual\"]{grid-area:leadingVisual;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.jPraEl [data-component=\"text\"]{grid-area:text;line-height:calc(20/14);white-space:nowrap;}/*!sc*/.jPraEl [data-component=\"trailingVisual\"]{grid-area:trailingVisual;}/*!sc*/.jPraEl [data-component=\"trailingAction\"]{margin-right:-4px;color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.jPraEl [data-component=\"buttonContent\"]{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:grid;grid-template-areas:\"leadingVisual text trailingVisual\";grid-template-columns:min-content minmax(0,auto) min-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;}/*!sc*/.jPraEl [data-component=\"buttonContent\"] > :not(:last-child){margin-right:8px;}/*!sc*/.jPraEl:hover:not([disabled]){background-color:var(--control-transparent-bgColor-hover,var(--color-action-list-item-default-hover-bg,rgba(208,215,222,0.32)));}/*!sc*/.jPraEl:active:not([disabled]){background-color:var(--control-transparent-bgColor-active,var(--color-action-list-item-default-active-bg,rgba(208,215,222,0.48)));}/*!sc*/.jPraEl[aria-expanded=true]{background-color:var(--control-transparent-bgColor-selected,var(--color-action-list-item-default-selected-bg,rgba(208,215,222,0.24)));}/*!sc*/.jPraEl[data-component=\"IconButton\"][data-no-visuals]{color:var(--fgColor-muted,var(--color-fg-muted,#656d76));}/*!sc*/.jPraEl[data-no-visuals]{color:var(--fgColor-accent,var(--color-accent-fg,#0969da));}/*!sc*/.jPraEl:has([data-component=\"ButtonCounter\"]){color:var(--button-default-fgColor-rest,var(--color-btn-text,#24292f));}/*!sc*/.jPraEl:disabled[data-no-visuals]{color:var(--fgColor-disabled,var(--color-primer-fg-disabled,#8c959f));}/*!sc*/.jPraEl:disabled[data-no-visuals] [data-component=ButtonCounter]{color:inherit;}/*!sc*/.jPraEl{color:var(--fgColor-muted,var(--color-fg-subtle,#6e7781));padding-left:8px;padding-right:8px;}/*!sc*/data-styled.g9[id=\"types__StyledButton-sc-ws60qy-0\"]{content:\"izDscS,cuOWTR,tDSzd,ftZGca,gYvpXq,fAkXQN,jPraEl,\"}/*!sc*/.rTZSs{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;-webkit-clip:rect(0,0,0,0);clip:rect(0,0,0,0);white-space:nowrap;border-width:0;}/*!sc*/data-styled.g10[id=\"_VisuallyHidden__VisuallyHidden-sc-11jhm7a-0\"]{content:\"rTZSs,\"}/*!sc*/.fUpWeN{display:inline-block;overflow:hidden;text-overflow:ellipsis;vertical-align:top;white-space:nowrap;max-width:125px;max-width:100%;}/*!sc*/data-styled.g15[id=\"Truncate__StyledTruncate-sc-23o1d2-0\"]{content:\"fUpWeN,\"}/*!sc*/.dMjscx{position:relative;display:inline-block;}/*!sc*/.dMjscx::before{position:absolute;z-index:1000001;display:none;width:0px;height:0px;color:var(--bgColor-emphasis,var(--color-neutral-emphasis-plus,#24292f));pointer-events:none;content:'';border:6px solid transparent;opacity:0;}/*!sc*/.dMjscx::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 -apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Noto Sans\",Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\";-webkit-font-smoothing:subpixel-antialiased;color:var(--fgColor-onEmphasis,var(--color-fg-on-emphasis,#ffffff));text-align:center;-webkit-text-decoration:none;text-decoration:none;text-shadow:none;text-transform:none;-webkit-letter-spacing:normal;-moz-letter-spacing:normal;-ms-letter-spacing:normal;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(aria-label);background:var(--bgColor-emphasis,var(--color-neutral-emphasis-plus,#24292f));border-radius:6px;opacity:0;}/*!sc*/@-webkit-keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}/*!sc*/@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}/*!sc*/.dMjscx:hover::before,.dMjscx:active::before,.dMjscx:focus::before,.dMjscx:focus-within::before,.dMjscx:hover::after,.dMjscx:active::after,.dMjscx:focus::after,.dMjscx:focus-within::after{display:inline-block;-webkit-text-decoration:none;text-decoration:none;-webkit-animation-name:tooltip-appear;animation-name:tooltip-appear;-webkit-animation-duration:0.1s;animation-duration:0.1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-delay:0.4s;animation-delay:0.4s;}/*!sc*/.dMjscx.tooltipped-no-delay:hover::before,.dMjscx.tooltipped-no-delay:active::before,.dMjscx.tooltipped-no-delay:focus::before,.dMjscx.tooltipped-no-delay:focus-within::before,.dMjscx.tooltipped-no-delay:hover::after,.dMjscx.tooltipped-no-delay:active::after,.dMjscx.tooltipped-no-delay:focus::after,.dMjscx.tooltipped-no-delay:focus-within::after{-webkit-animation-delay:0s;animation-delay:0s;}/*!sc*/.dMjscx.tooltipped-multiline:hover::after,.dMjscx.tooltipped-multiline:active::after,.dMjscx.tooltipped-multiline:focus::after,.dMjscx.tooltipped-multiline:focus-within::after{display:table-cell;}/*!sc*/.dMjscx.tooltipped-s::after,.dMjscx.tooltipped-se::after,.dMjscx.tooltipped-sw::after{top:100%;right:50%;margin-top:6px;}/*!sc*/.dMjscx.tooltipped-s::before,.dMjscx.tooltipped-se::before,.dMjscx.tooltipped-sw::before{top:auto;right:50%;bottom:-7px;margin-right:-6px;border-bottom-color:var(--bgColor-emphasis,var(--color-neutral-emphasis-plus,#24292f));}/*!sc*/.dMjscx.tooltipped-se::after{right:auto;left:50%;margin-left:-16px;}/*!sc*/.dMjscx.tooltipped-sw::after{margin-right:-16px;}/*!sc*/.dMjscx.tooltipped-n::after,.dMjscx.tooltipped-ne::after,.dMjscx.tooltipped-nw::after{right:50%;bottom:100%;margin-bottom:6px;}/*!sc*/.dMjscx.tooltipped-n::before,.dMjscx.tooltipped-ne::before,.dMjscx.tooltipped-nw::before{top:-7px;right:50%;bottom:auto;margin-right:-6px;border-top-color:var(--bgColor-emphasis,var(--color-neutral-emphasis-plus,#24292f));}/*!sc*/.dMjscx.tooltipped-ne::after{right:auto;left:50%;margin-left:-16px;}/*!sc*/.dMjscx.tooltipped-nw::after{margin-right:-16px;}/*!sc*/.dMjscx.tooltipped-s::after,.dMjscx.tooltipped-n::after{-webkit-transform:translateX(50%);-ms-transform:translateX(50%);transform:translateX(50%);}/*!sc*/.dMjscx.tooltipped-w::after{right:100%;bottom:50%;margin-right:6px;-webkit-transform:translateY(50%);-ms-transform:translateY(50%);transform:translateY(50%);}/*!sc*/.dMjscx.tooltipped-w::before{top:50%;bottom:50%;left:-7px;margin-top:-6px;border-left-color:var(--bgColor-emphasis,var(--color-neutral-emphasis-plus,#24292f));}/*!sc*/.dMjscx.tooltipped-e::after{bottom:50%;left:100%;margin-left:6px;-webkit-transform:translateY(50%);-ms-transform:translateY(50%);transform:translateY(50%);}/*!sc*/.dMjscx.tooltipped-e::before{top:50%;right:-7px;bottom:50%;margin-top:-6px;border-right-color:var(--bgColor-emphasis,var(--color-neutral-emphasis-plus,#24292f));}/*!sc*/.dMjscx.tooltipped-multiline::after{width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:250px;word-wrap:break-word;white-space:pre-line;border-collapse:separate;}/*!sc*/.dMjscx.tooltipped-multiline.tooltipped-s::after,.dMjscx.tooltipped-multiline.tooltipped-n::after{right:auto;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);}/*!sc*/.dMjscx.tooltipped-multiline.tooltipped-w::after,.dMjscx.tooltipped-multiline.tooltipped-e::after{right:100%;}/*!sc*/.dMjscx.tooltipped-align-right-2::after{right:0;margin-right:0;}/*!sc*/.dMjscx.tooltipped-align-right-2::before{right:15px;}/*!sc*/.dMjscx.tooltipped-align-left-2::after{left:0;margin-left:0;}/*!sc*/.dMjscx.tooltipped-align-left-2::before{left:10px;}/*!sc*/data-styled.g18[id=\"Tooltip__TooltipBase-sc-17tf59c-0\"]{content:\"dMjscx,\"}/*!sc*/.bPgibo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style:none;white-space:nowrap;padding-top:0;padding-bottom:0;padding-left:0;padding-right:0;margin:0;margin-bottom:-1px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;position:relative;}/*!sc*/data-styled.g103[id=\"UnderlineNav__NavigationList-sc-1jfr31k-0\"]{content:\"bPgibo,\"}/*!sc*/</style> <!-- --> <!-- --> <div class=\"Box-sc-g0xbh4-0 izjvBm\"><div class=\"Box-sc-g0xbh4-0 rPQgy\"><div class=\"Box-sc-g0xbh4-0 eUMEDg\"></div></div><div class=\"Box-sc-g0xbh4-0 eLcVee\"><div class=\"Box-sc-g0xbh4-0 hsfLlq\"><div class=\"Box-sc-g0xbh4-0 gpKoUz\"><button type=\"button\" id=\"branch-picker-repos-header-ref-selector\" aria-haspopup=\"true\" tabindex=\"0\" aria-label=\"main branch\" data-testid=\"anchor-button\" class=\"types__StyledButton-sc-ws60qy-0 izDscS overview-ref-selector\"><span data-component=\"buttonContent\" class=\"Box-sc-g0xbh4-0 kkrdEu\"><span data-component=\"text\"><div class=\"Box-sc-g0xbh4-0 bKgizp\"><div class=\"Box-sc-g0xbh4-0 iPGYsi\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-git-branch\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z\"></path></svg></div><div class=\"Box-sc-g0xbh4-0 dKmYfk ref-selector-button-text-container\"><span class=\"Text-sc-17v1xeu-0 bOMzPg\">\u00a0<!-- -->main</span></div></div></span><span data-component=\"trailingVisual\" class=\"Box-sc-g0xbh4-0 trpoQ\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-triangle-down\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z\"></path></svg></span></span></button><button hidden=\"\" data-hotkey-scope=\"read-only-cursor-text-area\"></button></div><div class=\"Box-sc-g0xbh4-0 laYubZ\"><a style=\"--button-color:fg.muted\" type=\"button\" href=\"/guidance-ai/guidance/branches\" class=\"types__StyledButton-sc-ws60qy-0 cuOWTR\"><span data-component=\"buttonContent\" class=\"Box-sc-g0xbh4-0 kkrdEu\"><span data-component=\"leadingVisual\" class=\"Box-sc-g0xbh4-0 trpoQ\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-git-branch\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z\"></path></svg></span><span data-component=\"text\">Branches</span></span></a><a style=\"--button-color:fg.muted\" type=\"button\" href=\"/guidance-ai/guidance/tags\" class=\"types__StyledButton-sc-ws60qy-0 cuOWTR\"><span data-component=\"buttonContent\" class=\"Box-sc-g0xbh4-0 kkrdEu\"><span data-component=\"leadingVisual\" class=\"Box-sc-g0xbh4-0 trpoQ\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-tag\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z\"></path></svg></span><span data-component=\"text\">Tags</span></span></a></div><div class=\"Box-sc-g0xbh4-0 swnaL\"><a style=\"--button-color:fg.muted\" type=\"button\" aria-label=\"Go to Branches page\" href=\"/guidance-ai/guidance/branches\" data-no-visuals=\"true\" class=\"types__StyledButton-sc-ws60qy-0 tDSzd\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-git-branch\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M9.5 3.25a2.25 2.25 0 1 1 3 2.122V6A2.5 2.5 0 0 1 10 8.5H6a1 1 0 0 0-1 1v1.128a2.251 2.251 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.5 0v1.836A2.493 2.493 0 0 1 6 7h4a1 1 0 0 0 1-1v-.628A2.25 2.25 0 0 1 9.5 3.25Zm-6 0a.75.75 0 1 0 1.5 0 .75.75 0 0 0-1.5 0Zm8.25-.75a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5ZM4.25 12a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Z\"></path></svg></a><a style=\"--button-color:fg.muted\" type=\"button\" aria-label=\"Go to Tags page\" href=\"/guidance-ai/guidance/tags\" data-no-visuals=\"true\" class=\"types__StyledButton-sc-ws60qy-0 tDSzd\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-tag\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z\"></path></svg></a></div></div><div class=\"Box-sc-g0xbh4-0 bWpuBf\"><div class=\"Box-sc-g0xbh4-0 grHjNb\"><div class=\"Box-sc-g0xbh4-0 dXTsqj\"><!--$!--><template></template><!--/$--></div><div class=\"Box-sc-g0xbh4-0 dCOrmu\"><button type=\"button\" data-no-visuals=\"true\" class=\"types__StyledButton-sc-ws60qy-0 ftZGca\"><span data-component=\"buttonContent\" class=\"Box-sc-g0xbh4-0 kkrdEu\"><span data-component=\"text\">Go to file</span></span></button></div><div class=\"react-directory-add-file-icon\"></div><div class=\"react-directory-remove-file-icon\"></div></div><button type=\"button\" id=\":R2il5:\" aria-haspopup=\"true\" tabindex=\"0\" class=\"types__StyledButton-sc-ws60qy-0 gYvpXq\"><span data-component=\"buttonContent\" class=\"Box-sc-g0xbh4-0 kkrdEu\"><span data-component=\"leadingVisual\" class=\"Box-sc-g0xbh4-0 trpoQ\"><div class=\"Box-sc-g0xbh4-0 bVvbgP\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-code\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"m11.28 3.22 4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L13.94 8l-3.72-3.72a.749.749 0 0 1 .326-1.275.749.749 0 0 1 .734.215Zm-6.56 0a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L2.06 8l3.72 3.72a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L.47 8.53a.75.75 0 0 1 0-1.06Z\"></path></svg></div></span><span data-component=\"text\">Code</span></span><span data-component=\"trailingAction\" class=\"Box-sc-g0xbh4-0 trpoQ\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-triangle-down\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z\"></path></svg></span></button><div class=\"Box-sc-g0xbh4-0 bNDvfp\"><button data-component=\"IconButton\" type=\"button\" aria-label=\"Open more actions menu\" id=\":R3il5:\" aria-haspopup=\"true\" tabindex=\"0\" data-no-visuals=\"true\" class=\"types__StyledButton-sc-ws60qy-0 ftZGca\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-kebab-horizontal\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M8 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM1.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm13 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z\"></path></svg></button></div></div></div><div class=\"Box-sc-g0xbh4-0 yfPnm\"><div data-hpc=\"true\" class=\"Box-sc-g0xbh4-0\"><button hidden=\"\" data-testid=\"focus-next-element-button\" data-hotkey=\"j\" data-hotkey-scope=\"read-only-cursor-text-area\"></button><button hidden=\"\" data-hotkey=\"j\"></button><button hidden=\"\" data-testid=\"focus-previous-element-button\" data-hotkey=\"k\" data-hotkey-scope=\"read-only-cursor-text-area\"></button><button hidden=\"\" data-hotkey=\"k\"></button><h2 class=\"Heading__StyledHeading-sc-1c1dgg0-0 cgQnMS sr-only\" data-testid=\"screen-reader-heading\" id=\"folders-and-files\">Folders and files</h2><table aria-labelledby=\"folders-and-files\" class=\"Box-sc-g0xbh4-0 cAQuiW\"><thead class=\"Box-sc-g0xbh4-0 iiUlLN\"><tr class=\"Box-sc-g0xbh4-0 jmggSN\"><th colSpan=\"2\" class=\"Box-sc-g0xbh4-0 kvYunM\"><span class=\"Text-sc-17v1xeu-0 eUGNHp\">Name</span></th><th colSpan=\"1\" class=\"Box-sc-g0xbh4-0 hrLuxA\"><span class=\"Text-sc-17v1xeu-0 eUGNHp\">Name</span></th><th class=\"Box-sc-g0xbh4-0 ePjhhA\"><div title=\"Last commit message\" class=\"Truncate__StyledTruncate-sc-23o1d2-0 fUpWeN\"><span class=\"Text-sc-17v1xeu-0 eUGNHp\">Last commit message</span></div></th><th colSpan=\"1\" class=\"Box-sc-g0xbh4-0 cuEKae\"><div title=\"Last commit date\" class=\"Truncate__StyledTruncate-sc-23o1d2-0 fUpWeN\"><span class=\"Text-sc-17v1xeu-0 eUGNHp\">Last commit date</span></div></th></tr></thead><tbody><tr class=\"Box-sc-g0xbh4-0 jEbBOT\"><td colSpan=\"3\" class=\"Box-sc-g0xbh4-0 bTxCvM\"><div class=\"Box-sc-g0xbh4-0 eYedVD\"><h2 class=\"Heading__StyledHeading-sc-1c1dgg0-0 cgQnMS sr-only\" data-testid=\"screen-reader-heading\">Latest commit</h2><div style=\"width:120px\" class=\"Skeleton Skeleton--text\" data-testid=\"loading\">\u00a0</div><div class=\"Box-sc-g0xbh4-0 jGfYmh\"><div data-testid=\"latest-commit-details\" class=\"Box-sc-g0xbh4-0 lhFvfi\"></div><h2 class=\"Heading__StyledHeading-sc-1c1dgg0-0 cgQnMS sr-only\" data-testid=\"screen-reader-heading\">History</h2><a class=\"types__StyledButton-sc-ws60qy-0 fAkXQN react-last-commit-history-group\" href=\"/guidance-ai/guidance/commits/main/\" data-size=\"small\"><span data-component=\"buttonContent\" class=\"Box-sc-g0xbh4-0 kkrdEu\"><span data-component=\"leadingVisual\" class=\"Box-sc-g0xbh4-0 trpoQ\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-history\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"m.427 1.927 1.215 1.215a8.002 8.002 0 1 1-1.6 5.685.75.75 0 1 1 1.493-.154 6.5 6.5 0 1 0 1.18-4.458l1.358 1.358A.25.25 0 0 1 3.896 6H.25A.25.25 0 0 1 0 5.75V2.104a.25.25 0 0 1 .427-.177ZM7.75 4a.75.75 0 0 1 .75.75v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5A.75.75 0 0 1 7.75 4Z\"></path></svg></span><span data-component=\"text\"><span class=\"Text-sc-17v1xeu-0 dALsKK\">1,198 Commits</span></span></span></a><div class=\"Box-sc-g0xbh4-0 bqgLjk\"></div><span role=\"tooltip\" aria-label=\"Commit history\" class=\"Tooltip__TooltipBase-sc-17tf59c-0 dMjscx tooltipped-n\"><a class=\"types__StyledButton-sc-ws60qy-0 fAkXQN react-last-commit-history-icon\" href=\"/guidance-ai/guidance/commits/main/\"><span data-component=\"buttonContent\" class=\"Box-sc-g0xbh4-0 kkrdEu\"><span data-component=\"leadingVisual\" class=\"Box-sc-g0xbh4-0 trpoQ\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-history\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"m.427 1.927 1.215 1.215a8.002 8.002 0 1 1-1.6 5.685.75.75 0 1 1 1.493-.154 6.5 6.5 0 1 0 1.18-4.458l1.358 1.358A.25.25 0 0 1 3.896 6H.25A.25.25 0 0 1 0 5.75V2.104a.25.25 0 0 1 .427-.177ZM7.75 4a.75.75 0 0 1 .75.75v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5A.75.75 0 0 1 7.75 4Z\"></path></svg></span></span></a></span></div></div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-0\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\".github\" aria-label=\".github, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/.github\">.github</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\".github\" aria-label=\".github, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/.github\">.github</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-1\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"This path skips through empty directories\" aria-label=\"client/src, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/client/src\"><span class=\"react-directory-default-color\" data-testid=\"path-name-segment\">client/</span><span class=\"\" data-testid=\"path-name-segment\">src</span></a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"This path skips through empty directories\" aria-label=\"client/src, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/client/src\"><span class=\"react-directory-default-color\" data-testid=\"path-name-segment\">client/</span><span class=\"\" data-testid=\"path-name-segment\">src</span></a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-2\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"docs\" aria-label=\"docs, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/docs\">docs</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"docs\" aria-label=\"docs, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/docs\">docs</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-3\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"guidance\" aria-label=\"guidance, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/guidance\">guidance</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"guidance\" aria-label=\"guidance, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/guidance\">guidance</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-4\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"notebooks\" aria-label=\"notebooks, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/notebooks\">notebooks</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"notebooks\" aria-label=\"notebooks, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/notebooks\">notebooks</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-5\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"tests\" aria-label=\"tests, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/tests\">tests</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"icon-directory\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M1.75 1A1.75 1.75 0 0 0 0 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0 0 16 13.25v-8.5A1.75 1.75 0 0 0 14.25 3H7.5a.25.25 0 0 1-.2-.1l-.9-1.2C6.07 1.26 5.55 1 5 1H1.75Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"tests\" aria-label=\"tests, (Directory)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/tree/main/tests\">tests</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-6\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\".gitignore\" aria-label=\".gitignore, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/.gitignore\">.gitignore</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\".gitignore\" aria-label=\".gitignore, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/.gitignore\">.gitignore</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-7\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"CONTRIBUTING.md\" aria-label=\"CONTRIBUTING.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/CONTRIBUTING.md\">CONTRIBUTING.md</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"CONTRIBUTING.md\" aria-label=\"CONTRIBUTING.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/CONTRIBUTING.md\">CONTRIBUTING.md</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-8\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"GOVERNANCE.md\" aria-label=\"GOVERNANCE.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/GOVERNANCE.md\">GOVERNANCE.md</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"GOVERNANCE.md\" aria-label=\"GOVERNANCE.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/GOVERNANCE.md\">GOVERNANCE.md</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row undefined\" id=\"folder-row-9\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"LICENSE.md\" aria-label=\"LICENSE.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/LICENSE.md\">LICENSE.md</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"LICENSE.md\" aria-label=\"LICENSE.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/LICENSE.md\">LICENSE.md</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row truncate-for-mobile\" id=\"folder-row-10\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"MAINTAINERS.md\" aria-label=\"MAINTAINERS.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/MAINTAINERS.md\">MAINTAINERS.md</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"MAINTAINERS.md\" aria-label=\"MAINTAINERS.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/MAINTAINERS.md\">MAINTAINERS.md</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row truncate-for-mobile\" id=\"folder-row-11\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"README.md\" aria-label=\"README.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/README.md\">README.md</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"README.md\" aria-label=\"README.md, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/README.md\">README.md</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row truncate-for-mobile\" id=\"folder-row-12\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"pyproject.toml\" aria-label=\"pyproject.toml, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/pyproject.toml\">pyproject.toml</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"pyproject.toml\" aria-label=\"pyproject.toml, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/pyproject.toml\">pyproject.toml</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"react-directory-row truncate-for-mobile\" id=\"folder-row-13\"><td class=\"react-directory-row-name-cell-small-screen\" colSpan=\"2\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"setup.py\" aria-label=\"setup.py, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/setup.py\">setup.py</a></div></h3></div></div></td><td class=\"react-directory-row-name-cell-large-screen\" colSpan=\"1\"><div class=\"react-directory-filename-column\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"color-fg-muted\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M2 1.75C2 .784 2.784 0 3.75 0h6.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0 1 13.25 16h-9.5A1.75 1.75 0 0 1 2 14.25Zm1.75-.25a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h9.5a.25.25 0 0 0 .25-.25V6h-2.75A1.75 1.75 0 0 1 9 4.25V1.5Zm6.75.062V4.25c0 .138.112.25.25.25h2.688l-.011-.013-2.914-2.914-.013-.011Z\"></path></svg><div class=\"overflow-hidden\"><h3><div class=\"react-directory-truncate\"><a title=\"setup.py\" aria-label=\"setup.py, (File)\" class=\"Link--primary\" href=\"/guidance-ai/guidance/blob/main/setup.py\">setup.py</a></div></h3></div></div></td><td class=\"react-directory-row-commit-cell\"><div class=\"Skeleton Skeleton--text\">\u00a0</div></td><td><div class=\"Skeleton Skeleton--text\">\u00a0</div></td></tr><tr class=\"Box-sc-g0xbh4-0 epsqEd show-for-mobile\" data-testid=\"view-all-files-row\"><td colSpan=\"3\" class=\"Box-sc-g0xbh4-0 ldpruc\"><div><button class=\"Link__StyledLink-sc-14289xe-0 dheQRw\">View all files</button></div></td></tr></tbody></table></div><div class=\"Box-sc-g0xbh4-0 ehcSsh\"><div class=\"Box-sc-g0xbh4-0 iGmlUb\"><div class=\"Box-sc-g0xbh4-0 iRQGXA\"><h2 class=\"_VisuallyHidden__VisuallyHidden-sc-11jhm7a-0 rTZSs\">Repository files navigation</h2><nav aria-label=\"Repository files\" class=\"Box-sc-g0xbh4-0 dvTdPK\"><ul role=\"list\" class=\"UnderlineNav__NavigationList-sc-1jfr31k-0 bPgibo\"><li class=\"Box-sc-g0xbh4-0 gwuIGu\"><a href=\"#\" aria-current=\"page\" class=\"Link__StyledLink-sc-14289xe-0 vLMkZ\"><span data-component=\"icon\" class=\"Box-sc-g0xbh4-0 kOxwQs\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-book\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M0 1.75A.75.75 0 0 1 .75 1h4.253c1.227 0 2.317.59 3 1.501A3.743 3.743 0 0 1 11.006 1h4.245a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-4.507a2.25 2.25 0 0 0-1.591.659l-.622.621a.75.75 0 0 1-1.06 0l-.622-.621A2.25 2.25 0 0 0 5.258 13H.75a.75.75 0 0 1-.75-.75Zm7.251 10.324.004-5.073-.002-2.253A2.25 2.25 0 0 0 5.003 2.5H1.5v9h3.757a3.75 3.75 0 0 1 1.994.574ZM8.755 4.75l-.004 7.322a3.752 3.752 0 0 1 1.992-.572H14.5v-9h-3.495a2.25 2.25 0 0 0-2.25 2.25Z\"></path></svg></span><span data-component=\"text\" data-content=\"README\" class=\"Box-sc-g0xbh4-0 kOgeFj\">README</span></a></li><li class=\"Box-sc-g0xbh4-0 gwuIGu\"><a href=\"#\" class=\"Link__StyledLink-sc-14289xe-0 bhqztV\"><span data-component=\"icon\" class=\"Box-sc-g0xbh4-0 kOxwQs\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-law\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M8.75.75V2h.985c.304 0 .603.08.867.231l1.29.736c.038.022.08.033.124.033h2.234a.75.75 0 0 1 0 1.5h-.427l2.111 4.692a.75.75 0 0 1-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.006.005-.01.01-.045.04c-.21.176-.441.327-.686.45C14.556 10.78 13.88 11 13 11a4.498 4.498 0 0 1-2.023-.454 3.544 3.544 0 0 1-.686-.45l-.045-.04-.016-.015-.006-.006-.004-.004v-.001a.75.75 0 0 1-.154-.838L12.178 4.5h-.162c-.305 0-.604-.079-.868-.231l-1.29-.736a.245.245 0 0 0-.124-.033H8.75V13h2.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1 0-1.5h2.5V3.5h-.984a.245.245 0 0 0-.124.033l-1.289.737c-.265.15-.564.23-.869.23h-.162l2.112 4.692a.75.75 0 0 1-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.016.015-.045.04c-.21.176-.441.327-.686.45C4.556 10.78 3.88 11 3 11a4.498 4.498 0 0 1-2.023-.454 3.544 3.544 0 0 1-.686-.45l-.045-.04-.016-.015-.006-.006-.004-.004v-.001a.75.75 0 0 1-.154-.838L2.178 4.5H1.75a.75.75 0 0 1 0-1.5h2.234a.249.249 0 0 0 .125-.033l1.288-.737c.265-.15.564-.23.869-.23h.984V.75a.75.75 0 0 1 1.5 0Zm2.945 8.477c.285.135.718.273 1.305.273s1.02-.138 1.305-.273L13 6.327Zm-10 0c.285.135.718.273 1.305.273s1.02-.138 1.305-.273L3 6.327Z\"></path></svg></span><span data-component=\"text\" data-content=\"MIT license\" class=\"Box-sc-g0xbh4-0\">MIT license</span></a></li></ul></nav><button style=\"--button-color:fg.subtle\" type=\"button\" aria-label=\"Outline\" id=\":Rdkl5:\" aria-haspopup=\"true\" tabindex=\"0\" class=\"types__StyledButton-sc-ws60qy-0 jPraEl\"><svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" class=\"octicon octicon-list-unordered\" viewBox=\"0 0 16 16\" width=\"16\" height=\"16\" fill=\"currentColor\" style=\"display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible\"><path d=\"M5.75 2.5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2 14a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-6a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM2 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z\"></path></svg></button></div><div class=\"Box-sc-g0xbh4-0 bJMeLZ js-snippet-clipboard-copy-unpositioned\" data-hpc=\"true\"><article class=\"markdown-body entry-content container-lg\" itemprop=\"text\"><div align=\"right\" dir=\"auto\"><a href=\"https://guidance.readthedocs.org\" rel=\"nofollow\"><img src=\"https://camo.githubusercontent.com/b41712113f784f9e9f17845c9a8454ee6b6367a04aec4d33fd4eb13fd45726da/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f67756964616e63652f62616467652f3f76657273696f6e3d6c6174657374267374796c653d666c6174\" data-canonical-src=\"https://readthedocs.org/projects/guidance/badge/?version=latest&amp;style=flat\" style=\"max-width: 100%;\"></a></div><div align=\"center\" dir=\"auto\"><themed-picture data-catalyst-inline=\"true\"><picture>  <source media=\"(prefers-color-scheme: dark)\" srcset=\"/guidance-ai/guidance/raw/main/docs/figures/guidance_logo_blue_dark.svg\">  <img alt=\"guidance\" src=\"/guidance-ai/guidance/raw/main/docs/figures/guidance_logo_blue.svg\" width=\"300&quot;\"></picture></themed-picture></div><br><blockquote><p dir=\"auto\"><em>Note that v0.1 is a dramatically new version developed while releases had to be paused over the summer. If you are looking for the old version based on handlebars, you can use v0.0.64, but you should instead try porting over to the much better new version :)</em></p></blockquote><p dir=\"auto\"><strong><code>guidance</code></strong> is a programming paradigm that offers superior control and efficiency compared to conventional prompting and chaining. It allows users to constrain generation (e.g. with regex and CFGs) as well as to interleave control (conditional, loops) and generation seamlessly. Here are some important features:</p><ol dir=\"auto\"><li><strong>Pure, beautiful python</strong> with additional LM functionality. E.g. here is <a href=\"#basic-generation\">basic generation</a>:</li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import models, gen# load a model (could be Transformers, LlamaCpp, VertexAI, OpenAI...)llama2 = models.LlamaCpp(path) # append text or generations to the modelllama2 + f'Do you want a joke or a poem? ' + gen(stop='.')\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">models</span>, <span class=\"pl-s1\">gen</span><span class=\"pl-c\"># load a model (could be Transformers, LlamaCpp, VertexAI, OpenAI...)</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">LlamaCpp</span>(<span class=\"pl-s1\">path</span>) <span class=\"pl-c\"># append text or generations to the model</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">f'Do you want a joke or a poem? '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'.'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/guidance-ai/guidance/blob/main/docs/figures/simple_gen_llama2_7b.png\"><img alt=\"Do you want a joke or a poem? I'll give you a poem\" src=\"/guidance-ai/guidance/raw/main/docs/figures/simple_gen_llama2_7b.png\" width=\"354\" style=\"max-width: 100%;\"></a></p><ol start=\"2\" dir=\"auto\"><li><a href=\"#constrained-generation\"><strong>Constrained generation</strong></a> with <a href=\"#select-basic\">selects</a>, <a href=\"#regular-expressions\">regular expressions</a>, and <a href=\"#context-free-grammars\">context-free grammars</a>.</li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import select# a simple select between two optionsllama2 + f'Do you want a joke or a poem? A ' + select(['joke', 'poem'])\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">select</span><span class=\"pl-c\"># a simple select between two options</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">f'Do you want a joke or a poem? A '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">select</span>([<span class=\"pl-s\">'joke'</span>, <span class=\"pl-s\">'poem'</span>])</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/guidance-ai/guidance/blob/main/docs/figures/simple_select_llama2_7b.png\"><img alt=\"Do you want a joke or a poem? A poem\" src=\"/guidance-ai/guidance/raw/main/docs/figures/simple_select_llama2_7b.png\" width=\"277\" style=\"max-width: 100%;\"></a></p><ol start=\"3\" dir=\"auto\"><li><strong>Rich templates with f-strings</strong>:</li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"llama2 + f'''\\Do you want a joke or a poem? A {select(['joke', 'poem'])}.Okay, here is a one-liner: &quot;{gen(stop='&quot;')}&quot;'''\"><pre><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">f'''<span class=\"pl-cce\">\\</span></span><span class=\"pl-s\"><span class=\"pl-cce\"></span>Do you want a joke or a poem? A <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">select</span>([<span class=\"pl-s\">'joke'</span>, <span class=\"pl-s\">'poem'</span>])<span class=\"pl-kos\">}</span></span>.</span><span class=\"pl-s\">Okay, here is a one-liner: \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'\"'</span>)<span class=\"pl-kos\">}</span></span>\"</span><span class=\"pl-s\">'''</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282866560-486ca968-89b1-4c02-b914-3b9714fe5890.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg2NjU2MC00ODZjYTk2OC04OWIxLTRjMDItYjkxNC0zYjk3MTRmZTU4OTAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWEyZmIzMGQ1MzA5MDI1ZDFlZDVlZjgzOTQwYmQ5MThjYzkxM2E4ZDA5NmQ1M2U2Yzg1ZmJlNzkyNmQyMjk1NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.-FzhP9_mMlSlHZWQ6hpV3c-E53pNA1UB8Wr6yNUVXGQ\"><img width=\"358\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282866560-486ca968-89b1-4c02-b914-3b9714fe5890.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg2NjU2MC00ODZjYTk2OC04OWIxLTRjMDItYjkxNC0zYjk3MTRmZTU4OTAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWEyZmIzMGQ1MzA5MDI1ZDFlZDVlZjgzOTQwYmQ5MThjYzkxM2E4ZDA5NmQ1M2U2Yzg1ZmJlNzkyNmQyMjk1NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.-FzhP9_mMlSlHZWQ6hpV3c-E53pNA1UB8Wr6yNUVXGQ\" style=\"max-width: 100%;\"></a><br></p><ol start=\"4\" dir=\"auto\"><li><a href=\"#stateful-control--generation\"><strong>Stateful control + generation</strong></a> makes it easy to interleave prompting / logic / generation, no need for intermediate parsers:</li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# capture our selection under the name 'answer'lm = llama2 + f&quot;Do you want a joke or a poem? A {select(['joke', 'poem'], name='answer')}.\\n&quot;# make a choice based on the model's previous selectionif lm[&quot;answer&quot;] == &quot;joke&quot;:    lm += f&quot;Here is a one-line joke about cats: &quot; + gen('output', stop='\\n')else:    lm += f&quot;Here is a one-line poem about dogs: &quot; + gen('output', stop='\\n')\"><pre><span class=\"pl-c\"># capture our selection under the name 'answer'</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">f\"Do you want a joke or a poem? A <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">select</span>([<span class=\"pl-s\">'joke'</span>, <span class=\"pl-s\">'poem'</span>], <span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'answer'</span>)<span class=\"pl-kos\">}</span></span>.<span class=\"pl-cce\">\\n</span>\"</span><span class=\"pl-c\"># make a choice based on the model's previous selection</span><span class=\"pl-k\">if</span> <span class=\"pl-s1\">lm</span>[<span class=\"pl-s\">\"answer\"</span>] <span class=\"pl-c1\">==</span> <span class=\"pl-s\">\"joke\"</span>:    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f\"Here is a one-line joke about cats: \"</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'output'</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>)<span class=\"pl-k\">else</span>:    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f\"Here is a one-line poem about dogs: \"</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'output'</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282867311-66d47ce7-1d5a-4dbd-b676-66b9c1094184.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg2NzMxMS02NmQ0N2NlNy0xZDVhLTRkYmQtYjY3Ni02NmI5YzEwOTQxODQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTFkZjM1NDgzZGMyNjY5N2JmZjk2OWVkZGU0MjY4YjA3ODVhNGEzZjgzMjE4YmRjMTNjN2ZmYWIxMWFiZGZhMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.mw2JbqQETSk4N3vu4OY-TsnD2IrGFEpiaAMUywwoTF0\"><img width=\"393\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282867311-66d47ce7-1d5a-4dbd-b676-66b9c1094184.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg2NzMxMS02NmQ0N2NlNy0xZDVhLTRkYmQtYjY3Ni02NmI5YzEwOTQxODQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTFkZjM1NDgzZGMyNjY5N2JmZjk2OWVkZGU0MjY4YjA3ODVhNGEzZjgzMjE4YmRjMTNjN2ZmYWIxMWFiZGZhMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.mw2JbqQETSk4N3vu4OY-TsnD2IrGFEpiaAMUywwoTF0\" style=\"max-width: 100%;\"></a><br></p><ol start=\"5\" dir=\"auto\"><li><strong>Abstract chat interface</strong> that uses the correct special tokens for any chat model:</li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import user, assistant# load a chat modelchat_lm = models.LlamaCppChat(path)# wrap with chat block contextswith user():    lm = chat_lm + 'Do you want a joke or a poem?'with assistant():    lm += f&quot;A {select(['joke', 'poem'])}.&quot;`\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">user</span>, <span class=\"pl-s1\">assistant</span><span class=\"pl-c\"># load a chat model</span><span class=\"pl-s1\">chat_lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">LlamaCppChat</span>(<span class=\"pl-s1\">path</span>)<span class=\"pl-c\"># wrap with chat block contexts</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">user</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">chat_lm</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'Do you want a joke or a poem?'</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">assistant</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f\"A <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">select</span>([<span class=\"pl-s\">'joke'</span>, <span class=\"pl-s\">'poem'</span>])<span class=\"pl-kos\">}</span></span>.\"</span>`</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282870969-89c3e0e2-ed0a-4715-8366-2efca74b7b71.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MDk2OS04OWMzZTBlMi1lZDBhLTQ3MTUtODM2Ni0yZWZjYTc0YjdiNzEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzBjZmE3MTk2YTJiZWVmMTdmZDY4ZjVhY2M4ZGNjMjRmMDhhOTFjM2EzMzljZGVlNjg4YWVkOGI3YmIzZTMxMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.d5d-NI8pZkjtbvdU_yeAwrXiia_Kul4ZZK9Y2uYDx20\"><img width=\"331\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282870969-89c3e0e2-ed0a-4715-8366-2efca74b7b71.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MDk2OS04OWMzZTBlMi1lZDBhLTQ3MTUtODM2Ni0yZWZjYTc0YjdiNzEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzBjZmE3MTk2YTJiZWVmMTdmZDY4ZjVhY2M4ZGNjMjRmMDhhOTFjM2EzMzljZGVlNjg4YWVkOGI3YmIzZTMxMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.d5d-NI8pZkjtbvdU_yeAwrXiia_Kul4ZZK9Y2uYDx20\" style=\"max-width: 100%;\"></a><br></p><ol start=\"6\" dir=\"auto\"><li><strong>Easy to write reusable components</strong></li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"import guidance@guidancedef one_line_thing(lm, thing, topic):    lm += f'Here is a one-line {thing} about {topic}: ' + gen(stop='\\n')    return lm # return our updated model# pick either a joke or a poemlm = llama2 + f&quot;Do you want a joke or a poem? A {select(['joke', 'poem'], name='thing')}.\\n&quot;# call our guidance functionlm += one_line_thing(lm['thing'], 'cats')\"><pre><span class=\"pl-k\">import</span> <span class=\"pl-s1\">guidance</span><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">one_line_thing</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">thing</span>, <span class=\"pl-s1\">topic</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'Here is a one-line <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">thing</span><span class=\"pl-kos\">}</span></span> about <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">topic</span><span class=\"pl-kos\">}</span></span>: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>)    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span> <span class=\"pl-c\"># return our updated model</span><span class=\"pl-c\"># pick either a joke or a poem</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">f\"Do you want a joke or a poem? A <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">select</span>([<span class=\"pl-s\">'joke'</span>, <span class=\"pl-s\">'poem'</span>], <span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'thing'</span>)<span class=\"pl-kos\">}</span></span>.<span class=\"pl-cce\">\\n</span>\"</span><span class=\"pl-c\"># call our guidance function</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">one_line_thing</span>(<span class=\"pl-s1\">lm</span>[<span class=\"pl-s\">'thing'</span>], <span class=\"pl-s\">'cats'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282871157-60071680-8bbb-4fa5-a298-613d4fd55fa7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTE1Ny02MDA3MTY4MC04YmJiLTRmYTUtYTI5OC02MTNkNGZkNTVmYTcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OTA4ODNhZmU2MDQ5NjI3OWMwMGJjZGEzODIwNmI3OGI4ZTdmYmNjNzk4YzFmMzkyNTAzMWE4MmMxZmZjYjA4MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.aG07Ee-esdK2zUFCcQNZ3BZy_XRj3GZLTj-lOzEc34Q\"><img width=\"386\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282871157-60071680-8bbb-4fa5-a298-613d4fd55fa7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTE1Ny02MDA3MTY4MC04YmJiLTRmYTUtYTI5OC02MTNkNGZkNTVmYTcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OTA4ODNhZmU2MDQ5NjI3OWMwMGJjZGEzODIwNmI3OGI4ZTdmYmNjNzk4YzFmMzkyNTAzMWE4MmMxZmZjYjA4MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.aG07Ee-esdK2zUFCcQNZ3BZy_XRj3GZLTj-lOzEc34Q\" style=\"max-width: 100%;\"></a><br></p><ol start=\"7\" dir=\"auto\"><li><strong>A library of pre-built components</strong>, e.g. substring:</li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import substring# define a set of possible statementstext = 'guidance is awesome. guidance is so great. guidance is the best thing since sliced bread.'# force the model to make an exact quotellama2 + f'Here is a true statement about the guidance library: &quot;{substring(text)}&quot;'\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">substring</span><span class=\"pl-c\"># define a set of possible statements</span><span class=\"pl-s1\">text</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'guidance is awesome. guidance is so great. guidance is the best thing since sliced bread.'</span><span class=\"pl-c\"># force the model to make an exact quote</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">f'Here is a true statement about the guidance library: \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">substring</span>(<span class=\"pl-s1\">text</span>)<span class=\"pl-kos\">}</span></span>\"'</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282871631-9a7178ad-ed73-4e6b-b418-f9d2a3a76b88.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTYzMS05YTcxNzhhZC1lZDczLTRlNmItYjQxOC1mOWQyYTNhNzZiODgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OWU1ZDEzN2E2ZTk1NGRmNWFiY2ViY2I1OTY0MDM0ZTMzYmY0ZjQyZDgyM2VkM2NmNzY5MzI3ZTc1ZWM3OGYxOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.FbHtNIkySxSVbtMiyRAzuxOPEYdJ-3NHGYJNv4jk7A8\"><img width=\"589\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282871631-9a7178ad-ed73-4e6b-b418-f9d2a3a76b88.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTYzMS05YTcxNzhhZC1lZDczLTRlNmItYjQxOC1mOWQyYTNhNzZiODgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9OWU1ZDEzN2E2ZTk1NGRmNWFiY2ViY2I1OTY0MDM0ZTMzYmY0ZjQyZDgyM2VkM2NmNzY5MzI3ZTc1ZWM3OGYxOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.FbHtNIkySxSVbtMiyRAzuxOPEYdJ-3NHGYJNv4jk7A8\" style=\"max-width: 100%;\"></a><br></p><ol start=\"8\" dir=\"auto\"><li><a href=\"#automatic-interleaving-of-control-and-generation-tool-use\"><strong>Easy tool use</strong></a>, where the model stops generation when a tool is called, calls the tool, then resumes generation. For example, here is a simple version of a calculator, via four separate 'tools':</li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@guidancedef add(lm, input1, input2):    lm += f' = {int(input1) + int(input2)}'    return lm@guidancedef subtract(lm, input1, input2):    lm += f' = {int(input1) - int(input2)}'    return lm@guidancedef multiply(lm, input1, input2):    lm += f' = {float(input1) * float(input2)}'    return lm@guidancedef divide(lm, input1, input2):    lm += f' = {float(input1) / float(input2)}'    return lm\"><pre><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">add</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">input1</span>, <span class=\"pl-s1\">input2</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f' = <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">int</span>(<span class=\"pl-s1\">input1</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-en\">int</span>(<span class=\"pl-s1\">input2</span>)<span class=\"pl-kos\">}</span></span>'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">subtract</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">input1</span>, <span class=\"pl-s1\">input2</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f' = <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">int</span>(<span class=\"pl-s1\">input1</span>) <span class=\"pl-c1\">-</span> <span class=\"pl-en\">int</span>(<span class=\"pl-s1\">input2</span>)<span class=\"pl-kos\">}</span></span>'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">multiply</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">input1</span>, <span class=\"pl-s1\">input2</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f' = <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">float</span>(<span class=\"pl-s1\">input1</span>) <span class=\"pl-c1\">*</span> <span class=\"pl-en\">float</span>(<span class=\"pl-s1\">input2</span>)<span class=\"pl-kos\">}</span></span>'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">divide</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">input1</span>, <span class=\"pl-s1\">input2</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f' = <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">float</span>(<span class=\"pl-s1\">input1</span>) <span class=\"pl-c1\">/</span> <span class=\"pl-en\">float</span>(<span class=\"pl-s1\">input2</span>)<span class=\"pl-kos\">}</span></span>'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span></pre></div><p dir=\"auto\">Now we call <code>gen</code> with these tools as options. Notice how generation is stopped and restarted automatically:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + '''\\1 + 1 = add(1, 1) = 22 - 3 = subtract(2, 3) = -1'''lm + gen(max_tokens=15, tools=[add, subtract, multiply, divide])\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'''<span class=\"pl-cce\">\\</span></span><span class=\"pl-s\"><span class=\"pl-cce\"></span>1 + 1 = add(1, 1) = 2</span><span class=\"pl-s\">2 - 3 = subtract(2, 3) = -1</span><span class=\"pl-s\">'''</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">15</span>, <span class=\"pl-s1\">tools</span><span class=\"pl-c1\">=</span>[<span class=\"pl-s1\">add</span>, <span class=\"pl-s1\">subtract</span>, <span class=\"pl-s1\">multiply</span>, <span class=\"pl-s1\">divide</span>])</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282871991-646e1a7d-0206-419b-8206-1d835c3a0e0a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTk5MS02NDZlMWE3ZC0wMjA2LTQxOWItODIwNi0xZDgzNWMzYTBlMGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDE4ZjRlMzliNWI5NGM1YTEyZjZhOTBkZjA5NjcwNTRkNDNjZjcxNDFmYTU4YjE2MTYwMGYxMzhmYWY2OGE5OCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Qz1JQ9Uy5HKeYaAW4HA8TuBq0Z1sm4hnQahZI2LgNDo\"><img width=\"201\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282871991-646e1a7d-0206-419b-8206-1d835c3a0e0a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg3MTk5MS02NDZlMWE3ZC0wMjA2LTQxOWItODIwNi0xZDgzNWMzYTBlMGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDE4ZjRlMzliNWI5NGM1YTEyZjZhOTBkZjA5NjcwNTRkNDNjZjcxNDFmYTU4YjE2MTYwMGYxMzhmYWY2OGE5OCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Qz1JQ9Uy5HKeYaAW4HA8TuBq0Z1sm4hnQahZI2LgNDo\" style=\"max-width: 100%;\"></a><br></p><ol start=\"9\" dir=\"auto\"><li><p dir=\"auto\"><strong>Speed</strong>: In contrast to chaining, <code>guidance</code> programs are the equivalent of a single LLM call. More so, whatever non-generated text that gets appended is batched, so that <code>guidance</code> programs are <strong>faster</strong> than having the LM generate intermediate text when you have a set structure.</p></li><li><p dir=\"auto\"><strong>Token healing</strong>: Users deal with text (or bytes) rather than tokens, and thus don't have to worry about <a href=\"https://towardsdatascience.com/the-art-of-prompt-design-prompt-boundaries-and-token-healing-3b2448b0be38\" rel=\"nofollow\">perverse token boundaries issues</a> such as 'prompt ending in whitespace'.</p></li><li><p dir=\"auto\"><strong>Streaming support</strong>, also integrated with jupyter notebooks:</p></li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + 'Here is a cute 5-line poem about cats and dogs:\\n'for i in range(5):    lm += f&quot;LINE {i+1}: &quot; + gen(temperature=0.8, suffix=&quot;\\n&quot;)\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'Here is a cute 5-line poem about cats and dogs:<span class=\"pl-cce\">\\n</span>'</span><span class=\"pl-k\">for</span> <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">in</span> <span class=\"pl-en\">range</span>(<span class=\"pl-c1\">5</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f\"LINE <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">i</span><span class=\"pl-c1\">+</span><span class=\"pl-c1\">1</span><span class=\"pl-kos\">}</span></span>: \"</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">temperature</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">0.8</span>, <span class=\"pl-s1\">suffix</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"<span class=\"pl-cce\">\\n</span>\"</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"/guidance-ai/guidance/blob/main/docs/figures/simple_streaming_example.gif\"><img src=\"/guidance-ai/guidance/raw/main/docs/figures/simple_streaming_example.gif\" width=\"337\" data-animated-image=\"\" style=\"max-width: 100%;\"></a></p><ol start=\"13\" dir=\"auto\"><li><strong>High compatibility:</strong> works with Transformers, llama.cpp, VertexAI, OpenAI. Users can write one guidance program and execute it on many backends. (note that the most powerful control features require endpoint integration, and for now work best with Transformers and llama.cpp).</li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"gpt = models.OpenAI(&quot;gpt-3.5-turbo&quot;)with user():    lm = gpt + &quot;What is the capital of France?&quot;with assistant():    lm += gen(&quot;capital&quot;)with user():    lm += &quot;What is one short surprising fact about it?&quot;with assistant():    lm += gen(&quot;fact&quot;)\"><pre><span class=\"pl-s1\">gpt</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">OpenAI</span>(<span class=\"pl-s\">\"gpt-3.5-turbo\"</span>)<span class=\"pl-k\">with</span> <span class=\"pl-en\">user</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">gpt</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">\"What is the capital of France?\"</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">assistant</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s\">\"capital\"</span>)<span class=\"pl-k\">with</span> <span class=\"pl-en\">user</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">\"What is one short surprising fact about it?\"</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">assistant</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s\">\"fact\"</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282881266-f31ed7b8-1868-44d2-b14c-4842b0a40e5c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4MTI2Ni1mMzFlZDdiOC0xODY4LTQ0ZDItYjE0Yy00ODQyYjBhNDBlNWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NTFjMTM5ODhlM2VhOWY2MTJiOThhODQzMzQ2OTExY2YyNDIxNmZiNDEzN2QyNzYzNjRhMTg4YjE5NWNmZjY0NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.UsjqQmiMq-KaYD0NlaAZpILKbbEIwisZNSCPvu8zMa8\"><img width=\"645\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282881266-f31ed7b8-1868-44d2-b14c-4842b0a40e5c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4MTI2Ni1mMzFlZDdiOC0xODY4LTQ0ZDItYjE0Yy00ODQyYjBhNDBlNWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NTFjMTM5ODhlM2VhOWY2MTJiOThhODQzMzQ2OTExY2YyNDIxNmZiNDEzN2QyNzYzNjRhMTg4YjE5NWNmZjY0NCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.UsjqQmiMq-KaYD0NlaAZpILKbbEIwisZNSCPvu8zMa8\" style=\"max-width: 100%;\"></a><br></p><ol start=\"14\" dir=\"auto\"><li><strong>Multi-modal support.</strong></li></ol><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import imagegemini = models.VertexAI(&quot;gemini-pro-vision&quot;)with user():    lm = gemini + &quot;What is this a picture of?&quot; + image(&quot;longs_peak.jpg&quot;)with assistant():    lm += gen(&quot;answer&quot;)\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">image</span><span class=\"pl-s1\">gemini</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">VertexAI</span>(<span class=\"pl-s\">\"gemini-pro-vision\"</span>)<span class=\"pl-k\">with</span> <span class=\"pl-en\">user</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">gemini</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">\"What is this a picture of?\"</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">image</span>(<span class=\"pl-s\">\"longs_peak.jpg\"</span>)<span class=\"pl-k\">with</span> <span class=\"pl-en\">assistant</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s\">\"answer\"</span>)</pre></div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/290679730-6450d05d-52e9-4ef5-b280-8b57e733d46d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI5MDY3OTczMC02NDUwZDA1ZC01MmU5LTRlZjUtYjI4MC04YjU3ZTczM2Q0NmQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NjAwNDU3ZWZlZjA4NzUyOTgyZjhiNDAwMDA4MjFjMDJiODVhYmM5YWI3YmEyMmI3OTJlYjk1YzZmNzBjYWUzNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Ky6tX_qPI1DKUqD4MxdLJEmCdtcYNa_ncpe3kmgM_us\"><img width=\"673\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/290679730-6450d05d-52e9-4ef5-b280-8b57e733d46d.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI5MDY3OTczMC02NDUwZDA1ZC01MmU5LTRlZjUtYjI4MC04YjU3ZTczM2Q0NmQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NjAwNDU3ZWZlZjA4NzUyOTgyZjhiNDAwMDA4MjFjMDJiODVhYmM5YWI3YmEyMmI3OTJlYjk1YzZmNzBjYWUzNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Ky6tX_qPI1DKUqD4MxdLJEmCdtcYNa_ncpe3kmgM_us\" style=\"max-width: 100%;\"></a><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Table of Contents</h2><a id=\"user-content-table-of-contents\" class=\"anchor-element\" aria-label=\"Permalink: Table of Contents\" href=\"#table-of-contents\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><ul dir=\"auto\"><li><a href=\"#install\">Install</a></li><li><a href=\"#loading-models\">Loading models</a><ul dir=\"auto\"><li><a href=\"#llamacpp\">llama.cpp</a></li><li><a href=\"#transformers\">transformers</a></li><li><a href=\"#vertex-ai\">Vertex</a></li><li><a href=\"#openai\">OpenAI</a></li></ul></li><li><a href=\"#example-notebooks\">Example notebooks</a></li><li><a href=\"#basic-generation\">Basic generation</a></li><li><a href=\"#constrained-generation\">Constrained Generation</a><ul dir=\"auto\"><li><a href=\"#select-basic\">Select (basic)</a></li><li><a href=\"#regular-expressions\">Regular expressions</a><ul dir=\"auto\"><li><a href=\"#regex-to-constrain-generation\">Regex to constrain generation</a></li><li><a href=\"#regex-as-stopping-criterion\">Regex as stopping criterion</a></li></ul></li><li><a href=\"#context-free-grammars\">Context-free grammars</a></li></ul></li><li><a href=\"#stateful-control--generation\">Stateful control + generation</a><ul dir=\"auto\"><li><a href=\"#state-in-immutable-objects\">State in immutable objects</a></li><li><a href=\"#stateful-guidance-functions\">Stateful guidance functions</a></li><li><a href=\"#example-react\">Example: ReAct</a></li><li><a href=\"#example-changing-intermediate-step-of-a-chat-session\">Example: Changing intermediate step of a Chat session</a></li><li><a href=\"#automatic-interleaving-of-control-and-generation-tool-use\">Automatic interleaving of control and generation: tool use</a></li><li><a href=\"#gsm8k-example\">Gsm8k example</a></li><li><a href=\"#automatic-call-grammar-for-guidance-functions\">Automatic call grammar for @guidance functions</a></li></ul></li><li><a href=\"#text-not-tokens\">Text, not tokens</a></li><li><a href=\"#fast\">Fast</a><ul dir=\"auto\"><li><a href=\"#integrated-stateful-control-is-faster\">Integrated stateful control is faster</a></li><li><a href=\"#guidance-acceleration\">Guidance acceleration</a></li></ul></li></ul><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Install</h2><a id=\"user-content-install\" class=\"anchor-element\" aria-label=\"Permalink: Install\" href=\"#install\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"pip install guidance\"><pre>pip install guidance</pre></div><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Loading models</h2><a id=\"user-content-loading-models\" class=\"anchor-element\" aria-label=\"Permalink: Loading models\" href=\"#loading-models\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">llama.cpp</h3><a id=\"user-content-llamacpp\" class=\"anchor-element\" aria-label=\"Permalink: llama.cpp\" href=\"#llamacpp\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">Install the python bindings:</p><div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"CMAKE_ARGS=&quot;-DLLAMA_CUBLAS=on&quot; pip install llama-cpp-python\"><pre>CMAKE_ARGS=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-DLLAMA_CUBLAS=on<span class=\"pl-pds\">\"</span></span> pip install llama-cpp-python</pre></div><p dir=\"auto\">Loading the model:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import modelslm = models.LlamaCpp(path_to_model, n_gpu_layers=-1)\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">models</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">LlamaCpp</span>(<span class=\"pl-s1\">path_to_model</span>, <span class=\"pl-s1\">n_gpu_layers</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">-</span><span class=\"pl-c1\">1</span>)</pre></div><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Transformers</h3><a id=\"user-content-transformers\" class=\"anchor-element\" aria-label=\"Permalink: Transformers\" href=\"#transformers\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">Install transformers:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import modelslm = models.Transformers(model_name_or_path)\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">models</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">Transformers</span>(<span class=\"pl-s1\">model_name_or_path</span>)</pre></div><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Vertex AI</h3><a id=\"user-content-vertex-ai\" class=\"anchor-element\" aria-label=\"Permalink: Vertex AI\" href=\"#vertex-ai\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">Remote endpoints that don't have explicit guidance integration are run \"optimistically\". This means that all the text that can be forced is given to the model as a prompt (or chat context) and then the model is run in streaming mode without hard constrants (since the remote API doesn't support them). If the model ever violates the contraints then the model stream is stopped and we optionally try it again at that point. This means that all the API-supported control work as expected, and more complex controls/parsing that is not supported by the API work if the model stays consistent with the program.</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"palm2 = models.VertexAI(&quot;text-bison@001&quot;)with instruction():    lm = palm2 + &quot;What is one funny fact about Seattle?&quot;lm + gen(&quot;fact&quot;, max_tokens=100)\"><pre><span class=\"pl-s1\">palm2</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">VertexAI</span>(<span class=\"pl-s\">\"text-bison@001\"</span>)<span class=\"pl-k\">with</span> <span class=\"pl-en\">instruction</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">palm2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">\"What is one funny fact about Seattle?\"</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s\">\"fact\"</span>, <span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">100</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282886474-693ae08f-68f7-4368-bd25-19afc9bfc0a5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4NjQ3NC02OTNhZTA4Zi02OGY3LTQzNjgtYmQyNS0xOWFmYzliZmMwYTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmE5ODM3M2Y0Y2U2YzBkOTg3NTNhZWFlODZjNmI1MGU2MDQzNmQxODBmYjBmMzQzZmUwZjQ4NjQyMmFlYTEyNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.25Q7MFCAR8i4Y7QcfpKqe4pBti0M2w5zcqaqQuO9TtI\"><img width=\"635\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282886474-693ae08f-68f7-4368-bd25-19afc9bfc0a5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4NjQ3NC02OTNhZTA4Zi02OGY3LTQzNjgtYmQyNS0xOWFmYzliZmMwYTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmE5ODM3M2Y0Y2U2YzBkOTg3NTNhZWFlODZjNmI1MGU2MDQzNmQxODBmYjBmMzQzZmUwZjQ4NjQyMmFlYTEyNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.25Q7MFCAR8i4Y7QcfpKqe4pBti0M2w5zcqaqQuO9TtI\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">OpenAI</h3><a id=\"user-content-openai\" class=\"anchor-element\" aria-label=\"Permalink: OpenAI\" href=\"#openai\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">OpenAI endpoint don't have direct support for guidance grammars, but through optimistic running we can still control them in ways that match the model type:</p><p dir=\"auto\"><em>Legacy completion models:</em></p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"curie = models.OpenAI(&quot;text-curie-001&quot;)curie + &quot;The smallest cats are&quot; + gen(stop=&quot;.&quot;)\"><pre><span class=\"pl-s1\">curie</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">OpenAI</span>(<span class=\"pl-s\">\"text-curie-001\"</span>)<span class=\"pl-s1\">curie</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">\"The smallest cats are\"</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\".\"</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282887922-116a906c-ea77-4a13-a83a-682029d5e5c8.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4NzkyMi0xMTZhOTA2Yy1lYTc3LTRhMTMtYTgzYS02ODIwMjlkNWU1YzgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MmU4ZjE5NWMwMTM2YzZkMjRkY2FhMGZhMzMzZWVmMjAyYmE5YmQ1OWRiOTUyMmU0MzE4MTg0ZTE5NTZmOWU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.eaYzk7BWkH2gvt8WrYekqpDDA-aCRIMI14lp_kA3mHs\"><img width=\"263\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282887922-116a906c-ea77-4a13-a83a-682029d5e5c8.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4NzkyMi0xMTZhOTA2Yy1lYTc3LTRhMTMtYTgzYS02ODIwMjlkNWU1YzgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MmU4ZjE5NWMwMTM2YzZkMjRkY2FhMGZhMzMzZWVmMjAyYmE5YmQ1OWRiOTUyMmU0MzE4MTg0ZTE5NTZmOWU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.eaYzk7BWkH2gvt8WrYekqpDDA-aCRIMI14lp_kA3mHs\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\"><em>Instruct tuned models:</em></p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"gpt_instruct = models.OpenAI(&quot;gpt-3.5-turbo-instruct&quot;)with instruction():    lm = gpt_instruct + &quot;What are the smallest cats?&quot;    lm += gen(stop=&quot;.&quot;)\"><pre><span class=\"pl-s1\">gpt_instruct</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">OpenAI</span>(<span class=\"pl-s\">\"gpt-3.5-turbo-instruct\"</span>)<span class=\"pl-k\">with</span> <span class=\"pl-en\">instruction</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">gpt_instruct</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">\"What are the smallest cats?\"</span>    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\".\"</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282888489-56a53ce1-89f5-4e9d-bdb8-86fb3eebf309.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4ODQ4OS01NmE1M2NlMS04OWY1LTRlOWQtYmRiOC04NmZiM2VlYmYzMDkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTg4YzExZjA5YzdhYzRhYWRlMTQ3NzhhMGZmNmIyMjlmNmU2OWVlOWIwOTJlYTJhODQ3ZWQ3NzQxNTFmMGM0OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.2GoiKBPhg2zXtBPFjt3hYsTJCm_s5EVSoD1valeUpRA\"><img width=\"574\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282888489-56a53ce1-89f5-4e9d-bdb8-86fb3eebf309.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4ODQ4OS01NmE1M2NlMS04OWY1LTRlOWQtYmRiOC04NmZiM2VlYmYzMDkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTg4YzExZjA5YzdhYzRhYWRlMTQ3NzhhMGZmNmIyMjlmNmU2OWVlOWIwOTJlYTJhODQ3ZWQ3NzQxNTFmMGM0OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.2GoiKBPhg2zXtBPFjt3hYsTJCm_s5EVSoD1valeUpRA\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\"><em>Chat models:</em></p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"gpt = models.OpenAI(&quot;gpt-3.5-turbo&quot;)with system():    lm = gpt + &quot;You are a cat expert.&quot;with user():    lm += &quot;What are the smallest cats?&quot;with assistant():    lm += gen(&quot;answer&quot;, stop=&quot;.&quot;)\"><pre><span class=\"pl-s1\">gpt</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">OpenAI</span>(<span class=\"pl-s\">\"gpt-3.5-turbo\"</span>)<span class=\"pl-k\">with</span> <span class=\"pl-en\">system</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">gpt</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">\"You are a cat expert.\"</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">user</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">\"What are the smallest cats?\"</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">assistant</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s\">\"answer\"</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\".\"</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282888917-46102f0f-37dc-4bb1-99b7-e5895bdee772.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4ODkxNy00NjEwMmYwZi0zN2RjLTRiYjEtOTliNy1lNTg5NWJkZWU3NzIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2Q5OTllNDZmMzliMzNjNzg2ZDRjZTQzMWJjNmJkMzUxMjQ1YjA5NjU1ZDQ1NTM5MzRjMTdhYTA3YzUzZDlhZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.9sZpBamyU6zBLogDS4YYNjIIxYi8lQ4jf2tkUnTuSMA\"><img width=\"367\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282888917-46102f0f-37dc-4bb1-99b7-e5895bdee772.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg4ODkxNy00NjEwMmYwZi0zN2RjLTRiYjEtOTliNy1lNTg5NWJkZWU3NzIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2Q5OTllNDZmMzliMzNjNzg2ZDRjZTQzMWJjNmJkMzUxMjQ1YjA5NjU1ZDQ1NTM5MzRjMTdhYTA3YzUzZDlhZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.9sZpBamyU6zBLogDS4YYNjIIxYi8lQ4jf2tkUnTuSMA\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Example notebooks</h2><a id=\"user-content-example-notebooks\" class=\"anchor-element\" aria-label=\"Permalink: Example notebooks\" href=\"#example-notebooks\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">We are working on updating our example notebooks. The following ones have been updated:</p><ul dir=\"auto\"><li><a href=\"/guidance-ai/guidance/blob/main/notebooks/tutorials/intro_to_guidance.ipynb\">Basic tutorial</a></li><li><a href=\"/guidance-ai/guidance/blob/main/notebooks/chat_with_search.ipynb\">Chatbot with search</a></li></ul><p dir=\"auto\">More coming soon</p><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Basic generation</h2><a id=\"user-content-basic-generation\" class=\"anchor-element\" aria-label=\"Permalink: Basic generation\" href=\"#basic-generation\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">An <code>lm</code> object is immutable, so you change it by creating new copies of it. By default, when you append things to <code>lm</code>, it creates a copy, e.g.:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import models, gen, selectllama2 = models.LlamaCpp(model)# llama2 is not modified, `lm` is a copy of `llama2` with 'This is a prompt' appended to its statelm = llama2 + 'This is a prompt'\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">models</span>, <span class=\"pl-s1\">gen</span>, <span class=\"pl-s1\">select</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">LlamaCpp</span>(<span class=\"pl-s1\">model</span>)<span class=\"pl-c\"># llama2 is not modified, `lm` is a copy of `llama2` with 'This is a prompt' appended to its state</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'This is a prompt'</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282892561-c1e96b2b-8f4a-44ee-a8f4-a694a8d7784b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MjU2MS1jMWU5NmIyYi04ZjRhLTQ0ZWUtYThmNC1hNjk0YThkNzc4NGIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZGUxYTc2YzRjN2UwNWRlNGYzMWI1MTY2YzY2YjM4ZjE2N2NmMjRkYmEwNzIzZjYzOTE5OGZlNGQ2ZjA1YjllNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.sfKerT8HqTx7iYYRb-uyDcJN3uCCdepkqFAezy-r_T8\"><img width=\"124\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282892561-c1e96b2b-8f4a-44ee-a8f4-a694a8d7784b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MjU2MS1jMWU5NmIyYi04ZjRhLTQ0ZWUtYThmNC1hNjk0YThkNzc4NGIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZGUxYTc2YzRjN2UwNWRlNGYzMWI1MTY2YzY2YjM4ZjE2N2NmMjRkYmEwNzIzZjYzOTE5OGZlNGQ2ZjA1YjllNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.sfKerT8HqTx7iYYRb-uyDcJN3uCCdepkqFAezy-r_T8\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">You can append <em>generation</em> calls to model objects, e.g.</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + 'This is a prompt' + gen(max_tokens=10)\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'This is a prompt'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">10</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282892775-d2e5ed34-ba9d-4bdd-872d-2b76f8e3cf85.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mjc3NS1kMmU1ZWQzNC1iYTlkLTRiZGQtODcyZC0yYjc2ZjhlM2NmODUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTBiY2I2YjFjNmMxN2ZmZjc2ZjY5NWVmMWRiNDkzZTNlNTZmY2Y4ZGVhODg1MTg1YmQ0YWJmMGYwZDc2Mjg0YSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.HbiQJWjGcfiVCHvfsCqzBfy3d0uYSlVjFM_A0Dhy4qY\"><img width=\"267\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282892775-d2e5ed34-ba9d-4bdd-872d-2b76f8e3cf85.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mjc3NS1kMmU1ZWQzNC1iYTlkLTRiZGQtODcyZC0yYjc2ZjhlM2NmODUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTBiY2I2YjFjNmMxN2ZmZjc2ZjY5NWVmMWRiNDkzZTNlNTZmY2Y4ZGVhODg1MTg1YmQ0YWJmMGYwZDc2Mjg0YSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.HbiQJWjGcfiVCHvfsCqzBfy3d0uYSlVjFM_A0Dhy4qY\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">You can also interleave generation calls with plain text, or control flows:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Note how we set stop tokenslm = llama2 + 'I like to play with my ' + gen(stop=' ') + ' in' + gen(stop=['\\n', '.', '!'])\"><pre><span class=\"pl-c\"># Note how we set stop tokens</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'I like to play with my '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">' '</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-s\">' in'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span>[<span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>, <span class=\"pl-s\">'.'</span>, <span class=\"pl-s\">'!'</span>])</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282892963-2d47fd65-1982-4dd8-9ba9-a01e62fba455.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mjk2My0yZDQ3ZmQ2NS0xOTgyLTRkZDgtOWJhOS1hMDFlNjJmYmE0NTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZjE2NjM5YjdkYmZkMGU5YTJkODIwNTA2NTM5YjYxZjRhZDQ3Y2ViNmYxNTc0OGM3OTA3N2M1NDk5ZmQzMzRkNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.9W3CWyguId4RRAC2ktsjnyitXfUac3BGnjzZp7VpKls\"><img width=\"279\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282892963-2d47fd65-1982-4dd8-9ba9-a01e62fba455.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mjk2My0yZDQ3ZmQ2NS0xOTgyLTRkZDgtOWJhOS1hMDFlNjJmYmE0NTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZjE2NjM5YjdkYmZkMGU5YTJkODIwNTA2NTM5YjYxZjRhZDQ3Y2ViNmYxNTc0OGM3OTA3N2M1NDk5ZmQzMzRkNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.9W3CWyguId4RRAC2ktsjnyitXfUac3BGnjzZp7VpKls\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Constrained Generation</h2><a id=\"user-content-constrained-generation\" class=\"anchor-element\" aria-label=\"Permalink: Constrained Generation\" href=\"#constrained-generation\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Select (basic)</h3><a id=\"user-content-select-basic\" class=\"anchor-element\" aria-label=\"Permalink: Select (basic)\" href=\"#select-basic\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\"><code>select</code> constrains generation to a set of options:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + 'I like the color ' + select(['red', 'blue', 'green'])\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'I like the color '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">select</span>([<span class=\"pl-s\">'red'</span>, <span class=\"pl-s\">'blue'</span>, <span class=\"pl-s\">'green'</span>])</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282893084-f0b97629-78a9-439d-90b2-06af31fdc40e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzA4NC1mMGI5NzYyOS03OGE5LTQzOWQtOTBiMi0wNmFmMzFmZGM0MGUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YTRiMzQ1M2UyNmViN2QzZmViZTZiMWYyNzZiNTk4ZWYzMTAzYjFkNjFiZWFmNDJhNTdhYzQ4YmM3Yjk2ZDdmNSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.q-ijpmF67Juab2-ajmbKXREIEaQ17eb16N_un1flOMM\"><img width=\"137\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282893084-f0b97629-78a9-439d-90b2-06af31fdc40e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzA4NC1mMGI5NzYyOS03OGE5LTQzOWQtOTBiMi0wNmFmMzFmZGM0MGUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YTRiMzQ1M2UyNmViN2QzZmViZTZiMWYyNzZiNTk4ZWYzMTAzYjFkNjFiZWFmNDJhNTdhYzQ4YmM3Yjk2ZDdmNSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.q-ijpmF67Juab2-ajmbKXREIEaQ17eb16N_un1flOMM\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Regular expressions</h3><a id=\"user-content-regular-expressions\" class=\"anchor-element\" aria-label=\"Permalink: Regular expressions\" href=\"#regular-expressions\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\"><code>gen</code> has optional arguments <code>regex</code> and <code>stop_regex</code>, which allow generation (and stopping, respectively) to be controlled by a regex.</p><div class=\"markdown-heading\" dir=\"auto\"><h4 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Regex to constrain generation</h4><a id=\"user-content-regex-to-constrain-generation\" class=\"anchor-element\" aria-label=\"Permalink: Regex to constrain generation\" href=\"#regex-to-constrain-generation\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">Unconstrained:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + 'Question: Luke has ten balls. He gives three to his brother.\\n'lm += 'How many balls does he have left?\\n'lm += 'Answer: ' + gen(stop='\\n')\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'Question: Luke has ten balls. He gives three to his brother.<span class=\"pl-cce\">\\n</span>'</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'How many balls does he have left?<span class=\"pl-cce\">\\n</span>'</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Answer: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282893236-55fb66ea-a717-417a-8a70-14c46eba4c66.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzIzNi01NWZiNjZlYS1hNzE3LTQxN2EtOGE3MC0xNGM0NmViYTRjNjYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjBjOGMzNzFiZGJkZWM0ODE4NzgyZWYxZGVkOWFhNGE0ZWYzMDEwM2E4MzgwZGUzMWRiZTQyMDIwZjNhM2VmZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.254Y3il4UXB7xUvqwh2sq8pkwyVx4YMNwnMmQYQ_-bw\"><img width=\"405\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282893236-55fb66ea-a717-417a-8a70-14c46eba4c66.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzIzNi01NWZiNjZlYS1hNzE3LTQxN2EtOGE3MC0xNGM0NmViYTRjNjYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjBjOGMzNzFiZGJkZWM0ODE4NzgyZWYxZGVkOWFhNGE0ZWYzMDEwM2E4MzgwZGUzMWRiZTQyMDIwZjNhM2VmZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.254Y3il4UXB7xUvqwh2sq8pkwyVx4YMNwnMmQYQ_-bw\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Constrained by regex:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + 'Question: Luke has ten balls. He gives three to his brother.\\n'lm += 'How many balls does he have left?\\n'lm += 'Answer: ' + gen(regex='\\d+')\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'Question: Luke has ten balls. He gives three to his brother.<span class=\"pl-cce\">\\n</span>'</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'How many balls does he have left?<span class=\"pl-cce\">\\n</span>'</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Answer: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">regex</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'\\d+'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282893318-b45a5a79-55e0-4c15-884a-fba830c0a153.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzMxOC1iNDVhNWE3OS01NWUwLTRjMTUtODg0YS1mYmE4MzBjMGExNTMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGU2ZjhiMTdjYTRiMzU0MjkwYzkzYzE1ODQzNTAxMGJlYWZlY2IwZWI3ZDcwNDFiNDE1ZWVjODE1MzIzY2Y5MyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.lmUwircm8hMcS6GJ5y40tL7AXV50YBlZxzkDdfVQ0UA\"><img width=\"404\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282893318-b45a5a79-55e0-4c15-884a-fba830c0a153.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzMxOC1iNDVhNWE3OS01NWUwLTRjMTUtODg0YS1mYmE4MzBjMGExNTMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGU2ZjhiMTdjYTRiMzU0MjkwYzkzYzE1ODQzNTAxMGJlYWZlY2IwZWI3ZDcwNDFiNDE1ZWVjODE1MzIzY2Y5MyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.lmUwircm8hMcS6GJ5y40tL7AXV50YBlZxzkDdfVQ0UA\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h4 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Regex as stopping criterion</h4><a id=\"user-content-regex-as-stopping-criterion\" class=\"anchor-element\" aria-label=\"Permalink: Regex as stopping criterion\" href=\"#regex-as-stopping-criterion\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">Unconstrained:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + '19, 18,' + gen(max_tokens=50)\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'19, 18,'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">50</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282893796-5dd13454-cc42-4e27-a52c-19a31237891c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mzc5Ni01ZGQxMzQ1NC1jYzQyLTRlMjctYTUyYy0xOWEzMTIzNzg5MWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjIwZThmNGMzOWU2OGU5YTU1NWEyZDg2ZjY5ZjEyMGM3ODYzZDhlMTE2YjNmMDViZjlhNzBiYWVmODAyMjEyMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.VnM5yhH2jJ3dV-Elf1Kt-Cuf3lMoLK6KWgSaFKEhFOU\"><img width=\"359\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282893796-5dd13454-cc42-4e27-a52c-19a31237891c.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mzc5Ni01ZGQxMzQ1NC1jYzQyLTRlMjctYTUyYy0xOWEzMTIzNzg5MWMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjIwZThmNGMzOWU2OGU5YTU1NWEyZDg2ZjY5ZjEyMGM3ODYzZDhlMTE2YjNmMDViZjlhNzBiYWVmODAyMjEyMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.VnM5yhH2jJ3dV-Elf1Kt-Cuf3lMoLK6KWgSaFKEhFOU\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Stop with traditional stop text, whenever the model generates the number 7:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + '19, 18,' + gen(max_tokens=50, stop='7')\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'19, 18,'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">50</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'7'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282893854-fc96d7c3-381d-4766-8bee-c930669f518a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mzg1NC1mYzk2ZDdjMy0zODFkLTQ3NjYtOGJlZS1jOTMwNjY5ZjUxOGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDY3MDAxOTFkYWRmZTVkNzQyYzc0ZWUzMDJmOGVjNjc0OTA0YjNlN2M2ZmJiNDRmZGJjZmVjOGYyMTUxNWQxMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.dIzFgwv7gc7PuX0gjcxl9lkc6X6zyuM4mc9r-tQzQcA\"><img width=\"73\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282893854-fc96d7c3-381d-4766-8bee-c930669f518a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5Mzg1NC1mYzk2ZDdjMy0zODFkLTQ3NjYtOGJlZS1jOTMwNjY5ZjUxOGEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDY3MDAxOTFkYWRmZTVkNzQyYzc0ZWUzMDJmOGVjNjc0OTA0YjNlN2M2ZmJiNDRmZGJjZmVjOGYyMTUxNWQxMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.dIzFgwv7gc7PuX0gjcxl9lkc6X6zyuM4mc9r-tQzQcA\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Stop whenever the model generates the character <code>7</code> without any numbers around it:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + '19, 18,' + gen(max_tokens=50, stop_regex='[^\\d]7[^\\d]')\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'19, 18,'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">50</span>, <span class=\"pl-s1\">stop_regex</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'[^\\d]7[^\\d]'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282893900-a657e566-b1a4-447a-82a5-b88977b5fedf.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzkwMC1hNjU3ZTU2Ni1iMWE0LTQ0N2EtODJhNS1iODg5NzdiNWZlZGYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTMyZWM5Mzk1OTVhZjdjMGU1MjkyZDcxZmM2NzJiODdiMDZlNDA3ZTAzMTVjNDM3YjIzNjVhZjliNmQwOGFkYiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.hDKh0GO84EX3xoBLWRzRI0GmmpLvCg5yipCuHvFh5J8\"><img width=\"293\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282893900-a657e566-b1a4-447a-82a5-b88977b5fedf.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5MzkwMC1hNjU3ZTU2Ni1iMWE0LTQ0N2EtODJhNS1iODg5NzdiNWZlZGYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTMyZWM5Mzk1OTVhZjdjMGU1MjkyZDcxZmM2NzJiODdiMDZlNDA3ZTAzMTVjNDM3YjIzNjVhZjliNmQwOGFkYiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.hDKh0GO84EX3xoBLWRzRI0GmmpLvCg5yipCuHvFh5J8\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Context-free grammars</h3><a id=\"user-content-context-free-grammars\" class=\"anchor-element\" aria-label=\"Permalink: Context-free grammars\" href=\"#context-free-grammars\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">We expose a variety of operators that make it easy to define CFGs, which in turn can be used to constrain generation.For example, we can use the <code>select</code> operator (it accepts CFGs as options), <code>zero_or_more</code> and <code>one_or_more</code> to define a grammar for mathematical expressions:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"import guidancefrom guidance import one_or_more, select, zero_or_more# stateless=True indicates this function does not depend on LLM generations@guidance(stateless=True)def number(lm):    n = one_or_more(select(['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']))    # Allow for negative or positive numbers    return lm + select(['-' + n, n])@guidance(stateless=True)def operator(lm):    return lm + select(['+' , '*', '**', '/', '-'])@guidance(stateless=True)def expression(lm):    # Either    # 1. A number (terminal)    # 2. two expressions with an operator and optional whitespace    # 3. An expression with parentheses around it    return lm + select([        number(),        expression() + zero_or_more(' ') +  operator() + zero_or_more(' ') +  expression(),        '(' + expression() + ')'    ])\"><pre><span class=\"pl-k\">import</span> <span class=\"pl-s1\">guidance</span><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">one_or_more</span>, <span class=\"pl-s1\">select</span>, <span class=\"pl-s1\">zero_or_more</span><span class=\"pl-c\"># stateless=True indicates this function does not depend on LLM generations</span><span class=\"pl-en\">@<span class=\"pl-en\">guidance</span>(<span class=\"pl-s1\">stateless</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>)</span><span class=\"pl-k\">def</span> <span class=\"pl-en\">number</span>(<span class=\"pl-s1\">lm</span>):    <span class=\"pl-s1\">n</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">one_or_more</span>(<span class=\"pl-en\">select</span>([<span class=\"pl-s\">'0'</span>, <span class=\"pl-s\">'1'</span>, <span class=\"pl-s\">'2'</span>, <span class=\"pl-s\">'3'</span>, <span class=\"pl-s\">'4'</span>, <span class=\"pl-s\">'5'</span>, <span class=\"pl-s\">'6'</span>, <span class=\"pl-s\">'7'</span>, <span class=\"pl-s\">'8'</span>, <span class=\"pl-s\">'9'</span>]))    <span class=\"pl-c\"># Allow for negative or positive numbers</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">select</span>([<span class=\"pl-s\">'-'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">n</span>, <span class=\"pl-s1\">n</span>])<span class=\"pl-en\">@<span class=\"pl-en\">guidance</span>(<span class=\"pl-s1\">stateless</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>)</span><span class=\"pl-k\">def</span> <span class=\"pl-en\">operator</span>(<span class=\"pl-s1\">lm</span>):    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">select</span>([<span class=\"pl-s\">'+'</span> , <span class=\"pl-s\">'*'</span>, <span class=\"pl-s\">'**'</span>, <span class=\"pl-s\">'/'</span>, <span class=\"pl-s\">'-'</span>])<span class=\"pl-en\">@<span class=\"pl-en\">guidance</span>(<span class=\"pl-s1\">stateless</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>)</span><span class=\"pl-k\">def</span> <span class=\"pl-en\">expression</span>(<span class=\"pl-s1\">lm</span>):    <span class=\"pl-c\"># Either</span>    <span class=\"pl-c\"># 1. A number (terminal)</span>    <span class=\"pl-c\"># 2. two expressions with an operator and optional whitespace</span>    <span class=\"pl-c\"># 3. An expression with parentheses around it</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">select</span>([        <span class=\"pl-en\">number</span>(),        <span class=\"pl-en\">expression</span>() <span class=\"pl-c1\">+</span> <span class=\"pl-en\">zero_or_more</span>(<span class=\"pl-s\">' '</span>) <span class=\"pl-c1\">+</span>  <span class=\"pl-en\">operator</span>() <span class=\"pl-c1\">+</span> <span class=\"pl-en\">zero_or_more</span>(<span class=\"pl-s\">' '</span>) <span class=\"pl-c1\">+</span>  <span class=\"pl-en\">expression</span>(),        <span class=\"pl-s\">'('</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">expression</span>() <span class=\"pl-c1\">+</span> <span class=\"pl-s\">')'</span>    ])</pre></div><p dir=\"auto\">The <code>@guidance(stateless=True)</code> decorator makes it such that a function (e.g. <code>expression</code>) lives as a stateless grammar that does not get 'executed' until we call call <code>lm + expression()</code> or <code>lm += expression()</code>. For example, here is an example of <em>unconstrained</em> generation:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"# Without constraintslm = llama2 + 'Problem: Luke has a hundred and six balls. He then loses thirty six.\\n'lm += 'Equivalent arithmetic expression: ' + gen(stop='\\n') + '\\n'\"><pre><span class=\"pl-c\"># Without constraints</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'Problem: Luke has a hundred and six balls. He then loses thirty six.<span class=\"pl-cce\">\\n</span>'</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Equivalent arithmetic expression: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282895618-54af1909-cad4-4fb1-8987-dfdfc02f8f42.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NTYxOC01NGFmMTkwOS1jYWQ0LTRmYjEtODk4Ny1kZmRmYzAyZjhmNDIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTA4MzdjMjQ1ZjJiMWUyZTY1M2U1YzMxYTFhNWUxNDA1YWNjZjhhNDRkYjhlYzc0NmFhMWUzMTBhMmE4ZWJmNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.5Ns5nRTEYUJlqL5h-GTCAdlkifW9YdVbbzocTDTodAQ\"><img width=\"462\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282895618-54af1909-cad4-4fb1-8987-dfdfc02f8f42.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NTYxOC01NGFmMTkwOS1jYWQ0LTRmYjEtODk4Ny1kZmRmYzAyZjhmNDIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZTA4MzdjMjQ1ZjJiMWUyZTY1M2U1YzMxYTFhNWUxNDA1YWNjZjhhNDRkYjhlYzc0NmFhMWUzMTBhMmE4ZWJmNiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.5Ns5nRTEYUJlqL5h-GTCAdlkifW9YdVbbzocTDTodAQ\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Notice how the model wrote the right equation but solved it (incorrectly). If we wanted to constrain the model such that it only writes valid expressions (without trying to solve them), we can just append our grammar to it:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"grammar = expression()lm = llama2 + 'Problem: Luke has a hundred and six balls. He then loses thirty six.\\n'lm += 'Equivalent arithmetic expression: ' + grammar + '\\n'\"><pre><span class=\"pl-s1\">grammar</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">expression</span>()<span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'Problem: Luke has a hundred and six balls. He then loses thirty six.<span class=\"pl-cce\">\\n</span>'</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Equivalent arithmetic expression: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">grammar</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282895816-dbda0ff8-8edd-4384-b63d-fc98792e0689.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NTgxNi1kYmRhMGZmOC04ZWRkLTQzODQtYjYzZC1mYzk4NzkyZTA2ODkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDMzOGQ1ZmRhZmQxMmUwNDEzMGE1NTU5N2Y2YjUyOTdjYTA5OGIwODE2YzhmNWY1YzM2ZjA3NzMxZjU3MjdjMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.jc4p85L92yXGWZKoNPVNeDX41S4GpPB7WGKwzKQXymg\"><img width=\"460\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282895816-dbda0ff8-8edd-4384-b63d-fc98792e0689.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NTgxNi1kYmRhMGZmOC04ZWRkLTQzODQtYjYzZC1mYzk4NzkyZTA2ODkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDMzOGQ1ZmRhZmQxMmUwNDEzMGE1NTU5N2Y2YjUyOTdjYTA5OGIwODE2YzhmNWY1YzM2ZjA3NzMxZjU3MjdjMyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.jc4p85L92yXGWZKoNPVNeDX41S4GpPB7WGKwzKQXymg\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Grammars are very easy to compose. For example, let's say we want a grammar that generates either a mathematical expression or an expression followed by a solution followed by another expression. Creating this grammar is easy:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import regexgrammar = select([expression(), expression() +  regex(' = \\d+; ') + expression()])\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">regex</span><span class=\"pl-s1\">grammar</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">select</span>([<span class=\"pl-en\">expression</span>(), <span class=\"pl-en\">expression</span>() <span class=\"pl-c1\">+</span>  <span class=\"pl-en\">regex</span>(<span class=\"pl-s\">' = \\d+; '</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-en\">expression</span>()])</pre></div><p dir=\"auto\">We can generate according to it:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"llama2 + 'Here is a math expression for two plus two: ' + grammar\"><pre><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'Here is a math expression for two plus two: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">grammar</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282898124-283e6973-0b8d-4153-a82b-9f5db1460da9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5ODEyNC0yODNlNjk3My0wYjhkLTQxNTMtYTgyYi05ZjVkYjE0NjBkYTkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NjliOThjOGIyMTUzZGY2NTk0MTRmNzVhY2U1YzZiMjE1MzdjMzMyNTNiZjkxOWQwYzdjYmM5MTcwY2ZiYmQyMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.RWugZGTSwdr_d7Ih055YVtRQGiv4wr64k7A9uKqURKY\"><img width=\"346\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282898124-283e6973-0b8d-4153-a82b-9f5db1460da9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5ODEyNC0yODNlNjk3My0wYjhkLTQxNTMtYTgyYi05ZjVkYjE0NjBkYTkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NjliOThjOGIyMTUzZGY2NTk0MTRmNzVhY2U1YzZiMjE1MzdjMzMyNTNiZjkxOWQwYzdjYmM5MTcwY2ZiYmQyMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.RWugZGTSwdr_d7Ih055YVtRQGiv4wr64k7A9uKqURKY\" style=\"max-width: 100%;\"></a><br></p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"llama2 + '2 + 2 = 4; 3+3\\n' + grammar\"><pre><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'2 + 2 = 4; 3+3<span class=\"pl-cce\">\\n</span>'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">grammar</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282897027-d584a93c-bf24-43d5-8f8d-501e7eb88422.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzAyNy1kNTg0YTkzYy1iZjI0LTQzZDUtOGY4ZC01MDFlN2ViODg0MjIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTM2ZmI3ZTUyN2Q1ZDAwMGUxZDE0OWUyNGMxODMwNjdiYzczODY4NjYzMzVmOGVjZDdmZTczMDMxYjE3MGFlOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.qnu3DaW9ytkoiVD9pbx0lrj9dPqe7ntruWvlQFTA7aY\"><img width=\"109\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282897027-d584a93c-bf24-43d5-8f8d-501e7eb88422.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzAyNy1kNTg0YTkzYy1iZjI0LTQzZDUtOGY4ZC01MDFlN2ViODg0MjIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MTM2ZmI3ZTUyN2Q1ZDAwMGUxZDE0OWUyNGMxODMwNjdiYzczODY4NjYzMzVmOGVjZDdmZTczMDMxYjE3MGFlOSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.qnu3DaW9ytkoiVD9pbx0lrj9dPqe7ntruWvlQFTA7aY\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Even if you don't like thinking in terms of recursive grammars, this formalism makes it easy to constrain generation. For example, let's say we have the following one-shot prompt:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@guidance(stateless=True)def ner_instruction(lm, input):    lm += f'''\\    Please tag each word in the input with PER, ORG, LOC, or nothing    ---    Input: John worked at Apple.    Output:    John: PER    worked:     at:     Apple: ORG    .:     ---    Input: {input}    Output:    '''    return lminput = 'Julia never went to Morocco in her life!!'llama2 + ner_instruction(input) + gen(stop='---')\"><pre><span class=\"pl-en\">@<span class=\"pl-en\">guidance</span>(<span class=\"pl-s1\">stateless</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>)</span><span class=\"pl-k\">def</span> <span class=\"pl-en\">ner_instruction</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">input</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'''<span class=\"pl-cce\">\\</span></span><span class=\"pl-s\"><span class=\"pl-cce\"></span>    Please tag each word in the input with PER, ORG, LOC, or nothing</span><span class=\"pl-s\">    ---</span><span class=\"pl-s\">    Input: John worked at Apple.</span><span class=\"pl-s\">    Output:</span><span class=\"pl-s\">    John: PER</span><span class=\"pl-s\">    worked: </span><span class=\"pl-s\">    at: </span><span class=\"pl-s\">    Apple: ORG</span><span class=\"pl-s\">    .: </span><span class=\"pl-s\">    ---</span><span class=\"pl-s\">    Input: <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">input</span><span class=\"pl-kos\">}</span></span></span><span class=\"pl-s\">    Output:</span><span class=\"pl-s\">    '''</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-s1\">input</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'Julia never went to Morocco in her life!!'</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">ner_instruction</span>(<span class=\"pl-s1\">input</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'---'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282897184-8ecf5ad4-68b8-4e7a-b107-b1a5613e4c68.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzE4NC04ZWNmNWFkNC02OGI4LTRlN2EtYjEwNy1iMWE1NjEzZTRjNjgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NDQ3MTNlYmFhOGYyZWJkNWE3NGI4ZWYyODgwMWVlYWI2NjM0ODU1MjQ1NWI0YjVjNDI5MTYxNTUxZWUyNDRiMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.ZNmrmQEeDIz7RKfFa3GO_lxnrGFVFqBgOLtbzDrjE_0\"><img width=\"465\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282897184-8ecf5ad4-68b8-4e7a-b107-b1a5613e4c68.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzE4NC04ZWNmNWFkNC02OGI4LTRlN2EtYjEwNy1iMWE1NjEzZTRjNjgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NDQ3MTNlYmFhOGYyZWJkNWE3NGI4ZWYyODgwMWVlYWI2NjM0ODU1MjQ1NWI0YjVjNDI5MTYxNTUxZWUyNDRiMSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.ZNmrmQEeDIz7RKfFa3GO_lxnrGFVFqBgOLtbzDrjE_0\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Notice that the model did not spell the word 'Morocco' correctly. Sometimes the model might also hallucinate a tag that doesn't exist. We can improve this by adding more few-shot examples, etc, but we can also constrain generation to the exact format we want:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"import re@guidance(stateless=True)def constrained_ner(lm, input):    # Split into words    words = [x for x in re.split('([^a-zA-Z0-9])', input) if x and not re.match('\\s', x)]    ret = ''    for x in words:        ret += x + ': ' + select(['PER', 'ORG', 'LOC', '']) + '\\n'    return lm + retllama2 + ner_instruction(input) + constrained_ner(input)\"><pre><span class=\"pl-k\">import</span> <span class=\"pl-s1\">re</span><span class=\"pl-en\">@<span class=\"pl-en\">guidance</span>(<span class=\"pl-s1\">stateless</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>)</span><span class=\"pl-k\">def</span> <span class=\"pl-en\">constrained_ner</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">input</span>):    <span class=\"pl-c\"># Split into words</span>    <span class=\"pl-s1\">words</span> <span class=\"pl-c1\">=</span> [<span class=\"pl-s1\">x</span> <span class=\"pl-k\">for</span> <span class=\"pl-s1\">x</span> <span class=\"pl-c1\">in</span> <span class=\"pl-s1\">re</span>.<span class=\"pl-en\">split</span>(<span class=\"pl-s\">'([^a-zA-Z0-9])'</span>, <span class=\"pl-s1\">input</span>) <span class=\"pl-k\">if</span> <span class=\"pl-s1\">x</span> <span class=\"pl-c1\">and</span> <span class=\"pl-c1\">not</span> <span class=\"pl-s1\">re</span>.<span class=\"pl-en\">match</span>(<span class=\"pl-s\">'\\s'</span>, <span class=\"pl-s1\">x</span>)]    <span class=\"pl-s1\">ret</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">''</span>    <span class=\"pl-k\">for</span> <span class=\"pl-s1\">x</span> <span class=\"pl-c1\">in</span> <span class=\"pl-s1\">words</span>:        <span class=\"pl-s1\">ret</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s1\">x</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">': '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">select</span>([<span class=\"pl-s\">'PER'</span>, <span class=\"pl-s\">'ORG'</span>, <span class=\"pl-s\">'LOC'</span>, <span class=\"pl-s\">''</span>]) <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">ret</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">ner_instruction</span>(<span class=\"pl-s1\">input</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-en\">constrained_ner</span>(<span class=\"pl-s1\">input</span>)</pre></div><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282897429-72545093-ef16-479a-b666-bd97c54a5dc7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzQyOS03MjU0NTA5My1lZjE2LTQ3OWEtYjY2Ni1iZDk3YzU0YTVkYzcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2RkNDM4ODg3ZWQwYWI0ODlhYTkxMGRiZDMxNjFiMWNkZTg1YTBkMzQwMTNlZDY4MWUxOWFiOTFjOTU4Yjk4OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.qZSVPngJuSej8sTDu8GJZ6QLs0v7TaSMCTB_PZva9YM\"><img width=\"462\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282897429-72545093-ef16-479a-b666-bd97c54a5dc7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzQyOS03MjU0NTA5My1lZjE2LTQ3OWEtYjY2Ni1iZDk3YzU0YTVkYzcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9M2RkNDM4ODg3ZWQwYWI0ODlhYTkxMGRiZDMxNjFiMWNkZTg1YTBkMzQwMTNlZDY4MWUxOWFiOTFjOTU4Yjk4OSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.qZSVPngJuSej8sTDu8GJZ6QLs0v7TaSMCTB_PZva9YM\" style=\"max-width: 100%;\"></a><p dir=\"auto\">While <code>constrained_ner(input)</code> <strong>is</strong> a grammar that constrains the model generation, it <em>feels</em> like you're just writing normal imperative python code with <code>+=</code> and <code>selects</code>.</p><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Stateful control + generation</h2><a id=\"user-content-stateful-control--generation\" class=\"anchor-element\" aria-label=\"Permalink: Stateful control + generation\" href=\"#stateful-control--generation\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">State in immutable objects</h3><a id=\"user-content-state-in-immutable-objects\" class=\"anchor-element\" aria-label=\"Permalink: State in immutable objects\" href=\"#state-in-immutable-objects\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">Whenever you do <code>lm + grammar</code> or <code>lm + gen</code>, <code>lm + select</code>, etc, you return a new lm object with additional state. For example:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"lm = llama2 + 'This is a prompt' + gen(name='test', max_tokens=10)lm += select(['this', 'that'], name='test2')lm['test'], lm['test2']\"><pre><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'This is a prompt'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'test'</span>, <span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">10</span>)<span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">select</span>([<span class=\"pl-s\">'this'</span>, <span class=\"pl-s\">'that'</span>], <span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'test2'</span>)<span class=\"pl-s1\">lm</span>[<span class=\"pl-s\">'test'</span>], <span class=\"pl-s1\">lm</span>[<span class=\"pl-s\">'test2'</span>]</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282897719-f0f9d180-6209-40df-9401-40da35d46e1a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzcxOS1mMGY5ZDE4MC02MjA5LTQwZGYtOTQwMS00MGRhMzVkNDZlMWEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MWNjNjE1YjY0ZTlhYjBiN2IwYTQwZmJiMjI4NzExZTllM2VjYzlmOTQ5NTk1NWUwNTgzOGJlZjI3Nzg2MjM0NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.UhOCBbMoPf7MpJ17cGuKjwVsXTS58h6VmB9OeLb6t6U\"><img width=\"296\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282897719-f0f9d180-6209-40df-9401-40da35d46e1a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5NzcxOS1mMGY5ZDE4MC02MjA5LTQwZGYtOTQwMS00MGRhMzVkNDZlMWEucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MWNjNjE1YjY0ZTlhYjBiN2IwYTQwZmJiMjI4NzExZTllM2VjYzlmOTQ5NTk1NWUwNTgzOGJlZjI3Nzg2MjM0NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.UhOCBbMoPf7MpJ17cGuKjwVsXTS58h6VmB9OeLb6t6U\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Stateful <code>guidance</code> functions</h3><a id=\"user-content-stateful-guidance-functions\" class=\"anchor-element\" aria-label=\"Permalink: Stateful guidance functions\" href=\"#stateful-guidance-functions\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">The guidance decorator is <code>@guidance(stateless=False)</code> by default, meaning that a function with this decorator depends on the lm state to execute (either prior state or state generated within the function). For example:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@guidance(stateless=False)def test(lm):    lm += 'Should I say &quot;Scott&quot;?\\n' + select(['yes', 'no'], name='answer') + '\\n'    if lm['answer'] == 'yes':        lm += 'Scott'    else:        lm += 'Not Scott'    return lmllama2 + test()\"><pre><span class=\"pl-en\">@<span class=\"pl-en\">guidance</span>(<span class=\"pl-s1\">stateless</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)</span><span class=\"pl-k\">def</span> <span class=\"pl-en\">test</span>(<span class=\"pl-s1\">lm</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Should I say \"Scott\"?<span class=\"pl-cce\">\\n</span>'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">select</span>([<span class=\"pl-s\">'yes'</span>, <span class=\"pl-s\">'no'</span>], <span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'answer'</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-k\">if</span> <span class=\"pl-s1\">lm</span>[<span class=\"pl-s\">'answer'</span>] <span class=\"pl-c1\">==</span> <span class=\"pl-s\">'yes'</span>:        <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Scott'</span>    <span class=\"pl-k\">else</span>:        <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Not Scott'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">test</span>()</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282898842-5a55496b-aea0-46e9-8de6-b63655027653.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5ODg0Mi01YTU1NDk2Yi1hZWEwLTQ2ZTktOGRlNi1iNjM2NTUwMjc2NTMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzY2ZjIwY2M4NjM0ZjAwMjA5YTViMTAzOWFiZmNkZmEzNDgwMDI5NzgxMjUwMGM1MWI5MTBiMzk3Yjk0MWM0ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.5wl-gbfmiflKedgZwH-HgXFJVlynEkOIprtT0_PmJd8\"><img width=\"159\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282898842-5a55496b-aea0-46e9-8de6-b63655027653.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4Mjg5ODg0Mi01YTU1NDk2Yi1hZWEwLTQ2ZTktOGRlNi1iNjM2NTUwMjc2NTMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MzY2ZjIwY2M4NjM0ZjAwMjA5YTViMTAzOWFiZmNkZmEzNDgwMDI5NzgxMjUwMGM1MWI5MTBiMzk3Yjk0MWM0ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.5wl-gbfmiflKedgZwH-HgXFJVlynEkOIprtT0_PmJd8\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Example: ReAct</h3><a id=\"user-content-example-react\" class=\"anchor-element\" aria-label=\"Permalink: Example: ReAct\" href=\"#example-react\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">A big advantage of stateful control is that you don't have to write any intermediate parsers, and adding follow-up 'prompting' is easy, even if the follow up depends on what the model generates.For example, let's say we want to implement the first example of ReAct prompt in <a href=\"https://www.promptingguide.ai/techniques/react\" rel=\"nofollow\">this</a>, and let's say the valid acts are only 'Search' or 'Finish'. We might write it like this:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@guidancedef react_prompt_example(lm, question, max_rounds=10):    lm += f'Question: {question}\\n'    i = 1    while True:        lm += f'Thought {i}: ' + gen(suffix='\\n')        lm += f'Act {i}: ' + select(['Search', 'Finish'], name='act')         lm += '[' + gen(name='arg', suffix=']') + '\\n'        if lm['act'] == 'Finish' or i == max_rounds:            break        else:            lm += f'Observation {i}: ' + search(lm['arg']) + '\\n'        i += 1    return lm\"><pre><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">react_prompt_example</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">question</span>, <span class=\"pl-s1\">max_rounds</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">10</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'Question: <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">question</span><span class=\"pl-kos\">}</span></span><span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">=</span> <span class=\"pl-c1\">1</span>    <span class=\"pl-k\">while</span> <span class=\"pl-c1\">True</span>:        <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'Thought <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">}</span></span>: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">suffix</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>)        <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'Act <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">}</span></span>: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">select</span>([<span class=\"pl-s\">'Search'</span>, <span class=\"pl-s\">'Finish'</span>], <span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'act'</span>)         <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'['</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'arg'</span>, <span class=\"pl-s1\">suffix</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">']'</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>        <span class=\"pl-k\">if</span> <span class=\"pl-s1\">lm</span>[<span class=\"pl-s\">'act'</span>] <span class=\"pl-c1\">==</span> <span class=\"pl-s\">'Finish'</span> <span class=\"pl-c1\">or</span> <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">==</span> <span class=\"pl-s1\">max_rounds</span>:            <span class=\"pl-k\">break</span>        <span class=\"pl-k\">else</span>:            <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'Observation <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">}</span></span>: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">search</span>(<span class=\"pl-s1\">lm</span>[<span class=\"pl-s\">'arg'</span>]) <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>        <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-c1\">1</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span></pre></div><p dir=\"auto\">Notice how we don't have to write a parser for Act and argument and hope that the model generates something valid: we enforce it. Notice also that the loop only stops once the model chooses to act with 'Finish' (or once we hit a maximum number of rounds).</p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Example: Changing intermediate step of a Chat session</h3><a id=\"user-content-example-changing-intermediate-step-of-a-chat-session\" class=\"anchor-element\" aria-label=\"Permalink: Example: Changing intermediate step of a Chat session\" href=\"#example-changing-intermediate-step-of-a-chat-session\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">We can also hide or change some of what the model generates. For example, below we get a Chat model (notice we use special <code>role</code> blocks) to name some experts to answer a question, but we always remove 'Ferriss' from the list if he is mentioned:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import user, system, assistantlm = llama2query = 'How can I be more productive?'with system():    lm += 'You are a helpful and terse assistant.'with user():    lm += f'I want a response to the following question:\\n{query}\\n'    lm += 'Name 3 world-class experts (past or present) who would be great at answering this.'with assistant():    temp_lm = lm    for i in range(1, 4):        # This regex only allows strings that look like names (where every word is capitalized)        # list_append appends the result to a list        temp_lm += f'{i}. ' + gen(regex='([A-Z][a-z]*\\s*)+', suffix='\\n',                                  name='experts', list_append=True)    experts = [x for x in temp_lm['experts'] if 'Ferriss' not in x]    # Notice that even if the model generates 'Ferriss' above,    # it doesn't get added to `lm`, only to `temp_lm`    lm += ', '.join(experts)with user():    lm += 'Please answer the question as if these experts had collaborated in writing an anonymous answer.'with assistant():    lm += gen(max_tokens=100)\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">user</span>, <span class=\"pl-s1\">system</span>, <span class=\"pl-s1\">assistant</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span><span class=\"pl-s1\">query</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'How can I be more productive?'</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">system</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'You are a helpful and terse assistant.'</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">user</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'I want a response to the following question:<span class=\"pl-cce\">\\n</span><span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">query</span><span class=\"pl-kos\">}</span></span><span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Name 3 world-class experts (past or present) who would be great at answering this.'</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">assistant</span>():    <span class=\"pl-s1\">temp_lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">lm</span>    <span class=\"pl-k\">for</span> <span class=\"pl-s1\">i</span> <span class=\"pl-c1\">in</span> <span class=\"pl-en\">range</span>(<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">4</span>):        <span class=\"pl-c\"># This regex only allows strings that look like names (where every word is capitalized)</span>        <span class=\"pl-c\"># list_append appends the result to a list</span>        <span class=\"pl-s1\">temp_lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">i</span><span class=\"pl-kos\">}</span></span>. '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">regex</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'([A-Z][a-z]*\\s*)+'</span>, <span class=\"pl-s1\">suffix</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>,                                  <span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'experts'</span>, <span class=\"pl-s1\">list_append</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>)    <span class=\"pl-s1\">experts</span> <span class=\"pl-c1\">=</span> [<span class=\"pl-s1\">x</span> <span class=\"pl-k\">for</span> <span class=\"pl-s1\">x</span> <span class=\"pl-c1\">in</span> <span class=\"pl-s1\">temp_lm</span>[<span class=\"pl-s\">'experts'</span>] <span class=\"pl-k\">if</span> <span class=\"pl-s\">'Ferriss'</span> <span class=\"pl-c1\">not</span> <span class=\"pl-c1\">in</span> <span class=\"pl-s1\">x</span>]    <span class=\"pl-c\"># Notice that even if the model generates 'Ferriss' above,</span>    <span class=\"pl-c\"># it doesn't get added to `lm`, only to `temp_lm`</span>    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">', '</span>.<span class=\"pl-en\">join</span>(<span class=\"pl-s1\">experts</span>)<span class=\"pl-k\">with</span> <span class=\"pl-en\">user</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Please answer the question as if these experts had collaborated in writing an anonymous answer.'</span><span class=\"pl-k\">with</span> <span class=\"pl-en\">assistant</span>():    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">100</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282909252-d274f8b8-52e7-41a5-9635-b34f70ed50e0.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwOTI1Mi1kMjc0ZjhiOC01MmU3LTQxYTUtOTYzNS1iMzRmNzBlZDUwZTAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDUwNDExYTMzN2NhYjMyOGQwNTljMmVlZDNmMWU0NWE3OTkwZmI5NjY3NDBmZDZmYjQwMGVlOTdkM2Q5MTk4ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GdnyAk2v8WgJ-YN8llX3oC38pR3RbmV3N5f1q7q9JG0\"><img width=\"688\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282909252-d274f8b8-52e7-41a5-9635-b34f70ed50e0.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwOTI1Mi1kMjc0ZjhiOC01MmU3LTQxYTUtOTYzNS1iMzRmNzBlZDUwZTAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDUwNDExYTMzN2NhYjMyOGQwNTljMmVlZDNmMWU0NWE3OTkwZmI5NjY3NDBmZDZmYjQwMGVlOTdkM2Q5MTk4ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GdnyAk2v8WgJ-YN8llX3oC38pR3RbmV3N5f1q7q9JG0\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Automatic interleaving of control and generation: tool use</h3><a id=\"user-content-automatic-interleaving-of-control-and-generation-tool-use\" class=\"anchor-element\" aria-label=\"Permalink: Automatic interleaving of control and generation: tool use\" href=\"#automatic-interleaving-of-control-and-generation-tool-use\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">Tool use is a common case of stateful control. To make it easy to do so, <code>gen</code> calls take <code>tools</code> as an optional argument, where each tool is defined by (1) a grammar that triggers its call and captures the arguments (if any), and (2) the actual tool call. Then, as generation unrolls, whenever the model generates something that matches the grammar of a tool call, it (1) stops generation, (2) calls the tool (which can append whatever it wants to the LM session), and (3) continues generation.</p><p dir=\"auto\">For example, here is how we might implement a calculator tool, leveraging our <code>expression</code> grammar above:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import capture, Tool@guidance(stateless=True)def calculator_call(lm):    # capture just 'names' the expression, to be saved in the LM state    return lm + 'calculator(' + capture(expression(), 'tool_args') + ')'@guidancedef calculator(lm):    expression = lm['tool_args']    # You typically don't want to run eval directly for save reasons    # Here we are guaranteed to only have mathematical expressions    lm += f' = {eval(expression)}'    return lmcalculator_tool = Tool(calculator_call(), calculator)lm = llama2 + 'Here are five expressions:\\ncalculator(3 *3) = 33\\ncalculator(2 + 1 * 3) = 5\\n'lm += gen(max_tokens=30, tools=[calculator_tool], stop='\\n\\n')\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">capture</span>, <span class=\"pl-v\">Tool</span><span class=\"pl-en\">@<span class=\"pl-en\">guidance</span>(<span class=\"pl-s1\">stateless</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>)</span><span class=\"pl-k\">def</span> <span class=\"pl-en\">calculator_call</span>(<span class=\"pl-s1\">lm</span>):    <span class=\"pl-c\"># capture just 'names' the expression, to be saved in the LM state</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'calculator('</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">capture</span>(<span class=\"pl-en\">expression</span>(), <span class=\"pl-s\">'tool_args'</span>) <span class=\"pl-c1\">+</span> <span class=\"pl-s\">')'</span><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">calculator</span>(<span class=\"pl-s1\">lm</span>):    <span class=\"pl-s1\">expression</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">lm</span>[<span class=\"pl-s\">'tool_args'</span>]    <span class=\"pl-c\"># You typically don't want to run eval directly for save reasons</span>    <span class=\"pl-c\"># Here we are guaranteed to only have mathematical expressions</span>    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f' = <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">eval</span>(<span class=\"pl-s1\">expression</span>)<span class=\"pl-kos\">}</span></span>'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-s1\">calculator_tool</span> <span class=\"pl-c1\">=</span> <span class=\"pl-v\">Tool</span>(<span class=\"pl-en\">calculator_call</span>(), <span class=\"pl-s1\">calculator</span>)<span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'Here are five expressions:<span class=\"pl-cce\">\\n</span>calculator(3 *3) = 33<span class=\"pl-cce\">\\n</span>calculator(2 + 1 * 3) = 5<span class=\"pl-cce\">\\n</span>'</span><span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">30</span>, <span class=\"pl-s1\">tools</span><span class=\"pl-c1\">=</span>[<span class=\"pl-s1\">calculator_tool</span>], <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span><span class=\"pl-cce\">\\n</span>'</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282902885-2d9b840a-4fad-4dab-b3e7-20887539b447.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMjg4NS0yZDliODQwYS00ZmFkLTRkYWItYjNlNy0yMDg4NzUzOWI0NDcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NTg4NDRkZTRjNTc1Y2VjMWUwZmNhNGZhZWE0MzQ2NTFiY2Q1NTkyOWU2MTdkMWM3NDNhZTMyZjI2ZTJjNGM1ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.8Canqccj0-B5H2N-4ACuancSIryiEa1JXzdrYlYQMZE\"><img width=\"201\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282902885-2d9b840a-4fad-4dab-b3e7-20887539b447.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMjg4NS0yZDliODQwYS00ZmFkLTRkYWItYjNlNy0yMDg4NzUzOWI0NDcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NTg4NDRkZTRjNTc1Y2VjMWUwZmNhNGZhZWE0MzQ2NTFiY2Q1NTkyOWU2MTdkMWM3NDNhZTMyZjI2ZTJjNGM1ZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.8Canqccj0-B5H2N-4ACuancSIryiEa1JXzdrYlYQMZE\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Gsm8k example</h3><a id=\"user-content-gsm8k-example\" class=\"anchor-element\" aria-label=\"Permalink: Gsm8k example\" href=\"#gsm8k-example\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">Notice that the calculator is just called seamlessly during generation. Here is a more realistic exampe of the model solving a gsm8k question:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@guidancedef math_with_calc(lm, question):    # Two-shot example    lm += '''\\    Question: John starts with 2 balls. He then quintupled his number of balls. Then he lost half of them. He then gave 3 to his brother. How many does he have left?    Reasoning:    1. He quintupled his balls. So he has calculator(2 * 5) = 10 balls.    1. He lost half. So he has calculator(10 / 2) = 5 balls.    3. He gave 3 to his brother. So he has calculator(5 - 3) = 2 balls.    Answer: 2    Question: Jill get 7 dollars a day in allowance. She uses 1 each day to by a bus pass, then gives half away. How much does she have left each day?    Reasoning:    1. She gets 7 dollars a day.    1. She spends 1 on a bus pass. So she has calculator(5 - 1) = 6.    3. She gives half away. So that makes calculator(6 / 2) = 3.    Answer: 3    '''    lm += f'Question: {question}\\n'    lm += 'Reasoning:\\n' + gen(max_tokens=200, tools=[calculator_tool], stop='Answer')    # Only numbers or commas    lm += 'Answer: ' + gen(regex='[-\\d,]+')    return lmquestion = '''Janet\u2019s ducks lay 16 eggs per day. She eats three for breakfast every morning and bakes muffins for her friends every day with four. She sells the remainder at the farmers' market daily for $2 per fresh duck egg. How much in dollars does she make every day at the farmers' market?'''llama2 + math_with_calc(question)\"><pre><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">math_with_calc</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">question</span>):    <span class=\"pl-c\"># Two-shot example</span>    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'''<span class=\"pl-cce\">\\</span></span><span class=\"pl-s\"><span class=\"pl-cce\"></span>    Question: John starts with 2 balls. He then quintupled his number of balls. Then he lost half of them. He then gave 3 to his brother. How many does he have left?</span><span class=\"pl-s\">    Reasoning:</span><span class=\"pl-s\">    1. He quintupled his balls. So he has calculator(2 * 5) = 10 balls.</span><span class=\"pl-s\">    1. He lost half. So he has calculator(10 / 2) = 5 balls.</span><span class=\"pl-s\">    3. He gave 3 to his brother. So he has calculator(5 - 3) = 2 balls.</span><span class=\"pl-s\">    Answer: 2</span><span class=\"pl-s\"></span><span class=\"pl-s\">    Question: Jill get 7 dollars a day in allowance. She uses 1 each day to by a bus pass, then gives half away. How much does she have left each day?</span><span class=\"pl-s\">    Reasoning:</span><span class=\"pl-s\">    1. She gets 7 dollars a day.</span><span class=\"pl-s\">    1. She spends 1 on a bus pass. So she has calculator(5 - 1) = 6.</span><span class=\"pl-s\">    3. She gives half away. So that makes calculator(6 / 2) = 3.</span><span class=\"pl-s\">    Answer: 3</span><span class=\"pl-s\"></span><span class=\"pl-s\">    '''</span>    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f'Question: <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">question</span><span class=\"pl-kos\">}</span></span><span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Reasoning:<span class=\"pl-cce\">\\n</span>'</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">200</span>, <span class=\"pl-s1\">tools</span><span class=\"pl-c1\">=</span>[<span class=\"pl-s1\">calculator_tool</span>], <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'Answer'</span>)    <span class=\"pl-c\"># Only numbers or commas</span>    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Answer: '</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">regex</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'[-\\d,]+'</span>)    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-s1\">question</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'''Janet\u2019s ducks lay 16 eggs per day. She eats three for breakfast every morning and bakes muffins for her friends every day with four. She sells the remainder at the farmers' market daily for $2 per fresh duck egg. How much in dollars does she make every day at the farmers' market?'''</span><span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">math_with_calc</span>(<span class=\"pl-s1\">question</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282917778-0c7b8da0-b295-46cd-a312-604ecfba7b33.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzc3OC0wYzdiOGRhMC1iMjk1LTQ2Y2QtYTMxMi02MDRlY2ZiYTdiMzMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGRlYmI1ZjcyMmQ1ZjA2OWQyOTgwNTNiNjEwZTYwNmQ2YjEwY2RlYTRlYjM2MjU4ODcxYTc5N2IyZDZlMWFlZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.fNWeAb-YbqrlAItigAWFcZ5m6_JA9w5SM2Gb89RDKn4\"><img width=\"685\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282917778-0c7b8da0-b295-46cd-a312-604ecfba7b33.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzc3OC0wYzdiOGRhMC1iMjk1LTQ2Y2QtYTMxMi02MDRlY2ZiYTdiMzMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGRlYmI1ZjcyMmQ1ZjA2OWQyOTgwNTNiNjEwZTYwNmQ2YjEwY2RlYTRlYjM2MjU4ODcxYTc5N2IyZDZlMWFlZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.fNWeAb-YbqrlAItigAWFcZ5m6_JA9w5SM2Gb89RDKn4\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Automatic call grammar for @guidance functions</h3><a id=\"user-content-automatic-call-grammar-for-guidance-functions\" class=\"anchor-element\" aria-label=\"Permalink: Automatic call grammar for @guidance functions\" href=\"#automatic-call-grammar-for-guidance-functions\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">You can also initialize a <code>Tool</code> with any <code>@guidance</code>-decorated function, and the default call grammar will be like a python call. Here is an example of using multiple such tools in the same <code>gen</code> call:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@guidancedef say_scott(lm, n):    lm += '\\n'    for _ in range(int(n)):        lm += 'Scott\\n'    return lm@guidancedef say_marco(lm, n):    lm += '\\n'    for _ in range(int(n)):        lm += 'marco\\n'    return lmtools = [Tool(callable=say_scott), Tool(callable=say_marco)]llama2 + '''\\I am going to call say_scott and say_marco a few times:say_scott(1)Scott''' + gen(max_tokens=20, tools=tools)\"><pre><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">say_scott</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">n</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-k\">for</span> <span class=\"pl-s1\">_</span> <span class=\"pl-c1\">in</span> <span class=\"pl-en\">range</span>(<span class=\"pl-en\">int</span>(<span class=\"pl-s1\">n</span>)):        <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'Scott<span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">say_marco</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">n</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'<span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-k\">for</span> <span class=\"pl-s1\">_</span> <span class=\"pl-c1\">in</span> <span class=\"pl-en\">range</span>(<span class=\"pl-en\">int</span>(<span class=\"pl-s1\">n</span>)):        <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">'marco<span class=\"pl-cce\">\\n</span>'</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-s1\">tools</span> <span class=\"pl-c1\">=</span> [<span class=\"pl-v\">Tool</span>(<span class=\"pl-s1\">callable</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">say_scott</span>), <span class=\"pl-v\">Tool</span>(<span class=\"pl-s1\">callable</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">say_marco</span>)]<span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s\">'''<span class=\"pl-cce\">\\</span></span><span class=\"pl-s\"><span class=\"pl-cce\"></span>I am going to call say_scott and say_marco a few times:</span><span class=\"pl-s\">say_scott(1)</span><span class=\"pl-s\">Scott</span><span class=\"pl-s\">'''</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">20</span>, <span class=\"pl-s1\">tools</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">tools</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282912917-8025699b-59a1-4a3f-8b1e-a895a54924e2.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxMjkxNy04MDI1Njk5Yi01OWExLTRhM2YtOGIxZS1hODk1YTU0OTI0ZTIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9N2YyNzYzMTg2MDM2Y2UyMmJiNjYzNGZmZmNiNGUxZDI3YjM1OGM5MWMxNWUzNzQ4YjE5MzBlMzAwNTRhZDI0YSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.u6GoCLOOdHHqnnRWg6WzK27xQRKzsK_iBdRQ2kfsYCw\"><img width=\"395\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282912917-8025699b-59a1-4a3f-8b1e-a895a54924e2.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxMjkxNy04MDI1Njk5Yi01OWExLTRhM2YtOGIxZS1hODk1YTU0OTI0ZTIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9N2YyNzYzMTg2MDM2Y2UyMmJiNjYzNGZmZmNiNGUxZDI3YjM1OGM5MWMxNWUzNzQ4YjE5MzBlMzAwNTRhZDI0YSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.u6GoCLOOdHHqnnRWg6WzK27xQRKzsK_iBdRQ2kfsYCw\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Text, not tokens</h2><a id=\"user-content-text-not-tokens\" class=\"anchor-element\" aria-label=\"Permalink: Text, not tokens\" href=\"#text-not-tokens\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">The standard greedy tokenizations used by most language models introduce a variety of subtle and powerful biases, which that can have all kinds of unintended consequences for your prompts.For example, take the following prompt, given to gpt-2 (standard greedy tokenization):</p><p dir=\"auto\">hf_gen(prompt, max_tokens=10)</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from transformers import pipelinepipe = pipeline(&quot;text-generation&quot;, model=&quot;gpt2&quot;)def hf_gen(prompt, max_tokens=100):    return pipe(prompt, do_sample=False, max_length=max_tokens, return_full_text=False)[0]['generated_text']prompt = 'http:'hf_gen(prompt, max_tokens=10)\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">transformers</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">pipeline</span><span class=\"pl-s1\">pipe</span> <span class=\"pl-c1\">=</span> <span class=\"pl-en\">pipeline</span>(<span class=\"pl-s\">\"text-generation\"</span>, <span class=\"pl-s1\">model</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">\"gpt2\"</span>)<span class=\"pl-k\">def</span> <span class=\"pl-en\">hf_gen</span>(<span class=\"pl-s1\">prompt</span>, <span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">100</span>):    <span class=\"pl-k\">return</span> <span class=\"pl-en\">pipe</span>(<span class=\"pl-s1\">prompt</span>, <span class=\"pl-s1\">do_sample</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>, <span class=\"pl-s1\">max_length</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">max_tokens</span>, <span class=\"pl-s1\">return_full_text</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">False</span>)[<span class=\"pl-c1\">0</span>][<span class=\"pl-s\">'generated_text'</span>]<span class=\"pl-s1\">prompt</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'http:'</span><span class=\"pl-en\">hf_gen</span>(<span class=\"pl-s1\">prompt</span>, <span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">10</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282916469-a0fe3e81-89e0-4b4a-8981-edf8b1a8a723.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjQ2OS1hMGZlM2U4MS04OWUwLTRiNGEtODk4MS1lZGY4YjFhOGE3MjMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDUwYTMzZDY5ZDdlN2UxMmQ1YmYzOWE2MGM4MTk4YTU3NmQxMTA0YzI1N2Q2M2Q4ZjI1ZTRhMDczOGY2MGMzMCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.k-IiVO137e-Jt8KNWeHJbBC1R2ifR75-bBBYGTwRgy0\"><img width=\"198\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282916469-a0fe3e81-89e0-4b4a-8981-edf8b1a8a723.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjQ2OS1hMGZlM2U4MS04OWUwLTRiNGEtODk4MS1lZGY4YjFhOGE3MjMucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDUwYTMzZDY5ZDdlN2UxMmQ1YmYzOWE2MGM4MTk4YTU3NmQxMTA0YzI1N2Q2M2Q4ZjI1ZTRhMDczOGY2MGMzMCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.k-IiVO137e-Jt8KNWeHJbBC1R2ifR75-bBBYGTwRgy0\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Notice how the output generated by the LLM does not complete the URL with the obvious next characters (two forward slashes). It instead creates an invalid URL string with a space in the middle. Why? Because the string <code>://</code> is its own token, and so once the model sees a colon by itself, it assumes that the next characters cannot be <code>//</code>; otherwise, the tokenizer would not have used <code>:</code>, and instead would have used <code>://</code>. This is why there are warnings about ending prompts in whitespace, but the problem is way more pervasive than that: any boundary that may span multiple tokens will cause problems, e.g. notice how a partial word causes incorrect completion:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"prompt = 'John is a'hf_gen(prompt, max_tokens=5)\"><pre><span class=\"pl-s1\">prompt</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'John is a'</span><span class=\"pl-en\">hf_gen</span>(<span class=\"pl-s1\">prompt</span>, <span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">5</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282916633-44906e57-c4ca-4dc3-a1c3-2fdba040259b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjYzMy00NDkwNmU1Ny1jNGNhLTRkYzMtYTFjMy0yZmRiYTA0MDI1OWIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmNlMGRhMGRjYjYwODUxMTQwZDI2NzY5OTU1YzkzODg4ZDcxMDZjYjFlNjcyNWU0M2IyYTk2ZjQwMGUwNDJjZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.2LkYAG7hnHgNeqaEfEJW1IG2CuKQoym_kUvrDzO4UcA\"><img width=\"133\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282916633-44906e57-c4ca-4dc3-a1c3-2fdba040259b.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjYzMy00NDkwNmU1Ny1jNGNhLTRkYzMtYTFjMy0yZmRiYTA0MDI1OWIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZmNlMGRhMGRjYjYwODUxMTQwZDI2NzY5OTU1YzkzODg4ZDcxMDZjYjFlNjcyNWU0M2IyYTk2ZjQwMGUwNDJjZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.2LkYAG7hnHgNeqaEfEJW1IG2CuKQoym_kUvrDzO4UcA\" style=\"max-width: 100%;\"></a><br></p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"prompt = 'John is a fo'hf_gen(prompt, max_tokens=5)\"><pre><span class=\"pl-s1\">prompt</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'John is a fo'</span><span class=\"pl-en\">hf_gen</span>(<span class=\"pl-s1\">prompt</span>, <span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">5</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282916877-df649320-ec8e-468a-bb2f-e1994f16c9b6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjg3Ny1kZjY0OTMyMC1lYzhlLTQ2OGEtYmIyZi1lMTk5NGYxNmM5YjYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YmJlMmE1OWZjYjVjYTc0YjAyZmM0ZjEzOTU5Yjg4YzQ3NDE4MzZjMTNmYWVmODFmMTY5YmRkZWJiNjY5MGU4NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.eoX-00xhKXeGRRGbVA295RS1cbI90wBqUZFlHSnXBUY\"><img width=\"52\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282916877-df649320-ec8e-468a-bb2f-e1994f16c9b6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNjg3Ny1kZjY0OTMyMC1lYzhlLTQ2OGEtYmIyZi1lMTk5NGYxNmM5YjYucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YmJlMmE1OWZjYjVjYTc0YjAyZmM0ZjEzOTU5Yjg4YzQ3NDE4MzZjMTNmYWVmODFmMTY5YmRkZWJiNjY5MGU4NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.eoX-00xhKXeGRRGbVA295RS1cbI90wBqUZFlHSnXBUY\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">While problematic enough for normal prompts, these problems would be a disaster in the kinds of prompts we wrote in this readme, where there is interleaving of prompting and generation happening multiple times (and thus multiple opportunities for problems). This is why <code>guidance</code> implements <a href=\"https://towardsdatascience.com/the-art-of-prompt-design-prompt-boundaries-and-token-healing-3b2448b0be38\" rel=\"nofollow\">token healing</a>, a feature that deals with prompt boundaries automatically, allowing users to just think in terms of <strong>text</strong> rather than tokens. For example:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"from guidance import modelsgpt = models.Transformers('gpt2')prompt = 'http:'gpt + prompt + gen(max_tokens=10)\"><pre><span class=\"pl-k\">from</span> <span class=\"pl-s1\">guidance</span> <span class=\"pl-k\">import</span> <span class=\"pl-s1\">models</span><span class=\"pl-s1\">gpt</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">models</span>.<span class=\"pl-v\">Transformers</span>(<span class=\"pl-s\">'gpt2'</span>)<span class=\"pl-s1\">prompt</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'http:'</span><span class=\"pl-s1\">gpt</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">prompt</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">10</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282917034-c9f26a58-52f2-457c-958a-e048f68eb388.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzAzNC1jOWYyNmE1OC01MmYyLTQ1N2MtOTU4YS1lMDQ4ZjY4ZWIzODgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDcwODgzZjFjNTIyYWE4MjkyYTQ5ZWUyYmIxYTdmNjU1YTA1NDY5NDg0OTBhMDM2MTM1NWUzYTRjNjBlMzcwMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.JRZprXumOW5INUi0kouFPlwC5IIffXKAaFF7V90CZ0w\"><img width=\"244\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282917034-c9f26a58-52f2-457c-958a-e048f68eb388.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzAzNC1jOWYyNmE1OC01MmYyLTQ1N2MtOTU4YS1lMDQ4ZjY4ZWIzODgucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDcwODgzZjFjNTIyYWE4MjkyYTQ5ZWUyYmIxYTdmNjU1YTA1NDY5NDg0OTBhMDM2MTM1NWUzYTRjNjBlMzcwMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.JRZprXumOW5INUi0kouFPlwC5IIffXKAaFF7V90CZ0w\" style=\"max-width: 100%;\"></a><br></p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"prompt = 'John is a fo'gpt + prompt + gen(max_tokens=2)\"><pre><span class=\"pl-s1\">prompt</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s\">'John is a fo'</span><span class=\"pl-s1\">gpt</span> <span class=\"pl-c1\">+</span> <span class=\"pl-s1\">prompt</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">max_tokens</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">2</span>)</pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282917189-bc5e4cd4-9b82-4c09-9db2-9e890dad1d69.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzE4OS1iYzVlNGNkNC05YjgyLTRjMDktOWRiMi05ZTg5MGRhZDFkNjkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDE5YTQ1YzRjYmRhMThmODIwNmJmNzVhNDU2OWVhYmMyYTUxMzMzY2Q3MDIyZGZjNzI4NDM3NDU1NGQ0MWI3NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.cvN5viuDSbVW_edLUl4svSBbRL_u8zs0FTkCYFxFdqw\"><img width=\"186\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282917189-bc5e4cd4-9b82-4c09-9db2-9e890dad1d69.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNzE4OS1iYzVlNGNkNC05YjgyLTRjMDktOWRiMi05ZTg5MGRhZDFkNjkucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9ZDE5YTQ1YzRjYmRhMThmODIwNmJmNzVhNDU2OWVhYmMyYTUxMzMzY2Q3MDIyZGZjNzI4NDM3NDU1NGQ0MWI3NSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.cvN5viuDSbVW_edLUl4svSBbRL_u8zs0FTkCYFxFdqw\" style=\"max-width: 100%;\"></a><br></p><div class=\"markdown-heading\" dir=\"auto\"><h2 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Fast</h2><a id=\"user-content-fast\" class=\"anchor-element\" aria-label=\"Permalink: Fast\" href=\"#fast\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Integrated stateful control is faster</h3><a id=\"user-content-integrated-stateful-control-is-faster\" class=\"anchor-element\" aria-label=\"Permalink: Integrated stateful control is faster\" href=\"#integrated-stateful-control-is-faster\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">We have full control of the decoding loop in our integration with <code>transformers</code> and <code>llamacpp</code>, allowing us to add control and additional prompt without any extra cost.<br>If instead we're calling a server, we pay the extra cost of making additional requests, which might be ok if the server has caching, but quickly becomes impractical if the server does not have fine-grained caching. For example, note again the output from the <a href=\"#gsm8k-example\">gsm8k example with calculator</a> above:</p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282915402-2c75b0f2-6997-43d9-b10e-cb9f6f2e2de5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNTQwMi0yYzc1YjBmMi02OTk3LTQzZDktYjEwZS1jYjlmNmYyZTJkZTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MmM2ZDZiZjIwN2FiMTgxMGFmZGM3M2ZlNjQ5MjIzYjU4ODQ5YTcyNGQ4N2I2MTEzOWYyYzhhYzIzMjliZWU3MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GoYQzMOQlrlIlzZBo4aDRbVsj_eSpcfqdpFrM5ppYoQ\"><img width=\"624\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282915402-2c75b0f2-6997-43d9-b10e-cb9f6f2e2de5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkxNTQwMi0yYzc1YjBmMi02OTk3LTQzZDktYjEwZS1jYjlmNmYyZTJkZTUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MmM2ZDZiZjIwN2FiMTgxMGFmZGM3M2ZlNjQ5MjIzYjU4ODQ5YTcyNGQ4N2I2MTEzOWYyYzhhYzIzMjliZWU3MCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.GoYQzMOQlrlIlzZBo4aDRbVsj_eSpcfqdpFrM5ppYoQ\" style=\"max-width: 100%;\"></a><p dir=\"auto\">Every time we call <code>calculator</code>, we have to stop generation, append the result to the prompt, and resume generation. To avoid slowing down after the first call, a server would need to keep the KV cache up to '3 for breakfast. So she has calculator(16 - 3)', then roll forward generation from that point on. Even servers that <em>do</em> have caching often don't have a way to guarantee state is preserved at each stop and start, and so user's pay a significant overhead at each interruption. The normal approach of considering everything as a new prompt would cause significant slow downs every time <code>calculator</code> is called.</p><div class=\"markdown-heading\" dir=\"auto\"><h3 tabindex=\"-1\" class=\"heading-element\" dir=\"auto\">Guidance acceleration</h3><a id=\"user-content-guidance-acceleration\" class=\"anchor-element\" aria-label=\"Permalink: Guidance acceleration\" href=\"#guidance-acceleration\"><svg class=\"octicon octicon-link\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" height=\"16\" aria-hidden=\"true\"><path d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a></div><p dir=\"auto\">In addition to the benefit above, <code>guidance</code> calls are often <strong>faster</strong> than running equivalent prompts the traditional way, because we can batch any additional text that is added by the user as execution unrolls (rather than generating it). Take the example below, where we generate a json with a GGUF compressed <code>llama2</code> 7B executed using llama.cpp:</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@guidancedef character_maker(lm, id, description, valid_weapons):    lm += f&quot;&quot;&quot;\\    The following is a character profile for an RPG game in JSON format.    ```json    {{        &quot;id&quot;: &quot;{id}&quot;,        &quot;description&quot;: &quot;{description}&quot;,        &quot;name&quot;: &quot;{gen('name', stop='&quot;')}&quot;,        &quot;age&quot;: {gen('age', regex='[0-9]+', stop=',')},        &quot;armor&quot;: &quot;{select(options=['leather', 'chainmail', 'plate'], name='armor')}&quot;,        &quot;weapon&quot;: &quot;{select(options=valid_weapons, name='weapon')}&quot;,        &quot;class&quot;: &quot;{gen('class', stop='&quot;')}&quot;,        &quot;mantra&quot;: &quot;{gen('mantra', stop='&quot;')}&quot;,        &quot;strength&quot;: {gen('strength', regex='[0-9]+', stop=',')},        &quot;items&quot;: [&quot;{gen('item', list_append=True, stop='&quot;')}&quot;, &quot;{gen('item', list_append=True, stop='&quot;')}&quot;, &quot;{gen('item', list_append=True, stop='&quot;')}&quot;]    }}```&quot;&quot;&quot;    return lma = time.time()lm = llama2 + character_maker(1, 'A nimble fighter', ['axe', 'sword', 'bow'])time.time() - a\"><pre><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">character_maker</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">id</span>, <span class=\"pl-s1\">description</span>, <span class=\"pl-s1\">valid_weapons</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f\"\"\"<span class=\"pl-cce\">\\</span></span><span class=\"pl-s\"><span class=\"pl-cce\"></span>    The following is a character profile for an RPG game in JSON format.</span><span class=\"pl-s\">    ```json</span><span class=\"pl-s\">    {{</span><span class=\"pl-s\">        \"id\": \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">id</span><span class=\"pl-kos\">}</span></span>\",</span><span class=\"pl-s\">        \"description\": \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">description</span><span class=\"pl-kos\">}</span></span>\",</span><span class=\"pl-s\">        \"name\": \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'name'</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'\"'</span>)<span class=\"pl-kos\">}</span></span>\",</span><span class=\"pl-s\">        \"age\": <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'age'</span>, <span class=\"pl-s1\">regex</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'[0-9]+'</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">','</span>)<span class=\"pl-kos\">}</span></span>,</span><span class=\"pl-s\">        \"armor\": \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">select</span>(<span class=\"pl-s1\">options</span><span class=\"pl-c1\">=</span>[<span class=\"pl-s\">'leather'</span>, <span class=\"pl-s\">'chainmail'</span>, <span class=\"pl-s\">'plate'</span>], <span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'armor'</span>)<span class=\"pl-kos\">}</span></span>\",</span><span class=\"pl-s\">        \"weapon\": \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">select</span>(<span class=\"pl-s1\">options</span><span class=\"pl-c1\">=</span><span class=\"pl-s1\">valid_weapons</span>, <span class=\"pl-s1\">name</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'weapon'</span>)<span class=\"pl-kos\">}</span></span>\",</span><span class=\"pl-s\">        \"class\": \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'class'</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'\"'</span>)<span class=\"pl-kos\">}</span></span>\",</span><span class=\"pl-s\">        \"mantra\": \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'mantra'</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'\"'</span>)<span class=\"pl-kos\">}</span></span>\",</span><span class=\"pl-s\">        \"strength\": <span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'strength'</span>, <span class=\"pl-s1\">regex</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'[0-9]+'</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">','</span>)<span class=\"pl-kos\">}</span></span>,</span><span class=\"pl-s\">        \"items\": [\"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'item'</span>, <span class=\"pl-s1\">list_append</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'\"'</span>)<span class=\"pl-kos\">}</span></span>\", \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'item'</span>, <span class=\"pl-s1\">list_append</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'\"'</span>)<span class=\"pl-kos\">}</span></span>\", \"<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-en\">gen</span>(<span class=\"pl-s\">'item'</span>, <span class=\"pl-s1\">list_append</span><span class=\"pl-c1\">=</span><span class=\"pl-c1\">True</span>, <span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'\"'</span>)<span class=\"pl-kos\">}</span></span>\"]</span><span class=\"pl-s\">    }}```\"\"\"</span>    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-s1\">a</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">time</span>.<span class=\"pl-en\">time</span>()<span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">character_maker</span>(<span class=\"pl-c1\">1</span>, <span class=\"pl-s\">'A nimble fighter'</span>, [<span class=\"pl-s\">'axe'</span>, <span class=\"pl-s\">'sword'</span>, <span class=\"pl-s\">'bow'</span>])<span class=\"pl-s1\">time</span>.<span class=\"pl-en\">time</span>() <span class=\"pl-c1\">-</span> <span class=\"pl-s1\">a</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282900530-85b5a181-6e6a-4582-9203-730f49353aeb.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMDUzMC04NWI1YTE4MS02ZTZhLTQ1ODItOTIwMy03MzBmNDkzNTNhZWIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWEzOGI5M2U5NTNiYjgyMjliMjY5ZDJkODcwNDA1NWNjNGRkY2Q3NmFiNTcxMzFlMzg4YTQ5YmRkODgwOGU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.rK4uJLsba2FI1PqJd5oi_vCg2On7zJL1dmUgMbLUZmQ\"><img width=\"480\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282900530-85b5a181-6e6a-4582-9203-730f49353aeb.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMDUzMC04NWI1YTE4MS02ZTZhLTQ1ODItOTIwMy03MzBmNDkzNTNhZWIucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NWEzOGI5M2U5NTNiYjgyMjliMjY5ZDJkODcwNDA1NWNjNGRkY2Q3NmFiNTcxMzFlMzg4YTQ5YmRkODgwOGU4ZSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.rK4uJLsba2FI1PqJd5oi_vCg2On7zJL1dmUgMbLUZmQ\" style=\"max-width: 100%;\"></a><br></p><p dir=\"auto\">Everything that is not green is not actually generated by the model, and is thus batched (much faster). This prompt takes about 1.2 seconds on an A100 GPU. Now, if we let the model generate everything (as in the roughly equivalent prompt below), it takes roughly <code>2.6</code> seconds (not only is it slower, we also have less control over generation).</p><div class=\"highlight highlight-source-python notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"@guidancedef character_maker2(lm, id, description):    lm += f&quot;&quot;&quot;\\    The following is a character profile for an RPG game in JSON format. It has fields 'id', 'description', 'name', 'age', 'armor', weapon', 'class', 'mantra', 'strength', and 'items (just the names of 3 items)'    please set description to '{description}'    ```json&quot;&quot;&quot; + gen(stop='```')    return lma = time.time()lm = llama2 + character_maker2(1, 'A nimble fighter')time.time() - a\"><pre><span class=\"pl-en\">@<span class=\"pl-s1\">guidance</span></span><span class=\"pl-k\">def</span> <span class=\"pl-en\">character_maker2</span>(<span class=\"pl-s1\">lm</span>, <span class=\"pl-s1\">id</span>, <span class=\"pl-s1\">description</span>):    <span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">+=</span> <span class=\"pl-s\">f\"\"\"<span class=\"pl-cce\">\\</span></span><span class=\"pl-s\"><span class=\"pl-cce\"></span>    The following is a character profile for an RPG game in JSON format. It has fields 'id', 'description', 'name', 'age', 'armor', weapon', 'class', 'mantra', 'strength', and 'items (just the names of 3 items)'</span><span class=\"pl-s\">    please set description to '<span class=\"pl-s1\"><span class=\"pl-kos\">{</span><span class=\"pl-s1\">description</span><span class=\"pl-kos\">}</span></span>'</span><span class=\"pl-s\">    ```json\"\"\"</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">gen</span>(<span class=\"pl-s1\">stop</span><span class=\"pl-c1\">=</span><span class=\"pl-s\">'```'</span>)    <span class=\"pl-k\">return</span> <span class=\"pl-s1\">lm</span><span class=\"pl-s1\">a</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">time</span>.<span class=\"pl-en\">time</span>()<span class=\"pl-s1\">lm</span> <span class=\"pl-c1\">=</span> <span class=\"pl-s1\">llama2</span> <span class=\"pl-c1\">+</span> <span class=\"pl-en\">character_maker2</span>(<span class=\"pl-c1\">1</span>, <span class=\"pl-s\">'A nimble fighter'</span>)<span class=\"pl-s1\">time</span>.<span class=\"pl-en\">time</span>() <span class=\"pl-c1\">-</span> <span class=\"pl-s1\">a</span></pre></div><p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://private-user-images.githubusercontent.com/3740613/282900702-9c55500d-4c90-4f42-9343-43aa2a25efa4.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMDcwMi05YzU1NTAwZC00YzkwLTRmNDItOTM0My00M2FhMmEyNWVmYTQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjkwZGNlMGQxMGE4ZWE1ODI5NjNjZjAyZjhkNDJhNTVmMTNkNWUyZDVlN2M3YTYzZWEyMDljOTQwNWY1ZmFiOCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.aiSq4L2UCuoPBAD-zqyxx8EqVOEXIX1_eJQw1Aqd4Ao\"><img width=\"586\" alt=\"image\" src=\"https://private-user-images.githubusercontent.com/3740613/282900702-9c55500d-4c90-4f42-9343-43aa2a25efa4.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk2NzM3MDcsIm5iZiI6MTcwOTY3MzQwNywicGF0aCI6Ii8zNzQwNjEzLzI4MjkwMDcwMi05YzU1NTAwZC00YzkwLTRmNDItOTM0My00M2FhMmEyNWVmYTQucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDMwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAzMDVUMjExNjQ3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MjkwZGNlMGQxMGE4ZWE1ODI5NjNjZjAyZjhkNDJhNTVmMTNkNWUyZDVlN2M3YTYzZWEyMDljOTQwNWY1ZmFiOCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.aiSq4L2UCuoPBAD-zqyxx8EqVOEXIX1_eJQw1Aqd4Ao\" style=\"max-width: 100%;\"></a><br></p></article></div></div></div></div></div> <!-- --> <!-- --> <script type=\"application/json\" id=\"__PRIMER_DATA__\">{\"resolvedServerColorMode\":\"day\"}</script></div></react-partial>        <input type=\"hidden\" data-csrf=\"true\" value=\"vSKe8tCrAMWecKCvmF4YvN6r8GBkSVDMYW8bDdjvprXGKoFmAF7XpjibDk8WHx+uhyCJzRoVHNEXaKTDaL0pBQ==\" /></div>  <div data-view-component=\"true\" class=\"Layout-sidebar\">            <div class=\"BorderGrid about-margin\" data-pjax>        <div class=\"BorderGrid-row\">          <div class=\"BorderGrid-cell\">            <div class=\"hide-sm hide-md\">  <h2 class=\"mb-3 h4\">About</h2>      <p class=\"f4 my-3\">        A guidance language for controlling large language models.      </p>    <h3 class=\"sr-only\">Resources</h3>    <div class=\"mt-2\">      <a class=\"Link--muted\" data-analytics-event=\"{&quot;category&quot;:&quot;Repository Overview&quot;,&quot;action&quot;:&quot;click&quot;,&quot;label&quot;:&quot;location:sidebar;file:readme&quot;}\" href=\"#readme-ov-file\">        <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-book mr-2\">    <path d=\"M0 1.75A.75.75 0 0 1 .75 1h4.253c1.227 0 2.317.59 3 1.501A3.743 3.743 0 0 1 11.006 1h4.245a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-4.507a2.25 2.25 0 0 0-1.591.659l-.622.621a.75.75 0 0 1-1.06 0l-.622-.621A2.25 2.25 0 0 0 5.258 13H.75a.75.75 0 0 1-.75-.75Zm7.251 10.324.004-5.073-.002-2.253A2.25 2.25 0 0 0 5.003 2.5H1.5v9h3.757a3.75 3.75 0 0 1 1.994.574ZM8.755 4.75l-.004 7.322a3.752 3.752 0 0 1 1.992-.572H14.5v-9h-3.495a2.25 2.25 0 0 0-2.25 2.25Z\"></path></svg>        Readme</a>    </div>      <h3 class=\"sr-only\">License</h3>  <div class=\"mt-2\">    <a href=\"#MIT-1-ov-file\"      class=\"Link--muted\"            data-analytics-event=\"{&quot;category&quot;:&quot;Repository Overview&quot;,&quot;action&quot;:&quot;click&quot;,&quot;label&quot;:&quot;location:sidebar;file:license&quot;}\"    >      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-law mr-2\">    <path d=\"M8.75.75V2h.985c.304 0 .603.08.867.231l1.29.736c.038.022.08.033.124.033h2.234a.75.75 0 0 1 0 1.5h-.427l2.111 4.692a.75.75 0 0 1-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.006.005-.01.01-.045.04c-.21.176-.441.327-.686.45C14.556 10.78 13.88 11 13 11a4.498 4.498 0 0 1-2.023-.454 3.544 3.544 0 0 1-.686-.45l-.045-.04-.016-.015-.006-.006-.004-.004v-.001a.75.75 0 0 1-.154-.838L12.178 4.5h-.162c-.305 0-.604-.079-.868-.231l-1.29-.736a.245.245 0 0 0-.124-.033H8.75V13h2.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1 0-1.5h2.5V3.5h-.984a.245.245 0 0 0-.124.033l-1.289.737c-.265.15-.564.23-.869.23h-.162l2.112 4.692a.75.75 0 0 1-.154.838l-.53-.53.529.531-.001.002-.002.002-.006.006-.016.015-.045.04c-.21.176-.441.327-.686.45C4.556 10.78 3.88 11 3 11a4.498 4.498 0 0 1-2.023-.454 3.544 3.544 0 0 1-.686-.45l-.045-.04-.016-.015-.006-.006-.004-.004v-.001a.75.75 0 0 1-.154-.838L2.178 4.5H1.75a.75.75 0 0 1 0-1.5h2.234a.249.249 0 0 0 .125-.033l1.288-.737c.265-.15.564-.23.869-.23h.984V.75a.75.75 0 0 1 1.5 0Zm2.945 8.477c.285.135.718.273 1.305.273s1.02-.138 1.305-.273L13 6.327Zm-10 0c.285.135.718.273 1.305.273s1.02-.138 1.305-.273L3 6.327Z\"></path></svg>     MIT license    </a>  </div>  <include-fragment  src=\"/guidance-ai/guidance/hovercards/citation/sidebar_partial?tree_name=main\">  </include-fragment>  <div class=\"mt-2\">    <a href=\"/guidance-ai/guidance/activity\" data-view-component=\"true\" class=\"Link Link--muted\">      <svg text=\"gray\" aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-pulse mr-2\">    <path d=\"M6 2c.306 0 .582.187.696.471L10 10.731l1.304-3.26A.751.751 0 0 1 12 7h3.25a.75.75 0 0 1 0 1.5h-2.742l-1.812 4.528a.751.751 0 0 1-1.392 0L6 4.77 4.696 8.03A.75.75 0 0 1 4 8.5H.75a.75.75 0 0 1 0-1.5h2.742l1.812-4.529A.751.751 0 0 1 6 2Z\"></path></svg>      <span class=\"color-fg-muted\">Activity</span></a>  </div>    <div class=\"mt-2\">      <a href=\"/guidance-ai/guidance/custom-properties\" data-view-component=\"true\" class=\"Link Link--muted\">        <svg text=\"gray\" aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-note mr-2\">    <path d=\"M0 3.75C0 2.784.784 2 1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25Zm1.75-.25a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25ZM3.5 6.25a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm.75 2.25h4a.75.75 0 0 1 0 1.5h-4a.75.75 0 0 1 0-1.5Z\"></path></svg>        <span class=\"color-fg-muted\">Custom properties</span></a>    </div>  <h3 class=\"sr-only\">Stars</h3>  <div class=\"mt-2\">    <a href=\"/guidance-ai/guidance/stargazers\" data-view-component=\"true\" class=\"Link Link--muted\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-star mr-2\">    <path d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z\"></path></svg>      <strong>16.5k</strong>      stars</a>  </div>  <h3 class=\"sr-only\">Watchers</h3>  <div class=\"mt-2\">    <a href=\"/guidance-ai/guidance/watchers\" data-view-component=\"true\" class=\"Link Link--muted\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-eye mr-2\">    <path d=\"M8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.45.678-1.367 1.932-2.637 3.023C11.67 13.008 9.981 14 8 14c-1.981 0-3.671-.992-4.933-2.078C1.797 10.83.88 9.576.43 8.898a1.62 1.62 0 0 1 0-1.798c.45-.677 1.367-1.931 2.637-3.022C4.33 2.992 6.019 2 8 2ZM1.679 7.932a.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5c1.473 0 2.825-.742 3.955-1.715 1.124-.967 1.954-2.096 2.366-2.717a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5c-1.473 0-2.825.742-3.955 1.715-1.124.967-1.954 2.096-2.366 2.717ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z\"></path></svg>      <strong>117</strong>      watching</a>  </div>  <h3 class=\"sr-only\">Forks</h3>  <div class=\"mt-2\">    <a href=\"/guidance-ai/guidance/forks\" data-view-component=\"true\" class=\"Link Link--muted\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-repo-forked mr-2\">    <path d=\"M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z\"></path></svg>      <strong>898</strong>      forks</a>  </div>    <div class=\"mt-2\">      <a class=\"Link--muted\" href=\"/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fguidance-ai%2Fguidance&amp;report=guidance-ai+%28user%29\">          Report repository</a>    </div></div>          </div>        </div>                    <div class=\"BorderGrid-row\">              <div class=\"BorderGrid-cell\">                <h2 class=\"h4 mb-3\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\">  <a href=\"/guidance-ai/guidance/releases\" data-view-component=\"true\" class=\"Link--primary no-underline Link\">    Releases</a></h2>    <a class=\"Link--primary no-underline\" data-pjax=\"#repo-content-pjax-container\" data-turbo-frame=\"repo-content-turbo-frame\" href=\"/guidance-ai/guidance/tags\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-tag\">    <path d=\"M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z\"></path></svg>      <span class=\"text-bold\">33</span>      <span class=\"color-fg-muted\">tags</span></a>              </div>            </div>                            <div class=\"BorderGrid-row\">              <div class=\"BorderGrid-cell\">                <h2 class=\"h4 mb-3\">  <a href=\"/orgs/guidance-ai/packages?repo_name=guidance\" data-view-component=\"true\" class=\"Link--primary no-underline Link d-flex flex-items-center\">    Packages      <span title=\"0\" hidden=\"hidden\" data-view-component=\"true\" class=\"Counter ml-1\">0</span></a></h2>      <div class=\"text-small color-fg-muted\">        No packages published <br>      </div>              </div>            </div>                    <div class=\"BorderGrid-row\" >              <div class=\"BorderGrid-cell\">                  <h2 class=\"h4 mb-3\">    <a href=\"/guidance-ai/guidance/network/dependents\" data-view-component=\"true\" class=\"Link--primary no-underline Link\">      Used by <span title=\"479\" data-view-component=\"true\" class=\"Counter\">479</span></a>  </h2>  <a class=\"d-flex flex-items-center\" href=\"/guidance-ai/guidance/network/dependents\">    <ul class=\"hx_flex-avatar-stack list-style-none min-width-0\">          <li class=\"hx_flex-avatar-stack-item\">            <img class=\"avatar avatar-user\" src=\"https://avatars.githubusercontent.com/u/10504654?s=64&amp;v=4\" width=\"32\" height=\"32\" alt=\"@mrHBH\" />          </li>          <li class=\"hx_flex-avatar-stack-item\">            <img class=\"avatar\" src=\"https://avatars.githubusercontent.com/u/152086722?s=64&amp;v=4\" width=\"32\" height=\"32\" alt=\"@LyzrCore\" />          </li>          <li class=\"hx_flex-avatar-stack-item\">            <img class=\"avatar avatar-user\" src=\"https://avatars.githubusercontent.com/u/68745388?s=64&amp;v=4\" width=\"32\" height=\"32\" alt=\"@lin-roger\" />          </li>          <li class=\"hx_flex-avatar-stack-item\">            <img class=\"avatar\" src=\"https://avatars.githubusercontent.com/u/113984957?s=64&amp;v=4\" width=\"32\" height=\"32\" alt=\"@aryn-ai\" />          </li>          <li class=\"hx_flex-avatar-stack-item\">            <img class=\"avatar avatar-user\" src=\"https://avatars.githubusercontent.com/u/5386983?s=64&amp;v=4\" width=\"32\" height=\"32\" alt=\"@paolorechia\" />          </li>          <li class=\"hx_flex-avatar-stack-item\">            <img class=\"avatar avatar-user\" src=\"https://avatars.githubusercontent.com/u/21164643?s=64&amp;v=4\" width=\"32\" height=\"32\" alt=\"@Yoshida24\" />          </li>          <li class=\"hx_flex-avatar-stack-item\">            <img class=\"avatar avatar-user\" src=\"https://avatars.githubusercontent.com/u/46093143?s=64&amp;v=4\" width=\"32\" height=\"32\" alt=\"@rmusab\" />          </li>          <li class=\"hx_flex-avatar-stack-item\">            <img class=\"avatar avatar-user\" src=\"https://avatars.githubusercontent.com/u/44219290?s=64&amp;v=4\" width=\"32\" height=\"32\" alt=\"@parkervg\" />          </li>    </ul>      <span class=\"px-2 text-bold text-small no-wrap\">        + 471      </span>  </a>              </div>            </div>                    <div class=\"BorderGrid-row\">              <div class=\"BorderGrid-cell\">                <h2 class=\"h4 mb-3\">  <a href=\"/guidance-ai/guidance/graphs/contributors\" data-view-component=\"true\" class=\"Link--primary no-underline Link d-flex flex-items-center\">    Contributors      <span title=\"58\" data-view-component=\"true\" class=\"Counter ml-1\">58</span></a></h2>      <ul class=\"list-style-none d-flex flex-wrap mb-n2\">    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/slundberg\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/slundberg/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/3740613?s=64&amp;v=4\" alt=\"@slundberg\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/marcotcr\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/marcotcr/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/698010?s=64&amp;v=4\" alt=\"@marcotcr\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/Harsha-Nori\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/Harsha-Nori/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/5302119?s=64&amp;v=4\" alt=\"@Harsha-Nori\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/riedgar-ms\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/riedgar-ms/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/28632930?s=64&amp;v=4\" alt=\"@riedgar-ms\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/marawan1805\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/marawan1805/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/95961680?s=64&amp;v=4\" alt=\"@marawan1805\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/paulbkoch\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/paulbkoch/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/46825734?s=64&amp;v=4\" alt=\"@paulbkoch\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/cpcdoy\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/cpcdoy/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/5941942?s=64&amp;v=4\" alt=\"@cpcdoy\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/h-k-nyosu\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/h-k-nyosu/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/100386872?s=64&amp;v=4\" alt=\"@h-k-nyosu\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/dviggiano\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/dviggiano/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/91092410?s=64&amp;v=4\" alt=\"@dviggiano\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/shawnz\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/shawnz/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/192850?s=64&amp;v=4\" alt=\"@shawnz\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/jprafael\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/jprafael/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/876908?s=64&amp;v=4\" alt=\"@jprafael\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/adamgordonbell\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/adamgordonbell/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/3921401?s=64&amp;v=4\" alt=\"@adamgordonbell\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/Mihaiii\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/Mihaiii/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/8951553?s=64&amp;v=4\" alt=\"@Mihaiii\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li>    <li class=\"mb-2 mr-2\"        >      <a href=\"https://github.com/Sam1320\"          class=\"\"            data-hovercard-type=\"user\" data-hovercard-url=\"/users/Sam1320/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\"                  >        <img src=\"https://avatars.githubusercontent.com/u/33493647?s=64&amp;v=4\" alt=\"@Sam1320\" size=\"32\" height=\"32\" width=\"32\" data-view-component=\"true\" class=\"avatar circle\" />      </a>    </li></ul>  <div data-view-component=\"true\" class=\"mt-3\">    <a text=\"small\" href=\"/guidance-ai/guidance/graphs/contributors\" data-view-component=\"true\" class=\"Link\">      + 44 contributors</a></div>              </div>            </div>                            <div class=\"BorderGrid-row\">              <div class=\"BorderGrid-cell\">                <h2 class=\"h4 mb-3\">Languages</h2><div class=\"mb-2\">  <span data-view-component=\"true\" class=\"Progress\">    <span style=\"background-color:#DA5B0B !important;;width: 85.5%;\" itemprop=\"keywords\" aria-label=\"Jupyter Notebook 85.5\" data-view-component=\"true\" class=\"Progress-item color-bg-success-emphasis\"></span>    <span style=\"background-color:#3572A5 !important;;width: 13.9%;\" itemprop=\"keywords\" aria-label=\"Python 13.9\" data-view-component=\"true\" class=\"Progress-item color-bg-success-emphasis\"></span>    <span style=\"background-color:#ededed !important;;width: 0.6%;\" itemprop=\"keywords\" aria-label=\"Other 0.6\" data-view-component=\"true\" class=\"Progress-item color-bg-success-emphasis\"></span></span></div><ul class=\"list-style-none\">    <li class=\"d-inline\">        <a class=\"d-inline-flex flex-items-center flex-nowrap Link--secondary no-underline text-small mr-3\" href=\"/guidance-ai/guidance/search?l=jupyter-notebook\"  data-ga-click=\"Repository, language stats search click, location:repo overview\">          <svg style=\"color:#DA5B0B;\" aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-dot-fill mr-2\">    <path d=\"M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"></path></svg>          <span class=\"color-fg-default text-bold mr-1\">Jupyter Notebook</span>          <span>85.5%</span>        </a>    </li>    <li class=\"d-inline\">        <a class=\"d-inline-flex flex-items-center flex-nowrap Link--secondary no-underline text-small mr-3\" href=\"/guidance-ai/guidance/search?l=python\"  data-ga-click=\"Repository, language stats search click, location:repo overview\">          <svg style=\"color:#3572A5;\" aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-dot-fill mr-2\">    <path d=\"M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"></path></svg>          <span class=\"color-fg-default text-bold mr-1\">Python</span>          <span>13.9%</span>        </a>    </li>    <li class=\"d-inline\">      <span class=\"d-inline-flex flex-items-center flex-nowrap text-small mr-3\">        <svg style=\"color:#ededed;\" aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-dot-fill mr-2\">    <path d=\"M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z\"></path></svg>        <span class=\"color-fg-default text-bold mr-1\">Other</span>        <span>0.6%</span>      </span>    </li></ul>              </div>            </div>              </div></div>  </div></div>  </div>  </div></turbo-frame>    </main>  </div>  </div>          <footer class=\"footer pt-8 pb-6 f6 color-fg-muted p-responsive\" role=\"contentinfo\" >  <h2 class='sr-only'>Footer</h2>    <div class=\"d-flex flex-justify-center flex-items-center flex-column-reverse flex-lg-row flex-wrap flex-lg-nowrap\">    <div class=\"d-flex flex-items-center flex-shrink-0 mx-2\">      <a aria-label=\"Homepage\" title=\"GitHub\" class=\"footer-octicon mr-2\" href=\"https://github.com\">        <svg aria-hidden=\"true\" height=\"24\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"24\" data-view-component=\"true\" class=\"octicon octicon-mark-github\">    <path d=\"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z\"></path></svg></a>      <span>        &copy; 2024 GitHub,&nbsp;Inc.      </span>    </div>    <nav aria-label=\"Footer\">      <h3 class=\"sr-only\" id=\"sr-footer-heading\">Footer navigation</h3>      <ul class=\"list-style-none d-flex flex-justify-center flex-wrap mb-2 mb-lg-0\" aria-labelledby=\"sr-footer-heading\">          <li class=\"mx-2\">            <a data-analytics-event=\"{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to Terms&quot;,&quot;label&quot;:&quot;text:terms&quot;}\" href=\"https://docs.github.com/site-policy/github-terms/github-terms-of-service\" data-view-component=\"true\" class=\"Link--secondary Link\">Terms</a>          </li>          <li class=\"mx-2\">            <a data-analytics-event=\"{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to privacy&quot;,&quot;label&quot;:&quot;text:privacy&quot;}\" href=\"https://docs.github.com/site-policy/privacy-policies/github-privacy-statement\" data-view-component=\"true\" class=\"Link--secondary Link\">Privacy</a>          </li>          <li class=\"mx-2\">            <a data-analytics-event=\"{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to security&quot;,&quot;label&quot;:&quot;text:security&quot;}\" href=\"/security\" data-view-component=\"true\" class=\"Link--secondary Link\">Security</a>          </li>          <li class=\"mx-2\">            <a data-analytics-event=\"{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to status&quot;,&quot;label&quot;:&quot;text:status&quot;}\" href=\"https://www.githubstatus.com/\" data-view-component=\"true\" class=\"Link--secondary Link\">Status</a>          </li>          <li class=\"mx-2\">            <a data-analytics-event=\"{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to docs&quot;,&quot;label&quot;:&quot;text:docs&quot;}\" href=\"https://docs.github.com\" data-view-component=\"true\" class=\"Link--secondary Link\">Docs</a>          </li>          <li class=\"mx-2\">            <a data-analytics-event=\"{&quot;category&quot;:&quot;Footer&quot;,&quot;action&quot;:&quot;go to contact&quot;,&quot;label&quot;:&quot;text:contact&quot;}\" href=\"https://support.github.com?tags=dotcom-footer\" data-view-component=\"true\" class=\"Link--secondary Link\">Contact</a>          </li>          <li class=\"mx-2\" >  <cookie-consent-link>    <button type=\"button\" class=\"Link--secondary underline-on-hover border-0 p-0 color-bg-transparent\" data-action=\"click:cookie-consent-link#showConsentManagement\">      Manage cookies    </button>  </cookie-consent-link></li><li class=\"mx-2\">  <cookie-consent-link>    <button type=\"button\" class=\"Link--secondary underline-on-hover border-0 p-0 color-bg-transparent\" data-action=\"click:cookie-consent-link#showConsentManagement\">      Do not share my personal information    </button>  </cookie-consent-link></li>      </ul>    </nav>  </div></footer>    <cookie-consent id=\"cookie-consent-banner\" class=\"position-fixed bottom-0 left-0\" style=\"z-index: 999999\" data-initial-cookie-consent-allowed=\"\" data-cookie-consent-required=\"false\"></cookie-consent>  <div id=\"ajax-error-message\" class=\"ajax-error-message flash flash-error\" hidden>    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path></svg>    <button type=\"button\" class=\"flash-close js-ajax-error-dismiss\" aria-label=\"Dismiss error\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-x\">    <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path></svg>    </button>    You can\u2019t perform that action at this time.  </div>    <template id=\"site-details-dialog\">  <details class=\"details-reset details-overlay details-overlay-dark lh-default color-fg-default hx_rsm\" open>    <summary role=\"button\" aria-label=\"Close dialog\"></summary>    <details-dialog class=\"Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal\">      <button class=\"Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0\" type=\"button\" aria-label=\"Close dialog\" data-close-dialog>        <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-x\">    <path d=\"M3.72 3.72a.75.75 0 0 1 1.06 0L8 6.94l3.22-3.22a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l3.22 3.22a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-3.22 3.22a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042L6.94 8 3.72 4.78a.75.75 0 0 1 0-1.06Z\"></path></svg>      </button>      <div class=\"octocat-spinner my-6 js-details-dialog-spinner\"></div>    </details-dialog>  </details></template>    <div class=\"Popover js-hovercard-content position-absolute\" style=\"display: none; outline: none;\" tabindex=\"0\">  <div class=\"Popover-message Popover-message--bottom-left Popover-message--large Box color-shadow-large\" style=\"width:360px;\">  </div></div>    <template id=\"snippet-clipboard-copy-button\">  <div class=\"zeroclipboard-container position-absolute right-0 top-0\">    <clipboard-copy aria-label=\"Copy\" class=\"ClipboardButton btn js-clipboard-copy m-2 p-0 tooltipped-no-delay\" data-copy-feedback=\"Copied!\" data-tooltip-direction=\"w\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-copy js-clipboard-copy-icon m-2\">    <path d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z\"></path><path d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z\"></path></svg>      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-check js-clipboard-check-icon color-fg-success d-none m-2\">    <path d=\"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z\"></path></svg>    </clipboard-copy>  </div></template><template id=\"snippet-clipboard-copy-button-unpositioned\">  <div class=\"zeroclipboard-container\">    <clipboard-copy aria-label=\"Copy\" class=\"ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center\" data-copy-feedback=\"Copied!\" data-tooltip-direction=\"w\">      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-copy js-clipboard-copy-icon\">    <path d=\"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z\"></path><path d=\"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z\"></path></svg>      <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-check js-clipboard-check-icon color-fg-success d-none\">    <path d=\"M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z\"></path></svg>    </clipboard-copy>  </div></template>    </div>    <div id=\"js-global-screen-reader-notice\" class=\"sr-only\" aria-live=\"polite\" aria-atomic=\"true\" ></div>    <div id=\"js-global-screen-reader-notice-assertive\" class=\"sr-only\" aria-live=\"assertive\" aria-atomic=\"true\"></div>  </body></html>",
  "embeddings": []
}