{
  "libtype": "pypi",
  "libname": "calmjs.parse",
  "url": "https://pypi.org/project/calmjs.parse/",
  "html": "<!DOCTYPE html><html lang=\"en\" dir=\"ltr\">  <head>    <meta charset=\"utf-8\">    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">    <meta name=\"defaultLanguage\" content=\"en\">    <meta name=\"availableLanguages\" content=\"en, es, fr, ja, pt_BR, uk, el, de, zh_Hans, zh_Hant, ru, he, eo\">    <title>calmjs.parse \u00b7 PyPI</title>    <meta name=\"description\" content=\"Various parsers for ECMA standards.\">    <link rel=\"stylesheet\" href=\"/static/css/warehouse-ltr.99b3104d.css\">    <link rel=\"stylesheet\" href=\"/static/css/fontawesome.b50b476c.css\">    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Source+Sans+3:400,400italic,600,600italic,700,700italic%7CSource+Code+Pro:500\">    <noscript>      <link rel=\"stylesheet\" href=\"/static/css/noscript.0673c9ea.css\">    </noscript>    <link rel=\"icon\" href=\"/static/images/favicon.35549fe8.ico\" type=\"image/x-icon\">    <link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS: 40 latest updates\" href=\"/rss/updates.xml\">    <link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS: 40 newest packages\" href=\"/rss/packages.xml\"><link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS: latest releases for calmjs.parse\" href=\"/rss/project/calmjs-parse/releases.xml\">    <link rel=\"canonical\" href=\"https://pypi.org/project/calmjs.parse/\">    <meta property=\"og:url\" content=\"https://pypi.org/project/calmjs.parse/\">    <meta property=\"og:site_name\" content=\"PyPI\">    <meta property=\"og:type\" content=\"website\">    <meta property=\"og:image\" content=\"https://pypi.org/static/images/twitter.abaf4b19.webp\">    <meta property=\"og:title\" content=\"calmjs.parse\">    <meta property=\"og:description\" content=\"Various parsers for ECMA standards.\">    <link rel=\"search\" type=\"application/opensearchdescription+xml\" title=\"PyPI\" href=\"/opensearch.xml\">    <script asyncdata-ga-id=\"UA-55961911-1\"data-ga4-id=\"G-RW7D75DF8V\"            src=\"/static/js/warehouse.dd4295c4.js\">    </script><script>MathJax = {  tex: {    inlineMath: [['$', '$'], ['\\\\(', '\\\\)']]  },};</script><script async  src=\"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-svg.js\"  integrity=\"sha256-1CldwzdEg2k1wTmf7s5RWVd7NMXI/7nxxjJM2C4DqII=\"  crossorigin=\"anonymous\"></script><script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-55961911-1\"></script><script async src=\"https://www.googletagmanager.com/gtag/js?id=G-RW7D75DF8V\"></script><script defer src=\"https://www.fastly-insights.com/insights.js?k=6a52360a-f306-421e-8ed5-7417d0d4a4e9&dnt=true\"></script>    <script async        src=\"https://media.ethicalads.io/media/client/v1.4.0/ethicalads.min.js\"        integrity=\"sha256-U3hKDidudIaxBDEzwGJApJgPEf2mWk6cfMWghrAa6i0= sha384-UcmsCqcNRSLW/dV3Lo1oCi2/VaurXbib6p4HyUEOeIa/4OpsrnucrugAefzVZJfI sha512-q4t1L4xEjGV2R4hzqCa41P8jrgFUS8xTb8rdNv4FGvw7FpydVj/kkxBJHOiaoxHa8olCcx1Slk9K+3sNbsM4ug==\"        crossorigin=\"anonymous\"    ></script>  </head>  <body data-controller=\"viewport-toggle\">    <!-- Accessibility: this link should always be the first piece of content inside the body-->    <a href=\"#content\" class=\"skip-to-content\">Skip to main content</a>    <button type=\"button\" class=\"button button--primary button--switch-to-mobile hidden\" data-viewport-toggle-target=\"switchToMobile\" data-action=\"viewport-toggle#switchToMobile\">Switch to mobile version    </button>    <div id=\"sticky-notifications\" class=\"stick-to-top js-stick-to-top\">      <!-- Add browser warning. Will show for ie9 and below -->      <!--[if IE]>      <div class=\"notification-bar notification-bar--warning\" role=\"status\">        <span class=\"notification-bar__icon\">          <i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>          <span class=\"sr-only\">Warning</span>        </span>        <span class=\"notification-bar__message\">You are using an unsupported browser, upgrade to a newer version.</span>      </div>      <![endif]-->      <noscript>      <div class=\"notification-bar notification-bar--warning\" role=\"status\">        <span class=\"notification-bar__icon\">          <i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>          <span class=\"sr-only\">Warning</span>        </span>        <span class=\"notification-bar__message\">Some features may not work without JavaScript. Please try enabling it if you encounter problems.</span>      </div>      </noscript><div data-html-include=\"/_includes/notification-banners/\"></div>    </div><div data-html-include=\"/_includes/flash-messages/\"></div><div data-html-include=\"/_includes/session-notifications/\"></div>    <header class=\"site-header \">      <div class=\"site-container\">        <div class=\"split-layout\">          <div class=\"split-layout\">            <div>              <a class=\"site-header__logo\" href=\"/\">                <img alt=\"PyPI\" src=\"/static/images/logo-small.2a411bc6.svg\">              </a>            </div>            <form class=\"search-form search-form--primary\" action=\"/search/\" role=\"search\">              <label for=\"search\" class=\"sr-only\">Search PyPI</label>              <input id=\"search\" class=\"search-form__search\" type=\"text\" name=\"q\" placeholder=\"Search projects\" value=\"\" autocomplete=\"off\" autocapitalize=\"off\" spellcheck=\"false\" data-controller=\"search-focus\" data-action=\"keydown@window->search-focus#focusSearchField\" data-search-focus-target=\"searchField\">              <button type=\"submit\" class=\"search-form__button\">                <i class=\"fa fa-search\" aria-hidden=\"true\"></i>                <span class=\"sr-only\">Search</span>              </button>            </form>          </div><div data-html-include=\"/_includes/current-user-indicator/\">            <div id=\"user-indicator\" class=\"horizontal-menu horizontal-menu--light horizontal-menu--tall\">  <nav class=\"horizontal-menu horizontal-menu--light horizontal-menu--tall hide-on-tablet\" aria-label=\"Main navigation\">    <ul>      <li class=\"horizontal-menu__item\"><a href=\"/help/\" class=\"horizontal-menu__link\">Help</a></li>      <li class=\"horizontal-menu__item\"><a href=\"/sponsors/\" class=\"horizontal-menu__link\">Sponsors</a></li>      <li class=\"horizontal-menu__item\"><a href=\"/account/login/\" class=\"horizontal-menu__link\">Log in</a></li>      <li class=\"horizontal-menu__item\"><a href=\"/account/register/\" class=\"horizontal-menu__link\">Register</a></li>    </ul>  </nav>  <nav class=\"dropdown dropdown--on-menu hidden show-on-tablet\" aria-label=\"Main navigation\">    <button type=\"button\" class=\"horizontal-menu__link dropdown__trigger\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-label=\"View menu\">Menu      <span class=\"dropdown__trigger-caret\">        <i class=\"fa fa-caret-down\" aria-hidden=\"true\"></i>      </span>    </button>    <ul class=\"dropdown__content\" aria-hidden=\"true\" aria-label=\"Main menu\">      <li><a class=\"dropdown__link\" href=\"/help/\">Help</a></li>      <li><a class=\"dropdown__link\" href=\"/sponsors/\">Sponsors</a></li>      <li><a class=\"dropdown__link\" href=\"/account/login/\">Log in</a></li>      <li><a class=\"dropdown__link\" href=\"/account/register/\">Register</a></li>    </ul>  </nav></div></div>        </div>      </div>    </header>    <div class=\"mobile-search\">      <form class=\"search-form search-form--fullwidth\" action=\"/search/\" role=\"search\">        <label for=\"mobile-search\" class=\"sr-only\">Search PyPI</label>        <input id=\"mobile-search\" class=\"search-form__search\" type=\"text\" name=\"q\" placeholder=\"Search projects\" value=\"\" autocomplete=\"off\" autocapitalize=\"off\" spellcheck=\"false\">                <button type=\"submit\" class=\"search-form__button\">          <i class=\"fa fa-search\" aria-hidden=\"true\"></i>          <span class=\"sr-only\">Search</span>        </button>      </form>    </div>    <main id=\"content\"><div class=\"hidden\"  data-controller=\"github-repo-stats\"  data-github-repo-stats-github-repo-info-outlet=\".github-repo-info\"  data-github-repo-stats-url-value=\"https://api.github.com/repos/calmjs/calmjs.parse\"  data-github-repo-stats-issue-url-value=\"https://api.github.com/search/issues?q=repo:calmjs/calmjs.parse+type:issue+state:open&amp;per_page=1\"></div><div class=\"banner\">  <div class=\"package-header\">    <div class=\"package-header__left\">      <h1 class=\"package-header__name\">        calmjs.parse 1.3.1      </h1>      <div data-controller=\"clipboard\">        <p class=\"package-header__pip-instructions\">          <span id=\"pip-command\" data-clipboard-target=\"source\">pip install calmjs.parse</span>          <button type=\"button\" class=\"copy-tooltip copy-tooltip-s\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">            <i class=\"fa fa-copy\" aria-hidden=\"true\"></i>            <span class=\"sr-only\">Copy PIP instructions</span>          </button>        </p>      </div>    </div>    <div class=\"package-header__right\">      <a class=\"status-badge status-badge--good\" href=\"/project/calmjs.parse/\">        <span>Latest version</span>      </a>      <p class=\"package-header__date\">Released: <time datetime=\"2023-10-28T23:26:08+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Oct 28, 2023</time>      </p>    </div>  </div></div><div class=\"horizontal-section horizontal-section--grey horizontal-section--thin\">  <div class=\"site-container\"><div data-html-include=\"/_includes/administer-project-include/calmjs-parse\"></div>    <div class=\"split-layout split-layout--middle package-description\">      <p class=\"package-description__summary\">Various parsers for ECMA standards.</p><div data-html-include=\"/_includes/edit-project-button/calmjs-parse\"></div>    </div>  </div></div><div data-controller=\"project-tabs\">  <div class=\"tabs-container\">    <div class=\"vertical-tabs\">      <div class=\"vertical-tabs__tabs\">        <div class=\"sidebar-section\">          <h3 class=\"sidebar-section__title\">Navigation</h3>          <nav aria-label=\"Navigation for calmjs.parse\">            <ul class=\"vertical-tabs__list\" role=\"tablist\">              <li role=\"tab\">                <a id=\"description-tab\" href=\"#description\" data-project-tabs-target=\"tab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--is-active\" aria-selected=\"true\" aria-label=\"Project description. Focus will be moved to the description.\">                  <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>Project description                </a>              </li>              <li role=\"tab\">                <a id=\"history-tab\" href=\"#history\" data-project-tabs-target=\"tab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon\" aria-label=\"Release history. Focus will be moved to the history panel.\">                  <i class=\"fa fa-history\" aria-hidden=\"true\"></i>Release history                </a>              </li>              <li role=\"tab\">                <a id=\"files-tab\" href=\"#files\" data-project-tabs-target=\"tab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon\" aria-label=\"Download files. Focus will be moved to the project files.\">                  <i class=\"fa fa-download\" aria-hidden=\"true\"></i>Download files                </a>              </li>            </ul>          </nav>        </div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Project links</h3>  <ul class=\"vertical-tabs__list\">    <li>      <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\" href=\"https://github.com/calmjs/calmjs.parse\" rel=\"nofollow\">        <i class=\"fas fa-home\" aria-hidden=\"true\"></i>Homepage      </a>    </li>  </ul></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Statistics</h3>  <div class=\"hidden github-repo-info\" data-controller=\"github-repo-info\">GitHub statistics:    <ul class=\"vertical-tabs__list\">      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"stargazersUrl\" rel=\"noopener\">          <i class=\"fa fa-star\" aria-hidden=\"true\"></i>          <strong>Stars:</strong>          <span data-github-repo-info-target=\"stargazersCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"forksUrl\" rel=\"noopener\">          <i class=\"fa fa-code-branch\" aria-hidden=\"true\"></i>          <strong>Forks:</strong>          <span data-github-repo-info-target=\"forksCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"openIssuesUrl\" rel=\"noopener\">          <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>          <strong>Open issues:</strong>          <span data-github-repo-info-target=\"openIssuesCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"openPRsUrl\" rel=\"noopener\">          <i class=\"fa fa-code-pull-request\" aria-hidden=\"true\"></i>          <strong>Open PRs:</strong>          <span data-github-repo-info-target=\"openPRsCount\"></span>        </a>      </li>    </ul>  </div>  <p>View statistics for this project via <a href=\"https://libraries.io/pypi/calmjs.parse\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Libraries.io</a>, or by using <a href=\"https://packaging.python.org/guides/analyzing-pypi-package-downloads/\" target=\"_blank\" rel=\"noopener\">our public dataset on Google BigQuery</a>  </p></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Meta</h3>  <p><strong>License:</strong> MIT License (mit)</p>    <p><strong>Author:</strong> <a href=\"mailto:tommy.yu@auckland.ac.nz\">Tommy Yu</a></p></div><div class=\"sidebar-section\">    <h3 class=\"sidebar-section__title\">Maintainers</h3>      <span class=\"sidebar-section__maintainer\">        <a href=\"/user/metatoaster/\" aria-label=\"metatoaster\">          <span class=\"sidebar-section__user-gravatar\">            <img src=\"https://pypi-camo.freetls.fastly.net/de9d9b118227bf7786202da189970c28fca8006a/68747470733a2f2f7365637572652e67726176617461722e636f6d2f6176617461722f34323837343866346232346362373765643137343530303764393565316566363f73697a653d3530\" height=\"50\" width=\"50\" alt=\"Avatar for metatoaster from gravatar.com\" title=\"Avatar for metatoaster from gravatar.com\">          </span>          <span class=\"sidebar-section__user-gravatar-text\">            metatoaster          </span>        </a>      </span></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Classifiers</h3>  <ul class=\"sidebar-section__classifiers\">    <li>      <strong>Development Status</strong>      <ul>        <li>          <a href=\"/search/?c=Development+Status+%3A%3A+5+-+Production%2FStable\">            5 - Production/Stable          </a>        </li>      </ul>    </li>    <li>      <strong>Intended Audience</strong>      <ul>        <li>          <a href=\"/search/?c=Intended+Audience+%3A%3A+Developers\">            Developers          </a>        </li>      </ul>    </li>    <li>      <strong>License</strong>      <ul>        <li>          <a href=\"/search/?c=License+%3A%3A+OSI+Approved+%3A%3A+MIT+License\">            OSI Approved :: MIT License          </a>        </li>      </ul>    </li>    <li>      <strong>Operating System</strong>      <ul>        <li>          <a href=\"/search/?c=Operating+System+%3A%3A+OS+Independent\">            OS Independent          </a>        </li>      </ul>    </li>    <li>      <strong>Programming Language</strong>      <ul>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+JavaScript\">            JavaScript          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+2.7\">            Python :: 2.7          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.3\">            Python :: 3.3          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.4\">            Python :: 3.4          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.5\">            Python :: 3.5          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.6\">            Python :: 3.6          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.7\">            Python :: 3.7          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.8\">            Python :: 3.8          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.9\">            Python :: 3.9          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.10\">            Python :: 3.10          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.11\">            Python :: 3.11          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.12\">            Python :: 3.12          </a>        </li>      </ul>    </li>  </ul></div><div class=\"sidebar-section\" data-ea-publisher=\"psf\" data-ea-type=\"psf\" data-ea-keywords=\"pypi-sidebar\"></div>      </div>      <div class=\"vertical-tabs__panel\">        <!-- mobile menu -->        <nav aria-label=\"Navigation for calmjs.parse\">          <ul class=\"vertical-tabs__list\" role=\"tablist\">            <li role=\"tab\">              <a id=\"mobile-description-tab\" href=\"#description\" data-project-tabs-target=\"mobileTab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--mobile vertical-tabs__tab--no-top-border vertical-tabs__tab--is-active\" aria-selected=\"true\" aria-label=\"Project description. Focus will be moved to the description.\">                <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>Project description              </a>            </li>            <li role=\"tab\">              <a id=\"mobile-data-tab\" href=\"#data\" data-project-tabs-target=\"mobileTab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--mobile\" aria-label=\"Project details. Focus will be moved to the project details.\">                <i class=\"fa fa-info-circle\" aria-hidden=\"true\"></i>Project details              </a>            </li>            <li role=\"tab\">              <a id=\"mobile-history-tab\" href=\"#history\" data-project-tabs-target=\"mobileTab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--mobile\" aria-label=\"Release history. Focus will be moved to the history panel.\">              <i class=\"fa fa-history\" aria-hidden=\"true\"></i>Release history            </a>            </li>            <li role=\"tab\">              <a id=\"mobile-files-tab\" href=\"#files\" data-project-tabs-target=\"mobileTab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--mobile\" aria-label=\"Download files. Focus will be moved to the project files.\">                <i class=\"fa fa-download\" aria-hidden=\"true\"></i>Download files              </a>            </li>          </ul>        </nav>        <div id=\"description\" data-project-tabs-target=\"content\" class=\"vertical-tabs__content\" role=\"tabpanel\" aria-labelledby=\"description-tab mobile-description-tab\" tabindex=\"-1\">          <h2 class=\"page-title\">Project description</h2>          <div class=\"project-description\">            <section id=calmjs-parse><h2>calmjs.parse</h2><p>A collection of parsers and helper libraries for understandingECMAScript; a near feature complete fork of <a href=\"https://pypi.python.org/pypi/slimit\" rel=nofollow><span class=\"docutils literal\">slimit</span></a>.  A CLI front-endfor this package is shipped separately as <a href=\"https://pypi.python.org/pypi/crimp\" rel=nofollow><span class=\"docutils literal\">crimp</span></a>.</p><a href=\"https://github.com/calmjs/calmjs.parse/actions/workflows/build.yml?query=branch:1.3.1\" rel=nofollow><img alt=\"https://github.com/calmjs/calmjs.parse/actions/workflows/build.yml/badge.svg?branch=1.3.1\" src=\"https://pypi-camo.freetls.fastly.net/3212214b2b9e18dd33f4729a014da9fed3e1f3e5/68747470733a2f2f6769746875622e636f6d2f63616c6d6a732f63616c6d6a732e70617273652f616374696f6e732f776f726b666c6f77732f6275696c642e796d6c2f62616467652e7376673f6272616e63683d312e332e31\"></a><a href=\"https://ci.appveyor.com/project/metatoaster/calmjs-parse/branch/1.3.1\" rel=nofollow><img alt=\"https://ci.appveyor.com/api/projects/status/5dj8dnu9gmj02msu/branch/1.3.1?svg=true\" src=\"https://pypi-camo.freetls.fastly.net/e2338f25a2b68b647f4c092f486983667014d259/68747470733a2f2f63692e6170707665796f722e636f6d2f6170692f70726f6a656374732f7374617475732f35646a38646e7539676d6a30326d73752f6272616e63682f312e332e313f7376673d74727565\"></a><a href=\"https://coveralls.io/github/calmjs/calmjs.parse?branch=1.3.1\" rel=nofollow><img alt=\"https://coveralls.io/repos/github/calmjs/calmjs.parse/badge.svg?branch=1.3.1\" src=\"https://pypi-camo.freetls.fastly.net/b8064df01d0babfb2105c2dde64540888933856d/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f63616c6d6a732f63616c6d6a732e70617273652f62616467652e7376673f6272616e63683d312e332e31\"></a><section id=introduction><h3>Introduction</h3><p>For any kind of build system that operates with JavaScript code inconjunction with a module system, the ability to understand what modulesa given set of sources require or provide is paramount.  As the Calmjsproject provides a framework that produces and consume these moduledefinitions, the the ability to have a comprehensive understanding ofgiven JavaScript sources is a given.  This goal was originally achievedusing <a href=\"https://pypi.python.org/pypi/slimit\" rel=nofollow><span class=\"docutils literal\">slimit</span></a>, a JavaScript minifier library that also provided acomprehensive parser class that was built using Python Lex-Yacc (i.e.<a href=\"https://pypi.python.org/pypi/ply\" rel=nofollow><span class=\"docutils literal\">ply</span></a>).</p><p>However, as of mid-2017, it was noted that <span class=\"docutils literal\">slimit</span> remained in aminimum state of maintenance for more than four years (its most recentrelease, 0.8.1, was made 2013-03-26), along with a number of seriousoutstanding issues have left unattended and unresolved for the durationof that time span.  As the development of the Calmjs framework requirethose issues to be rectified as soon as possible, a decision to fork theparser portion of <span class=\"docutils literal\">slimit</span> was made. This was done in order to cater tothe interests current to Calmjs project at that moment in time.</p><p>The fork was initial cut from another fork of <span class=\"docutils literal\">slimit</span> (specifically<a href=\"https://github.com/lelit/slimit\" rel=nofollow>lelit/slimit</a>), as it introduced andaggregated a number of bug fixes from various sources.  To ensure abetter quality control and assurance, a number of problematic changesintroduced by that fork were removed.   Also, new tests were created tobring coverage to full, and issues reported on the <span class=\"docutils literal\">slimit</span> tracker werenoted and formalized into test cases where applicable.  Finally, grammarrules were updated to ensure better conformance with the ECMA-262 (ES5)specification.</p><p>The goal of <span class=\"docutils literal\">calmjs.parse</span> is to provide a similar API that <span class=\"docutils literal\">slimit</span> hadprovided, except done in a much more extensible manner with morecorrectness checks in place.  This however resulted in some operationsthat might take longer than what <span class=\"docutils literal\">slimit</span> had achieved, such as thepretty printing of output.</p><p>A CLI front-end that makes use of this package is provided through<a href=\"https://pypi.python.org/pypi/crimp\" rel=nofollow><span class=\"docutils literal\">crimp</span></a>.</p></section><section id=installation><h3>Installation</h3><p>The following command may be executed to source the latest stableversion of <span class=\"docutils literal\">calmjs.parse</span> wheel from PyPI for installation into thecurrent Python environment.</p><pre><code><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>calmjs.parse</code></pre><p>As this package uses <span class=\"docutils literal\">ply</span>, it requires the generation of optimizationmodules for its lexer.  The wheel distribution of <span class=\"docutils literal\">calmjs.parse</span> doesnot require this extra step as it contains these pre-generated modulesfor <span class=\"docutils literal\">ply</span> up to version 3.11 (the latest version available at the timeof previous release), however the version of <span class=\"docutils literal\">ply</span> that is installed isbeyond the supported version, the following caveats will apply.</p><p>If a more recent release of <span class=\"docutils literal\">ply</span> becomes available and the environmentupgrades to that version, those pre-generated modules may becomeincompatible, which may result in a decreased performance and/or errors.A corrective action can be achieved through a <a href=#manual-optimization rel=nofollow>manual optimization</a>step if a newer version of <span class=\"docutils literal\">calmjs.parse</span> is not available, or <span class=\"docutils literal\">ply</span> maybe downgraded back to version 3.11 if possible.</p><p>Alternatively, install a more recent version of <span class=\"docutils literal\">calmjs.parse</span> wheelthat has the most complete set of pre-generated modules built.</p><p>Once the package is installed, the installation may be <a href=#tested rel=nofollow>tested</a> or be<a href=#used-directly rel=nofollow>used directly</a>.</p><section id=manual-installation-and-packaging-requirements><h4>Manual installation and packaging requirements</h4><p><em>This section is for developers and advanced users; contains importantinformation for package maintainers for OS distributions (e.g. Linux)that will prevent less than ideal experiences for downstream users.</em></p><p>Development is still ongoing with <span class=\"docutils literal\">calmjs.parse</span>, for the latestfeatures and bug fixes, the development version may be installed throughgit like so:</p><pre><code><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>ply<span class=w> </span>setuptools<span class=w>  </span><span class=c1># this MUST be done first; see below for reason</span><span class=gp>$ </span>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span>git+https://github.com/calmjs/calmjs.parse.git#egg<span class=o>=</span>calmjs.parse</code></pre><p>Note that all dependencies MUST be pre-installed <span class=\"docutils literal\">setup.py build</span> stepto run, otherwise the build step required to create the pre-generatedmodules will result in failure.</p><p>If <span class=\"docutils literal\">ply</span> isn\u2019t installed:</p><pre><code><span class=gp>$ </span>python<span class=w> </span>-m<span class=w> </span>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span>.<span class=w></span><span class=go>...running egg_info...WARNING: cannot find distribution for 'ply'; using default value,assuming 'ply==3.11' for pre-generated modulesERROR: cannot find pre-generated modules for the assumed 'ply'version from above and/or cannot `import ply` to build generatedmodules, aborting build; please either ensure that the sourcearchive containing the pre-generate modules is being used, or thatthe python package 'ply' is installed and available for importbefore attempting to use the setup.py to build this package; pleaserefer to the top level README for further details</span></code></pre><p>If <span class=\"docutils literal\">setuptools</span> isn\u2019t installed:</p><pre><code><span class=gp>$ </span>python<span class=w> </span>-m<span class=w> </span>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span>.<span class=w></span><span class=go>...running egg_info...Traceback (most recent call last):  ...ModuleNotFoundError: No module named 'pkg_resources'</span></code></pre><p>Naturally, the git repository can be cloned directly and execute<span class=\"docutils literal\">python setup.py develop</span> while inside the root of the sourcedirectory; again, both <span class=\"docutils literal\">ply</span> AND <span class=\"docutils literal\">setuptools</span> MUST already have beavailable for import.</p><p>As the git repository does NOT contain any pre-generated modules orcode, the above message is likely to be seen by developers or distromaintainers who are on their first try at interacting with thissoftware.  However, the zip archives released on PyPI starting fromversion 1.3.0 do contain these modules fully pre-generated, thus theymay be used as part of a standard installation step, i.e. withoutrequiring <span class=\"docutils literal\">ply</span> be available for import before usage of the <span class=\"docutils literal\">setup.py</span>for any purpose.  While the same warning message about <span class=\"docutils literal\">ply</span> beingmissing may be shown, the pre-generated modules will allow the buildstep to proceed as normal.</p></section><section id=manual-optimization><h4>Manual optimization</h4><p>As lex and yacc require the generation of symbol tables, a way tooptimize the performance is to cache the results.  For <span class=\"docutils literal\">ply</span>, this isdone using an auto-generated module.  However, the generated file ismarked with a version number, as the results may be specific to theinstalled version of <span class=\"docutils literal\">ply</span>.  In <span class=\"docutils literal\">calmjs.parse</span> this is handled by givingthem a name specific to the version of <span class=\"docutils literal\">ply</span> and the major Pythonversion, as both together does result in subtle differences in theoutputs and expectations of the auto-generated modules.</p><p>Typically, the process for this optimization is automatic and a correctsymbol table will be generated, however there are cases where this willfail, so for this reason <span class=\"docutils literal\">calmjs.parse</span> provide a helper module andexecutable that can be optionally invoked to ensure that the correctencoding be used to generate that file.  Other reasons where this may benecessary is to allow system administrators to do so for their endusers, as they may not have write privileges at that level.</p><p>To execute the optimizer from the shell, the provided helper script maybe used like so:</p><pre><code><span class=gp>$ </span>python<span class=w> </span>-m<span class=w> </span>calmjs.parse.parsers.optimize</code></pre><p>If warnings appear that warn that tokens are defined but not used, theymay be safely ignored.</p><p>This step is generally optionally for users who installed this packagefrom PyPI via a Python wheel, provided the caveats as outlined in theinstallation section are addressed.</p></section><section id=testing-the-installation><span id=tested></span><h4>Testing the installation</h4><p>To ensure that the <span class=\"docutils literal\">calmjs.parse</span> installation is functioning correctly,the built-in testsuite can be executed by the following:</p><pre><code><span class=gp>$ </span>python<span class=w> </span>-m<span class=w> </span>unittest<span class=w> </span>calmjs.parse.tests.make_suite</code></pre><p>If there are failures, please file an issue on the <a href=\"https://github.com/calmjs/calmjs.parse/issues\" rel=nofollow>issue tracker</a> with the fulltraceback, and/or the method of installation.  Please also includeapplicable information about the environment, such as the version ofthis software, Python version, operating system environments, theversion of <span class=\"docutils literal\">ply</span> that was installed, plus other information related tothe issue at hand.</p></section></section><section id=usage><h3>Usage</h3><p id=used-directly>As this is a parser library, no executable shell commands are provided.There is however a helper callable object provided at the top level forimmediate access to the parsing feature.  It may be used like so:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse</span> <span class=kn>import</span> <span class=n>es5</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>program_source</span> <span class=o>=</span> <span class=s1>'''</span><span class=gp>... </span><span class=s1>// simple program</span><span class=gp>... </span><span class=s1>var main = function(greet) {</span><span class=gp>... </span><span class=s1>    var hello = \"hello \" + greet;</span><span class=gp>... </span><span class=s1>    return hello;</span><span class=gp>... </span><span class=s1>};</span><span class=gp>... </span><span class=s1>console.log(main('world'));</span><span class=gp>... </span><span class=s1>'''</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>program</span> <span class=o>=</span> <span class=n>es5</span><span class=p>(</span><span class=n>program_source</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=c1># for a simple repr-like nested view of the ast</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>program</span>  <span class=c1># equivalent to repr(program)</span><span class=w></span><span class=go>&lt;ES5Program @3:1 ?children=[  &lt;VarStatement @3:1 ?children=[    &lt;VarDecl @3:5 identifier=&lt;Identifier ...&gt;, initializer=&lt;FuncExpr ...&gt;&gt;  ]&gt;,  &lt;ExprStatement @7:1 expr=&lt;FunctionCall @7:1 args=&lt;Arguments ...&gt;,    identifier=&lt;DotAccessor ...&gt;&gt;&gt;]&gt;</span><span class=gp>&gt;&gt;&gt; </span><span class=c1># automatic reconstruction of ast into source, without having to</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=c1># call something like `.to_ecma()`</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>program</span><span class=p>)</span>  <span class=c1># equivalent to str(program)</span><span class=w></span><span class=go>var main = function(greet) {  var hello = \"hello \" + greet;  return hello;};console.log(main('world'));</span><span class=gp>&gt;&gt;&gt;</span></code></pre><p>Please note the change in indentation as the default printer has its ownindentation scheme.  If comments are needed, the parser can be calledusing <span class=\"docutils literal\">with_comments=True</span>:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=n>program_wc</span> <span class=o>=</span> <span class=n>es5</span><span class=p>(</span><span class=n>program_source</span><span class=p>,</span> <span class=n>with_comments</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>program_wc</span><span class=p>)</span><span class=w></span><span class=go>// simple programvar main = function(greet) {  var hello = \"hello \" + greet;  return hello;};console.log(main('world'));</span><span class=gp>&gt;&gt;&gt;</span></code></pre><p>Also note that there are limitations with the capturing of comments asdocumented in the <a href=#limitations rel=nofollow>Limitations</a> section.</p><p>The parser classes are organized under the <span class=\"docutils literal\">calmjs.parse.parsers</span>module, with each language being under their own module.  Acorresponding lexer class with the same name is also provided under the<span class=\"docutils literal\">calmjs.parse.lexers</span> module.  For the moment, only ES5 support isimplemented.</p><section id=pretty-minified-printing><h4>Pretty/minified printing</h4><p>There is also a set of pretty printing helpers for turning the AST backinto a string.  These are available as functions or class constructors,and are produced by composing various lower level classes available inthe <span class=\"docutils literal\">calmjs.parse.unparsers</span> and related modules.</p><p>There is a default short-hand helper for turning the previously producedAST back into a string, which can be manually invoked with certainparameters, such as what characters to use for indentation: (note thatthe <span class=\"docutils literal\">__str__</span> call implicitly invoked through <span class=\"docutils literal\">print</span> shownpreviously is implemented through this).</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.unparsers.es5</span> <span class=kn>import</span> <span class=n>pretty_print</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>pretty_print</span><span class=p>(</span><span class=n>program</span><span class=p>,</span> <span class=n>indent_str</span><span class=o>=</span><span class=s1>'    '</span><span class=p>))</span><span class=w></span><span class=go>var main = function(greet) {    var hello = \"hello \" + greet;    return hello;};console.log(main('world'));</span><span class=gp>&gt;&gt;&gt;</span></code></pre><p>There is also one for printing without any unneeded whitespaces, worksas a source minifier:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.unparsers.es5</span> <span class=kn>import</span> <span class=n>minify_print</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>minify_print</span><span class=p>(</span><span class=n>program</span><span class=p>))</span><span class=w></span><span class=go>var main=function(greet){var hello=\"hello \"+greet;return hello;};...</span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>minify_print</span><span class=p>(</span><span class=n>program</span><span class=p>,</span> <span class=n>obfuscate</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>obfuscate_globals</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span><span class=w></span><span class=go>var a=function(b){var a=\"hello \"+b;return a;};console.log(a('world'));</span></code></pre><p>Note that in the second example, the <span class=\"docutils literal\">obfuscate_globals</span> option wasonly enabled to demonstrate the source obfuscation on the global scope,and this is generally not an option that should be enabled on productionlibrary code that is meant to be reused by other packages (other sourcesreferencing the original unobfuscated names will be unable to do so).</p><p>Alternatively, direct invocation on a raw string can be done using theattributes provided under the same name as the above base objects thatwere imported initially.  Relevant keyword arguments would be divertedto the appropriate underlying functions, for example:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=c1># pretty print without comments being parsed</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>es5</span><span class=o>.</span><span class=n>pretty_print</span><span class=p>(</span><span class=n>program_source</span><span class=p>))</span><span class=w></span><span class=go>var main = function(greet) {  var hello = \"hello \" + greet;  return hello;};console.log(main('world'));</span><span class=gp>&gt;&gt;&gt; </span><span class=c1># pretty print with comments parsed</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>es5</span><span class=o>.</span><span class=n>pretty_print</span><span class=p>(</span><span class=n>program_source</span><span class=p>,</span> <span class=n>with_comments</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span><span class=w></span><span class=go>// simple programvar main = function(greet) {  var hello = \"hello \" + greet;  return hello;};console.log(main('world'));</span><span class=gp>&gt;&gt;&gt; </span><span class=c1># minify print</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>es5</span><span class=o>.</span><span class=n>minify_print</span><span class=p>(</span><span class=n>program_source</span><span class=p>,</span> <span class=n>obfuscate</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span><span class=w></span><span class=go>var main=function(b){var a=\"hello \"+b;return a;};console.log(main('world'));</span></code></pre></section><section id=source-map-generation><h4>Source map generation</h4><p>For the generation of source maps, a lower level unparser instance canbe constructed through one of the printer factory functions.  Passingin an AST node will produce a generator which produces tuples containingthe yielded text fragment, plus other information which will aid in thegeneration of source maps.  There are helper functions from the<span class=\"docutils literal\">calmjs.parse.sourcemap</span> module can be used like so to write theregenerated source code to some stream, along with processing theresults into a sourcemap file.  An example:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>import</span> <span class=nn>json</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>io</span> <span class=kn>import</span> <span class=n>StringIO</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.unparsers.es5</span> <span class=kn>import</span> <span class=n>pretty_printer</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.sourcemap</span> <span class=kn>import</span> <span class=n>encode_sourcemap</span><span class=p>,</span> <span class=n>write</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>stream_p</span> <span class=o>=</span> <span class=n>StringIO</span><span class=p>()</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>print_p</span> <span class=o>=</span> <span class=n>pretty_printer</span><span class=p>()</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>rawmap_p</span><span class=p>,</span> <span class=n>_</span><span class=p>,</span> <span class=n>names_p</span> <span class=o>=</span> <span class=n>write</span><span class=p>(</span><span class=n>print_p</span><span class=p>(</span><span class=n>program</span><span class=p>),</span> <span class=n>stream_p</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>sourcemap_p</span> <span class=o>=</span> <span class=n>encode_sourcemap</span><span class=p>(</span><span class=w></span><span class=gp>... </span>    <span class=s1>'demo.min.js'</span><span class=p>,</span> <span class=n>rawmap_p</span><span class=p>,</span> <span class=p>[</span><span class=s1>'custom_name.js'</span><span class=p>],</span> <span class=n>names_p</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>sourcemap_p</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>sort_keys</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span><span class=w></span><span class=go>{  \"file\": \"demo.min.js\",  \"mappings\": \"AAEA;IACI;IACA;AACJ;AACA;\",  \"names\": [],  \"sources\": [    \"custom_name.js\"  ],  \"version\": 3}</span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>stream_p</span><span class=o>.</span><span class=n>getvalue</span><span class=p>())</span><span class=w></span><span class=go>var main = function(greet) {...</span></code></pre><p>Likewise, this works similarly for the minify printer, which providesthe ability to create out a minified output with unneeded whitespacesremoved and identifiers obfuscated with the shortest possible value.</p><p>Note that in previous example, the second return value in the writemethod was not used and that a custom value was passed in.  This issimply due to how the <span class=\"docutils literal\">program</span> was generated from a string and thusthe <span class=\"docutils literal\">sourcepath</span> attribute was not assigned with a usable value forpopulating the <span class=\"docutils literal\">\"sources\"</span> list in the resulting source map.  For thefollowing example, assign a value to that attribute on the programdirectly.</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.unparsers.es5</span> <span class=kn>import</span> <span class=n>minify_printer</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>program</span><span class=o>.</span><span class=n>sourcepath</span> <span class=o>=</span> <span class=s1>'demo.js'</span>  <span class=c1># say this was opened there</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>stream_m</span> <span class=o>=</span> <span class=n>StringIO</span><span class=p>()</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>print_m</span> <span class=o>=</span> <span class=n>minify_printer</span><span class=p>(</span><span class=n>obfuscate</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>obfuscate_globals</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>sourcemap_m</span> <span class=o>=</span> <span class=n>encode_sourcemap</span><span class=p>(</span><span class=w></span><span class=gp>... </span>    <span class=s1>'demo.min.js'</span><span class=p>,</span> <span class=o>*</span><span class=n>write</span><span class=p>(</span><span class=n>print_m</span><span class=p>(</span><span class=n>program</span><span class=p>),</span> <span class=n>stream_m</span><span class=p>))</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>sourcemap_m</span><span class=p>,</span> <span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span> <span class=n>sort_keys</span><span class=o>=</span><span class=kc>True</span><span class=p>))</span><span class=w></span><span class=go>{  \"file\": \"demo.min.js\",  \"mappings\": \"AAEA,IAAIA,CAAK,CAAE,SAASC,CAAK,CAAE,CACvB,...,YAAYF,CAAI\",  \"names\": [    \"main\",    \"greet\",    \"hello\"  ],  \"sources\": [    \"demo.js\"  ],  \"version\": 3}</span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>stream_m</span><span class=o>.</span><span class=n>getvalue</span><span class=p>())</span><span class=w></span><span class=go>var a=function(b){var a=\"hello \"+b;return a;};console.log(a('world'));</span></code></pre><p>A high level API for working with named streams (i.e. opened files, orstream objects like <span class=\"docutils literal\">io.StringIO</span> assigned with a name attribute) isprovided by the <span class=\"docutils literal\">read</span> and <span class=\"docutils literal\">write</span> functions from <span class=\"docutils literal\">io</span> module.The following example shows how to use the function to read from astream and write out the relevant items back out to the write onlystreams:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse</span> <span class=kn>import</span> <span class=n>io</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>h4_program_src</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>'/tmp/html4.js'</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>h4_program_min</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>'/tmp/html4.min.js'</span><span class=p>,</span> <span class=s1>'w+'</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>h4_program_map</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>'/tmp/html4.min.js.map'</span><span class=p>,</span> <span class=s1>'w+'</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>h4_program</span> <span class=o>=</span> <span class=n>io</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>es5</span><span class=p>,</span> <span class=n>h4_program_src</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>h4_program</span><span class=p>)</span><span class=w></span><span class=go>var bold = function(s) {  return '&lt;b&gt;' + s + '&lt;/b&gt;';};var italics = function(s) {  return '&lt;i&gt;' + s + '&lt;/i&gt;';};</span><span class=gp>&gt;&gt;&gt; </span><span class=n>io</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>print_m</span><span class=p>,</span> <span class=n>h4_program</span><span class=p>,</span> <span class=n>h4_program_min</span><span class=p>,</span> <span class=n>h4_program_map</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>pos</span> <span class=o>=</span> <span class=n>h4_program_map</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>h4_program_map</span><span class=o>.</span><span class=n>read</span><span class=p>())</span><span class=w></span><span class=go>{\"file\": \"html4.min.js\", \"mappings\": ..., \"version\": 3}</span><span class=gp>&gt;&gt;&gt; </span><span class=n>pos</span> <span class=o>=</span> <span class=n>h4_program_min</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>h4_program_min</span><span class=o>.</span><span class=n>read</span><span class=p>())</span><span class=w></span><span class=go>var b=function(a){return'&lt;b&gt;'+a+'&lt;/b&gt;';};var a=function(a){...};//# sourceMappingURL=html4.min.js.map</span></code></pre><p>For a simple concatenation of multiple sources into one file, along withinline source map (i.e. where the sourceMappingURL is a <span class=\"docutils literal\">data:</span> URL ofthe base64 encoding of the JSON string), the following may be done:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=n>files</span> <span class=o>=</span> <span class=p>[</span><span class=nb>open</span><span class=p>(</span><span class=s1>'/tmp/html4.js'</span><span class=p>),</span> <span class=nb>open</span><span class=p>(</span><span class=s1>'/tmp/legacy.js'</span><span class=p>)]</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>combined</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>'/tmp/combined.js'</span><span class=p>,</span> <span class=s1>'w+'</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>io</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>print_p</span><span class=p>,</span> <span class=p>(</span><span class=n>io</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>es5</span><span class=p>,</span> <span class=n>f</span><span class=p>)</span> <span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>files</span><span class=p>),</span> <span class=n>combined</span><span class=p>,</span> <span class=n>combined</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>pos</span> <span class=o>=</span> <span class=n>combined</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>combined</span><span class=o>.</span><span class=n>read</span><span class=p>())</span><span class=w></span><span class=go>var bold = function(s) {    return '&lt;b&gt;' + s + '&lt;/b&gt;';};var italics = function(s) {    return '&lt;i&gt;' + s + '&lt;/i&gt;';};var marquee = function(s) {    return '&lt;marquee&gt;' + s + '&lt;/marquee&gt;';};var blink = function(s) {    return '&lt;blink&gt;' + s + '&lt;/blink&gt;';};//# sourceMappingURL=data:application/json;base64;...</span></code></pre><p>In this example, the <span class=\"docutils literal\">io.write</span> function was provided with the prettyunparser, an generator expression that will produce the two ASTs fromthe two source files, and then both the target and sourcemap argumentare identical, which forces the source map generator to generate thebase64 encoding.</p><p>Do note that if multiple ASTs were supplied to a minifying printer withglobals being obfuscated, the resulting script will have the earlierobfuscated global names mangled by later ones, as the unparsing is doneseparately by the <span class=\"docutils literal\">io.write</span> function.</p></section><section id=extract-an-ast-to-a-dict><h4>Extract an AST to a <span class=\"docutils literal\">dict</span></h4><p>To assist with extracting values from an ast into a <span class=\"docutils literal\">dict</span>, the<span class=\"docutils literal\">calmjs.parse.unparsers.extractor</span> module provides an <span class=\"docutils literal\">ast_to_dict</span>helper function to aid with that.  This function will accept any validast that was parsed as the argument,</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.unparsers.extractor</span> <span class=kn>import</span> <span class=n>ast_to_dict</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>configuration</span> <span class=o>=</span> <span class=n>es5</span><span class=p>(</span><span class=s1>'''</span><span class=gp>... </span><span class=s1>var config = module.exports = </span><span class=si>{}</span><span class=s1>;</span><span class=gp>...</span><span class=w></span><span class=gp>... </span><span class=s1>var name = \"Morgan\"</span><span class=gp>... </span><span class=s1>msg = \"Hello, \" + name + \"! \" + \"Welcome to the host.\";</span><span class=gp>...</span><span class=w></span><span class=gp>... </span><span class=s1>config.server = {</span><span class=gp>... </span><span class=s1>  host: '0.0.0.0',</span><span class=gp>... </span><span class=s1>  port: process.env.PORT || 8000,</span><span class=gp>... </span><span class=s1>  threads: 4 + 4,</span><span class=gp>... </span><span class=s1>  columns: ['id', 'name', 'description'],</span><span class=gp>... </span><span class=s1>  memory: 1 &lt;&lt; 15,</span><span class=gp>... </span><span class=s1>  msg: msg</span><span class=gp>... </span><span class=s1>};</span><span class=gp>...</span><span class=w></span><span class=gp>... </span><span class=s1>// default proxy stub</span><span class=gp>... </span><span class=s1>config.proxy = {</span><span class=gp>... </span><span class=s1>  host: 'localhost',</span><span class=gp>... </span><span class=s1>  port: 8080,</span><span class=gp>... </span><span class=s1>  options: {</span><span class=gp>... </span><span class=s1>    \"https\": !1,</span><span class=gp>... </span><span class=s1>    \"threshold\": -100</span><span class=gp>... </span><span class=s1>  }</span><span class=gp>... </span><span class=s1>};</span><span class=gp>... </span><span class=s1>'''</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>baseconf</span> <span class=o>=</span> <span class=n>ast_to_dict</span><span class=p>(</span><span class=n>configuration</span><span class=p>)</span></code></pre><p>Accessing the values is simply done as a mapping:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>baseconf</span><span class=p>[</span><span class=s1>'name'</span><span class=p>])</span><span class=w></span><span class=go>Morgan</span></code></pre><p>Assignments are bound to the entire expression, i.e. not interpreteddown to individual existing assignments.</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=n>baseconf</span><span class=p>[</span><span class=s1>'config'</span><span class=p>]</span><span class=w></span><span class=go>{}</span><span class=gp>&gt;&gt;&gt; </span><span class=n>baseconf</span><span class=p>[</span><span class=s1>'config.server'</span><span class=p>][</span><span class=s1>'columns'</span><span class=p>]</span><span class=w></span><span class=go>['id', 'name', 'description']</span><span class=gp>&gt;&gt;&gt; </span><span class=n>baseconf</span><span class=p>[</span><span class=s1>'config.server'</span><span class=p>][</span><span class=s1>'msg'</span><span class=p>]</span><span class=w></span><span class=go>'msg'</span><span class=gp>&gt;&gt;&gt; </span><span class=n>baseconf</span><span class=p>[</span><span class=s1>'config.proxy'</span><span class=p>][</span><span class=s1>'options'</span><span class=p>][</span><span class=s1>'threshold'</span><span class=p>]</span><span class=w></span><span class=go>-100</span></code></pre><p>Note that the <span class=\"docutils literal\"><span class=pre>-100</span></span> value involves folding the unary expression withthe <span class=\"docutils literal\">-</span> operator, and by default all other expressions of this typeare simply written back out as is.</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=n>baseconf</span><span class=p>[</span><span class=s1>'config.proxy'</span><span class=p>][</span><span class=s1>'options'</span><span class=p>][</span><span class=s1>'https'</span><span class=p>]</span><span class=w></span><span class=go>'!1'</span><span class=gp>&gt;&gt;&gt; </span><span class=n>baseconf</span><span class=p>[</span><span class=s1>'msg'</span><span class=p>]</span><span class=w></span><span class=go>'\"Hello, \" + name + \"! \" + \"Welcome to the host.\"'</span><span class=gp>&gt;&gt;&gt; </span><span class=n>baseconf</span><span class=p>[</span><span class=s1>'config.server'</span><span class=p>][</span><span class=s1>'threads'</span><span class=p>]</span><span class=w></span><span class=go>'4 + 4'</span></code></pre><p>To assist with a more generalized usage, the <span class=\"docutils literal\">ast_to_dict</span> provides anadditional <span class=\"docutils literal\">fold_ops</span> argument.  When set to <span class=\"docutils literal\">True</span>, operatorfolding will be enabled on supported types; for example, constants willbe attempted to be folded into a single value as per how operators arehandled in the ECMAScript specification.  This is often useful forensuring concatenated strings are merged, and normalizing short-handdefinition of boolean values via <span class=\"docutils literal\">!0</span> or <span class=\"docutils literal\">!1</span>, among other commonlyseen expressions.</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=n>foldedconf</span> <span class=o>=</span> <span class=n>ast_to_dict</span><span class=p>(</span><span class=n>configuration</span><span class=p>,</span> <span class=n>fold_ops</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>foldedconf</span><span class=p>[</span><span class=s1>'config.server'</span><span class=p>][</span><span class=s1>'threads'</span><span class=p>]</span><span class=w></span><span class=go>8</span><span class=gp>&gt;&gt;&gt; </span><span class=n>foldedconf</span><span class=p>[</span><span class=s1>'config.server'</span><span class=p>][</span><span class=s1>'memory'</span><span class=p>]</span><span class=w></span><span class=go>32768</span><span class=gp>&gt;&gt;&gt; </span><span class=n>foldedconf</span><span class=p>[</span><span class=s1>'config.server'</span><span class=p>][</span><span class=s1>'port'</span><span class=p>]</span><span class=w></span><span class=go>8000</span><span class=gp>&gt;&gt;&gt; </span><span class=n>foldedconf</span><span class=p>[</span><span class=s1>'config.proxy'</span><span class=p>][</span><span class=s1>'options'</span><span class=p>][</span><span class=s1>'https'</span><span class=p>]</span><span class=w></span><span class=go>False</span><span class=gp>&gt;&gt;&gt; </span><span class=c1># variables will remain as is</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>foldedconf</span><span class=p>[</span><span class=s1>'config.server'</span><span class=p>][</span><span class=s1>'msg'</span><span class=p>]</span><span class=w></span><span class=go>'msg'</span><span class=gp>&gt;&gt;&gt; </span><span class=c1># however, in the context of a concatenated string, it will form</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=c1># a format string instead.</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>foldedconf</span><span class=p>[</span><span class=s1>'msg'</span><span class=p>]</span><span class=w></span><span class=go>'Hello, {name}! Welcome to the host.'</span></code></pre><p>As noted, any valid AST may serve as the input argument, with anydangling expressions (i.e. those that are not assigned or bound to aname) simply be appened to a list keyed under of its outermost asttype.</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.asttypes</span> <span class=kn>import</span> <span class=p>(</span><span class=w></span><span class=gp>... </span>    <span class=n>Identifier</span><span class=p>,</span> <span class=n>FuncExpr</span><span class=p>,</span> <span class=n>UnaryExpr</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>dict_of_ast</span> <span class=o>=</span> <span class=n>ast_to_dict</span><span class=p>(</span><span class=n>es5</span><span class=p>(</span><span class=sa>u</span><span class=s2>\"\"\"</span><span class=gp>... </span><span class=s2>var i;</span><span class=gp>... </span><span class=s2>i;</span><span class=gp>... </span><span class=s2>!'ok';</span><span class=gp>... </span><span class=s2>function foo(bar) {</span><span class=gp>... </span><span class=s2>    baz = true;</span><span class=gp>... </span><span class=s2>}</span><span class=gp>... </span><span class=s2>(function(y) {</span><span class=gp>... </span><span class=s2>    x = 1;</span><span class=gp>... </span><span class=s2>});</span><span class=gp>... </span><span class=s2>\"\"\"</span><span class=p>),</span> <span class=n>fold_ops</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>dict_of_ast</span><span class=p>[</span><span class=s1>'i'</span><span class=p>]</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>dict_of_ast</span><span class=p>[</span><span class=n>Identifier</span><span class=p>]</span><span class=w></span><span class=go>['i']</span><span class=gp>&gt;&gt;&gt; </span><span class=n>dict_of_ast</span><span class=p>[</span><span class=n>UnaryExpr</span><span class=p>]</span>  <span class=c1># not simply string or boolean</span><span class=w></span><span class=go>[False]</span><span class=gp>&gt;&gt;&gt; </span><span class=n>dict_of_ast</span><span class=p>[</span><span class=s1>'foo'</span><span class=p>]</span>  <span class=c1># named function resolved</span><span class=w></span><span class=go>[['bar'], {'baz': True}]</span><span class=gp>&gt;&gt;&gt; </span><span class=n>dict_of_ast</span><span class=p>[</span><span class=n>FuncExpr</span><span class=p>]</span><span class=w></span><span class=go>[[['y'], {'x': 1}]]</span></code></pre></section></section><section id=advanced-usage><h3>Advanced usage</h3><section id=lower-level-unparsing-api><h4>Lower level unparsing API</h4><p>Naturally, the printers demonstrated previously are constructed usingthe underlying Unparser class, which in turn bridges together the walkfunction and the Dispatcher class found in the walker module.  The walkfunction walks through the AST node with an instance of the Dispatcherclass, which provides a description of all node types for the particulartype of AST node provided, along with the relevant handlers.  Thesehandlers can be set up using existing rule provider functions.  Forinstance, a printer for obfuscating identifier names while maintainingindentation for the output of an ES5 AST can be constructed like so:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.unparsers.es5</span> <span class=kn>import</span> <span class=n>Unparser</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.rules</span> <span class=kn>import</span> <span class=n>indent</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.rules</span> <span class=kn>import</span> <span class=n>obfuscate</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>pretty_obfuscate</span> <span class=o>=</span> <span class=n>Unparser</span><span class=p>(</span><span class=n>rules</span><span class=o>=</span><span class=p>(</span><span class=w></span><span class=gp>... </span>    <span class=c1># note that indent must come after, so that the whitespace</span><span class=w></span><span class=gp>... </span>    <span class=c1># handling rules by indent will shadow over the minimum set</span><span class=w></span><span class=gp>... </span>    <span class=c1># provided by obfuscate.</span><span class=w></span><span class=gp>... </span>    <span class=n>obfuscate</span><span class=p>(</span><span class=n>obfuscate_globals</span><span class=o>=</span><span class=kc>False</span><span class=p>),</span><span class=w></span><span class=gp>... </span>    <span class=n>indent</span><span class=p>(</span><span class=n>indent_str</span><span class=o>=</span><span class=s1>'    '</span><span class=p>),</span><span class=w></span><span class=gp>... </span><span class=p>))</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>math_module</span> <span class=o>=</span> <span class=n>es5</span><span class=p>(</span><span class=s1>'''</span><span class=gp>... </span><span class=s1>(function(root) {</span><span class=gp>... </span><span class=s1>  var fibonacci = function(count) {</span><span class=gp>... </span><span class=s1>    if (count &lt; 2)</span><span class=gp>... </span><span class=s1>      return count;</span><span class=gp>... </span><span class=s1>    else</span><span class=gp>... </span><span class=s1>      return fibonacci(count - 1) + fibonacci(count - 2);</span><span class=gp>... </span><span class=s1>  };</span><span class=gp>...</span><span class=w></span><span class=gp>... </span><span class=s1>  var factorial = function(n) {</span><span class=gp>... </span><span class=s1>    if (n &lt; 1)</span><span class=gp>... </span><span class=s1>      throw new Error('factorial where n &lt; 1 not supported');</span><span class=gp>... </span><span class=s1>    else if (n == 1)</span><span class=gp>... </span><span class=s1>      return 1;</span><span class=gp>... </span><span class=s1>    else</span><span class=gp>... </span><span class=s1>      return n * factorial(n - 1);</span><span class=gp>... </span><span class=s1>  }</span><span class=gp>...</span><span class=w></span><span class=gp>... </span><span class=s1>  root.fibonacci = fibonacci;</span><span class=gp>... </span><span class=s1>  root.factorial = factorial;</span><span class=gp>... </span><span class=s1>})(window);</span><span class=gp>...</span><span class=w></span><span class=gp>... </span><span class=s1>var value = window.factorial(5) / window.fibonacci(5);</span><span class=gp>... </span><span class=s1>console.log('the value is ' + value);</span><span class=gp>... </span><span class=s1>'''</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=s1>''</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>c</span><span class=o>.</span><span class=n>text</span> <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>pretty_obfuscate</span><span class=p>(</span><span class=n>math_module</span><span class=p>)))</span><span class=w></span><span class=go>(function(b) {    var a = function(b) {        if (b &lt; 2) return b;        else return a(b - 1) + a(b - 2);    };    var c = function(a) {        if (a &lt; 1) throw new Error('factorial where n &lt; 1 not supported');        else if (a == 1) return 1;        else return a * c(a - 1);    };    b.fibonacci = a;    b.factorial = c;})(window);var value = window.factorial(5) / window.fibonacci(5);console.log('the value is ' + value);</span></code></pre><p>Each of the rules (functions) have specific options that are set usingspecific keyword arguments, details are documented in their respectivedocstrings.</p><p>At an even lower level, the <span class=\"docutils literal\">ruletypes</span> submodule contains theprimitives that form the underlying definitions that each Dispatcherimplementations currently available.  For an example on how this mightbe extended beyond simply unparsing back to text, see the source forthe extractor unparser module.</p></section><section id=tree-walking><h4>Tree walking</h4><p>AST (Abstract Syntax Tree) generic walker classes are defined under theappropriate named modules <span class=\"docutils literal\">calmjs.parse.walkers</span>.  Two default walkerclasses are supplied.  One of them is the <span class=\"docutils literal\">ReprWalker</span> class which waspreviously demonstrated.  The other is the <span class=\"docutils literal\">Walker</span> class, whichsupplies a collection of generic tree walking methods for a tree of ASTnodes.  The following is an example usage on how one might extract allObject assignments from a given script file:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse</span> <span class=kn>import</span> <span class=n>es5</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.asttypes</span> <span class=kn>import</span> <span class=n>Object</span><span class=p>,</span> <span class=n>VarDecl</span><span class=p>,</span> <span class=n>FunctionCall</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.walkers</span> <span class=kn>import</span> <span class=n>Walker</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>walker</span> <span class=o>=</span> <span class=n>Walker</span><span class=p>()</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>declarations</span> <span class=o>=</span> <span class=n>es5</span><span class=p>(</span><span class=s1>'''</span><span class=gp>... </span><span class=s1>var i = 1;</span><span class=gp>... </span><span class=s1>var s = {</span><span class=gp>... </span><span class=s1>    a: \"test\",</span><span class=gp>... </span><span class=s1>    o: {</span><span class=gp>... </span><span class=s1>        v: \"value\"</span><span class=gp>... </span><span class=s1>    }</span><span class=gp>... </span><span class=s1>};</span><span class=gp>... </span><span class=s1>foo({foo: \"bar\"});</span><span class=gp>... </span><span class=s1>function bar() {</span><span class=gp>... </span><span class=s1>    var t = {</span><span class=gp>... </span><span class=s1>        foo: \"bar\",</span><span class=gp>... </span><span class=s1>    };</span><span class=gp>... </span><span class=s1>    return t;</span><span class=gp>... </span><span class=s1>}</span><span class=gp>... </span><span class=s1>foo.bar = bar;</span><span class=gp>... </span><span class=s1>foo.bar();</span><span class=gp>... </span><span class=s1>'''</span><span class=p>)</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=c1># print out the object nodes that were part of some assignments</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>walker</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>declarations</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>node</span><span class=p>:</span> <span class=p>(</span><span class=w></span><span class=gp>... </span>        <span class=nb>isinstance</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>VarDecl</span><span class=p>)</span> <span class=ow>and</span><span class=w></span><span class=gp>... </span>        <span class=nb>isinstance</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>initializer</span><span class=p>,</span> <span class=n>Object</span><span class=p>))):</span><span class=w></span><span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>initializer</span><span class=p>)</span><span class=w></span><span class=gp>...</span><span class=w></span><span class=go>{  a: \"test\",  o: {    v: \"value\"  }}{  foo: \"bar\"}</span><span class=gp>&gt;&gt;&gt; </span><span class=c1># print out all function calls</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>node</span> <span class=ow>in</span> <span class=n>walker</span><span class=o>.</span><span class=n>filter</span><span class=p>(</span><span class=n>declarations</span><span class=p>,</span> <span class=k>lambda</span> <span class=n>node</span><span class=p>:</span> <span class=p>(</span><span class=w></span><span class=gp>... </span>        <span class=nb>isinstance</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>FunctionCall</span><span class=p>))):</span><span class=w></span><span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>node</span><span class=o>.</span><span class=n>identifier</span><span class=p>)</span><span class=w></span><span class=gp>...</span><span class=w></span><span class=go>foofoo.bar</span></code></pre><p>Further details and example usage can be consulted from the variousdocstrings found within the module.</p></section></section><section id=limitations><h3>Limitations</h3><p class=section-subtitle id=comments-currently-may-be-incomplete>Comments currently may be incomplete</p><p>Due to the implementation of the lexer/parser along with how the astnode types have been implemented, there are restrictions on where thecomments may be exposed if enabled.  Currently, such limitations existsfor nodes that are created by production rules that consume multiplelexer tokens at once - only comments preceding the first token will becaptured, with all remaining comments discarded.</p><p>For example, this limitation means that any comments before the <span class=\"docutils literal\">else</span>token will be omitted (as the comment will be provided by the <span class=\"docutils literal\">if</span>token), as the production rule for an <span class=\"docutils literal\">If</span> node consumes both thesetokens and the node as implemented only provides a single slot forcomments.  Likewise, any comments before the <span class=\"docutils literal\">:</span> token in a ternarystatement will also be discarded as that is the second token consumedby the production rule that produces a <span class=\"docutils literal\">Conditional</span> node.</p></section><section id=troubleshooting><h3>Troubleshooting</h3><section id=instantiation-of-parser-classes-fails-with-unicodeencodeerror><h4>Instantiation of parser classes fails with <span class=\"docutils literal\">UnicodeEncodeError</span></h4><p>For platforms or systems that do not have utf8 configured as the defaultencoding, the automatic table generation may fail when constructing aparser instance.  An example:</p><pre><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>calmjs.parse.parsers</span> <span class=kn>import</span> <span class=n>es5</span><span class=w></span><span class=gp>&gt;&gt;&gt; </span><span class=n>parser</span> <span class=o>=</span> <span class=n>es5</span><span class=o>.</span><span class=n>Parser</span><span class=p>()</span><span class=w></span><span class=gt>Traceback (most recent call last):</span><span class=w>  </span><span class=c>...</span><span class=w></span>  File <span class=nb>\"c:\\python35\\....\\ply\\lex.py\"</span>, line <span class=m>1043</span>, in <span class=n>lex</span><span class=w>    </span><span class=n>lexobj</span><span class=o>.</span><span class=n>writetab</span><span class=p>(</span><span class=n>lextab</span><span class=p>,</span> <span class=n>outputdir</span><span class=p>)</span><span class=w></span>  File <span class=nb>\"c:\\python35\\....\\ply\\lex.py\"</span>, line <span class=m>195</span>, in <span class=n>writetab</span><span class=w>    </span><span class=n>tf</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>'_lexstatere   = </span><span class=si>%s</span><span class=se>\\n</span><span class=s1>'</span> <span class=o>%</span> <span class=nb>repr</span><span class=p>(</span><span class=n>tabre</span><span class=p>))</span><span class=w></span>  File <span class=nb>\"c:\\python35\\lib\\encodings\\cp1252.py\"</span>, line <span class=m>19</span>, in <span class=n>encode</span><span class=w>    </span><span class=k>return</span> <span class=n>codecs</span><span class=o>.</span><span class=n>charmap_encode</span><span class=p>(</span><span class=nb>input</span><span class=p>,</span><span class=bp>self</span><span class=o>.</span><span class=n>errors</span><span class=p>,</span><span class=n>encoding_table</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span><span class=w></span><span class=gr>UnicodeEncodeError</span>: <span class=n>'charmap' codec can't encode character '\\u02c1' ...</span></code></pre><p>A workaround helper script is provided, it may be executed like so:</p><pre><code><span class=gp>$ </span>python<span class=w> </span>-m<span class=w> </span>calmjs.parse.parsers.optimize</code></pre><p>Further details on this topic may be found in the <a href=#manual-optimization rel=nofollow>manual optimization</a>section of this document.</p></section><section id=warning-there-are-unused-tokens-on-import><h4>WARNING: There are unused tokens on import</h4><p>This indicates that the installation method or source for this packagebeing imported isn\u2019t optimized.  A quick workaround is to follow theinstructions at the <a href=#manual-optimization rel=nofollow>manual optimization</a> section of this document toensure these messages are no longer generated (and if this warninghappens every time the module is imported, it means the symbol tablesare regenerated every time that happens and this extra computationaloverhead should be corrected through the generation of that optimizationmodule).</p><p>The optimization modules are included with the wheel release and thesource release on PyPI, but it is not part of the source repository asgenerated code are never committed.  Should a binary release made bya third-party results in this warning upon import, their release shouldbe corrected to include the optimization module.</p><p>Moreover, there are safeguards in place that prevent this warning frombeing generated for releases made for releases from 1.3.1 onwards bya more heavy handed enforcement of this optimization step at build time,but persistent (or careless) actors may circumvent this during the buildprocess, but official releases made through PyPI should include therequired optimization for all supported <span class=\"docutils literal\">ply</span> versions (which areversions 3.6 to 3.11, inclusive).</p><p>Alternatively, this issue may also occur via usage of <span class=\"docutils literal\">pyinstaller</span>if the package metadata is not copied for <span class=\"docutils literal\">ply</span> in versions prior to<span class=\"docutils literal\"><span class=pre>calmjs.parse-1.3.1</span></span> and will always occur if the hidden imports arenot declared for those optimization modules.  The following hook shouldmay be used to ensure <span class=\"docutils literal\">calmjs.parse</span> functions correctly in the compiledbinary:</p><pre><code><span class=kn>from</span> <span class=nn>PyInstaller.utils.hooks</span> <span class=kn>import</span> <span class=n>collect_data_files</span><span class=p>,</span> <span class=n>copy_metadata</span><span class=w></span><span class=kn>from</span> <span class=nn>calmjs.parse.utils</span> <span class=kn>import</span> <span class=n>generate_tab_names</span><span class=w></span><span class=n>datas</span> <span class=o>=</span> <span class=p>[]</span><span class=w></span><span class=n>datas</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>collect_data_files</span><span class=p>(</span><span class=s2>\"ply\"</span><span class=p>))</span><span class=w></span><span class=n>datas</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>copy_metadata</span><span class=p>(</span><span class=s2>\"ply\"</span><span class=p>))</span><span class=w></span><span class=n>datas</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>collect_data_files</span><span class=p>(</span><span class=s2>\"calmjs.parse\"</span><span class=p>))</span><span class=w></span><span class=n>datas</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>copy_metadata</span><span class=p>(</span><span class=s2>\"calmjs.parse\"</span><span class=p>))</span><span class=w></span><span class=n>hiddenimports</span> <span class=o>=</span> <span class=p>[]</span><span class=w></span><span class=n>hiddenimports</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>generate_tab_names</span><span class=p>(</span><span class=s1>'calmjs.parse.parsers.es5'</span><span class=p>))</span><span class=w></span><span class=c1># if running under Python 3 with ply-3.11, above is equivalent to</span><span class=w></span><span class=c1># hiddenimports = [</span><span class=w></span><span class=c1>#     \"calmjs.parse.parsers.lextab_es5_py3_ply3_11\",</span><span class=w></span><span class=c1>#     \"calmjs.parse.parsers.yacctab_es5_py3_ply3_11\",</span><span class=w></span><span class=c1># ]</span></code></pre></section><section id=slow-performance><h4>Slow performance</h4><p>As this program is basically fully decomposed into very small functions,this result in massive performance penalties as compared to otherimplementations due to function calls being one of the most expensiveoperations in Python.  It may be possible to further optimize thedefinitions within the description in the Dispatcher by combining allthe resolved generator functions for each asttype Node type, howeverthis will may require both the token and layout functions not havingarguments with name collisions, and the new function will take in allof those arguments in one go.</p></section><section id=error-message-about-import-error-when-trying-to-install><h4>ERROR message about import error when trying to install</h4><p>As noted in the error message, the <a href=\"https://pypi.python.org/pypi/ply\" rel=nofollow><span class=\"docutils literal\">ply</span></a> and <span class=\"docutils literal\">setuptools</span> packagemust be installed before attempting to install build the package in thesituation where the pre-generated modules are missing.  This situationmay be caused by building directly using the source provided by thesource code repository, or where there is no matching pre-generatedmodule matching with the installed version of <span class=\"docutils literal\">ply</span>.  Please ensure that<span class=\"docutils literal\">ply</span> is installed and available first before installing from source ifthis error message is sighted.</p></section></section><section id=contribute><h3>Contribute</h3><ul class=simple><li><p>Issue Tracker: <a href=\"https://github.com/calmjs/calmjs.parse/issues\" rel=nofollow>https://github.com/calmjs/calmjs.parse/issues</a></li><li><p>Source Code: <a href=\"https://github.com/calmjs/calmjs.parse\" rel=nofollow>https://github.com/calmjs/calmjs.parse</a></li></ul></section><section id=legal><h3>Legal</h3><p>The <span class=\"docutils literal\">calmjs.parse</span> package is copyright (c) 2017 Auckland BioengineeringInstitute, University of Auckland.  The <span class=\"docutils literal\">calmjs.parse</span> package islicensed under the MIT license (specifically, the Expat License), whichis also the same license that the package <span class=\"docutils literal\">slimit</span> was released under.</p><p>The lexer, parser and the other types definitions portions wereoriginally imported from the <span class=\"docutils literal\">slimit</span> package; <span class=\"docutils literal\">slimit</span> is copyright (c)Ruslan Spivak.</p><p>The Calmjs project is copyright (c) 2017 Auckland BioengineeringInstitute, University of Auckland.</p></section></section><section id=changelog><h2>Changelog</h2><section id=section-1><h3>1.3.1 - 2023-10-28</h3><ul class=simple><li><p>Modified existing <span class=\"docutils literal\">setup.py</span> hook from an install hook to a buildhook to ensure the generated module files are present.  Should any ofthose modules are missing and the required dependencies for are notpresent (i.e. <span class=\"docutils literal\">ply</span> and <span class=\"docutils literal\">setuptools</span>), the build will result in anon-zero exit status and the documented error message should reflectwhich of the required dependencies are missing.</li></ul></section><section id=section-2><h3>1.3.0 - 2021-10-08</h3><ul class=simple><li><p>Introduce the extractor unparser - an unparser that will unparse avalid AST into a <span class=\"docutils literal\">dict</span>.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/35\" rel=nofollow>#35</a><a href=\"https://github.com/calmjs/calmjs.parse/issues/38\" rel=nofollow>#38</a>]</li><li><p>Correct the JoinAttr ruletype such that the intended empty definitionvalue is passed to walk if it was defined as such to avoid anunintended infinite recursion.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/36\" rel=nofollow>#36</a>]</li></ul></section><section id=section-3><h3>1.2.5 - 2020-07-03</h3><ul class=simple><li><p>Will now import Iterable from the Python 3.3+ location as the previouslocation is marked for removal in Python 3.9.  The import will stillhave a fallback to the previous location in order to maintain supportfor Python 2.7.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/31\" rel=nofollow>#31</a>]</li><li><p>Provide a test case helper to ensure that the generic <span class=\"docutils literal\">Program</span> reprsignature is provided to assist with test case portability.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/33\" rel=nofollow>#33</a>]</li><li><p>In the <span class=\"docutils literal\">calmjs.parse.vlq</span> module, implemented the <span class=\"docutils literal\">decode_vlq</span>helper for completeness/symmetry to the <span class=\"docutils literal\">encode_vlq</span> helper.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/33\" rel=nofollow>#33</a>]</li></ul></section><section id=section-4><h3>1.2.4 - 2020-03-17</h3><ul class=simple><li><p>Correct usage of <span class=\"docutils literal\">__doc__</span> to support level 2 optimized mode.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/29\" rel=nofollow>#29</a><a href=\"https://github.com/calmjs/calmjs.parse/issues/30\" rel=nofollow>#30</a>]</li><li><p>Corrected some minor string definition syntax, where raw string prefixshould be used but was not previously.</li></ul></section><section id=section-5><h3>1.2.2 - 2020-01-18</h3><ul class=simple><li><p>Correctly include LICENSE file in sdist.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/27\" rel=nofollow>#27</a><a href=\"https://github.com/calmjs/calmjs.parse/issues/28\" rel=nofollow>#28</a>]</li><li><p>Include the correct test data general form for some previously addedtest cases to better accommodate already planned future features.</li></ul></section><section id=section-6><h3>1.2.1 - 2019-11-21</h3><ul class=simple><li><p>Fix the issue of failures with regex statement that occur due to lexerbeing in a state where the disambiguation between REGEX or DIV tokentypes is not immediately possible, as tokens such as RBRACE, PLUSPLUSor MINUSMINUS must be consumed by parser in order to be disambiguated,but due to the lookahead nature done by yacc, the DIV token will beprematurely produced and the only way to achieve this is during theerror handling stage.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/25\" rel=nofollow>#25</a><a href=\"https://github.com/calmjs/calmjs.parse/issues/26\" rel=nofollow>#26</a>]</li><li><p>Part of the previous fix also removed newline or comment tokens frombeing reported as part of parsing error messages.</li></ul></section><section id=section-7><h3>1.2.0 - 2019-08-15</h3><ul class=simple><li><p>Partial support for parsing of comments.  Currently not all commentswill be captured during parsing, due to the desire to simplify accessof them through the <span class=\"docutils literal\">asttypes.Node</span> instances with the generic<span class=\"docutils literal\">comments</span> attribute provided by it.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/24\" rel=nofollow>#24</a>]</p><ul><li><p>Enabled by passing <span class=\"docutils literal\">with_comments=True</span> to the parser..</li><li><p>The limitation lies in the fact that if a node has multiple tokenslots (e.g. <span class=\"docutils literal\"><span class=pre>if...else</span></span>), the comments that lie immediate beforethe first will be captured, while the comments that lie immediate tothe subsequent ones will be omitted.  The fix would involveproviding a full syntax tree node types, and that the parser ruleswould need to be implemented in a more amenable manner such that thegeneration of such could be done.</li><li><p>All comments that lie immediately before the node are accessibleusing the <span class=\"docutils literal\">comments</span> attribute.</li><li><p>These comments nodes will not be yielded via the children() method.</li><li><p>Various features and methods have been updated to account forcomments.  Notably, sourcemap generation will be able to deal withsource fragments that contain newlines provided that both colno andlineno are provided.</li></ul></li><li><p>Correctly fail on incorrect hexadecimal/unicode escape sequences whilereporting the specific character location; also report on the startingposition of an unterminated string literal.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/23\" rel=nofollow>#23</a>]</li></ul></section><section id=section-8><h3>1.1.3 - 2018-11-08</h3><ul class=simple><li><p>Correct issues with certain non-optional spaces being omitted for theminify print cases, which caused malformed outputs.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/22\" rel=nofollow>#22</a>]</li></ul></section><section id=section-9><h3>1.1.2 - 2018-08-20</h3><ul class=simple><li><p>Default repr on synthetic nodes or nodes without column or row numberassigned should no longer error.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/20\" rel=nofollow>#20</a>]</li><li><p>The same line terminator regex introduced in 1.1.0 used for linecontinuation in strings now applied to the line terminator pattern tothe lexer, such that the line numbering is corrected for the Windowsspecific &lt;CR&gt;&lt;LF&gt; sequence.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/21\" rel=nofollow>#21</a>]</li></ul></section><section id=section-10><h3>1.1.1 - 2018-08-11</h3><ul class=simple><li><p>Ensure that the accounting of layout rule chunks is done correctly inthe case where layout handlers specified a tuple of layout rules forcombined handling.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/19\" rel=nofollow>#19</a>]</p><ul><li><p>The issue caused by this error manifest severely in the case wheremultiple layout rule tokens are produced in a manner that repeatsa pattern that also have a layout handler rule for them, whichdoes not typically happen for normal code with the standard printers(as layout chunks are many and they generally do not result in arepeated pattern that gets consumed).  However this is severelymanifested in the case of minified output with semicolons dropped,as that basically guarantee that any series of closing blocks thatfit the pattern to be simply dropped.</li></ul></li></ul></section><section id=section-11><h3>1.1.0 - 2018-08-07</h3><ul class=simple><li><p>Correct the implementation of line continuation in strings.  This alsomeant a change in the minify unparser so that it will continue toremove the line continuation sequences.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/16\" rel=nofollow>#16</a>]</li><li><p>Correct the implementation of ASI (automatic semicolon insertion) byintroducing a dedicated token type, such that the production ofempty statement can no longer happen and that distinguishes it fromproduction of statements that should not have ASI applied, such thatincorrectly successful parsing due to this issue will no longerresult.  [<a href=\"https://github.com/calmjs/calmjs.parse/issues/18\" rel=nofollow>#18</a><a href=\"https://github.com/rspivak/slimit/issues/29\" rel=nofollow>rspivak/slimit#29</a><a href=\"https://github.com/rspivak/slimit/issues/101\" rel=nofollow>rspivak/slimit#101</a>]</li></ul></section><section id=section-12><h3>1.0.1 - 2018-04-19</h3><ul class=simple><li><p>Ensure that the es5 Unparser pass on the prewalk_hooks argument inits constructor.</li><li><p>Minor packaging fixes; also include optimization modules for ply-3.11.</li></ul></section><section id=section-13><h3>1.0.0 - 2017-09-26</h3><p>Full support for sourcemaps; changes that make it possible follows:</p><ul class=simple><li><p>High level read/write functionality provided by a new <span class=\"docutils literal\">io</span> module.</li><li><p>There is now a <span class=\"docutils literal\">Deferrable</span> rule type for marking certain Tokensthat need extra handling.  The support for this has changed thevarious API that deals with setting up of this.</li><li><p>For support of the sourcemap generation, a number of new ruletypeshave been added.</li><li><p>The sourcemap write function had its argument order modified tobetter support the sourcepath tracking feature of input Nodes.  Itsreturn value also now match the ordering of the encode_sourcemapfunction.</li><li><p>The chunk types in ruletypes have been renamed, and also a new typecalled StreamFragment is introduced, so that multiple sources outputto a single stream can be properly tracked by the source mappingprocesses.</li><li><p><a href=\"https://github.com/rspivak/slimit/issues/66\" rel=nofollow>rspivak/slimit#66</a>should be fully supported now.</li></ul><p>Minify printer now has ability to shorten/obfuscate identifiers:</p><ul class=simple><li><p>Provide a name obfuscation function for shortening identifiers, tofurther achieve minified output.  Note that this does not yet fullyachieve the level of minification <span class=\"docutils literal\">slimit</span> had; future versionsmay implement this functionality as various AST transformations.</li><li><p>Also provided ability to drop unneeded semicolons.</li></ul><p>Other significant changes:</p><ul><li><p>Various changes to internal class and function names for the 1.0.0release.  A non exhaustive listing of changes to modules relative tothe root of this package name as compared to previous major releasefollows:</p><dl class=simple><dt><span class=\"docutils literal\">asttypes</span></dt><dd><ul class=simple><li><p>All <span class=\"docutils literal\">slimit</span> compatibility features removed.</li><li><p><span class=\"docutils literal\">Switch</span> (the incorrect version) removed.</li><li><p><span class=\"docutils literal\">SwitchStatement</span> -&gt; <span class=\"docutils literal\">Switch</span></li><li><p><span class=\"docutils literal\">SetPropAssign</span> constructor: <span class=\"docutils literal\">parameters</span> -&gt; <span class=\"docutils literal\">parameter</span></li><li><p><span class=\"docutils literal\">UnaryOp</span> -&gt; <span class=\"docutils literal\">UnaryExpr</span></li><li><p>Other general deprecated features also removed.</li></ul></dd><dt><span class=\"docutils literal\">factory</span></dt><dd><ul class=simple><li><p><span class=\"docutils literal\">Factory</span> -&gt; <span class=\"docutils literal\">SRFactory</span></li></ul></dd><dt><span class=\"docutils literal\">visitors</span></dt><dd><ul class=simple><li><p>Removed (details follow).</li></ul></dd><dt><span class=\"docutils literal\">walkers</span></dt><dd><ul class=simple><li><p><span class=\"docutils literal\">visitors.generic.ReprVisitor</span> -&gt; <span class=\"docutils literal\">walkers.ReprWalker</span></li></ul></dd><dt><span class=\"docutils literal\">layouts</span></dt><dd><ul class=simple><li><p>Module was split and reorganised; the simple base ones can befound in <span class=\"docutils literal\">handlers.core</span>, the indentation related features arenow in <span class=\"docutils literal\">handlers.indentation</span>.</li></ul></dd><dt><span class=\"docutils literal\">unparsers.base</span></dt><dd><ul class=simple><li><p><span class=\"docutils literal\">.default_layout_handlers</span> -&gt; <span class=\"docutils literal\">handlers.core.default_rules</span></li><li><p><span class=\"docutils literal\">.minimum_layout_handlers</span> -&gt; <span class=\"docutils literal\">handlers.core.minimum_rules</span></li></ul></dd><dt><span class=\"docutils literal\">unparsers.prettyprint</span></dt><dd><ul class=simple><li><p>Renamed to <span class=\"docutils literal\">unparsers.walker</span>.</li><li><p>The implementation was actually standard tree walking, nocorrectly implemented visitor functions/classes were ever present.</li></ul></dd><dt><span class=\"docutils literal\">vlq</span></dt><dd><ul class=simple><li><p><span class=\"docutils literal\">.create_sourcemap</span> -&gt; <span class=\"docutils literal\">sourcemap.create_sourcemap</span></li></ul></dd></dl></li><li><p>Broke up the visitors class as they weren\u2019t really visitors asdescribed.  The new implementations (calmjs.parse-0.9.0) were reallywalkers, so move them to that name and leave it at that.  Methodswere also renamed to better reflect their implementation and purpose.</li><li><p>Many slimit compatibility modules, classes and incorrectly implementedfunctionalities removed.</li><li><p>The usage of the Python 3 <span class=\"docutils literal\">str</span> type (<span class=\"docutils literal\">unicode</span> in Python 2) isnow enforced for the parser, to avoid various failure cases wheremismatch types occur.</li><li><p>The base Node asttype has a sourcepath attribute which is to be usedfor tracking the original source of the node; if assigned, all itssubnodes without sourcepath defined should be treated as from thatsource.</li><li><p>Also provide an even higher level function for usage with streamsthrough the <span class=\"docutils literal\">calmjs.parse.io</span> module.</li><li><p>Semicolons and braces added as structures to be rendered.</li></ul><p>Bug fixes:</p><ul class=simple><li><p>Functions starting with a non-word character will now always have awhitespace rendered before it to avoid syntax error.</li><li><p>Correct an incorrect iterator usage in the walk function.</li><li><p>Ensure List separators don\u2019t use the rowcol positions of a subsequentElision node.</li><li><p>Lexer will only report real lexer tokens on errors (ASI generatedtokens are now dropped as they don\u2019t exist in the original sourcewhich results in confusing rowcol reporting).</li><li><p><a href=\"https://github.com/rspivak/slimit/issues/57\" rel=nofollow>rspivak/slimit#57</a>,as it turns out <span class=\"docutils literal\">'\\0'</span> is not considered to be octal, but is a &lt;NUL&gt;character, which the rule to parse was not actually included in thelexer patches that were pulled in previous to this version.</li><li><p><a href=\"https://github.com/rspivak/slimit/issues/75\" rel=nofollow>rspivak/slimit#75</a>,Option for shadowing of names of named closures, which is now disabledby default (obfuscated named closures will not be shadowed by otherobfuscated names in children).</li><li><p>Expressions can no longer contain an unnamed function.</li></ul></section><section id=section-14><h3>0.10.1 - 2017-08-26</h3><ul class=simple><li><p>Corrected the line number reporting for the lexer, and correct thepropagation of that to the parser and the Node subclasses.  Fixes theincorrect implementation added by <a href=\"https://github.com/moses-palmer/slimit/commit/8f9a39c7769\" rel=nofollow>moses-palmer/slimit@8f9a39c7769</a> (wherethe line numbers are tabulated incorrectly when comments are present,and also the yacc tracking added by <a href=\"https://github.com/moses-palmer/slimit/commit/6aa92d68e0\" rel=nofollow>moses-palmer/slimit@6aa92d68e0</a> (wherethe custom lexer class does not provide the position attributesrequired by ply).</li><li><p>Implemented bookkeeping of column numbers.</li><li><p>Made other various changes to AST but for compatibility reasons (tonot force a major semver bump) they are only enabled with a flag tothe ES5 parser.</li><li><p>Corrected a fault with how switch/case statements are handled in a waythat may break compatibility; fixes are only enabled when flagged.<a href=\"https://github.com/rspivak/slimit/issues/94\" rel=nofollow>rspivak/slimit#94</a></li><li><p>The repr form of Node now shows the line/col number info by default;the visit method of the ReprVisitor class have not been changed, onlythe invocation of it via the callable form has as that is the calltarget for __repr__.  This is a good time to mention that namedmethods afford the most control for usage as documented already.</li><li><p>Parsers now accept an asttypes module during its construction.</li><li><p>Provide support for source map generation classes.</li><li><p>Introduced a flexible visitor function/state class that accepts adefinition of rules for the generation of chunk tuples that arecompatible for the source map generation.  A new way for prettyprinting and minification can be achieved using this module.</li></ul></section><section id=section-15><h3>0.9.0 - 2017-06-09</h3><ul class=simple><li><p>Initial release of the fork of <span class=\"docutils literal\">slimit.parser</span> and its parentmodules as <span class=\"docutils literal\">calmjs.parse</span>.</li><li><p>This release brings in a number of bug fixes that were available viaother forks of <span class=\"docutils literal\">slimit</span>, with modifications or even a completerevamp.</li><li><p>Issues addressed includes:</p><ul><li><p><a href=\"https://github.com/rspivak/slimit/issues/52\" rel=nofollow>rspivak/slimit#52</a>,<a href=\"https://github.com/rspivak/slimit/issues/59\" rel=nofollow>rspivak/slimit#59</a>,<a href=\"https://github.com/rspivak/slimit/issues/81\" rel=nofollow>rspivak/slimit#81</a>,<a href=\"https://github.com/rspivak/slimit/issues/90\" rel=nofollow>rspivak/slimit#90</a>(relating to conformance of ecma-262 7.6 identifier names)</li><li><p><a href=\"https://github.com/rspivak/slimit/issues/54\" rel=nofollow>rspivak/slimit#54</a>(fixed by tracking scope and executable current token in lexer)</li><li><p><a href=\"https://github.com/rspivak/slimit/issues/57\" rel=nofollow>rspivak/slimit#57</a>,<a href=\"https://github.com/rspivak/slimit/issues/70\" rel=nofollow>rspivak/slimit#70</a>(octal encoding (e.g 0), from <a href=\"https://github.com/redapple/slimit/commit/a93204577f\" rel=nofollow>redapple/slimit@a93204577f</a>)</li><li><p><a href=\"https://github.com/rspivak/slimit/issues/62\" rel=nofollow>rspivak/slimit#62</a>(formalized into a unittest that passed)</li><li><p><a href=\"https://github.com/rspivak/slimit/issues/73\" rel=nofollow>rspivak/slimit#73</a>(specifically the desire for a better repr; the minifier bits arenot relevant to this package)</li><li><p><a href=\"https://github.com/rspivak/slimit/pull/79\" rel=nofollow>rspivak/slimit#79</a>(tab module handling was completely reimplemented)</li><li><p><a href=\"https://github.com/rspivak/slimit/issues/82\" rel=nofollow>rspivak/slimit#82</a>(formalized into a unittest that passed)</li></ul></li><li><p>Include various changes gathered by <a href=\"https://github.com/rspivak/slimit/pull/65\" rel=nofollow>rspivak/slimit#65</a>, which may be the sourceof some of the fixes listed above.</li></ul></section></section>          </div>        </div>        <div id=\"data\" data-project-tabs-target=\"content\" class=\"vertical-tabs__content\" role=\"tabpanel\" aria-labelledby=\"mobile-data-tab\" tabindex=\"-1\">          <h2 class=\"page-title\">Project details</h2><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Project links</h3>  <ul class=\"vertical-tabs__list\">    <li>      <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\" href=\"https://github.com/calmjs/calmjs.parse\" rel=\"nofollow\">        <i class=\"fas fa-home\" aria-hidden=\"true\"></i>Homepage      </a>    </li>  </ul></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Statistics</h3>  <div class=\"hidden github-repo-info\" data-controller=\"github-repo-info\">GitHub statistics:    <ul class=\"vertical-tabs__list\">      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"stargazersUrl\" rel=\"noopener\">          <i class=\"fa fa-star\" aria-hidden=\"true\"></i>          <strong>Stars:</strong>          <span data-github-repo-info-target=\"stargazersCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"forksUrl\" rel=\"noopener\">          <i class=\"fa fa-code-branch\" aria-hidden=\"true\"></i>          <strong>Forks:</strong>          <span data-github-repo-info-target=\"forksCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"openIssuesUrl\" rel=\"noopener\">          <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>          <strong>Open issues:</strong>          <span data-github-repo-info-target=\"openIssuesCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"openPRsUrl\" rel=\"noopener\">          <i class=\"fa fa-code-pull-request\" aria-hidden=\"true\"></i>          <strong>Open PRs:</strong>          <span data-github-repo-info-target=\"openPRsCount\"></span>        </a>      </li>    </ul>  </div>  <p>View statistics for this project via <a href=\"https://libraries.io/pypi/calmjs.parse\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Libraries.io</a>, or by using <a href=\"https://packaging.python.org/guides/analyzing-pypi-package-downloads/\" target=\"_blank\" rel=\"noopener\">our public dataset on Google BigQuery</a>  </p></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Meta</h3>  <p><strong>License:</strong> MIT License (mit)</p>    <p><strong>Author:</strong> <a href=\"mailto:tommy.yu@auckland.ac.nz\">Tommy Yu</a></p></div><div class=\"sidebar-section\">    <h3 class=\"sidebar-section__title\">Maintainers</h3>      <span class=\"sidebar-section__maintainer\">        <a href=\"/user/metatoaster/\" aria-label=\"metatoaster\">          <span class=\"sidebar-section__user-gravatar\">            <img src=\"https://pypi-camo.freetls.fastly.net/de9d9b118227bf7786202da189970c28fca8006a/68747470733a2f2f7365637572652e67726176617461722e636f6d2f6176617461722f34323837343866346232346362373765643137343530303764393565316566363f73697a653d3530\" height=\"50\" width=\"50\" alt=\"Avatar for metatoaster from gravatar.com\" title=\"Avatar for metatoaster from gravatar.com\">          </span>          <span class=\"sidebar-section__user-gravatar-text\">            metatoaster          </span>        </a>      </span></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Classifiers</h3>  <ul class=\"sidebar-section__classifiers\">    <li>      <strong>Development Status</strong>      <ul>        <li>          <a href=\"/search/?c=Development+Status+%3A%3A+5+-+Production%2FStable\">            5 - Production/Stable          </a>        </li>      </ul>    </li>    <li>      <strong>Intended Audience</strong>      <ul>        <li>          <a href=\"/search/?c=Intended+Audience+%3A%3A+Developers\">            Developers          </a>        </li>      </ul>    </li>    <li>      <strong>License</strong>      <ul>        <li>          <a href=\"/search/?c=License+%3A%3A+OSI+Approved+%3A%3A+MIT+License\">            OSI Approved :: MIT License          </a>        </li>      </ul>    </li>    <li>      <strong>Operating System</strong>      <ul>        <li>          <a href=\"/search/?c=Operating+System+%3A%3A+OS+Independent\">            OS Independent          </a>        </li>      </ul>    </li>    <li>      <strong>Programming Language</strong>      <ul>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+JavaScript\">            JavaScript          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+2.7\">            Python :: 2.7          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.3\">            Python :: 3.3          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.4\">            Python :: 3.4          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.5\">            Python :: 3.5          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.6\">            Python :: 3.6          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.7\">            Python :: 3.7          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.8\">            Python :: 3.8          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.9\">            Python :: 3.9          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.10\">            Python :: 3.10          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.11\">            Python :: 3.11          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.12\">            Python :: 3.12          </a>        </li>      </ul>    </li>  </ul></div>          <br>        </div>        <div id=\"history\" data-project-tabs-target=\"content\" class=\"vertical-tabs__content\" role=\"tabpanel\" aria-labelledby=\"history-tab mobile-history-tab\" tabindex=\"-1\">          <h2 class=\"page-title split-layout\">            <span>Release history</span>            <span class=\"reset-text margin-top\">              <a href=\"/help/#project-release-notifications\">Release notifications</a> |              <a href=\"/rss/project/calmjs-parse/releases.xml\">RSS feed <i class=\"fa fa-rss\" aria-hidden=\"true\"></i></a>            </span>          </h2>          <div class=\"release-timeline\">            <div class=\"release release--latest release--current\">              <div class=\"release__meta\">                <span class=\"badge\">This version</span>              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/blue-cube.572a5bfb.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.3.1/\">                <p class=\"release__version\">                  1.3.1                </p>                <p class=\"release__version-date\">                  <time datetime=\"2023-10-28T23:26:08+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Oct 28, 2023</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.3.0/\">                <p class=\"release__version\">                  1.3.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-10-08T11:30:36+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Oct 8, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.2.5/\">                <p class=\"release__version\">                  1.2.5                </p>                <p class=\"release__version-date\">                  <time datetime=\"2020-07-03T03:13:40+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 3, 2020</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.2.4/\">                <p class=\"release__version\">                  1.2.4                </p>                <p class=\"release__version-date\">                  <time datetime=\"2020-03-17T10:27:09+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Mar 17, 2020</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.2.3/\">                <p class=\"release__version\">                  1.2.3                </p>                <p class=\"release__version-date\">                  <time datetime=\"2020-03-17T09:52:39+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Mar 17, 2020</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.2.2/\">                <p class=\"release__version\">                  1.2.2                </p>                <p class=\"release__version-date\">                  <time datetime=\"2020-01-24T00:13:33+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jan 24, 2020</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.2.1/\">                <p class=\"release__version\">                  1.2.1                </p>                <p class=\"release__version-date\">                  <time datetime=\"2019-11-21T04:29:34+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Nov 21, 2019</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.2.0/\">                <p class=\"release__version\">                  1.2.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2019-08-15T04:39:41+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 15, 2019</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.1.3/\">                <p class=\"release__version\">                  1.1.3                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-11-08T10:19:00+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Nov 8, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.1.2/\">                <p class=\"release__version\">                  1.1.2                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-08-20T06:19:46+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 20, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.1.1/\">                <p class=\"release__version\">                  1.1.1                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-08-11T05:07:29+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 11, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.1.0/\">                <p class=\"release__version\">                  1.1.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-08-07T08:13:24+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 7, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.0.1/\">                <p class=\"release__version\">                  1.0.1                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-04-19T02:51:52+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Apr 19, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/1.0.0/\">                <p class=\"release__version\">                  1.0.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2017-09-26T13:15:32+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Sep 26, 2017</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/0.10.1/\">                <p class=\"release__version\">                  0.10.1                </p>                <p class=\"release__version-date\">                  <time datetime=\"2017-08-26T08:07:52+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 26, 2017</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/0.10.0/\">                <p class=\"release__version\">                  0.10.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2017-08-26T07:47:29+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 26, 2017</time>                </p>              </a>            </div>            <div class=\"release release--oldest\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/calmjs.parse/0.9.0/\">                <p class=\"release__version\">                  0.9.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2017-06-09T10:14:58+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jun 9, 2017</time>                </p>              </a>            </div>          </div>        </div>          <div id=\"files\" data-project-tabs-target=\"content\" class=\"vertical-tabs__content\" role=\"tabpanel\" aria-labelledby=\"files-tab mobile-files-tab\" tabindex=\"-1\">            <h2 class=\"page-title\">Download files</h2>            <p>Download the file for your platform. If you're not sure which to choose, learn more about <a href=\"https://packaging.python.org/tutorials/installing-packages/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">installing packages</a>.</p>            <h3>Source Distribution            </h3>                  <div class=\"file\">      <div class=\"file__graphic\">        <i class=\"far fa-file\" aria-hidden=\"true\"></i>      </div>      <div class=\"card file__card\">        <a href=\"https://files.pythonhosted.org/packages/32/96/8846c08e13f41b2bfe748a3b6b71d7abf2504b35d5136b345642a84a53ad/calmjs.parse-1.3.1.zip\">          calmjs.parse-1.3.1.zip        </a>        (469.7 kB        <a href=\"#copy-hash-modal-d2333061-a339-4492-b9d6-e46cdbe4fc47\">view hashes</a>)        <p class=\"file__meta\">          Uploaded <time datetime=\"2023-10-28T23:26:22+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Oct 28, 2023</time>          <code>source</code>        </p>      </div>    </div>            <h3>Built Distributions            </h3>                <div class=\"file\">      <div class=\"file__graphic\">        <i class=\"far fa-file\" aria-hidden=\"true\"></i>      </div>      <div class=\"card file__card\">        <a href=\"https://files.pythonhosted.org/packages/53/11/f6c72d1f940e64ed6103833d28e5e3db387f309ad9d4768d4a10fe625083/calmjs.parse-1.3.1-py3-none-any.whl\">          calmjs.parse-1.3.1-py3-none-any.whl        </a>        (297.0 kB        <a href=\"#copy-hash-modal-4ba51f99-0d07-46b8-935b-2da02d641757\">view hashes</a>)        <p class=\"file__meta\">          Uploaded <time datetime=\"2023-10-28T23:26:19+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Oct 28, 2023</time>          <code>py3</code>        </p>      </div>    </div>    <div class=\"file\">      <div class=\"file__graphic\">        <i class=\"far fa-file\" aria-hidden=\"true\"></i>      </div>      <div class=\"card file__card\">        <a href=\"https://files.pythonhosted.org/packages/28/a8/d9797ecfcec2b0d2202071dcb841c1964c36ba8c1199ffb77ce281b5a653/calmjs.parse-1.3.1-py2-none-any.whl\">          calmjs.parse-1.3.1-py2-none-any.whl        </a>        (305.4 kB        <a href=\"#copy-hash-modal-9968ada9-bbe0-457b-afae-76bb19ff1a5f\">view hashes</a>)        <p class=\"file__meta\">          Uploaded <time datetime=\"2023-10-28T23:26:08+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Oct 28, 2023</time>          <code>py2</code>        </p>      </div>    </div>          </div><div id=\"copy-hash-modal-d2333061-a339-4492-b9d6-e46cdbe4fc47\" class=\"modal modal--wide\">  <div class=\"modal__content\" role=\"dialog\">    <a href=\"#modal-close\" title=\"Close\" class=\"modal__close\">      <i class=\"fa fa-times\" aria-hidden=\"true\"></i>      <span class=\"sr-only\">Close</span>    </a>    <div class=\"modal__body\">      <h3 class=\"modal__title\"><a href=\"https://pip.pypa.io/en/stable/topics/secure-installs/#hash-checking-mode\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Hashes</a> for calmjs.parse-1.3.1.zip      </h3>      <table class=\"table table--hashes\">        <caption class=\"sr-only\">Hashes for calmjs.parse-1.3.1.zip</caption>        <thead>          <tr>            <th scope=\"col\">Algorithm</th>            <th scope=\"col\">Hash digest</th>            <th></th>          </tr>        </thead>        <tbody>          <tr data-controller=\"clipboard\">            <th scope=\"row\">SHA256</th>            <td><code data-clipboard-target=\"source\">19e5e0422471765e772f8034b1214bc15148abb1490ec75d2edb7b6301eaf316</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">MD5</th>            <td><code data-clipboard-target=\"source\">abf138ac5085dd2cb4aafac6cb51cd9e</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">BLAKE2b-256</th>            <td><code data-clipboard-target=\"source\">32968846c08e13f41b2bfe748a3b6b71d7abf2504b35d5136b345642a84a53ad</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>        </tbody>      </table>    </div>    <div class=\"modal__footer\">      <a href=\"#modal-close\" class=\"button button--primary modal__action\">Close</a>    </div>  </div></div><div id=\"copy-hash-modal-4ba51f99-0d07-46b8-935b-2da02d641757\" class=\"modal modal--wide\">  <div class=\"modal__content\" role=\"dialog\">    <a href=\"#modal-close\" title=\"Close\" class=\"modal__close\">      <i class=\"fa fa-times\" aria-hidden=\"true\"></i>      <span class=\"sr-only\">Close</span>    </a>    <div class=\"modal__body\">      <h3 class=\"modal__title\"><a href=\"https://pip.pypa.io/en/stable/topics/secure-installs/#hash-checking-mode\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Hashes</a> for calmjs.parse-1.3.1-py3-none-any.whl      </h3>      <table class=\"table table--hashes\">        <caption class=\"sr-only\">Hashes for calmjs.parse-1.3.1-py3-none-any.whl</caption>        <thead>          <tr>            <th scope=\"col\">Algorithm</th>            <th scope=\"col\">Hash digest</th>            <th></th>          </tr>        </thead>        <tbody>          <tr data-controller=\"clipboard\">            <th scope=\"row\">SHA256</th>            <td><code data-clipboard-target=\"source\">34e087b2a7a3117264df416d7d6793000bc59773e182ffef7da2dd7820f88028</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">MD5</th>            <td><code data-clipboard-target=\"source\">19e78778c1adff39fe755f6c0044d69c</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">BLAKE2b-256</th>            <td><code data-clipboard-target=\"source\">5311f6c72d1f940e64ed6103833d28e5e3db387f309ad9d4768d4a10fe625083</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>        </tbody>      </table>    </div>    <div class=\"modal__footer\">      <a href=\"#modal-close\" class=\"button button--primary modal__action\">Close</a>    </div>  </div></div><div id=\"copy-hash-modal-9968ada9-bbe0-457b-afae-76bb19ff1a5f\" class=\"modal modal--wide\">  <div class=\"modal__content\" role=\"dialog\">    <a href=\"#modal-close\" title=\"Close\" class=\"modal__close\">      <i class=\"fa fa-times\" aria-hidden=\"true\"></i>      <span class=\"sr-only\">Close</span>    </a>    <div class=\"modal__body\">      <h3 class=\"modal__title\"><a href=\"https://pip.pypa.io/en/stable/topics/secure-installs/#hash-checking-mode\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Hashes</a> for calmjs.parse-1.3.1-py2-none-any.whl      </h3>      <table class=\"table table--hashes\">        <caption class=\"sr-only\">Hashes for calmjs.parse-1.3.1-py2-none-any.whl</caption>        <thead>          <tr>            <th scope=\"col\">Algorithm</th>            <th scope=\"col\">Hash digest</th>            <th></th>          </tr>        </thead>        <tbody>          <tr data-controller=\"clipboard\">            <th scope=\"row\">SHA256</th>            <td><code data-clipboard-target=\"source\">9d3cec13fcc914f635c4940d2bfe007800093435b4ad4ef7d4e91d81dda66c80</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">MD5</th>            <td><code data-clipboard-target=\"source\">6246d92f2897ef886c78840694ffb12a</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">BLAKE2b-256</th>            <td><code data-clipboard-target=\"source\">28a8d9797ecfcec2b0d2202071dcb841c1964c36ba8c1199ffb77ce281b5a653</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>        </tbody>      </table>    </div>    <div class=\"modal__footer\">      <a href=\"#modal-close\" class=\"button button--primary modal__action\">Close</a>    </div>  </div></div>      </div>    </div>  </div></div>    </main>    <footer class=\"footer\">      <div class=\"footer__logo\">        <img src=\"/static/images/white-cube.2351a86c.svg\" alt=\"\" class=\"-js-white-cube\">      </div>      <div class=\"footer__menus\">        <div class=\"footer__menu\">          <h2>Help</h2>          <nav aria-label=\"Help navigation\">            <ul>              <li><a href=\"https://packaging.python.org/tutorials/installing-packages/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Installing packages</a></li>              <li><a href=\"https://packaging.python.org/tutorials/packaging-projects/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Uploading packages</a></li>              <li><a href=\"https://packaging.python.org/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">User guide</a></li>              <li><a href=\"https://www.python.org/dev/peps/pep-0541/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Project name retention</a></li>              <li><a href=\"/help/\">FAQs</a></li>            </ul>          </nav>        </div>        <div class=\"footer__menu\">          <h2>About PyPI</h2>          <nav aria-label=\"About PyPI navigation\">            <ul>              <li><a href=\"https://twitter.com/PyPI\" title=\"External link\" target=\"_blank\" rel=\"noopener\">PyPI on Twitter</a></li>              <li><a href=\"https://dtdg.co/pypi\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Infrastructure dashboard</a></li>              <li><a href=\"/stats/\">Statistics</a></li>              <li><a href=\"/trademarks/\">Logos & trademarks</a></li>              <li><a href=\"/sponsors/\">Our sponsors</a></li>            </ul>          </nav>        </div>        <div class=\"footer__menu\">          <h2>Contributing to PyPI</h2>          <nav aria-label=\"How to contribute navigation\">            <ul>              <li><a href=\"/help/#feedback\">Bugs and feedback</a></li>              <li><a href=\"https://github.com/pypi/warehouse\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Contribute on GitHub</a></li>              <li><a href=\"https://hosted.weblate.org/projects/pypa/warehouse/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Translate PyPI</a></li>              <li><a href=\"/sponsors/\">Sponsor PyPI</a></li>              <li><a href=\"https://github.com/pypi/warehouse/graphs/contributors\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Development credits</a></li>            </ul>          </nav>        </div>        <div class=\"footer__menu\">          <h2>Using PyPI</h2>          <nav aria-label=\"Using PyPI navigation\">            <ul>              <li><a href=\"https://github.com/pypa/.github/blob/main/CODE_OF_CONDUCT.md\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Code of conduct</a></li>              <li><a href=\"/security/\">Report security issue</a></li>              <li><a href=\"https://www.python.org/privacy/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Privacy policy</a></li>              <li><a href=\"/policy/terms-of-use/\">Terms of use</a></li>              <li><a href=\"/policy/acceptable-use-policy/\">Acceptable Use Policy</a></li>            </ul>          </nav>        </div>      </div>      <hr class=\"footer__divider\">      <div class=\"footer__text\">        <p>Status:<a href=\"https://status.python.org/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">          <span data-statuspage-domain=\"https://2p66nmmycsj3.statuspage.io\">all systems operational</span></a>        </p>        <p>Developed and maintained by the Python community, for the Python community.          <br>          <a href=\"https://donate.pypi.org\">Donate today!</a>        </p>        <p>          \"PyPI\", \"Python Package Index\", and the blocks logos are registered <a href=\"/trademarks/\">trademarks</a> of the <a href=\"https://python.org/psf-landing\" target=\"_blank\" rel=\"noopener\">Python Software Foundation</a>.<br>        </p>        <p>          \u00a9 2024 <a href=\"https://www.python.org/psf-landing/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Python Software Foundation</a><br>          <a href=\"/sitemap/\">Site map</a>        </p>      </div>      <div class=\"centered hide-on-desktop\">        <button type=\"button\" class=\"button button--switch-to-desktop hidden\" data-viewport-toggle-target=\"switchToDesktop\" data-action=\"viewport-toggle#switchToDesktop\">Switch to desktop version        </button>      </div>    </footer>    <div class=\"language-switcher\">      <form action=\"/locale/\">        <ul>          <li>            <button              class=\"language-switcher__selected\"              name=\"locale_id\" value=\"en\" type=\"submit\"            >              English            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"es\" type=\"submit\"            >              espa\u00f1ol            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"fr\" type=\"submit\"            >              fran\u00e7ais            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"ja\" type=\"submit\"            >              \u65e5\u672c\u8a9e            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"pt_BR\" type=\"submit\"            >              portugu\u00eas (Brasil)            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"uk\" type=\"submit\"            >              \u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"el\" type=\"submit\"            >              \u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"de\" type=\"submit\"            >              Deutsch            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"zh_Hans\" type=\"submit\"            >              \u4e2d\u6587 (\u7b80\u4f53)            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"zh_Hant\" type=\"submit\"            >              \u4e2d\u6587 (\u7e41\u9ad4)            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"ru\" type=\"submit\"            >              \u0440\u0443\u0441\u0441\u043a\u0438\u0439            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"he\" type=\"submit\"            >              \u05e2\u05d1\u05e8\u05d9\u05ea            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"eo\" type=\"submit\"            >              esperanto            </button>          </li>        </ul>      </form>    </div><div class=\"sponsors\">  <p class=\"sponsors__title\">Supported by</p>  <div class=\"sponsors__divider\"></div>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://aws.amazon.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/ed7074cadad1a06f56bc520ad9bd3e00d0704c5b/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f6177732d77686974652d6c6f676f2d7443615473387a432e706e67\" alt=AWS loading=lazy>          <span class=\"sponsors__name\">AWS</span>          <span class=\"sponsors__service\">            Cloud computing and Security Sponsor          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://www.datadoghq.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/8855f7c063a3bdb5b0ce8d91bfc50cf851cc5c51/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f64617461646f672d77686974652d6c6f676f2d6668644c4e666c6f2e706e67\" alt=Datadog loading=lazy>          <span class=\"sponsors__name\">Datadog</span>          <span class=\"sponsors__service\">            Monitoring          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://www.fastly.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/df6fe8829cbff2d7f668d98571df1fd011f36192/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f666173746c792d77686974652d6c6f676f2d65684d3077735f6f2e706e67\" alt=Fastly loading=lazy>          <span class=\"sponsors__name\">Fastly</span>          <span class=\"sponsors__service\">            CDN          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://careers.google.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/420cc8cf360bac879e24c923b2f50ba7d1314fb0/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f676f6f676c652d77686974652d6c6f676f2d616734424e3774332e706e67\" alt=Google loading=lazy>          <span class=\"sponsors__name\">Google</span>          <span class=\"sponsors__service\">            Download Analytics          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://www.python.org/psf/sponsors/#microsoft\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/524d1ce72f7772294ca4c1fe05d21dec8fa3f8ea/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f6d6963726f736f66742d77686974652d6c6f676f2d5a443172685444462e706e67\" alt=Microsoft loading=lazy>          <span class=\"sponsors__name\">Microsoft</span>          <span class=\"sponsors__service\">            PSF Sponsor          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://www.pingdom.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/d01053c02f3a626b73ffcb06b96367fdbbf9e230/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f70696e67646f6d2d77686974652d6c6f676f2d67355831547546362e706e67\" alt=Pingdom loading=lazy>          <span class=\"sponsors__name\">Pingdom</span>          <span class=\"sponsors__service\">            Monitoring          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://getsentry.com/for/python\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/67af7117035e2345bacb5a82e9aa8b5b3e70701d/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f73656e7472792d77686974652d6c6f676f2d4a2d6b64742d706e2e706e67\" alt=Sentry loading=lazy>          <span class=\"sponsors__name\">Sentry</span>          <span class=\"sponsors__service\">            Error logging          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://statuspage.io\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/b611884ff90435a0575dbab7d9b0d3e60f136466/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f737461747573706167652d77686974652d6c6f676f2d5467476c6a4a2d502e706e67\" alt=StatusPage loading=lazy>          <span class=\"sponsors__name\">StatusPage</span>          <span class=\"sponsors__service\">            Status page          </span>        </a></div>  </body></html>",
  "embeddings": []
}