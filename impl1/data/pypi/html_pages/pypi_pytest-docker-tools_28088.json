{
  "libtype": "pypi",
  "libname": "pytest-docker-tools",
  "url": "https://pypi.org/project/pytest-docker-tools/",
  "html": "<!DOCTYPE html><html lang=\"en\" dir=\"ltr\">  <head>    <meta charset=\"utf-8\">    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">    <meta name=\"defaultLanguage\" content=\"en\">    <meta name=\"availableLanguages\" content=\"en, es, fr, ja, pt_BR, uk, el, de, zh_Hans, zh_Hant, ru, he, eo\">    <title>pytest-docker-tools \u00b7 PyPI</title>    <meta name=\"description\" content=\"Docker integration tests for pytest\">    <link rel=\"stylesheet\" href=\"/static/css/warehouse-ltr.99b3104d.css\">    <link rel=\"stylesheet\" href=\"/static/css/fontawesome.b50b476c.css\">    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Source+Sans+3:400,400italic,600,600italic,700,700italic%7CSource+Code+Pro:500\">    <noscript>      <link rel=\"stylesheet\" href=\"/static/css/noscript.0673c9ea.css\">    </noscript>    <link rel=\"icon\" href=\"/static/images/favicon.35549fe8.ico\" type=\"image/x-icon\">    <link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS: 40 latest updates\" href=\"/rss/updates.xml\">    <link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS: 40 newest packages\" href=\"/rss/packages.xml\"><link rel=\"alternate\" type=\"application/rss+xml\" title=\"RSS: latest releases for pytest-docker-tools\" href=\"/rss/project/pytest-docker-tools/releases.xml\">    <link rel=\"canonical\" href=\"https://pypi.org/project/pytest-docker-tools/\">    <meta property=\"og:url\" content=\"https://pypi.org/project/pytest-docker-tools/\">    <meta property=\"og:site_name\" content=\"PyPI\">    <meta property=\"og:type\" content=\"website\">    <meta property=\"og:image\" content=\"https://pypi.org/static/images/twitter.abaf4b19.webp\">    <meta property=\"og:title\" content=\"pytest-docker-tools\">    <meta property=\"og:description\" content=\"Docker integration tests for pytest\">    <link rel=\"search\" type=\"application/opensearchdescription+xml\" title=\"PyPI\" href=\"/opensearch.xml\">    <script asyncdata-ga-id=\"UA-55961911-1\"data-ga4-id=\"G-RW7D75DF8V\"            src=\"/static/js/warehouse.dd4295c4.js\">    </script><script>MathJax = {  tex: {    inlineMath: [['$', '$'], ['\\\\(', '\\\\)']]  },};</script><script async  src=\"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-svg.js\"  integrity=\"sha256-1CldwzdEg2k1wTmf7s5RWVd7NMXI/7nxxjJM2C4DqII=\"  crossorigin=\"anonymous\"></script><script async src=\"https://www.googletagmanager.com/gtag/js?id=UA-55961911-1\"></script><script async src=\"https://www.googletagmanager.com/gtag/js?id=G-RW7D75DF8V\"></script><script defer src=\"https://www.fastly-insights.com/insights.js?k=6a52360a-f306-421e-8ed5-7417d0d4a4e9&dnt=true\"></script>    <script async        src=\"https://media.ethicalads.io/media/client/v1.4.0/ethicalads.min.js\"        integrity=\"sha256-U3hKDidudIaxBDEzwGJApJgPEf2mWk6cfMWghrAa6i0= sha384-UcmsCqcNRSLW/dV3Lo1oCi2/VaurXbib6p4HyUEOeIa/4OpsrnucrugAefzVZJfI sha512-q4t1L4xEjGV2R4hzqCa41P8jrgFUS8xTb8rdNv4FGvw7FpydVj/kkxBJHOiaoxHa8olCcx1Slk9K+3sNbsM4ug==\"        crossorigin=\"anonymous\"    ></script>  </head>  <body data-controller=\"viewport-toggle\">    <!-- Accessibility: this link should always be the first piece of content inside the body-->    <a href=\"#content\" class=\"skip-to-content\">Skip to main content</a>    <button type=\"button\" class=\"button button--primary button--switch-to-mobile hidden\" data-viewport-toggle-target=\"switchToMobile\" data-action=\"viewport-toggle#switchToMobile\">Switch to mobile version    </button>    <div id=\"sticky-notifications\" class=\"stick-to-top js-stick-to-top\">      <!-- Add browser warning. Will show for ie9 and below -->      <!--[if IE]>      <div class=\"notification-bar notification-bar--warning\" role=\"status\">        <span class=\"notification-bar__icon\">          <i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>          <span class=\"sr-only\">Warning</span>        </span>        <span class=\"notification-bar__message\">You are using an unsupported browser, upgrade to a newer version.</span>      </div>      <![endif]-->      <noscript>      <div class=\"notification-bar notification-bar--warning\" role=\"status\">        <span class=\"notification-bar__icon\">          <i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i>          <span class=\"sr-only\">Warning</span>        </span>        <span class=\"notification-bar__message\">Some features may not work without JavaScript. Please try enabling it if you encounter problems.</span>      </div>      </noscript><div data-html-include=\"/_includes/notification-banners/\"></div>    </div><div data-html-include=\"/_includes/flash-messages/\"></div><div data-html-include=\"/_includes/session-notifications/\"></div>    <header class=\"site-header \">      <div class=\"site-container\">        <div class=\"split-layout\">          <div class=\"split-layout\">            <div>              <a class=\"site-header__logo\" href=\"/\">                <img alt=\"PyPI\" src=\"/static/images/logo-small.2a411bc6.svg\">              </a>            </div>            <form class=\"search-form search-form--primary\" action=\"/search/\" role=\"search\">              <label for=\"search\" class=\"sr-only\">Search PyPI</label>              <input id=\"search\" class=\"search-form__search\" type=\"text\" name=\"q\" placeholder=\"Search projects\" value=\"\" autocomplete=\"off\" autocapitalize=\"off\" spellcheck=\"false\" data-controller=\"search-focus\" data-action=\"keydown@window->search-focus#focusSearchField\" data-search-focus-target=\"searchField\">              <button type=\"submit\" class=\"search-form__button\">                <i class=\"fa fa-search\" aria-hidden=\"true\"></i>                <span class=\"sr-only\">Search</span>              </button>            </form>          </div><div data-html-include=\"/_includes/current-user-indicator/\">            <div id=\"user-indicator\" class=\"horizontal-menu horizontal-menu--light horizontal-menu--tall\">  <nav class=\"horizontal-menu horizontal-menu--light horizontal-menu--tall hide-on-tablet\" aria-label=\"Main navigation\">    <ul>      <li class=\"horizontal-menu__item\"><a href=\"/help/\" class=\"horizontal-menu__link\">Help</a></li>      <li class=\"horizontal-menu__item\"><a href=\"/sponsors/\" class=\"horizontal-menu__link\">Sponsors</a></li>      <li class=\"horizontal-menu__item\"><a href=\"/account/login/\" class=\"horizontal-menu__link\">Log in</a></li>      <li class=\"horizontal-menu__item\"><a href=\"/account/register/\" class=\"horizontal-menu__link\">Register</a></li>    </ul>  </nav>  <nav class=\"dropdown dropdown--on-menu hidden show-on-tablet\" aria-label=\"Main navigation\">    <button type=\"button\" class=\"horizontal-menu__link dropdown__trigger\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-label=\"View menu\">Menu      <span class=\"dropdown__trigger-caret\">        <i class=\"fa fa-caret-down\" aria-hidden=\"true\"></i>      </span>    </button>    <ul class=\"dropdown__content\" aria-hidden=\"true\" aria-label=\"Main menu\">      <li><a class=\"dropdown__link\" href=\"/help/\">Help</a></li>      <li><a class=\"dropdown__link\" href=\"/sponsors/\">Sponsors</a></li>      <li><a class=\"dropdown__link\" href=\"/account/login/\">Log in</a></li>      <li><a class=\"dropdown__link\" href=\"/account/register/\">Register</a></li>    </ul>  </nav></div></div>        </div>      </div>    </header>    <div class=\"mobile-search\">      <form class=\"search-form search-form--fullwidth\" action=\"/search/\" role=\"search\">        <label for=\"mobile-search\" class=\"sr-only\">Search PyPI</label>        <input id=\"mobile-search\" class=\"search-form__search\" type=\"text\" name=\"q\" placeholder=\"Search projects\" value=\"\" autocomplete=\"off\" autocapitalize=\"off\" spellcheck=\"false\">                <button type=\"submit\" class=\"search-form__button\">          <i class=\"fa fa-search\" aria-hidden=\"true\"></i>          <span class=\"sr-only\">Search</span>        </button>      </form>    </div>    <main id=\"content\"><div class=\"hidden\"  data-controller=\"github-repo-stats\"  data-github-repo-stats-github-repo-info-outlet=\".github-repo-info\"  data-github-repo-stats-url-value=\"https://api.github.com/repos/Jc2k/pytest-docker-tools\"  data-github-repo-stats-issue-url-value=\"https://api.github.com/search/issues?q=repo:Jc2k/pytest-docker-tools+type:issue+state:open&amp;per_page=1\"></div><div class=\"banner\">  <div class=\"package-header\">    <div class=\"package-header__left\">      <h1 class=\"package-header__name\">        pytest-docker-tools 3.1.3      </h1>      <div data-controller=\"clipboard\">        <p class=\"package-header__pip-instructions\">          <span id=\"pip-command\" data-clipboard-target=\"source\">pip install pytest-docker-tools</span>          <button type=\"button\" class=\"copy-tooltip copy-tooltip-s\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">            <i class=\"fa fa-copy\" aria-hidden=\"true\"></i>            <span class=\"sr-only\">Copy PIP instructions</span>          </button>        </p>      </div>    </div>    <div class=\"package-header__right\">      <a class=\"status-badge status-badge--good\" href=\"/project/pytest-docker-tools/\">        <span>Latest version</span>      </a>      <p class=\"package-header__date\">Released: <time datetime=\"2022-02-17T13:07:47+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Feb 17, 2022</time>      </p>    </div>  </div></div><div class=\"horizontal-section horizontal-section--grey horizontal-section--thin\">  <div class=\"site-container\"><div data-html-include=\"/_includes/administer-project-include/pytest-docker-tools\"></div>    <div class=\"split-layout split-layout--middle package-description\">      <p class=\"package-description__summary\">Docker integration tests for pytest</p><div data-html-include=\"/_includes/edit-project-button/pytest-docker-tools\"></div>    </div>  </div></div><div data-controller=\"project-tabs\">  <div class=\"tabs-container\">    <div class=\"vertical-tabs\">      <div class=\"vertical-tabs__tabs\">        <div class=\"sidebar-section\">          <h3 class=\"sidebar-section__title\">Navigation</h3>          <nav aria-label=\"Navigation for pytest-docker-tools\">            <ul class=\"vertical-tabs__list\" role=\"tablist\">              <li role=\"tab\">                <a id=\"description-tab\" href=\"#description\" data-project-tabs-target=\"tab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--is-active\" aria-selected=\"true\" aria-label=\"Project description. Focus will be moved to the description.\">                  <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>Project description                </a>              </li>              <li role=\"tab\">                <a id=\"history-tab\" href=\"#history\" data-project-tabs-target=\"tab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon\" aria-label=\"Release history. Focus will be moved to the history panel.\">                  <i class=\"fa fa-history\" aria-hidden=\"true\"></i>Release history                </a>              </li>              <li role=\"tab\">                <a id=\"files-tab\" href=\"#files\" data-project-tabs-target=\"tab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon\" aria-label=\"Download files. Focus will be moved to the project files.\">                  <i class=\"fa fa-download\" aria-hidden=\"true\"></i>Download files                </a>              </li>            </ul>          </nav>        </div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Project links</h3>  <ul class=\"vertical-tabs__list\">    <li>      <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\" href=\"https://github.com/Jc2k/pytest-docker-tools\" rel=\"nofollow\">        <i class=\"fas fa-home\" aria-hidden=\"true\"></i>Homepage      </a>    </li>  </ul></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Statistics</h3>  <div class=\"hidden github-repo-info\" data-controller=\"github-repo-info\">GitHub statistics:    <ul class=\"vertical-tabs__list\">      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"stargazersUrl\" rel=\"noopener\">          <i class=\"fa fa-star\" aria-hidden=\"true\"></i>          <strong>Stars:</strong>          <span data-github-repo-info-target=\"stargazersCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"forksUrl\" rel=\"noopener\">          <i class=\"fa fa-code-branch\" aria-hidden=\"true\"></i>          <strong>Forks:</strong>          <span data-github-repo-info-target=\"forksCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"openIssuesUrl\" rel=\"noopener\">          <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>          <strong>Open issues:</strong>          <span data-github-repo-info-target=\"openIssuesCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"openPRsUrl\" rel=\"noopener\">          <i class=\"fa fa-code-pull-request\" aria-hidden=\"true\"></i>          <strong>Open PRs:</strong>          <span data-github-repo-info-target=\"openPRsCount\"></span>        </a>      </li>    </ul>  </div>  <p>View statistics for this project via <a href=\"https://libraries.io/pypi/pytest-docker-tools\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Libraries.io</a>, or by using <a href=\"https://packaging.python.org/guides/analyzing-pypi-package-downloads/\" target=\"_blank\" rel=\"noopener\">our public dataset on Google BigQuery</a>  </p></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Meta</h3>  <p><strong>License:</strong> Apache Software License (Apache-2.0)</p>    <p><strong>Author:</strong> <a href=\"mailto:john.carr@unrouted.co.uk\">John Carr</a></p>  <p class=\"tags\">    <i class=\"fa fa-tags\" aria-hidden=\"true\"></i>    <span class=\"sr-only\">Tags</span>    <span class=\"package-keyword\">      devops,    </span>    <span class=\"package-keyword\">      docker,    </span>    <span class=\"package-keyword\">      pytest    </span>  </p>  <p>    <strong>Requires:</strong> Python &gt;=3.7.0, &lt;4.0.0  </p></div><div class=\"sidebar-section\">    <h3 class=\"sidebar-section__title\">Maintainers</h3>      <span class=\"sidebar-section__maintainer\">        <a href=\"/user/johncarr/\" aria-label=\"johncarr\">          <span class=\"sidebar-section__user-gravatar\">            <img src=\"https://pypi-camo.freetls.fastly.net/18028cb77dae573667d29593c1b7fcc00387290e/68747470733a2f2f7365637572652e67726176617461722e636f6d2f6176617461722f33633839363332346565346637366538356130393439376533326564633139623f73697a653d3530\" height=\"50\" width=\"50\" alt=\"Avatar for johncarr from gravatar.com\" title=\"Avatar for johncarr from gravatar.com\">          </span>          <span class=\"sidebar-section__user-gravatar-text\">            johncarr          </span>        </a>      </span></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Classifiers</h3>  <ul class=\"sidebar-section__classifiers\">    <li>      <strong>Development Status</strong>      <ul>        <li>          <a href=\"/search/?c=Development+Status+%3A%3A+4+-+Beta\">            4 - Beta          </a>        </li>      </ul>    </li>    <li>      <strong>Intended Audience</strong>      <ul>        <li>          <a href=\"/search/?c=Intended+Audience+%3A%3A+Developers\">            Developers          </a>        </li>      </ul>    </li>    <li>      <strong>License</strong>      <ul>        <li>          <a href=\"/search/?c=License+%3A%3A+OSI+Approved+%3A%3A+Apache+Software+License\">            OSI Approved :: Apache Software License          </a>        </li>      </ul>    </li>    <li>      <strong>Programming Language</strong>      <ul>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3\">            Python :: 3          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.7\">            Python :: 3.7          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.8\">            Python :: 3.8          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.9\">            Python :: 3.9          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.10\">            Python :: 3.10          </a>        </li>      </ul>    </li>    <li>      <strong>Topic</strong>      <ul>        <li>          <a href=\"/search/?c=Topic+%3A%3A+Software+Development+%3A%3A+Testing\">            Software Development :: Testing          </a>        </li>      </ul>    </li>  </ul></div><div class=\"sidebar-section\" data-ea-publisher=\"psf\" data-ea-type=\"psf\" data-ea-keywords=\"pypi-sidebar\"></div>      </div>      <div class=\"vertical-tabs__panel\">        <!-- mobile menu -->        <nav aria-label=\"Navigation for pytest-docker-tools\">          <ul class=\"vertical-tabs__list\" role=\"tablist\">            <li role=\"tab\">              <a id=\"mobile-description-tab\" href=\"#description\" data-project-tabs-target=\"mobileTab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--mobile vertical-tabs__tab--no-top-border vertical-tabs__tab--is-active\" aria-selected=\"true\" aria-label=\"Project description. Focus will be moved to the description.\">                <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>Project description              </a>            </li>            <li role=\"tab\">              <a id=\"mobile-data-tab\" href=\"#data\" data-project-tabs-target=\"mobileTab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--mobile\" aria-label=\"Project details. Focus will be moved to the project details.\">                <i class=\"fa fa-info-circle\" aria-hidden=\"true\"></i>Project details              </a>            </li>            <li role=\"tab\">              <a id=\"mobile-history-tab\" href=\"#history\" data-project-tabs-target=\"mobileTab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--mobile\" aria-label=\"Release history. Focus will be moved to the history panel.\">              <i class=\"fa fa-history\" aria-hidden=\"true\"></i>Release history            </a>            </li>            <li role=\"tab\">              <a id=\"mobile-files-tab\" href=\"#files\" data-project-tabs-target=\"mobileTab\" data-action=\"project-tabs#onTabClick\" class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--mobile\" aria-label=\"Download files. Focus will be moved to the project files.\">                <i class=\"fa fa-download\" aria-hidden=\"true\"></i>Download files              </a>            </li>          </ul>        </nav>        <div id=\"description\" data-project-tabs-target=\"content\" class=\"vertical-tabs__content\" role=\"tabpanel\" aria-labelledby=\"description-tab mobile-description-tab\" tabindex=\"-1\">          <h2 class=\"page-title\">Project description</h2>          <div class=\"project-description\">            <h1>pytest-docker-tools</h1><p>You have written a software application (in any language) and have packaged it as a Docker image. Now you want to smoke test the built image or do some integration testing with other containers before releasing it. You:</p><ul><li>want to reason about your environment in a similar way to a docker-compose.yml`</li><li>want the environment to be automatically created and destroyed as tests run</li><li>want the option to reuse previously created resources (e.g. containers) when executing tests in high frequency</li><li>don't want to have to write loads of boilerplate code for creating the test environment</li><li>want to be able to run the tests in parallel</li><li>want the tests to be reliable</li></ul><p><code>pytest-docker-tools</code> is a set of opinionated helpers for creating <code>py.test</code> fixtures for your smoke testing and integration testing. It strives to keep your environment definition declarative, like a docker-compose.yml. It embraces py.test fixture overloading. <del>It tries not to be too magical</del>. It ended up kind of magical, but no more so that <code>py.test</code> itself.</p><p>The main interface provided by this library is a set of 'fixture factories'. It provides a 'best in class' implementation of a fixture, and then allows you to treat it as a template - injecting your own configuration declaratively. You can define your fixtures in your <code>conftest.py</code> and access them from all your tests, and you can override them as needed in individual test modules.</p><p>The API is straightforward and implicitly captures the dependencies between fixtures in the specification. For example, here is how it might look if you were building out a microservice and wanted to point its DNS and a mock DNS server:</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>http.client</span> <span class=kn>import</span> <span class=n>HTTPConnection</span><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>container</span><span class=n>fakedns_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/dns'</span><span class=p>,</span><span class=p>)</span><span class=n>fakedns</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{fakedns_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'DNS_EXAMPLE_COM__A'</span><span class=p>:</span> <span class=s1>'127.0.0.1'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=n>apiserver_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/api'</span><span class=p>,</span><span class=p>)</span><span class=n>apiserver</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{apiserver_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'8080/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span>    <span class=n>dns</span><span class=o>=</span><span class=p>[</span><span class=s1>'</span><span class=si>{fakedns.ips.primary}</span><span class=s1>'</span><span class=p>]</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=k>def</span> <span class=nf>apiclient</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>port</span> <span class=o>=</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>    <span class=k>return</span> <span class=n>HTTPConnection</span><span class=p>(</span><span class=sa>f</span><span class=s1>'localhost:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s1>'</span><span class=p>)</span></pre><p>You can now create a test that exercises your microservice:</p><pre lang=python3><span class=c1># test_smoketest.py</span><span class=kn>import</span> <span class=nn>socket</span><span class=k>def</span> <span class=nf>test_my_frobulator</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>'127.0.0.1'</span><span class=p>,</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span><span class=k>def</span> <span class=nf>test_my_frobulator_works_after_restart</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>apiserver</span><span class=o>.</span><span class=n>restart</span><span class=p>()</span>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>'127.0.0.1'</span><span class=p>,</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span></pre><p>In this example all the dependencies will be resolved in order and once per session:</p><ul><li>The latest <code>redis:latest</code> will be fetched</li><li>A container image will be build from the <code>Dockerfile</code> in the <code>db</code> folder.</li></ul><p>Then once per test:</p><ul><li>A new volume will be created</li><li>A new 'backend' container will be created from <code>redis:latest</code>. It will be attached to the new volume.</li><li>A new 'frontend' container will be created from the freshly built container. It will be given the IP if the backend via an environment variable. Port 3679 in the container will be exposed as an ephemeral port on the host.</li></ul><p>The test can then run and access the container via its ephemeral high port. At the end of the test the environment will be thrown away.</p><p>If the test fails the <code>docker logs</code> output from each container will be captured and added to the test output.</p><p>In the example you'll notice we defined an <code>apiclient</code> fixture. Of course if you use that it will implicitly pull in both of the server fixtures and 'just work':</p><pre lang=python3><span class=c1># test_smoketest.py</span><span class=kn>import</span> <span class=nn>json</span><span class=k>def</span> <span class=nf>test_api_server</span><span class=p>(</span><span class=n>apiclient</span><span class=p>):</span>    <span class=n>apiclient</span><span class=o>.</span><span class=n>request</span><span class=p>(</span><span class=s1>'GET'</span><span class=p>,</span> <span class=s1>'/'</span><span class=p>)</span>    <span class=n>response</span> <span class=o>=</span> <span class=n>apiclient</span><span class=o>.</span><span class=n>getresponse</span><span class=p>()</span>    <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>200</span>    <span class=k>assert</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>read</span><span class=p>())</span> <span class=o>==</span> <span class=p>{</span><span class=s1>'result'</span><span class=p>:</span> <span class=s1>'127.0.0.1'</span><span class=p>}</span></pre><h2>Scope</h2><p>All of the fixture factories take the <code>scope</code> keyword. Fixtures created with these factories will behave like any py.test fixture with that scope.</p><p>In this example we create a memcache that is <code>session</code> scoped and another that is <code>module</code> scoped.</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=n>memcache_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'memcached:latest'</span><span class=p>)</span><span class=n>memcache_session</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{memcache_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>scope</span><span class=o>=</span><span class=s1>'session'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'11211/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span><span class=p>)</span><span class=n>memcache_module</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{memcache_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>scope</span><span class=o>=</span><span class=s1>'module'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'11211/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span><span class=p>)</span></pre><p>When <code>test_scope_1.py</code> runs neither container is running so a new instance of each is started. Their scope is longer than a single <code>function</code> so they are kept alive for the next test that needs them.</p><pre lang=python3><span class=c1># test_scope_1.py</span><span class=kn>import</span> <span class=nn>socket</span><span class=k>def</span> <span class=nf>test_session_1</span><span class=p>(</span><span class=n>memcache_session</span><span class=p>):</span>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>'127.0.0.1'</span><span class=p>,</span> <span class=n>memcache_session</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'11211/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'set mykey 0 600 4</span><span class=se>\\r\\n</span><span class=s1>data</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'get mykey</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=k>assert</span> <span class=n>sock</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span> <span class=o>==</span> <span class=sa>b</span><span class=s1>'STORED</span><span class=se>\\r\\n</span><span class=s1>VALUE mykey 0 4</span><span class=se>\\r\\n</span><span class=s1>data</span><span class=se>\\r\\n</span><span class=s1>END</span><span class=se>\\r\\n</span><span class=s1>'</span>    <span class=n>sock</span><span class=o>.</span><span class=n>close</span><span class=p>()</span><span class=k>def</span> <span class=nf>test_session_2</span><span class=p>(</span><span class=n>memcache_session</span><span class=p>):</span>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>'127.0.0.1'</span><span class=p>,</span> <span class=n>memcache_session</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'11211/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'set mykey 0 600 4</span><span class=se>\\r\\n</span><span class=s1>data</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'get mykey</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=k>assert</span> <span class=n>sock</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span> <span class=o>==</span> <span class=sa>b</span><span class=s1>'STORED</span><span class=se>\\r\\n</span><span class=s1>VALUE mykey 0 4</span><span class=se>\\r\\n</span><span class=s1>data</span><span class=se>\\r\\n</span><span class=s1>END</span><span class=se>\\r\\n</span><span class=s1>'</span>    <span class=n>sock</span><span class=o>.</span><span class=n>close</span><span class=p>()</span><span class=k>def</span> <span class=nf>test_module_1</span><span class=p>(</span><span class=n>memcache_module</span><span class=p>):</span>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>'127.0.0.1'</span><span class=p>,</span> <span class=n>memcache_module</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'11211/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'set mykey 0 600 4</span><span class=se>\\r\\n</span><span class=s1>data</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'get mykey</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=k>assert</span> <span class=n>sock</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span> <span class=o>==</span> <span class=sa>b</span><span class=s1>'STORED</span><span class=se>\\r\\n</span><span class=s1>VALUE mykey 0 4</span><span class=se>\\r\\n</span><span class=s1>data</span><span class=se>\\r\\n</span><span class=s1>END</span><span class=se>\\r\\n</span><span class=s1>'</span>    <span class=n>sock</span><span class=o>.</span><span class=n>close</span><span class=p>()</span><span class=k>def</span> <span class=nf>test_module_2</span><span class=p>(</span><span class=n>memcache_module</span><span class=p>):</span>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>'127.0.0.1'</span><span class=p>,</span> <span class=n>memcache_module</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'11211/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'set mykey 0 600 4</span><span class=se>\\r\\n</span><span class=s1>data</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'get mykey</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=k>assert</span> <span class=n>sock</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span> <span class=o>==</span> <span class=sa>b</span><span class=s1>'STORED</span><span class=se>\\r\\n</span><span class=s1>VALUE mykey 0 4</span><span class=se>\\r\\n</span><span class=s1>data</span><span class=se>\\r\\n</span><span class=s1>END</span><span class=se>\\r\\n</span><span class=s1>'</span>    <span class=n>sock</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></pre><p>When <code>test_scope_2.py</code> runs the <code>session</code> scoped container is still running, so it will be reused. But we are now in a new module now so the <code>module</code> scoped container will have been destroyed. A new empty instance will be created.</p><pre lang=python3><span class=c1># test_scope_2.py</span><span class=kn>import</span> <span class=nn>socket</span><span class=k>def</span> <span class=nf>test_session_3</span><span class=p>(</span><span class=n>memcache_session</span><span class=p>):</span>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>'127.0.0.1'</span><span class=p>,</span> <span class=n>memcache_session</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'11211/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'get mykey</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=k>assert</span> <span class=n>sock</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=sa>b</span><span class=s1>'END</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=n>sock</span><span class=o>.</span><span class=n>close</span><span class=p>()</span><span class=k>def</span> <span class=nf>test_module_3</span><span class=p>(</span><span class=n>memcache_module</span><span class=p>):</span>    <span class=n>sock</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>    <span class=n>sock</span><span class=o>.</span><span class=n>connect</span><span class=p>((</span><span class=s1>'127.0.0.1'</span><span class=p>,</span> <span class=n>memcache_module</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'11211/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]))</span>    <span class=n>sock</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>b</span><span class=s1>'get mykey</span><span class=se>\\r\\n</span><span class=s1>'</span><span class=p>)</span>    <span class=k>assert</span> <span class=n>sock</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span> <span class=o>==</span> <span class=sa>b</span><span class=s1>'END</span><span class=se>\\r\\n</span><span class=s1>'</span>    <span class=n>sock</span><span class=o>.</span><span class=n>close</span><span class=p>()</span></pre><h2>Parallelism</h2><p>Integration and smoke tests are often slow, but a lot of time is spent waiting. So running tests in parallel is a great way to speed them up. <code>pytest-docker-tools</code> avoids creating resource names that could collide. It also makes it easy to not care what port your service is bound to. This means its a great fit for use with <code>pytest-xdist</code>.</p><p>Here is a bare minimum example that just tests creating and destroying 100 instances of a redis fixture that runs under xdist. Create a <code>test_xdist.py</code> plugin:</p><pre lang=python3><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=n>my_redis_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'redis:latest'</span><span class=p>)</span><span class=n>my_redis</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{my_redis_image.id}</span><span class=s1>'</span><span class=p>,</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>mark</span><span class=o>.</span><span class=n>parametrize</span><span class=p>(</span><span class=s2>\"i\"</span><span class=p>,</span> <span class=nb>list</span><span class=p>(</span><span class=nb>range</span><span class=p>(</span><span class=mi>100</span><span class=p>)))</span><span class=k>def</span> <span class=nf>test_xdist</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>my_redis</span><span class=p>):</span>    <span class=k>assert</span> <span class=n>my_redis</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=s2>\"running\"</span></pre><p>And invoke it with:</p><pre lang=bash>pytest<span class=w> </span>test_xdist.py<span class=w> </span>-n<span class=w> </span>auto</pre><p>It will create a worker per core and run the tests in parallel:</p><pre><code>===================================== test session starts ======================================platform darwin -- Python 3.6.5, pytest-3.6.3, py-1.5.4, pluggy-0.6.0rootdir: ~/pytest-docker-tools, inifile:plugins: xdist-1.22.2, forked-0.2, docker-tools-0.0.2gw0 [100] / gw1 [100] / gw2 [100] / gw3 [100] / gw4 [100] / gw5 [100] / gw6 [100] / gw7 [100]scheduling tests via LoadScheduling......................................................................................... [ 82%]...........                                                                              [100%]================================= 100 passed in 70.08 seconds ==================================</code></pre><h2>Factories Reference</h2><h3>Containers</h3><p>To create a container in your tests use the <code>container</code> fixture factory.</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=n>my_microservice_backend</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span><span class=n>image</span><span class=o>=</span><span class=s1>'redis:latest'</span><span class=p>)</span></pre><p>The default scope for this factory is <code>function</code>. This means a new container will be created for each test.</p><p>The <code>container</code> fixture factory supports all parameters that can be passed to the docker-py <code>run</code> method. See <a href=\"https://docker-py.readthedocs.io/en/stable/containers.html#docker.models.containers.ContainerCollection.run\" rel=nofollow>here</a> for them all.</p><p>Any string variables are interpolated against other defined fixtures. This means that a fixture can depend on other fixtures, and they will be built and run in order.</p><p>For example:</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=n>redis_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'redis:latest'</span><span class=p>)</span><span class=n>redis</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span><span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{redis_image.id}</span><span class=s1>'</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_container_starts</span><span class=p>(</span><span class=n>redis</span><span class=p>):</span>    <span class=k>assert</span> <span class=n>redis</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=s2>\"running\"</span></pre><p>This will fetch the latest <code>redis:latest</code> first, and then run a container from the exact image that was pulled. Note that if you don't use <code>build</code> or <code>fetch</code> to prepare a Docker image then the tag or hash that you specify must already exist on the host where you are running the tests. There is no implicit fetching of Docker images.</p><p>The container will be ready when the test is started, and will be automatically deleted after the test has finished.</p><p>If for some reason it's not ready in the timeout period (30 seconds by default) the test will fail.</p><p><code>timeout</code> can be passed to the <code>container</code> factory:</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=n>redis_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'redis:latest'</span><span class=p>)</span><span class=n>redis</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span><span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{redis_image.id}</span><span class=s1>'</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_container_starts</span><span class=p>(</span><span class=n>redis</span><span class=p>):</span>    <span class=k>assert</span> <span class=n>redis</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=s2>\"running\"</span></pre><p>To create a container defining its <code>Dockerfile</code> in code:</p><pre lang=python3><span class=kn>import</span> <span class=nn>io</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>container</span><span class=n>dockerfile</span> <span class=o>=</span> <span class=n>io</span><span class=o>.</span><span class=n>BytesIO</span><span class=p>(</span><span class=sa>b</span><span class=s2>\"\"\"</span><span class=s2>FROM alpine:3.12</span><span class=s2>RUN apk --no-cache add python3</span><span class=s2>CMD [\"tail\", \"-f\", \"/dev/null\"]</span><span class=s2>\"\"\"</span><span class=p>)</span><span class=n>image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span><span class=n>fileobj</span><span class=o>=</span><span class=n>dockerfile</span><span class=p>)</span><span class=n>container</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span><span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{image.id}</span><span class=s1>'</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_container_starts</span><span class=p>(</span><span class=n>container</span><span class=p>):</span>    <span class=k>assert</span> <span class=n>container</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=s2>\"running\"</span></pre><h4>Ip Addresses</h4><p>If your container is only attached to a single network you can get its Ip address through a helper property. Given this environment:</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=p>,</span> <span class=n>network</span><span class=n>redis_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'redis:latest'</span><span class=p>)</span><span class=n>backend_network</span> <span class=o>=</span> <span class=n>network</span><span class=p>()</span><span class=n>redis</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>  <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{redis_image.id}</span><span class=s1>'</span><span class=p>,</span>  <span class=n>network</span><span class=o>=</span><span class=s1>'</span><span class=si>{backend_network.name}</span><span class=s1>'</span><span class=p>,</span><span class=p>)</span></pre><p>You can access the IP via the container helper:</p><pre lang=python3><span class=kn>import</span> <span class=nn>ipaddress</span><span class=k>def</span> <span class=nf>test_get_service_ip</span><span class=p>(</span><span class=n>redis</span><span class=p>):</span>    <span class=c1># This will raise a ValueError if not a valid ip</span>    <span class=n>ipaddress</span><span class=o>.</span><span class=n>ip_address</span><span class=p>(</span><span class=n>redis</span><span class=o>.</span><span class=n>ips</span><span class=o>.</span><span class=n>primary</span><span class=p>)</span></pre><p>If you want to look up its ip address by network you can also access it more specifically:</p><pre lang=python3><span class=kn>import</span> <span class=nn>ipaddress</span><span class=k>def</span> <span class=nf>test_get_service_ip</span><span class=p>(</span><span class=n>backend_network</span><span class=p>,</span> <span class=n>redis</span><span class=p>):</span>    <span class=n>ipaddress</span><span class=o>.</span><span class=n>ip_address</span><span class=p>(</span><span class=n>redis</span><span class=o>.</span><span class=n>ips</span><span class=p>[</span><span class=n>backend_network</span><span class=p>])</span></pre><h4>Ports</h4><p>The factory takes the same port arguments as the official Python Docker API. We recommend using the ephemeral high ports syntax:</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=n>apiserver</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>  <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{apiserver_image.id}</span><span class=s1>'</span><span class=p>,</span>  <span class=n>ports</span><span class=o>=</span><span class=p>{</span><span class=s1>'8080/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span><span class=p>)</span></pre><p>Docker will map port 8080 in the container to a random port on your host. In order to access it from your tests you can get the bound port from the container instance:</p><pre lang=python3><span class=k>def</span> <span class=nf>test_connect_my_service</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=k>assert</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>!=</span> <span class=mi>8080</span></pre><h4>Logs</h4><p>You can inspect the logs of your container with the logs method:</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=n>redis_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'redis:latest'</span><span class=p>)</span><span class=n>redis</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{redis_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span><span class=s1>'6379/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>},</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_logs</span><span class=p>(</span><span class=n>redis</span><span class=p>):</span>    <span class=k>assert</span> <span class=s1>'oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo'</span> <span class=ow>in</span> <span class=n>redis</span><span class=o>.</span><span class=n>logs</span><span class=p>()</span></pre><h3>Images</h3><p>To pull an image from your default repository use the <code>fetch</code> fixture factory. To build an image from local source use the <code>build</code> fixture factory. If you are smoke testing an artifact already built locally you can use the <code>image</code> fixture factory to reference it.</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>image</span><span class=p>,</span> <span class=n>fetch</span><span class=n>my_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'redis:latest'</span><span class=p>)</span><span class=n>my_image_2</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>  <span class=n>path</span><span class=o>=</span><span class=s1>'db'</span><span class=p>)</span></pre><p>The <code>build</code> fixture factory supports all parameters that can be passed to the docker-py <code>build</code> method. See <a href=\"https://docker-py.readthedocs.io/en/stable/images.html#docker.models.images.ImageCollection.build\" rel=nofollow>here</a> for them all. The <code>fetch</code> fixture factory supports all parameters that can be passed to the docker-py <code>pull</code> method. See <a href=\"https://docker-py.readthedocs.io/en/stable/images.html#docker.models.images.ImageCollection.pull\" rel=nofollow>here</a> for them all.</p><p>The default scope for this factory is <code>session</code>. This means the fixture will only build or fetch once per py.test invocation. The fixture will not be triggered until a test (or other fixture) tries to use it. This means you won't waste time building an image if you aren't running the test that uses it.</p><h4>Caching</h4><p>By default images are kept between invocations. This speeds things up a lot. But when doing incremental development of an image it can leave you with lots of orphaned layers. Running <code>docker image prune</code> will throw away these layers, but as that is all untagged images it will include ones that are still valid for you current project. For large images this can really slow down your test cycle.</p><p>To avoid this you need to tag your images as <code>docker image prune</code> won't throw away tagged images by default. But for this to be effective for multi-stage images, you need to tag your stages as well. To support this, pytest-docker-tools takes a <code>stages</code> parameter. For example:</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>image</span><span class=p>,</span> <span class=n>fetch</span><span class=n>my_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>  <span class=n>path</span><span class=o>=</span><span class=s1>'db'</span><span class=p>,</span>  <span class=n>tag</span><span class=o>=</span><span class=s1>'localhost/myproject:latest'</span><span class=p>,</span>  <span class=n>stages</span><span class=o>=</span><span class=p>{</span>      <span class=s1>'builder'</span><span class=p>:</span> <span class=s1>'localhost/myproject:builder'</span>  <span class=p>}</span><span class=p>)</span></pre><p>Under the hood this will make pytest-docker-tools first build (and tag) the <code>builder</code> stage. This is like running:</p><pre lang=bash>docker<span class=w> </span>build<span class=w> </span>--target<span class=w> </span>builder<span class=w> </span>--tag<span class=w> </span>localhost/myproject:builder<span class=w> </span>.</pre><p>Then when that is tagged it will run the default target as before, which is like running:</p><pre lang=bash>docker<span class=w> </span>build<span class=w> </span>--tag<span class=w> </span>localhost/myproject:latest<span class=w> </span>.</pre><p>This will reuse the layers generated in the previous build (where applicable).</p><p>Now when you run <code>docker image prune</code> both the latest image build and the latest versions of the stages it depends on are left alone.</p><h3>Networks</h3><p>By default any containers you create with the <code>container()</code> fixture factory will run on your default docker network. You can create a dedicated network for your test with the <code>network()</code> fixture factory.</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=p>,</span> <span class=n>network</span><span class=n>frontend_network</span> <span class=o>=</span> <span class=n>network</span><span class=p>()</span><span class=n>redis_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'redis:latest'</span><span class=p>)</span><span class=n>redis</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{redis_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>network</span><span class=o>=</span><span class=s1>'</span><span class=si>{frontend_network.name}</span><span class=s1>'</span><span class=p>,</span><span class=p>)</span></pre><p>The <code>network</code> fixture factory supports all parameters that can be passed to the docker-py network <code>create</code> method. See <a href=\"https://docker-py.readthedocs.io/en/stable/networks.html#docker.models.networks.NetworkCollection.create\" rel=nofollow>here</a> for them all.</p><p>The default scope for this factory is <code>function</code>. This means a new network will be created for each test that is executed.</p><p>The network will be removed after the test using it has finished.</p><h3>Volumes</h3><p>In the ideal case a Docker container instance is read only. No data inside the container is written to, if it is its to a volume. If you are testing that your service can run read only you might want to mount a rw volume. You can use the <code>volume()</code> fixture factory to create a Docker volume with a lifecycle tied to your tests.</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>volume</span><span class=n>backend_storage</span> <span class=o>=</span> <span class=n>volume</span><span class=p>()</span></pre><p>The <code>volume</code> fixture factory supports all parameters that can be passed to the docker-py volume <code>create</code> method. See <a href=\"https://docker-py.readthedocs.io/en/stable/volumes.html#docker.models.volumes.VolumeCollection.create\" rel=nofollow>here</a> for them all.</p><p>In addition you can specify a <code>initial_content</code> dictionary. This allows you to seed a volume with a small set of initial state. In the following example we'll preseed a minio service with 2 buckets and 1 object in 1 of those buckets.</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=p>,</span> <span class=n>volume</span><span class=n>minio_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'minio/minio:latest'</span><span class=p>)</span><span class=n>minio_volume</span> <span class=o>=</span> <span class=n>volume</span><span class=p>(</span>    <span class=n>initial_content</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'bucket-1'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>        <span class=s1>'bucket-2/example.txt'</span><span class=p>:</span> <span class=sa>b</span><span class=s1>'Test file 1'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=n>minio</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{minio_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>command</span><span class=o>=</span><span class=p>[</span><span class=s1>'server'</span><span class=p>,</span> <span class=s1>'/data'</span><span class=p>],</span>    <span class=n>volumes</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'</span><span class=si>{minio_volume.name}</span><span class=s1>'</span><span class=p>:</span> <span class=p>{</span><span class=s1>'bind'</span><span class=p>:</span> <span class=s1>'/data'</span><span class=p>},</span>    <span class=p>},</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'MINIO_ACCESS_KEY'</span><span class=p>:</span> <span class=s1>'minio'</span><span class=p>,</span>        <span class=s1>'MINIO_SECRET_KEY'</span><span class=p>:</span> <span class=s1>'minio123'</span><span class=p>,</span>    <span class=p>},</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_volume_is_seeded</span><span class=p>(</span><span class=n>minio</span><span class=p>):</span>    <span class=n>files</span> <span class=o>=</span> <span class=n>minio</span><span class=o>.</span><span class=n>get_files</span><span class=p>(</span><span class=s1>'/data'</span><span class=p>)</span>    <span class=k>assert</span> <span class=n>files</span><span class=p>[</span><span class=s1>'data/bucket-2/example.txt'</span><span class=p>]</span> <span class=o>==</span> <span class=sa>b</span><span class=s1>'Test file 1'</span>    <span class=k>assert</span> <span class=n>files</span><span class=p>[</span><span class=s1>'data/bucket-1'</span><span class=p>]</span> <span class=o>==</span> <span class=kc>None</span></pre><p>The <code>minio_volume</code> container will be created with an empty folder (<code>bucket-1</code>) and a text file called <code>example.txt</code> in a seperate folder called <code>bucket-2</code>.</p><p>The default scope for this factory is <code>function</code>. This means a new volume will be created for each test that is executed. The volume will be removed after the test using it has finished.</p><h2>Fixtures</h2><h3>docker_client</h3><p>The <code>docker_client</code> fixture returns an instance of the official docker client.</p><pre lang=python3><span class=k>def</span> <span class=nf>test_container_created</span><span class=p>(</span><span class=n>docker_client</span><span class=p>,</span> <span class=n>fakedns</span><span class=p>):</span>    <span class=k>for</span> <span class=n>c</span> <span class=ow>in</span> <span class=n>docker_client</span><span class=o>.</span><span class=n>containers</span><span class=o>.</span><span class=n>list</span><span class=p>(</span><span class=n>ignore_removed</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>        <span class=k>if</span> <span class=n>c</span><span class=o>.</span><span class=n>id</span> <span class=o>==</span> <span class=n>fakedns</span><span class=o>.</span><span class=n>id</span><span class=p>:</span>            <span class=c1># Looks like we managed to start one!</span>            <span class=k>break</span>    <span class=k>else</span><span class=p>:</span>        <span class=k>assert</span> <span class=kc>False</span><span class=p>,</span> <span class=s1>'Looks like we failed to start a container'</span></pre><p>Take care when using the <code>docker_client</code> directly:</p><ul><li>Obviously resources created imperatively via the API won't be removed at the end of the test automatically</li><li>It's easy to break xdist compatibility<ul><li>Always use <code>ignore_removed</code> with <code>docker_client.containers.list()</code> - it is racy without</li><li>It's easy to find other instances of the resources you are working with (created in other workers). Be mindful of this!</li></ul></li><li>Don't take destructive action - someone could be running tests on a machine with other (non-test) containers running, collateral damage is easy and should be avoided.</li></ul><p>This is the fixture used by our fixture factories. This means if you define a <code>docker_client</code> fixture of your own then the tests will use that instead.</p><h2>Tips and tricks</h2><h3>Testing build artifacts</h3><p>We often find ourselves using a set of tests against a container we've built at test time (with <code>build()</code>) but then wanting to use the same tests with an artifact generated on our CI platform (with <code>image()</code>). This ended up looking like this:</p><pre><code>if not os.environ.get('IMAGE_ID', ''):    image = build(path='examples/resolver-service/dns')else:    image = image(name=os.environ['IMAGE_ID'])</code></pre><p>But now you can just do:</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>image_or_build</span><span class=n>image</span> <span class=o>=</span> <span class=n>image_or_build</span><span class=p>(</span>    <span class=n>environ_key</span><span class=o>=</span><span class=s1>'IMAGE_ID'</span><span class=p>,</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/dns'</span><span class=p>,</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_image</span><span class=p>(</span><span class=n>image</span><span class=p>):</span>    <span class=k>assert</span> <span class=n>image</span><span class=o>.</span><span class=n>attrs</span><span class=p>[</span><span class=s1>'Os'</span><span class=p>]</span> <span class=o>==</span> <span class=s1>'linux'</span></pre><h3>Network differences between dev env and CI</h3><p>Another common difference between your dev environment and your CI environment might be that your tests end up running in Docker on your CI. If you bind-mount your <code>docker.sock</code> then your tests might end up running on the same container network as the containers you are testing, and unable to access any port you are mapping to the host box. In otherwords:</p><ul><li>On your dev machine your tests might access locahost:8000 to access your test instance (ports mapped to host)</li><li>On your CI machine they might need to access 172.16.0.5:8000 to access your test instance</li></ul><p>The container object has a <code>get_addr</code> helper which will return the right thing depending on the environment it is in.</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=n>apiserver</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>  <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{apiserver_image.id}</span><span class=s1>'</span><span class=p>,</span>  <span class=n>ports</span><span class=o>=</span><span class=p>{</span><span class=s1>'8080/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>}</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_connect_my_service</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>ip</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>get_addr</span><span class=p>(</span><span class=s1>'8080/tcp'</span><span class=p>)</span>    <span class=c1># ... connect to ip:port ...</span></pre><h3>Dynamic scope</h3><p>The pytest fixture decorator now lets you specify a callback to determine the scope of a fixture This is called <a href=\"https://docs.pytest.org/en/stable/fixture.html#dynamic-scope\" rel=nofollow>dynamic scope</a>. You can use this to make it a runtime option whether to have a container instance per test or per test run. For example:</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=k>def</span> <span class=nf>determine_scope</span><span class=p>(</span><span class=n>fixture_name</span><span class=p>,</span> <span class=n>config</span><span class=p>):</span>    <span class=k>if</span> <span class=n>config</span><span class=o>.</span><span class=n>getoption</span><span class=p>(</span><span class=s2>\"--keep-containers\"</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>        <span class=k>return</span> <span class=s2>\"session\"</span>    <span class=k>return</span> <span class=s2>\"function\"</span><span class=n>memcache_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'memcached:latest'</span><span class=p>)</span><span class=n>memcache</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{memcache_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>scope</span><span class=o>=</span><span class=n>determine_scope</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'11211/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span><span class=p>)</span></pre><p>Your tests can look exactly the same as before:</p><pre lang=python3><span class=k>def</span> <span class=nf>test_connect_my_service</span><span class=p>(</span><span class=n>memcache</span><span class=p>):</span>    <span class=n>ip</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=n>memcache</span><span class=o>.</span><span class=n>get_addr</span><span class=p>(</span><span class=s1>'11211/tcp'</span><span class=p>)</span>    <span class=c1># ... connect to ip:port ...</span></pre><h3>Client fixtures</h3><p>You will probably want to create an API client for the service you are testing. Although we've already done this in the README, its worth calling it out. You can define a client fixture, have it depend on your docker containers, and then only have to reference the client from your tests.</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>http.client</span> <span class=kn>import</span> <span class=n>HTTPConnection</span><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>container</span><span class=n>fakedns_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/dns'</span><span class=p>,</span><span class=p>)</span><span class=n>fakedns</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{fakedns_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'DNS_EXAMPLE_COM__A'</span><span class=p>:</span> <span class=s1>'127.0.0.1'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=n>apiserver_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/api'</span><span class=p>,</span><span class=p>)</span><span class=n>apiserver</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{apiserver_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'8080/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span>    <span class=n>dns</span><span class=o>=</span><span class=p>[</span><span class=s1>'</span><span class=si>{fakedns.ips.primary}</span><span class=s1>'</span><span class=p>]</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=k>def</span> <span class=nf>apiclient</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>port</span> <span class=o>=</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>    <span class=k>return</span> <span class=n>HTTPConnection</span><span class=p>(</span><span class=sa>f</span><span class=s1>'localhost:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s1>'</span><span class=p>)</span></pre><p>And then reference it from your tests:</p><pre lang=python3><span class=c1># test_the_test_client.py</span><span class=kn>import</span> <span class=nn>json</span><span class=k>def</span> <span class=nf>test_api_server</span><span class=p>(</span><span class=n>apiclient</span><span class=p>):</span>    <span class=n>apiclient</span><span class=o>.</span><span class=n>request</span><span class=p>(</span><span class=s1>'GET'</span><span class=p>,</span> <span class=s1>'/'</span><span class=p>)</span>    <span class=n>response</span> <span class=o>=</span> <span class=n>apiclient</span><span class=o>.</span><span class=n>getresponse</span><span class=p>()</span>    <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>200</span>    <span class=n>result</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>    <span class=k>assert</span> <span class=n>result</span><span class=p>[</span><span class=s1>'result'</span><span class=p>]</span> <span class=o>==</span> <span class=s1>'127.0.0.1'</span></pre><p>In this example, any test that uses the <code>hpfeeds_client</code> fixture will get a properly configure client connected to a broker running in a Docker container on an ephemeral high port. When the test finishes the client will cleanly disconnect, and the docker container will be thrown away.</p><h3>Fixture overloading</h3><p>Complicated environments can be defined with fixture factories. They form a directed acyclic graph. By using fixture overloading it is possible to (in the context of a single test module) replace a node in that dependency graph without having to redefine the entire environment.</p><h4>Replacing a container fixture without having to redefine its dependents</h4><p>You can define a fixture in your <code>conftest.py</code>:</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>http.client</span> <span class=kn>import</span> <span class=n>HTTPConnection</span><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>container</span><span class=n>fakedns_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/dns'</span><span class=p>,</span><span class=p>)</span><span class=n>fakedns</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{fakedns_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'DNS_EXAMPLE_COM__A'</span><span class=p>:</span> <span class=s1>'127.0.0.1'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=n>apiserver_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/api'</span><span class=p>,</span><span class=p>)</span><span class=n>apiserver</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{apiserver_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'8080/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span>    <span class=n>dns</span><span class=o>=</span><span class=p>[</span><span class=s1>'</span><span class=si>{fakedns.ips.primary}</span><span class=s1>'</span><span class=p>]</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=k>def</span> <span class=nf>apiclient</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>port</span> <span class=o>=</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>    <span class=k>return</span> <span class=n>HTTPConnection</span><span class=p>(</span><span class=sa>f</span><span class=s1>'localhost:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s1>'</span><span class=p>)</span></pre><p>You can then overload these fixtures in your test modules. For example, if redis had a magic replication feature and you want to test for an edge case with your API you could in your <code>test_smoketest_alternate.py</code>:</p><pre lang=python3><span class=c1># test_smoketest_alternate.py</span><span class=kn>import</span> <span class=nn>json</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=n>fakedns</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{fakedns_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'DNS_EXAMPLE_COM__A'</span><span class=p>:</span> <span class=s1>'192.168.192.168'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_api_server</span><span class=p>(</span><span class=n>apiclient</span><span class=p>):</span>    <span class=n>apiclient</span><span class=o>.</span><span class=n>request</span><span class=p>(</span><span class=s1>'GET'</span><span class=p>,</span> <span class=s1>'/'</span><span class=p>)</span>    <span class=n>response</span> <span class=o>=</span> <span class=n>apiclient</span><span class=o>.</span><span class=n>getresponse</span><span class=p>()</span>    <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>200</span>    <span class=n>result</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>    <span class=k>assert</span> <span class=n>result</span><span class=p>[</span><span class=s1>'result'</span><span class=p>]</span> <span class=o>==</span> <span class=s1>'192.168.192.168'</span></pre><p>Here we have redefined the fakedns container locally in <code>test_smoketest_alternate</code>. It is able to use the <code>fakedns_image</code> fixture we defined in <code>conftest.py</code>. More crucially though, in <code>test_smoketest_alternate.py</code> when we use the core <code>apiclient</code> fixture it actually pulls in the local definition of <code>fakedns</code> and not the one from <code>conftest.py</code>! You don't have to redefine anything else. It just works.</p><h4>Injecting fixture configuration through fixtures</h4><p>You can pull in normal py.test fixtures from your fixture factory too. This means we can use fixture overloading and pass in config. In your <code>conftest.py</code>:</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>http.client</span> <span class=kn>import</span> <span class=n>HTTPConnection</span><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>container</span><span class=n>fakedns_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/dns'</span><span class=p>,</span><span class=p>)</span><span class=n>fakedns</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{fakedns_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'DNS_EXAMPLE_COM__A'</span><span class=p>:</span> <span class=s1>'</span><span class=si>{example_com_a}</span><span class=s1>'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=n>apiserver_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/api'</span><span class=p>,</span><span class=p>)</span><span class=n>apiserver</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{apiserver_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'8080/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span>    <span class=n>dns</span><span class=o>=</span><span class=p>[</span><span class=s1>'</span><span class=si>{fakedns.ips.primary}</span><span class=s1>'</span><span class=p>]</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=k>def</span> <span class=nf>apiclient</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>port</span> <span class=o>=</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>    <span class=k>return</span> <span class=n>HTTPConnection</span><span class=p>(</span><span class=sa>f</span><span class=s1>'localhost:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s1>'</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=k>def</span> <span class=nf>example_com_a</span><span class=p>():</span>    <span class=k>return</span> <span class=s1>'127.0.0.1'</span></pre><p>When a test uses the apiclient fixture now they will get the fakedns container configured as normal. However you can redefine the fixture in your test module - and the other fixtures will still respect it. For example:</p><pre lang=python3><span class=c1># test_smoketest_alternate.py</span><span class=kn>import</span> <span class=nn>json</span><span class=kn>import</span> <span class=nn>pytest</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=k>def</span> <span class=nf>example_com_a</span><span class=p>():</span>    <span class=k>return</span> <span class=s1>'192.168.192.168'</span><span class=k>def</span> <span class=nf>test_api_server</span><span class=p>(</span><span class=n>apiclient</span><span class=p>):</span>    <span class=n>apiclient</span><span class=o>.</span><span class=n>request</span><span class=p>(</span><span class=s1>'GET'</span><span class=p>,</span> <span class=s1>'/'</span><span class=p>)</span>    <span class=n>response</span> <span class=o>=</span> <span class=n>apiclient</span><span class=o>.</span><span class=n>getresponse</span><span class=p>()</span>    <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>200</span>    <span class=n>result</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>    <span class=k>assert</span> <span class=n>result</span><span class=p>[</span><span class=s1>'result'</span><span class=p>]</span> <span class=o>==</span> <span class=s1>'192.168.192.168'</span></pre><p>Your <code>api_server</code> container (and its <code>redis</code> backend) will be built as normal, only in this one test module it will use its sqlite backend.</p><h3>Fixture parameterisation</h3><p>You can create parameterisation fixtures. Perhaps you wan to run all your <code>api_server</code> tests against both of your authentication backends. Perhaps you have a fake that you want to test multiple configurations of.</p><p>In your <code>conftest.py</code>:</p><pre lang=python3><span class=c1># conftest.py</span><span class=kn>from</span> <span class=nn>http.client</span> <span class=kn>import</span> <span class=n>HTTPConnection</span><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>container</span><span class=n>fakedns_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/dns'</span><span class=p>,</span><span class=p>)</span><span class=n>fakedns_localhost</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{fakedns_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'DNS_EXAMPLE_COM__A'</span><span class=p>:</span> <span class=s1>'127.0.0.1'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=n>fakedns_alternate</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{fakedns_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'DNS_EXAMPLE_COM__A'</span><span class=p>:</span> <span class=s1>'192.168.192.168'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=p>(</span><span class=n>scope</span><span class=o>=</span><span class=s1>'function'</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=p>[</span><span class=s1>'fakedns_localhost'</span><span class=p>,</span> <span class=s1>'fakedns_alternate'</span><span class=p>])</span><span class=k>def</span> <span class=nf>fakedns</span><span class=p>(</span><span class=n>request</span><span class=p>):</span>      <span class=k>return</span> <span class=n>request</span><span class=o>.</span><span class=n>getfixturevalue</span><span class=p>(</span><span class=n>request</span><span class=o>.</span><span class=n>param</span><span class=p>)</span><span class=n>apiserver_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/api'</span><span class=p>,</span><span class=p>)</span><span class=n>apiserver</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{apiserver_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'8080/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span>    <span class=n>dns</span><span class=o>=</span><span class=p>[</span><span class=s1>'</span><span class=si>{fakedns.ips.primary}</span><span class=s1>'</span><span class=p>]</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=k>def</span> <span class=nf>apiclient</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>port</span> <span class=o>=</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>    <span class=k>return</span> <span class=n>HTTPConnection</span><span class=p>(</span><span class=sa>f</span><span class=s1>'localhost:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s1>'</span><span class=p>)</span></pre><p>The test is the same as the first example, only now it will be tested against 2 different fake configurations.</p><pre lang=python3><span class=c1># test_smoketest.py</span><span class=kn>import</span> <span class=nn>ipaddress</span><span class=kn>import</span> <span class=nn>json</span><span class=k>def</span> <span class=nf>test_api_server</span><span class=p>(</span><span class=n>apiclient</span><span class=p>):</span>    <span class=n>apiclient</span><span class=o>.</span><span class=n>request</span><span class=p>(</span><span class=s1>'GET'</span><span class=p>,</span> <span class=s1>'/'</span><span class=p>)</span>    <span class=n>response</span> <span class=o>=</span> <span class=n>apiclient</span><span class=o>.</span><span class=n>getresponse</span><span class=p>()</span>    <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>200</span>    <span class=n>result</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>    <span class=n>ipaddress</span><span class=o>.</span><span class=n>ip_address</span><span class=p>(</span><span class=n>result</span><span class=p>[</span><span class=s1>'result'</span><span class=p>])</span></pre><p>This test will be invoked twice - once against the memory backend, and once against the sqlite backend.</p><h3>Fixture wrappers</h3><p>You can wrap your fixtures with a <code>wrapper_class</code>. This allows you to add helper methods to fixtures for use in your tests. In the case of the <code>container</code> fixture factory you can also implement <code>ready()</code> to add additional container readyness checks.</p><p>In previous tests we've created an entire test client fixture. With <code>wrapper_class</code> we could hang this convenience method off the fixture itself instead:</p><pre lang=python3><span class=c1># test_fixture_wrappers.py</span><span class=kn>import</span> <span class=nn>ipaddress</span><span class=kn>import</span> <span class=nn>json</span><span class=kn>import</span> <span class=nn>random</span><span class=kn>from</span> <span class=nn>http.client</span> <span class=kn>import</span> <span class=n>HTTPConnection</span><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>build</span><span class=p>,</span> <span class=n>container</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>wrappers</span><span class=k>class</span> <span class=nc>Container</span><span class=p>(</span><span class=n>wrappers</span><span class=o>.</span><span class=n>Container</span><span class=p>):</span>    <span class=k>def</span> <span class=nf>ready</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>        <span class=c1># This is called until it returns True - its a great hook for e.g.</span>        <span class=c1># waiting until a log message appears or a pid file is created etc</span>        <span class=k>if</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>ready</span><span class=p>():</span>            <span class=k>return</span> <span class=n>random</span><span class=o>.</span><span class=n>choice</span><span class=p>([</span><span class=kc>True</span><span class=p>,</span> <span class=kc>False</span><span class=p>])</span>        <span class=k>return</span> <span class=kc>False</span>    <span class=k>def</span> <span class=nf>client</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>        <span class=n>port</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ports</span><span class=p>[</span><span class=s1>'8080/tcp'</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span>        <span class=k>return</span> <span class=n>HTTPConnection</span><span class=p>(</span><span class=sa>f</span><span class=s1>'localhost:</span><span class=si>{</span><span class=n>port</span><span class=si>}</span><span class=s1>'</span><span class=p>)</span><span class=n>fakedns_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/dns'</span><span class=p>,</span><span class=p>)</span><span class=n>fakedns</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{fakedns_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'DNS_EXAMPLE_COM__A'</span><span class=p>:</span> <span class=s1>'127.0.0.1'</span><span class=p>,</span>    <span class=p>}</span><span class=p>)</span><span class=n>apiserver_image</span> <span class=o>=</span> <span class=n>build</span><span class=p>(</span>    <span class=n>path</span><span class=o>=</span><span class=s1>'examples/resolver-service/api'</span><span class=p>,</span><span class=p>)</span><span class=n>apiserver</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{apiserver_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>ports</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'8080/tcp'</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>    <span class=p>},</span>    <span class=n>dns</span><span class=o>=</span><span class=p>[</span><span class=s1>'</span><span class=si>{fakedns.ips.primary}</span><span class=s1>'</span><span class=p>],</span>    <span class=n>wrapper_class</span><span class=o>=</span><span class=n>Container</span><span class=p>,</span><span class=p>)</span><span class=k>def</span> <span class=nf>test_container_wrapper_class</span><span class=p>(</span><span class=n>apiserver</span><span class=p>):</span>    <span class=n>client</span> <span class=o>=</span> <span class=n>apiserver</span><span class=o>.</span><span class=n>client</span><span class=p>()</span>    <span class=n>client</span><span class=o>.</span><span class=n>request</span><span class=p>(</span><span class=s1>'GET'</span><span class=p>,</span> <span class=s1>'/'</span><span class=p>)</span>    <span class=n>response</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>getresponse</span><span class=p>()</span>    <span class=k>assert</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>200</span>    <span class=n>result</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>read</span><span class=p>())</span>    <span class=n>ipaddress</span><span class=o>.</span><span class=n>ip_address</span><span class=p>(</span><span class=n>result</span><span class=p>[</span><span class=s1>'result'</span><span class=p>])</span></pre><h3>Referencing Non-String Returning Fixtures</h3><p>You can define resources by calling the provided factories with parameters:</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=n>cache</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>name</span><span class=o>=</span><span class=s1>'my_cache_container'</span><span class=p>,</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'1838567e84867e8498695403067879'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'foo'</span><span class=p>:</span> <span class=s1>'bar'</span><span class=p>,</span>        <span class=s1>'mode'</span><span class=p>:</span> <span class=s1>'prod'</span>        <span class=p>}</span>    <span class=p>)</span></pre><p>As given in previous examples it's possible to resolve factory arguments dynamically by referencing fixtures in a string templates like manner  ('{&lt;fixture_name&gt;}'):</p><pre lang=python3><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=n>cache_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'memcached:latest'</span><span class=p>)</span><span class=n>cache</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>name</span><span class=o>=</span><span class=s1>'my_cache_container'</span><span class=p>,</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{cache_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=p>{</span>        <span class=s1>'foo'</span><span class=p>:</span> <span class=s1>'bar'</span><span class=p>,</span>        <span class=s1>'mode'</span><span class=p>:</span> <span class=s1>'prod'</span>        <span class=p>}</span>    <span class=p>)</span></pre><p>In this example the image id will be obtained from the image wrapper object that is provided by <code>fetch()</code>. However this only allows to retrieve values that are string like. E.g. it's not possible to dynamically obtain a dictionary object for the <code>envinronment</code> argument by using the string template like syntax. Doing so would only result in a stringified dictionary.</p><p>To obtain non string return value from a fixture there are two options. First you can define another fixture in the same file or import the fixture. Afterwards you need to reference it as follows:</p><pre lang=python3><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=p>,</span> <span class=n>fxtr</span><span class=n>cache_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'memcached:latest'</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=p>()</span><span class=k>def</span> <span class=nf>memcached_env</span><span class=p>():</span>    <span class=k>yield</span> <span class=p>{</span><span class=s1>'foo'</span><span class=p>:</span> <span class=s1>'bar'</span><span class=p>,</span>           <span class=s1>'mode'</span><span class=p>:</span> <span class=s1>'prod'</span><span class=p>}</span><span class=n>cache</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>name</span><span class=o>=</span><span class=s1>'my_cache_container'</span><span class=p>,</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{cache_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=n>memcached_env</span>    <span class=p>)</span></pre><p>However normally working with fixtures in pytest does not require importing them in the first place. This is where the <code>fxtr</code> helper function can be used:</p><pre lang=python3><span class=kn>import</span> <span class=nn>pytest</span><span class=kn>from</span> <span class=nn>pytest_docker_tools</span> <span class=kn>import</span> <span class=n>container</span><span class=p>,</span> <span class=n>fetch</span><span class=p>,</span> <span class=n>fxtr</span><span class=n>cache_image</span> <span class=o>=</span> <span class=n>fetch</span><span class=p>(</span><span class=n>repository</span><span class=o>=</span><span class=s1>'memcached:latest'</span><span class=p>)</span><span class=nd>@pytest</span><span class=o>.</span><span class=n>fixture</span><span class=p>()</span><span class=k>def</span> <span class=nf>memcached_env</span><span class=p>():</span>    <span class=k>yield</span> <span class=p>{</span><span class=s1>'foo'</span><span class=p>:</span> <span class=s1>'bar'</span><span class=p>,</span>           <span class=s1>'mode'</span><span class=p>:</span> <span class=s1>'prod'</span><span class=p>}</span><span class=n>cache</span> <span class=o>=</span> <span class=n>container</span><span class=p>(</span>    <span class=n>name</span><span class=o>=</span><span class=s1>'my_cache_container'</span><span class=p>,</span>    <span class=n>image</span><span class=o>=</span><span class=s1>'</span><span class=si>{cache_image.id}</span><span class=s1>'</span><span class=p>,</span>    <span class=n>environment</span><span class=o>=</span><span class=n>fxtr</span><span class=p>(</span><span class=s1>'memcached_env'</span><span class=p>)</span>    <span class=p>)</span></pre><p>In both examples a proper dict object is handed over to the container function. For container resources this is useful to dynamically set environments or volumes based on fixtures.</p><h3>Reusable Containers</h3><p>By default, the container fixture factory of pytest-docker-tools will create every defined container when pytest is invoked, and clean them up before the session ends. This ensures that your test environment is clean and your tests aren't passing because of some tate left in the containers previously.</p><p>Sometimes this behavior might not be what you want. When you are developing iteratively and running the tests over and over again the speed of your \"test cycle\" (how long it takes to fix a typo and re-run the tests) becomes important. When using the <code>--reuse-containers</code> command line argument pytest-docker-tools <strong>won't</strong> automatically remove containers it has created. It will try to reuse them between pytest invocations. pytest-docker-tools will also keep track of if a container, volume or network has become stale (for example, if you change an image version) and automatically replace it.</p><p><strong>Attention</strong>: When using <code>--reuse-containers</code> you must set the <code>name</code> attribute on all your pytest-docker-tools fixtures. If you don't use <code>--reuse-containers</code> setting the <code>name</code> attribute is not required.</p><h4>Notes on using Reusable Containers</h4><ul><li>Resources created using the <code>--reuse-containers</code> argument (containers, networks, volumes) will not have a finalizer, so scopes will may not behave like they normally would. It is up to the test author to make sure there are no collisions where 2 different fixtures share a name.</li><li>When reusing resources you are responsible to clean them up (e.g. databases, volume data) as data written during tests will not be deleted when they are finished.</li><li>Each Resource Container created by pytest-docker-tools will get the following label: <code>creator: pytest-docker-tools</code>. When required, this can be used to search for left overresources. For example containers can be manually cleaned up by executing <code>docker ps -aq --filter \"label=creator=pytest-docker-tools\" | xargs docker rm -f</code></li></ul><h2>Hacking</h2><p>This project usings poetry. You need a working poetry and python 3 environment before setting up a development environment for <code>pytest-docker-tools</code>. When you do you can just:</p><pre><code>poetry install</code></pre><p>To run all the linters and tests run <code>./scripts/test.sh</code> within poetry:</p><pre><code>poetry run ./scripts/tests.sh</code></pre><p>This will run <code>pyupgrade</code>, <code>isort</code> and <code>black</code> which will modify your changes in place to match the code style we use.</p>          </div>        </div>        <div id=\"data\" data-project-tabs-target=\"content\" class=\"vertical-tabs__content\" role=\"tabpanel\" aria-labelledby=\"mobile-data-tab\" tabindex=\"-1\">          <h2 class=\"page-title\">Project details</h2><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Project links</h3>  <ul class=\"vertical-tabs__list\">    <li>      <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\" href=\"https://github.com/Jc2k/pytest-docker-tools\" rel=\"nofollow\">        <i class=\"fas fa-home\" aria-hidden=\"true\"></i>Homepage      </a>    </li>  </ul></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Statistics</h3>  <div class=\"hidden github-repo-info\" data-controller=\"github-repo-info\">GitHub statistics:    <ul class=\"vertical-tabs__list\">      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"stargazersUrl\" rel=\"noopener\">          <i class=\"fa fa-star\" aria-hidden=\"true\"></i>          <strong>Stars:</strong>          <span data-github-repo-info-target=\"stargazersCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"forksUrl\" rel=\"noopener\">          <i class=\"fa fa-code-branch\" aria-hidden=\"true\"></i>          <strong>Forks:</strong>          <span data-github-repo-info-target=\"forksCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"openIssuesUrl\" rel=\"noopener\">          <i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>          <strong>Open issues:</strong>          <span data-github-repo-info-target=\"openIssuesCount\"></span>        </a>      </li>      <li>        <a class=\"vertical-tabs__tab vertical-tabs__tab--with-icon vertical-tabs__tab--condensed\"           data-github-repo-info-target=\"openPRsUrl\" rel=\"noopener\">          <i class=\"fa fa-code-pull-request\" aria-hidden=\"true\"></i>          <strong>Open PRs:</strong>          <span data-github-repo-info-target=\"openPRsCount\"></span>        </a>      </li>    </ul>  </div>  <p>View statistics for this project via <a href=\"https://libraries.io/pypi/pytest-docker-tools\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Libraries.io</a>, or by using <a href=\"https://packaging.python.org/guides/analyzing-pypi-package-downloads/\" target=\"_blank\" rel=\"noopener\">our public dataset on Google BigQuery</a>  </p></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Meta</h3>  <p><strong>License:</strong> Apache Software License (Apache-2.0)</p>    <p><strong>Author:</strong> <a href=\"mailto:john.carr@unrouted.co.uk\">John Carr</a></p>  <p class=\"tags\">    <i class=\"fa fa-tags\" aria-hidden=\"true\"></i>    <span class=\"sr-only\">Tags</span>    <span class=\"package-keyword\">      devops,    </span>    <span class=\"package-keyword\">      docker,    </span>    <span class=\"package-keyword\">      pytest    </span>  </p>  <p>    <strong>Requires:</strong> Python &gt;=3.7.0, &lt;4.0.0  </p></div><div class=\"sidebar-section\">    <h3 class=\"sidebar-section__title\">Maintainers</h3>      <span class=\"sidebar-section__maintainer\">        <a href=\"/user/johncarr/\" aria-label=\"johncarr\">          <span class=\"sidebar-section__user-gravatar\">            <img src=\"https://pypi-camo.freetls.fastly.net/18028cb77dae573667d29593c1b7fcc00387290e/68747470733a2f2f7365637572652e67726176617461722e636f6d2f6176617461722f33633839363332346565346637366538356130393439376533326564633139623f73697a653d3530\" height=\"50\" width=\"50\" alt=\"Avatar for johncarr from gravatar.com\" title=\"Avatar for johncarr from gravatar.com\">          </span>          <span class=\"sidebar-section__user-gravatar-text\">            johncarr          </span>        </a>      </span></div><div class=\"sidebar-section\">  <h3 class=\"sidebar-section__title\">Classifiers</h3>  <ul class=\"sidebar-section__classifiers\">    <li>      <strong>Development Status</strong>      <ul>        <li>          <a href=\"/search/?c=Development+Status+%3A%3A+4+-+Beta\">            4 - Beta          </a>        </li>      </ul>    </li>    <li>      <strong>Intended Audience</strong>      <ul>        <li>          <a href=\"/search/?c=Intended+Audience+%3A%3A+Developers\">            Developers          </a>        </li>      </ul>    </li>    <li>      <strong>License</strong>      <ul>        <li>          <a href=\"/search/?c=License+%3A%3A+OSI+Approved+%3A%3A+Apache+Software+License\">            OSI Approved :: Apache Software License          </a>        </li>      </ul>    </li>    <li>      <strong>Programming Language</strong>      <ul>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3\">            Python :: 3          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.7\">            Python :: 3.7          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.8\">            Python :: 3.8          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.9\">            Python :: 3.9          </a>        </li>        <li>          <a href=\"/search/?c=Programming+Language+%3A%3A+Python+%3A%3A+3.10\">            Python :: 3.10          </a>        </li>      </ul>    </li>    <li>      <strong>Topic</strong>      <ul>        <li>          <a href=\"/search/?c=Topic+%3A%3A+Software+Development+%3A%3A+Testing\">            Software Development :: Testing          </a>        </li>      </ul>    </li>  </ul></div>          <br>        </div>        <div id=\"history\" data-project-tabs-target=\"content\" class=\"vertical-tabs__content\" role=\"tabpanel\" aria-labelledby=\"history-tab mobile-history-tab\" tabindex=\"-1\">          <h2 class=\"page-title split-layout\">            <span>Release history</span>            <span class=\"reset-text margin-top\">              <a href=\"/help/#project-release-notifications\">Release notifications</a> |              <a href=\"/rss/project/pytest-docker-tools/releases.xml\">RSS feed <i class=\"fa fa-rss\" aria-hidden=\"true\"></i></a>            </span>          </h2>          <div class=\"release-timeline\">            <div class=\"release release--latest release--current\">              <div class=\"release__meta\">                <span class=\"badge\">This version</span>              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/blue-cube.572a5bfb.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/3.1.3/\">                <p class=\"release__version\">                  3.1.3                </p>                <p class=\"release__version-date\">                  <time datetime=\"2022-02-17T13:07:47+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Feb 17, 2022</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/3.1.0/\">                <p class=\"release__version\">                  3.1.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-07-23T06:37:48+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 23, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/3.0.0/\">                <p class=\"release__version\">                  3.0.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-06-03T10:27:23+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jun 3, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/2.0.0/\">                <p class=\"release__version\">                  2.0.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-06-01T10:20:05+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jun 1, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/1.0.6/\">                <p class=\"release__version\">                  1.0.6                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-05-28T11:22:21+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  May 28, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/1.0.5/\">                <p class=\"release__version\">                  1.0.5                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-05-28T11:21:52+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  May 28, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/1.0.4/\">                <p class=\"release__version\">                  1.0.4                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-05-27T16:30:17+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  May 27, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/1.0.3/\">                <p class=\"release__version\">                  1.0.3                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-03-26T14:36:33+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Mar 26, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/1.0.2/\">                <p class=\"release__version\">                  1.0.2                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-03-02T13:59:01+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Mar 2, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/1.0.1/\">                <p class=\"release__version\">                  1.0.1                </p>                <p class=\"release__version-date\">                  <time datetime=\"2021-01-15T10:55:38+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jan 15, 2021</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/1.0.0/\">                <p class=\"release__version\">                  1.0.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2020-09-07T16:33:57+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Sep 7, 2020</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.2.3/\">                <p class=\"release__version\">                  0.2.3                </p>                <p class=\"release__version-date\">                  <time datetime=\"2020-09-05T14:00:51+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Sep 5, 2020</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.2.2/\">                <p class=\"release__version\">                  0.2.2                </p>                <p class=\"release__version-date\">                  <time datetime=\"2020-07-09T06:44:05+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 9, 2020</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.2.1/\">                <p class=\"release__version\">                  0.2.1                </p>                <p class=\"release__version-date\">                  <time datetime=\"2020-05-26T21:38:55+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  May 26, 2020</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.2.0/\">                <p class=\"release__version\">                  0.2.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2019-01-02T20:48:11+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jan 2, 2019</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.1.0/\">                <p class=\"release__version\">                  0.1.0                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-11-06T13:50:02+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Nov 6, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.12/\">                <p class=\"release__version\">                  0.0.12                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-11-06T13:38:43+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Nov 6, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.11/\">                <p class=\"release__version\">                  0.0.11                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-08-28T11:50:35+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 28, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.10/\">                <p class=\"release__version\">                  0.0.10                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-08-07T13:26:27+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 7, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.9/\">                <p class=\"release__version\">                  0.0.9                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-08-07T12:12:46+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Aug 7, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.8/\">                <p class=\"release__version\">                  0.0.8                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-07-31T13:20:16+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 31, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.7/\">                <p class=\"release__version\">                  0.0.7                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-07-30T17:28:37+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 30, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.6/\">                <p class=\"release__version\">                  0.0.6                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-07-30T10:14:19+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 30, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.5/\">                <p class=\"release__version\">                  0.0.5                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-07-27T14:03:29+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 27, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.4/\">                <p class=\"release__version\">                  0.0.4                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-07-26T17:07:36+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 26, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.3/\">                <p class=\"release__version\">                  0.0.3                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-07-24T10:22:21+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 24, 2018</time>                </p>              </a>            </div>            <div class=\"release\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.2/\">                <p class=\"release__version\">                  0.0.2                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-07-22T21:34:04+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 22, 2018</time>                </p>              </a>            </div>            <div class=\"release release--oldest\">              <div class=\"release__meta\">              </div>              <div class=\"release__graphic\">                <div class=\"release__line\"></div>                <img class=\"release__node\" alt=\"\" src=\"https://pypi.org/static/images/white-cube.2351a86c.svg\">              </div>              <a class=\"card release__card\" href=\"/project/pytest-docker-tools/0.0.1/\">                <p class=\"release__version\">                  0.0.1                </p>                <p class=\"release__version-date\">                  <time datetime=\"2018-07-22T15:52:44+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Jul 22, 2018</time>                </p>              </a>            </div>          </div>        </div>          <div id=\"files\" data-project-tabs-target=\"content\" class=\"vertical-tabs__content\" role=\"tabpanel\" aria-labelledby=\"files-tab mobile-files-tab\" tabindex=\"-1\">            <h2 class=\"page-title\">Download files</h2>            <p>Download the file for your platform. If you're not sure which to choose, learn more about <a href=\"https://packaging.python.org/tutorials/installing-packages/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">installing packages</a>.</p>            <h3>Source Distribution            </h3>                  <div class=\"file\">      <div class=\"file__graphic\">        <i class=\"far fa-file\" aria-hidden=\"true\"></i>      </div>      <div class=\"card file__card\">        <a href=\"https://files.pythonhosted.org/packages/4f/a2/620ff42d20a2c2b107805a12633a2cb9eb01db3a4eb371a6bc1f71728217/pytest_docker_tools-3.1.3.tar.gz\">          pytest_docker_tools-3.1.3.tar.gz        </a>        (37.1 kB        <a href=\"#copy-hash-modal-0f89bb37-794c-4289-978f-1609ef054c1d\">view hashes</a>)        <p class=\"file__meta\">          Uploaded <time datetime=\"2022-02-17T13:07:49+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Feb 17, 2022</time>          <code>source</code>        </p>      </div>    </div>            <h3>Built Distribution            </h3>                <div class=\"file\">      <div class=\"file__graphic\">        <i class=\"far fa-file\" aria-hidden=\"true\"></i>      </div>      <div class=\"card file__card\">        <a href=\"https://files.pythonhosted.org/packages/90/f6/961e9b5c6a3006be78d2725713e0d6b2811dc20ae78b2b21b575185b448d/pytest_docker_tools-3.1.3-py3-none-any.whl\">          pytest_docker_tools-3.1.3-py3-none-any.whl        </a>        (24.8 kB        <a href=\"#copy-hash-modal-5253dc5a-1fe1-4d36-9c99-e8f37be5fdb0\">view hashes</a>)        <p class=\"file__meta\">          Uploaded <time datetime=\"2022-02-17T13:07:47+0000\" data-controller=\"localized-time\" data-localized-time-relative=\"true\" data-localized-time-show-time=\"false\">  Feb 17, 2022</time>          <code>py3</code>        </p>      </div>    </div>          </div><div id=\"copy-hash-modal-0f89bb37-794c-4289-978f-1609ef054c1d\" class=\"modal modal--wide\">  <div class=\"modal__content\" role=\"dialog\">    <a href=\"#modal-close\" title=\"Close\" class=\"modal__close\">      <i class=\"fa fa-times\" aria-hidden=\"true\"></i>      <span class=\"sr-only\">Close</span>    </a>    <div class=\"modal__body\">      <h3 class=\"modal__title\"><a href=\"https://pip.pypa.io/en/stable/topics/secure-installs/#hash-checking-mode\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Hashes</a> for pytest_docker_tools-3.1.3.tar.gz      </h3>      <table class=\"table table--hashes\">        <caption class=\"sr-only\">Hashes for pytest_docker_tools-3.1.3.tar.gz</caption>        <thead>          <tr>            <th scope=\"col\">Algorithm</th>            <th scope=\"col\">Hash digest</th>            <th></th>          </tr>        </thead>        <tbody>          <tr data-controller=\"clipboard\">            <th scope=\"row\">SHA256</th>            <td><code data-clipboard-target=\"source\">c7e28841839d67b3ac80ad7b345b953701d5ae61ffda97586114244292aeacc0</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">MD5</th>            <td><code data-clipboard-target=\"source\">3e2ab2bd06cc633f3f6e7e07918f4ec3</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">BLAKE2b-256</th>            <td><code data-clipboard-target=\"source\">4fa2620ff42d20a2c2b107805a12633a2cb9eb01db3a4eb371a6bc1f71728217</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>        </tbody>      </table>    </div>    <div class=\"modal__footer\">      <a href=\"#modal-close\" class=\"button button--primary modal__action\">Close</a>    </div>  </div></div><div id=\"copy-hash-modal-5253dc5a-1fe1-4d36-9c99-e8f37be5fdb0\" class=\"modal modal--wide\">  <div class=\"modal__content\" role=\"dialog\">    <a href=\"#modal-close\" title=\"Close\" class=\"modal__close\">      <i class=\"fa fa-times\" aria-hidden=\"true\"></i>      <span class=\"sr-only\">Close</span>    </a>    <div class=\"modal__body\">      <h3 class=\"modal__title\"><a href=\"https://pip.pypa.io/en/stable/topics/secure-installs/#hash-checking-mode\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Hashes</a> for pytest_docker_tools-3.1.3-py3-none-any.whl      </h3>      <table class=\"table table--hashes\">        <caption class=\"sr-only\">Hashes for pytest_docker_tools-3.1.3-py3-none-any.whl</caption>        <thead>          <tr>            <th scope=\"col\">Algorithm</th>            <th scope=\"col\">Hash digest</th>            <th></th>          </tr>        </thead>        <tbody>          <tr data-controller=\"clipboard\">            <th scope=\"row\">SHA256</th>            <td><code data-clipboard-target=\"source\">63e659043160f41d89f94ea42616102594bcc85682aac394fcbc14f14cd1b189</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">MD5</th>            <td><code data-clipboard-target=\"source\">2b0dd7ab4b284492622cce9a36c5a43e</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>          <tr data-controller=\"clipboard\">            <th scope=\"row\">BLAKE2b-256</th>            <td><code data-clipboard-target=\"source\">90f6961e9b5c6a3006be78d2725713e0d6b2811dc20ae78b2b21b575185b448d</code></td>            <td class=\"table__align-right\">              <button type=\"button\" class=\"button button--small copy-tooltip copy-tooltip-w\" data-action=\"clipboard#copy\" data-clipboard-target=\"tooltip\" data-clipboard-tooltip-value=\"Copy to clipboard\">Copy              </button>            </td>          </tr>        </tbody>      </table>    </div>    <div class=\"modal__footer\">      <a href=\"#modal-close\" class=\"button button--primary modal__action\">Close</a>    </div>  </div></div>      </div>    </div>  </div></div>    </main>    <footer class=\"footer\">      <div class=\"footer__logo\">        <img src=\"/static/images/white-cube.2351a86c.svg\" alt=\"\" class=\"-js-white-cube\">      </div>      <div class=\"footer__menus\">        <div class=\"footer__menu\">          <h2>Help</h2>          <nav aria-label=\"Help navigation\">            <ul>              <li><a href=\"https://packaging.python.org/tutorials/installing-packages/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Installing packages</a></li>              <li><a href=\"https://packaging.python.org/tutorials/packaging-projects/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Uploading packages</a></li>              <li><a href=\"https://packaging.python.org/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">User guide</a></li>              <li><a href=\"https://www.python.org/dev/peps/pep-0541/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Project name retention</a></li>              <li><a href=\"/help/\">FAQs</a></li>            </ul>          </nav>        </div>        <div class=\"footer__menu\">          <h2>About PyPI</h2>          <nav aria-label=\"About PyPI navigation\">            <ul>              <li><a href=\"https://twitter.com/PyPI\" title=\"External link\" target=\"_blank\" rel=\"noopener\">PyPI on Twitter</a></li>              <li><a href=\"https://dtdg.co/pypi\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Infrastructure dashboard</a></li>              <li><a href=\"/stats/\">Statistics</a></li>              <li><a href=\"/trademarks/\">Logos & trademarks</a></li>              <li><a href=\"/sponsors/\">Our sponsors</a></li>            </ul>          </nav>        </div>        <div class=\"footer__menu\">          <h2>Contributing to PyPI</h2>          <nav aria-label=\"How to contribute navigation\">            <ul>              <li><a href=\"/help/#feedback\">Bugs and feedback</a></li>              <li><a href=\"https://github.com/pypi/warehouse\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Contribute on GitHub</a></li>              <li><a href=\"https://hosted.weblate.org/projects/pypa/warehouse/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Translate PyPI</a></li>              <li><a href=\"/sponsors/\">Sponsor PyPI</a></li>              <li><a href=\"https://github.com/pypi/warehouse/graphs/contributors\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Development credits</a></li>            </ul>          </nav>        </div>        <div class=\"footer__menu\">          <h2>Using PyPI</h2>          <nav aria-label=\"Using PyPI navigation\">            <ul>              <li><a href=\"https://github.com/pypa/.github/blob/main/CODE_OF_CONDUCT.md\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Code of conduct</a></li>              <li><a href=\"/security/\">Report security issue</a></li>              <li><a href=\"https://www.python.org/privacy/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Privacy policy</a></li>              <li><a href=\"/policy/terms-of-use/\">Terms of use</a></li>              <li><a href=\"/policy/acceptable-use-policy/\">Acceptable Use Policy</a></li>            </ul>          </nav>        </div>      </div>      <hr class=\"footer__divider\">      <div class=\"footer__text\">        <p>Status:<a href=\"https://status.python.org/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">          <span data-statuspage-domain=\"https://2p66nmmycsj3.statuspage.io\">all systems operational</span></a>        </p>        <p>Developed and maintained by the Python community, for the Python community.          <br>          <a href=\"https://donate.pypi.org\">Donate today!</a>        </p>        <p>          \"PyPI\", \"Python Package Index\", and the blocks logos are registered <a href=\"/trademarks/\">trademarks</a> of the <a href=\"https://python.org/psf-landing\" target=\"_blank\" rel=\"noopener\">Python Software Foundation</a>.<br>        </p>        <p>          \u00a9 2024 <a href=\"https://www.python.org/psf-landing/\" title=\"External link\" target=\"_blank\" rel=\"noopener\">Python Software Foundation</a><br>          <a href=\"/sitemap/\">Site map</a>        </p>      </div>      <div class=\"centered hide-on-desktop\">        <button type=\"button\" class=\"button button--switch-to-desktop hidden\" data-viewport-toggle-target=\"switchToDesktop\" data-action=\"viewport-toggle#switchToDesktop\">Switch to desktop version        </button>      </div>    </footer>    <div class=\"language-switcher\">      <form action=\"/locale/\">        <ul>          <li>            <button              class=\"language-switcher__selected\"              name=\"locale_id\" value=\"en\" type=\"submit\"            >              English            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"es\" type=\"submit\"            >              espa\u00f1ol            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"fr\" type=\"submit\"            >              fran\u00e7ais            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"ja\" type=\"submit\"            >              \u65e5\u672c\u8a9e            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"pt_BR\" type=\"submit\"            >              portugu\u00eas (Brasil)            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"uk\" type=\"submit\"            >              \u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"el\" type=\"submit\"            >              \u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"de\" type=\"submit\"            >              Deutsch            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"zh_Hans\" type=\"submit\"            >              \u4e2d\u6587 (\u7b80\u4f53)            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"zh_Hant\" type=\"submit\"            >              \u4e2d\u6587 (\u7e41\u9ad4)            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"ru\" type=\"submit\"            >              \u0440\u0443\u0441\u0441\u043a\u0438\u0439            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"he\" type=\"submit\"            >              \u05e2\u05d1\u05e8\u05d9\u05ea            </button>          </li>          <li>            <button              name=\"locale_id\" value=\"eo\" type=\"submit\"            >              esperanto            </button>          </li>        </ul>      </form>    </div><div class=\"sponsors\">  <p class=\"sponsors__title\">Supported by</p>  <div class=\"sponsors__divider\"></div>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://aws.amazon.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/ed7074cadad1a06f56bc520ad9bd3e00d0704c5b/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f6177732d77686974652d6c6f676f2d7443615473387a432e706e67\" alt=AWS loading=lazy>          <span class=\"sponsors__name\">AWS</span>          <span class=\"sponsors__service\">            Cloud computing and Security Sponsor          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://www.datadoghq.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/8855f7c063a3bdb5b0ce8d91bfc50cf851cc5c51/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f64617461646f672d77686974652d6c6f676f2d6668644c4e666c6f2e706e67\" alt=Datadog loading=lazy>          <span class=\"sponsors__name\">Datadog</span>          <span class=\"sponsors__service\">            Monitoring          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://www.fastly.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/df6fe8829cbff2d7f668d98571df1fd011f36192/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f666173746c792d77686974652d6c6f676f2d65684d3077735f6f2e706e67\" alt=Fastly loading=lazy>          <span class=\"sponsors__name\">Fastly</span>          <span class=\"sponsors__service\">            CDN          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://careers.google.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/420cc8cf360bac879e24c923b2f50ba7d1314fb0/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f676f6f676c652d77686974652d6c6f676f2d616734424e3774332e706e67\" alt=Google loading=lazy>          <span class=\"sponsors__name\">Google</span>          <span class=\"sponsors__service\">            Download Analytics          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://www.python.org/psf/sponsors/#microsoft\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/524d1ce72f7772294ca4c1fe05d21dec8fa3f8ea/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f6d6963726f736f66742d77686974652d6c6f676f2d5a443172685444462e706e67\" alt=Microsoft loading=lazy>          <span class=\"sponsors__name\">Microsoft</span>          <span class=\"sponsors__service\">            PSF Sponsor          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://www.pingdom.com/\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/d01053c02f3a626b73ffcb06b96367fdbbf9e230/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f70696e67646f6d2d77686974652d6c6f676f2d67355831547546362e706e67\" alt=Pingdom loading=lazy>          <span class=\"sponsors__name\">Pingdom</span>          <span class=\"sponsors__service\">            Monitoring          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://getsentry.com/for/python\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/67af7117035e2345bacb5a82e9aa8b5b3e70701d/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f73656e7472792d77686974652d6c6f676f2d4a2d6b64742d706e2e706e67\" alt=Sentry loading=lazy>          <span class=\"sponsors__name\">Sentry</span>          <span class=\"sponsors__service\">            Error logging          </span>        </a>        <a class=\"sponsors__sponsor\" target=\"_blank\" rel=\"noopener\" href=\"https://statuspage.io\">          <img class=sponsors__image src=\"https://pypi-camo.freetls.fastly.net/b611884ff90435a0575dbab7d9b0d3e60f136466/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f707970692d6173736574732f73706f6e736f726c6f676f732f737461747573706167652d77686974652d6c6f676f2d5467476c6a4a2d502e706e67\" alt=StatusPage loading=lazy>          <span class=\"sponsors__name\">StatusPage</span>          <span class=\"sponsors__service\">            Status page          </span>        </a></div>  </body></html>",
  "embeddings": []
}