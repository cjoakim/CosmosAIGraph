{
  "libtype": "npm",
  "libname": "fraction.js",
  "url": "https://www.xarg.org/2014/03/rational-numbers-in-javascript/",
  "html": "<!DOCTYPE html><html lang=\"en\">    <head>        <meta charset=\"utf-8\">        <title>Rational numbers in JavaScript &bull; Computer Science and Machine Learning</title>        <!-- 1709327802 -->        <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/apple-touch-icon.png\">        <link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/favicon-32x32.png\">        <link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/favicon-16x16.png\">        <link rel=\"manifest\" href=\"/site.webmanifest\">        <link rel=\"mask-icon\" href=\"/safari-pinned-tab.svg\" color=\"#5bbad5\">        <meta name=\"msapplication-TileColor\" content=\"#ffffff\">        <meta name=\"theme-color\" content=\"#ffffff\">                <style>@font-face {    font-family: 'Libre Baskerville';    src: url(/fonts/LibreBaskerville-Regular.ttf);  }*, *::before, *::after {    box-sizing: border-box;}body {    font-family:'Libre Baskerville', serif;    margin:0;    padding:0;}a {    color: #c00;    font-weight:bold;    text-decoration:none;}ol a, ul a {    font-weight:normal;}img {    border: 0px none;}a:hover {    text-decoration: underline;}.icons {    text-align: right;    padding-right: 10px;}.icons svg {    outline: 5px solid #777;    background: #777;    margin: 6px;    border:0;}nav {    border-bottom: 1px solid #777;    font-size: 13px;    margin-bottom: 20px;    padding-bottom: 5px;}nav ul {    list-style: none;    margin:0;    padding:0;}nav li {    margin: 0;    padding: 0;    display: inline;    margin-right: 20px;    padding-bottom: 5px}nav li a {    color: #777;    text-decoration: none;    text-transform: uppercase;}.conti {    text-align: center;    border-bottom: 1px solid #777;}.conti a {    color: #666;    text-transform: uppercase;    font-size: 12px;    display: block;    padding: 5px;}nav li.active {    border-bottom: 1px solid #222;}nav li.active a {    color:#222;    font-weight:bold;}main {    display: block;    margin-left: 0px;    flex: 1;    padding: 20px 20px ;}main h1 {    font-weight:400;    font-size:37px;    margin:0;}main h1 a, main h2 a, main h3 a{    color: #222;}article {    margin-top:60px;    max-width: 820px;}article time {    color:#777;    display: block;    margin-top: 3px;    margin-bottom: 8px;    font-size: 15px;    padding-bottom:10px;    line-height:1.2;    font-family: Arial;}article time a {    color: #666;}article p, article li {    color:#222;    line-height:1.5;    font-size:19px;}aside {    padding-top:20px;    text-align: center;    background: #000;    color: #fff;}#sidebar {    padding-bottom: 15px;}#sidebar p {    font-weight:bold;    margin:0;    font-size:13px;    margin-bottom: 12px;    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);}#sidebar a {    font-size:37px;    color:white;    text-decoration:none}textarea {    resize:vertical;    width: 100%}input {    width: 60%;    padding: 4px;}#comments img {    border: 0px none;    padding: 0px;}#comments h3, form h3 {    font-size: 23px;    margin-top: 40px;}#comments .comments {    margin-top: 30px;}#comments time {    display:inline;    padding: 0;    margin:0;}main h2 {    font-size: 28px;    margin-top: 20px;    margin-bottom: 10px;}main h3 {    font-size: 26px;    margin-top: 20px;    margin-bottom: 10px;}main h4 {    font-size: 24px;    margin-top: 20px;    margin-bottom: 10px;}main img {    padding: 10px;    border: 1px solid #ccc;}main ul {    list-style-type:square;}main pre {    color: white;    background: #211;    border-radius: 8px;    border-radius: 8px;    padding: 10px 20px;    font-size: 13px;}main .button {    text-align:center;    margin:30px;}main .button a {    color: white;    padding: 10px 30px;    text-decoration: none;    border-radius: 8px;    box-shadow: 0px 1px 3px #666666;    text-shadow: 0px 1px 3px #666666;    border: solid #c00 2px;    background: linear-gradient(to bottom, #f00, #811);    font-family: Helvetica, sans-serif;    font-size: 14px;}@media (min-width: 50em) {    aside {        top: 0;        left: 0;        position:fixed;        width: 17em;        height: 100%;    }    main {        margin-left:17em;    }    #sidebar {        position:absolute;        bottom:30px;    }}@media (min-width: 68em) {    main h1 {        font-size:47px;    }    main {        padding: 20px 100px ;    }}.unicode {    font-family: 'Code2000','Sun-ExtA','Arial Unicode MS','NSimSun',sans-serif;}pre .str, code .str { color: #65B042; } /* string  - green */pre .kwd, code .kwd { color: #E28964; } /* keyword - dark pink */pre .com, code .com { color: #AEAEAE; font-style: italic; } /* comment - gray */pre .typ, code .typ { color: #89bdff; } /* type - light blue */pre .lit, code .lit { color: #3387CC; } /* literal - blue */pre .pun, code .pun { color: #fff; } /* punctuation - white */pre .pln, code .pln { color: #fff; } /* plaintext - white */pre .tag, code .tag { color: #89bdff; } /* html/xml tag    - light blue */pre .atn, code .atn { color: #bdb76b; } /* html/xml attribute name  - khaki */pre .atv, code .atv { color: #65B042; } /* html/xml attribute value - green */pre .dec, code .dec { color: #3387CC; } /* decimal - blue */pre.prettyprint, code.prettyprint {    background-color: #000;    border-radius: 8px;}pre.prettyprint {    width: 100%;    padding: 2em;    white-space: pre-wrap;}</style>        <link rel=\"pingback\" href=\"/pingback/\">        <meta name=\"robots\" content=\"index,follow\">        <meta name=\"referrer\" content=\"origin\">         <meta name=\"description\" content=\"A rational numbers library in JavaScript for more precise calculations\">        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">        <link rel=\"alternate\" type=\"application/rss+xml\" title=\"Computer Science and Machine Learning\" href=\"https://www.xarg.org/feed/\">        <link rel=\"canonical\" href=\"https://www.xarg.org/2014/03/rational-numbers-in-javascript/\"><script async src=\"https://www.googletagmanager.com/gtag/js?id=G-ZHGTG395EP\"></script><script>  window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}  gtag('js', new Date());  gtag('config', 'G-ZHGTG395EP');</script> </head>    <body>        <aside>            <div class=\"icons\">                <a href=\"https://github.com/infusion\" rel=\"nofollow me\" title=\"XARG open source projects on Github\"><svg xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"25\"><path d=\"M12.5 0.6c-6.9 0-12.5 5.6-12.5 12.5 0 5.5 3.6 10.2 8.5 11.9 0.6 0.1 0.9-0.3 0.9-0.6 0-0.3 0-1.1 0-2.2-3.5 0.8-4.2-1.7-4.2-1.6-0.6-1.4-1.4-1.8-1.4-1.9-1.1-0.8 0.1-0.8 0.1-0.7 1.3 0.1 1.9 1.3 1.9 1.3 1.1 1.9 2.9 1.4 3.6 1 0.1-0.8 0.4-1.4 0.8-1.7-2.8-0.3-5.7-1.4-5.7-6.1 0-1.4 0.5-2.5 1.3-3.4-0.1-0.3-0.6-1.6 0.1-3.3 0 0 1-0.3 3.5 1.3 1-0.3 2.1-0.4 3.1-0.4 1.1 0 2.1 0.1 3.1 0.4 2.4-1.6 3.4-1.3 3.5-1.3 0.7 1.7 0.3 3 0.1 3.3 0.8 0.9 1.3 2 1.3 3.4 0 4.8-2.9 5.9-5.7 6.1 0.4 0.4 0.8 1.1 0.8 2.3 0 1.7 0 3 0 3.5 0 0.3 0.2 0.7 0.9 0.6 5-1.7 8.5-6.3 8.5-11.9 0-6.9-5.6-12.5-12.5-12.5\" fill=\"#000\" stroke=\"none\" /></svg></a>                <a href=\"https://www.facebook.com/xarg.org\" rel=\"nofollow me\" title=\"Follow XARG open source on Facebook\"><svg xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"25\"><path d=\"M17.2 25l0-9.7 3.2 0 0.5-3.8-3.7 0 0-2.4c0-1.1 0.3-1.8 1.8-1.8l2 0 0-3.4c-0.3 0-1.5-0.1-2.9-0.1-2.9 0-4.9 1.8-4.8 5l0 2.7-3.3 0 0 3.8 3.3 0 0 9.7 3.9 0z\" fill=\"#000\" /></svg></a>                <a href=\"https://twitter.com/roberteisele\" rel=\"nofollow me\" title=\"Follow XARG open source on Twitter\"><svg xmlns:svg=\"http://www.w3.org/2000/svg\" xmlns=\"http://www.w3.org/2000/svg\" height=\"25\" width=\"25\"><path d=\"M7.9 22.7c9.4 0 14.6-7.8 14.6-14.6 0-0.2 0-0.4-0.1-0.7 1-0.7 1.9-1.6 2.6-2.7-0.9 0.4-1.9 0.7-2.9 0.9 1.1-0.6 1.9-1.6 2.2-2.9-1 0.6-2.1 1-3.2 1.3-0.9-1-2.3-1.6-3.8-1.7-2.8 0-5.1 2.3-5.1 5.2 0 0.4 0 0.8 0.1 1.1-4.3-0.2-8-2.3-10.6-5.3-0.4 0.8-0.7 1.6-0.7 2.6 0 1.8 0.9 3.4 2.3 4.2-0.8 0-1.6-0.3-2.3-0.6 0 0 0 0 0 0.1 0 2.5 1.8 4.6 4.1 5-0.4 0.1-0.9 0.2-1.3 0.2-0.3 0-0.7 0-1-0.1 0.7 2 2.5 3.5 4.8 3.5-1.8 1.4-4 2.2-6.4 2.2-0.4 0-0.8 0-1.2 0 2.3 1.5 5 2.3 7.9 2.3\" fill=\"#000\" stroke=\"none\" /></svg></a>            </div>            <div id=\"sidebar\">                <p><a href=\"https://www.xarg.org/\" rel=\"top\">Robert Eisele</a></p>                <p>Computer Science &amp; Machine Learning</p>            </div>        </aside>        <main>            <nav>                <ul>                    <li><a href=\"/\">Home</a></li>                                        <li><a href=\"https://www.robert-eisele.de/\" rel=\"author noopener\" target=\"_blank\">About</a></li>                    <li class=\"active\"><a href=\"/archive/\" rel=\"archive\">Archive</a></li>                    <li><a href=\"/projects/\" rel=\"contents\">Projects</a></li>                </ul>            </nav>    <article>        <h1><a href=\"/2014/03/rational-numbers-in-javascript/\" rel=\"bookmark\">Rational numbers in JavaScript</a></h1>        <time datetime=\"2014-03-12 02:11:37\" title=\"2014-03-12 02:11:37\">March 12th, 2014.</time>                                    <link defer rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css\" integrity=\"sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB\" crossorigin=\"anonymous\">        <script defer src=\"https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js\" integrity=\"sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p\" crossorigin=\"anonymous\"></script>        <script defer src=\"https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js\" integrity=\"sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR\" crossorigin=\"anonymous\" onload=\"renderMathInElement(document.body);\"></script>                        <p><strong>fraction.js</strong> is a new <a href=\"/book/analysis/rational-numbers/\">rational numbers</a> library I published today. Floating point numbers, like double in JavaScript, are a very rough estimate of a real number, which has to deal with rational and irrational numbers the same way. Of course, it has the benefit of feeling very natural in the way you deal with those numbers. You can assign Math.PI, Math.sqrt(2) and 3 / 4 without thinking what the computer actually does.</p> <p>The obvious downside of the way double is represented inside of the computer is the loss of precision.</p> <p>When we remember some high-school math, we can easily avoid those problems. Introducing some kind of number theory makes the whole thing perfect. That's why I wrote fraction.js.</p> <div class=\"button\"><a href=\"https://github.com/infusion/Fraction.js\">Download Fraction.js</a></div> <p>Assume you want to find a rational approximation of PI. There is a nice algorithm, which doesn't converge very fast, but serves good as an example here.</p> <pre class=\"prettyprint\">var PI = new Fraction(0);var four = new Fraction(4);var n = 1;for (var i = 0; i < 100000; i++) {PI = PI.add(four.div(n));n+= 2;PI = PI.sub(four.div(n));n+= 2;}console.log(PI)</pre> <p>The result of this algorithm is</p> <pre class=\"prettyprint\">PI.n / PI.d = 17402216385200408 / 5539306332998545 = 3.14158765358987</pre> <p>Looks nice, doesn't it? In the <em>README.md</em>, which is shipped with the library, is another algorithm to approximate <em>sqrt(5) - 2</em>.</p> <h2>Rational Numbers Calculator</h2> <p> <input type=\"text\" id=\"A\" onchange=\"calc()\" value=\"123.32\"> <select id=\"O\" onchange=\"calc()\"> <option value=\"add\">add</option> <option value=\"sub\">sub</option> <option value=\"mul\">mul</option> <option value=\"div\">div</option> <option value=\"mod\">mod</option> </select> <input type=\"text\" id=\"B\" onchange=\"calc()\" value=\"33.'982'\"> <input type=\"submit\" onclick=\"calc()\" value=\"Calculate\"> <div style=\"color:red;height:30px;\" id=\"output\"></div> <div> <b>Examples:</b><br> <div>123/33 <em>div</em> 4.33</div> <div>123.(345) <em>mod</em> 3.(1112)</div> </div> </p> <h2>Limits</h2> <p>So what is it all good for and where are the limits?</p> <p>The library can be used whenever you have to do precise calculations with natural and rational numbers. Even if you don't use it in production, you can use it to pre-calculate numbers (as I did with PI above).</p> <p>I tried not to force casting to real integers in the JavaScript source. This would have the limit of the smallest (unsigned) number of <em>1 / (Math.pow(2, 31) - 1)</em> and the biggest number of <em>(Math.pow(2, 31) - 1) / 1</em>. The way it is implemented now, you work with doubles again - larger doubles, which shrinks the problem space.</p> <p>Another obvious limit is the fact, that it is bound to rational numbers - as the name suggests. I've implemented a <em>sqrt(n)</em> function, but it is very inprecise, as it only gives an estimate. But in some optimization scenarios this is more than enough.</p> <script src=\"/download/bigfraction.js\"></script> <script>(function() { window.calc = function() { var a = document.getElementById('A'); var b = document.getElementById('B'); var o = document.getElementById('O'); var output = document.getElementById(\"output\"); try { var str = \"\"; var A = new Fraction(a.value); var B = new Fraction(b.value); str += A.toLatex(false); str += { add: \"+\", sub: \"-\", mul: \"\\\\cdot\", div: \"\\\\div\", mod: \"\\\\bmod\" }[o.value]; str += B.toLatex(false); str += \"=\";var m = A[o.value](B).toLatex(true);var n = A[o.value](B).toString(true) str += m;if (m!=n) { str+= \"=\"; str+= n;} var math = null; output.innerHTML =katex.renderToString(\"\\\\Leftrightarrow\"+str); } catch (x) { output.innerHTML = x; } }})();</script>        <p style=\"font-size:23px;\">You might also be interested in the following</p>        <ul>            <li><a href=\"/2016/07/complex-numbers-in-javascript/\" rel=\"related\">Complex numbers in JavaScript</a></li>            <li><a href=\"/2009/12/handy-php-classes/\" rel=\"related\">Handy PHP classes</a></li>            <li><a href=\"/2014/03/javascript-bit-array/\" rel=\"related\">JavaScript Bit Array</a></li>            <li><a href=\"/2017/07/using-gamepads-in-javascript-via-node-js/\" rel=\"related\">Using Gamepads in JavaScript via node.js</a></li>        </ul>                    <p>&nbsp;</p>        <p><strong>Sorry, comments are closed for this article. Contact me if you want to leave a note.</strong></p>            </article>    <script defer src=\"/js/prettify.js\"></script><script>    window.addEventListener('DOMContentLoaded', function() {      prettyPrint();    });                </script>                    <footer style=\"border-top: 1px solid #F2F2F0; font-size:14px;padding: 10px 0 25px; width:100%\">                &copy; 2008 - 2024 Robert Eisele All rights reserved \u2022 <a href=\"/privacy-policy/\">Privacy Policy</a>, <a href=\"/contact/\">Contact</a>            </footer>        </main>    </body></html>Warning: Cannot modify header information - headers already sent by (output started at /index.php:23) in /lib/view.php on line 81Warning: Cannot modify header information - headers already sent by (output started at /index.php:23) in /lib/view.php on line 82",
  "embeddings": []
}