{
  "libtype": "pypi",
  "libname": "hl7",
  "url": "http://python-hl7.readthedocs.org",
  "html": "<!DOCTYPE html><html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en\">  <head>    <meta charset=\"utf-8\" />    <title>python-hl7 - Easy HL7 v2.x Parsing &#8212; python-hl7 0.4.3.dev documentation</title>    <link rel=\"stylesheet\" href=\"_static/alabaster.css\" type=\"text/css\" />    <link rel=\"stylesheet\" href=\"_static/pygments.css\" type=\"text/css\" />    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://assets.readthedocs.org/static/css/badge_only.css\" />    <script id=\"documentation_options\" data-url_root=\"./\" src=\"_static/documentation_options.js\"></script>    <script src=\"_static/jquery.js\"></script>    <script src=\"_static/underscore.js\"></script>    <script src=\"_static/doctools.js\"></script>    <script src=\"_static/language_data.js\"></script>    <script async=\"async\" src=\"https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js\"></script>    <link rel=\"canonical\" href=\"https://python-hl7.readthedocs.io/en/latest/index.html\" />    <link rel=\"index\" title=\"Index\" href=\"genindex.html\" />    <link rel=\"search\" title=\"Search\" href=\"search.html\" />    <link rel=\"next\" title=\"python-hl7 API\" href=\"api.html\" />     <link rel=\"stylesheet\" href=\"_static/custom.css\" type=\"text/css\" />      <meta name=\"viewport\" content=\"width=device-width, initial-scale=0.9, maximum-scale=0.9\" />  <!-- RTD Extra Head --><link rel=\"stylesheet\" href=\"https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css\" type=\"text/css\" /><script type=\"application/json\" id=\"READTHEDOCS_DATA\">{\"ad_free\": false, \"api_host\": \"https://readthedocs.org\", \"build_date\": \"2021-02-15T21:39:23Z\", \"builder\": \"sphinx\", \"canonical_url\": null, \"commit\": \"0caffc83\", \"docroot\": \"/docs/\", \"features\": {\"docsearch_disabled\": false}, \"global_analytics_code\": \"UA-17997319-1\", \"language\": \"en\", \"page\": \"index\", \"programming_language\": \"py\", \"project\": \"python-hl7\", \"proxied_api_host\": \"/_\", \"source_suffix\": \".rst\", \"subprojects\": {}, \"theme\": \"alabaster\", \"user_analytics_code\": \"\", \"version\": \"latest\"}</script><!--Using this variable directly instead of using `JSON.parse` is deprecated.The READTHEDOCS_DATA global variable will be removed in the future.--><script type=\"text/javascript\">READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);</script><script type=\"text/javascript\" src=\"https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js\" async=\"async\"></script><!-- end RTD <extrahead> --></head><body>      <div class=\"document\">      <div class=\"documentwrapper\">        <div class=\"bodywrapper\">                    <div class=\"body\" role=\"main\">              <div class=\"section\" id=\"python-hl7-easy-hl7-v2-x-parsing\"><h1>python-hl7 - Easy HL7 v2.x Parsing<a class=\"headerlink\" href=\"#python-hl7-easy-hl7-v2-x-parsing\" title=\"Permalink to this headline\">\u00b6</a></h1><p>python-hl7 is a simple library for parsing messages of Health Level 7(HL7) version 2.x into Python objects.  python-hl7 includes a simpleclient that can send HL7 messages to a Minimal Lower Level Protocol (MLLP)server (<a class=\"reference internal\" href=\"mllp_send.html#mllp-send\"><span class=\"std std-ref\">mllp_send</span></a>).</p><p>HL7 is a communication protocol and message format forhealth care data. It is the de-facto standard for transmitting databetween clinical information systems and between clinical devices.The version 2.x series, which is often is a pipe delimited formatis currently the most widely accepted version of HL7 (thereis an alternative XML-based format).</p><p>python-hl7 currently only parses HL7 version 2.x messages intoan easy to access data structure. The library could eventuallyalso contain the ability to create HL7 v2.x messages.</p><p>python-hl7 parses HL7 into a series of wrapped <a class=\"reference internal\" href=\"api.html#hl7.Container\" title=\"hl7.Container\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Container</span></code></a> objects.The there are specific subclasses of <a class=\"reference internal\" href=\"api.html#hl7.Container\" title=\"hl7.Container\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Container</span></code></a> depending onthe part of the HL7 message. The <a class=\"reference internal\" href=\"api.html#hl7.Container\" title=\"hl7.Container\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Container</span></code></a> message itselfis a subclass of a Python list, thus we can easily access theHL7 message as an n-dimensional list. Specifically, the subclasses of<a class=\"reference internal\" href=\"api.html#hl7.Container\" title=\"hl7.Container\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Container</span></code></a>, in order, are <a class=\"reference internal\" href=\"api.html#hl7.Message\" title=\"hl7.Message\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Message</span></code></a>,<a class=\"reference internal\" href=\"api.html#hl7.Segment\" title=\"hl7.Segment\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Segment</span></code></a>, <a class=\"reference internal\" href=\"api.html#hl7.Field\" title=\"hl7.Field\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Field</span></code></a>, <a class=\"reference internal\" href=\"api.html#hl7.Repetition\" title=\"hl7.Repetition\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Repetition</span></code></a>.and <a class=\"reference internal\" href=\"api.html#hl7.Component\" title=\"hl7.Component\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Component</span></code></a>.</p><p>python-hl7 includes experimental asyncio-based HL7 MLLP support in <a class=\"reference internal\" href=\"mllp.html\"><span class=\"doc\">MLLP using asyncio</span></a>,which aims to replace <a class=\"reference external\" href=\"https://txhl7.readthedocs.io/\">txHL7</a>.</p><a class=\"reference external image-reference\" href=\"https://github.com/johnpaulett/python-hl7/actions\"><img alt=\"https://github.com/johnpaulett/python-hl7/workflows/Python%20package/badge.svg\" src=\"https://github.com/johnpaulett/python-hl7/workflows/Python%20package/badge.svg\" /></a><div class=\"section\" id=\"result-tree\"><h2>Result Tree<a class=\"headerlink\" href=\"#result-tree\" title=\"Permalink to this headline\">\u00b6</a></h2><p>HL7 Messages have a limited number of levels. The top level is a Message.A Message is comprised of a number of Fields (<a class=\"reference internal\" href=\"api.html#hl7.Field\" title=\"hl7.Field\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Field</span></code></a>).Fields can repeat (<a class=\"reference internal\" href=\"api.html#hl7.Repetition\" title=\"hl7.Repetition\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Repetition</span></code></a>). The content of a fieldis either a primitive data type (such as a string) or a compositedata type comprised of one or more Components (<a class=\"reference internal\" href=\"api.html#hl7.Component\" title=\"hl7.Component\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Component</span></code></a>). Componentsare in turn comprised of Sub-Components (primitive data types).</p><p>The result of parsing is accessed as a tree using python list conventions:</p><blockquote><div><p><code class=\"docutils literal notranslate\"><span class=\"pre\">Message[segment][field][repetition][component][sub-component]</span></code></p></div></blockquote><p>The result can also be accessed using HL7 1-based indexing conventions by treatingeach element as a callable:</p><blockquote><div><p><code class=\"docutils literal notranslate\"><span class=\"pre\">Message(segment)(field)(repetition)(component)(sub-component)</span></code></p></div></blockquote></div><div class=\"section\" id=\"usage\"><h2>Usage<a class=\"headerlink\" href=\"#usage\" title=\"Permalink to this headline\">\u00b6</a></h2><p>As an example, let\u2019s create a HL7 message:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">message</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;MSH|^~\\&amp;|GHH LAB|ELAB-3|GHH OE|BLDG4|200202150930||ORU^R01|CNTRL-3456|P|2.4</span><span class=\"se\">\\r</span><span class=\"s1\">&#39;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">message</span> <span class=\"o\">+=</span> <span class=\"s1\">&#39;PID|||555-44-4444||EVERYWOMAN^EVE^E^^^^L|JONES|196203520|F|||153 FERNWOOD DR.^^STATESVILLE^OH^35292||(206)3345232|(206)752-121||||AC555444444||67-A4335^OH^20030520</span><span class=\"se\">\\r</span><span class=\"s1\">&#39;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">message</span> <span class=\"o\">+=</span> <span class=\"s1\">&#39;OBR|1|845439^GHH OE|1045813^GHH LAB|1554-5^GLUCOSE|||200202150730||||||||555-55-5555^PRIMARY^PATRICIA P^^^^MD^^LEVEL SEVEN HEALTHCARE, INC.|||||||||F||||||444-44-4444^HIPPOCRATES^HOWARD H^^^^MD</span><span class=\"se\">\\r</span><span class=\"s1\">&#39;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">message</span> <span class=\"o\">+=</span> <span class=\"s1\">&#39;OBX|1|SN|1554-5^GLUCOSE^POST 12H CFST:MCNC:PT:SER/PLAS:QN||^182|mg/dl|70_105|H|||F</span><span class=\"se\">\\r</span><span class=\"s1\">&#39;</span></pre></div></div><p>We call the <a class=\"reference internal\" href=\"api.html#hl7.parse\" title=\"hl7.parse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">hl7.parse()</span></code></a> command with string message:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">hl7</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span> <span class=\"o\">=</span> <span class=\"n\">hl7</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">)</span></pre></div></div><p>We get a <a class=\"reference internal\" href=\"api.html#hl7.Message\" title=\"hl7.Message\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Message</span></code></a> object, wrapping a series of<a class=\"reference internal\" href=\"api.html#hl7.Segment\" title=\"hl7.Segment\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Segment</span></code></a> objects:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">)</span><span class=\"go\">&lt;class &#39;hl7.containers.Message&#39;&gt;</span></pre></div></div><p>We can always get the HL7 message back:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">message</span><span class=\"go\">True</span></pre></div></div><p>Interestingly, <a class=\"reference internal\" href=\"api.html#hl7.Message\" title=\"hl7.Message\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Message</span></code></a> can be accessed as a list:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">,</span> <span class=\"nb\">list</span><span class=\"p\">)</span><span class=\"go\">True</span></pre></div></div><p>There were 4 segments (MSH, PID, OBR, OBX):</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">)</span><span class=\"go\">4</span></pre></div></div><p>We can extract the <a class=\"reference internal\" href=\"api.html#hl7.Segment\" title=\"hl7.Segment\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Segment</span></code></a> from the<a class=\"reference internal\" href=\"api.html#hl7.Message\" title=\"hl7.Message\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Message</span></code></a> instance:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span><span class=\"go\">[[&#39;OBX&#39;], [&#39;1&#39;], [&#39;SN&#39;], [[[&#39;1554-5&#39;], [&#39;GLUCOSE&#39;], [&#39;POST 12H CFST:MCNC:PT:SER/PLAS:QN&#39;]]], [&#39;&#39;], [[[&#39;&#39;], [&#39;182&#39;]]], [&#39;mg/dl&#39;], [&#39;70_105&#39;], [&#39;H&#39;], [&#39;&#39;], [&#39;&#39;], [&#39;F&#39;]]</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"n\">h</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">)</span><span class=\"go\">True</span></pre></div></div><p>Note that since the first element of the segment is the segment name,segments are effectively 1-based in python as well (because the HL7 spec doesnot count the segment name as part of the segment itself):</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"go\">[&#39;OBX&#39;]</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"go\">[&#39;1&#39;]</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">2</span><span class=\"p\">]</span><span class=\"go\">[&#39;SN&#39;]</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">)(</span><span class=\"mi\">2</span><span class=\"p\">)</span><span class=\"go\">[&#39;SN&#39;]</span></pre></div></div><p>We can easily reconstitute this segment as HL7, using theappropriate separators:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">])</span><span class=\"go\">&#39;OBX|1|SN|1554-5^GLUCOSE^POST 12H CFST:MCNC:PT:SER/PLAS:QN||^182|mg/dl|70_105|H|||F&#39;</span></pre></div></div><p>We can extract individual elements of the message:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"go\">&#39;GLUCOSE&#39;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"n\">h</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">)(</span><span class=\"mi\">3</span><span class=\"p\">)(</span><span class=\"mi\">1</span><span class=\"p\">)(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"go\">True</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">5</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"go\">&#39;182&#39;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">5</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"n\">h</span><span class=\"p\">(</span><span class=\"mi\">4</span><span class=\"p\">)(</span><span class=\"mi\">5</span><span class=\"p\">)(</span><span class=\"mi\">1</span><span class=\"p\">)(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"go\">True</span></pre></div></div><p>We can look up segments by the segment identifier, either via<a class=\"reference internal\" href=\"api.html#hl7.Message.segments\" title=\"hl7.Message.segments\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">hl7.Message.segments()</span></code></a> or via the traditional dictionarysyntax:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">segments</span><span class=\"p\">(</span><span class=\"s1\">&#39;OBX&#39;</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"go\">&#39;GLUCOSE&#39;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"s1\">&#39;OBX&#39;</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"go\">&#39;GLUCOSE&#39;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"s1\">&#39;OBX&#39;</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"n\">h</span><span class=\"p\">[</span><span class=\"s1\">&#39;OBX&#39;</span><span class=\"p\">](</span><span class=\"mi\">1</span><span class=\"p\">)(</span><span class=\"mi\">3</span><span class=\"p\">)(</span><span class=\"mi\">1</span><span class=\"p\">)(</span><span class=\"mi\">2</span><span class=\"p\">)(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"go\">True</span></pre></div></div><p>Since many many types of segments only have a single instance in a message(e.g. PID or MSH), <a class=\"reference internal\" href=\"api.html#hl7.Message.segment\" title=\"hl7.Message.segment\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">hl7.Message.segment()</span></code></a> provides a convienancewrapper around <a class=\"reference internal\" href=\"api.html#hl7.Message.segments\" title=\"hl7.Message.segments\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">hl7.Message.segments()</span></code></a> that returns the first matching<a class=\"reference internal\" href=\"api.html#hl7.Segment\" title=\"hl7.Segment\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Segment</span></code></a>:</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">segment</span><span class=\"p\">(</span><span class=\"s1\">&#39;PID&#39;</span><span class=\"p\">)[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"go\">&#39;555-44-4444&#39;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">segment</span><span class=\"p\">(</span><span class=\"s1\">&#39;PID&#39;</span><span class=\"p\">)[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"n\">h</span><span class=\"o\">.</span><span class=\"n\">segment</span><span class=\"p\">(</span><span class=\"s1\">&#39;PID&#39;</span><span class=\"p\">)(</span><span class=\"mi\">3</span><span class=\"p\">)(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"go\">True</span></pre></div></div><p>The result of parsing contains up to 5 levels. The last level is a non-containertype.</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">)</span><span class=\"go\">&lt;class &#39;hl7.containers.Message&#39;&gt;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">])</span><span class=\"go\">&lt;class &#39;hl7.containers.Segment&#39;&gt;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">])</span><span class=\"go\">&lt;class &#39;hl7.containers.Field&#39;&gt;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">])</span><span class=\"go\">&lt;class &#39;hl7.containers.Repetition&#39;&gt;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">])</span><span class=\"go\">&lt;class &#39;hl7.containers.Component&#39;&gt;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">])</span><span class=\"go\">&lt;class &#39;str&#39;&gt;</span></pre></div></div><p>The parser only generates the levels which are present in the message.</p><div class=\"highlight-pycon3 notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">])</span><span class=\"go\">&lt;class &#39;hl7.containers.Field&#39;&gt;</span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">h</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">][</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">])</span><span class=\"go\">&lt;class &#39;str&#39;&gt;</span></pre></div></div></div><div class=\"section\" id=\"mllp-network-client-mllp-send\"><h2>MLLP network client - <code class=\"docutils literal notranslate\"><span class=\"pre\">mllp_send</span></code><a class=\"headerlink\" href=\"#mllp-network-client-mllp-send\" title=\"Permalink to this headline\">\u00b6</a></h2><p>python-hl7 features a simple network client, <code class=\"docutils literal notranslate\"><span class=\"pre\">mllp_send</span></code>, which reads HL7messages from a file or <code class=\"docutils literal notranslate\"><span class=\"pre\">sys.stdin</span></code> and posts them to an MLLP server.<code class=\"docutils literal notranslate\"><span class=\"pre\">mllp_send</span></code> is a command-line wrapper around<a class=\"reference internal\" href=\"api.html#hl7.client.MLLPClient\" title=\"hl7.client.MLLPClient\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.client.MLLPClient</span></code></a>.  <code class=\"docutils literal notranslate\"><span class=\"pre\">mllp_send</span></code> is a useful tool fortesting HL7 interfaces or resending logged messages:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">mllp_send</span> <span class=\"o\">--</span><span class=\"n\">file</span> <span class=\"n\">sample</span><span class=\"o\">.</span><span class=\"n\">hl7</span> <span class=\"o\">--</span><span class=\"n\">port</span> <span class=\"mi\">6661</span> <span class=\"n\">mirth</span><span class=\"o\">.</span><span class=\"n\">example</span><span class=\"o\">.</span><span class=\"n\">com</span></pre></div></div><p>See <a class=\"reference internal\" href=\"mllp_send.html\"><span class=\"doc\">mllp_send - MLLP network client</span></a> for examples and usage instructions.</p><p>For receiving HL7 messages using the Minimal Lower Level Protocol (MLLP), take alook at the related <a class=\"reference external\" href=\"http://twisted-hl7.readthedocs.org\">twisted-hl7</a> package.If do not want to use twisted and are looking to re-write some of twisted-hl7\u2019sfunctionality, please reach out to us.  It is likely that some of the MLLPparsing and formatting can be moved into python-hl7, which twisted-hl7 and otherlibraries can depend upon.</p></div><div class=\"section\" id=\"python-2-vs-python-3-and-unicode-vs-byte-strings\"><span id=\"unicode-vs-byte-strings\"></span><h2>Python 2 vs Python 3 and Unicode vs Byte strings<a class=\"headerlink\" href=\"#python-2-vs-python-3-and-unicode-vs-byte-strings\" title=\"Permalink to this headline\">\u00b6</a></h2><p>python-hl7 supports Python 3.5+ and primarily deals with the unicode <code class=\"docutils literal notranslate\"><span class=\"pre\">str</span></code> type.</p><p>Passing bytes to <a class=\"reference internal\" href=\"api.html#hl7.parse\" title=\"hl7.parse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">hl7.parse()</span></code></a>, requires setting the<code class=\"docutils literal notranslate\"><span class=\"pre\">encoding</span></code> parameter, if using anything other than UTF-8. <a class=\"reference internal\" href=\"api.html#hl7.parse\" title=\"hl7.parse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">hl7.parse()</span></code></a>will always return a datastructure containing unicode <code class=\"docutils literal notranslate\"><span class=\"pre\">str</span></code> objects.</p><p><a class=\"reference internal\" href=\"api.html#hl7.Message\" title=\"hl7.Message\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Message</span></code></a> can be forced back into a single string usingand <code class=\"docutils literal notranslate\"><span class=\"pre\">str(message)</span></code>.</p><p><a class=\"reference internal\" href=\"mllp_send.html\"><span class=\"doc\">mllp_send - MLLP network client</span></a> assumes the stream is already in the correct encoding.</p><p><a class=\"reference internal\" href=\"api.html#hl7.client.MLLPClient\" title=\"hl7.client.MLLPClient\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.client.MLLPClient</span></code></a>, if given a <code class=\"docutils literal notranslate\"><span class=\"pre\">str</span></code> or<a class=\"reference internal\" href=\"api.html#hl7.Message\" title=\"hl7.Message\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">hl7.Message</span></code></a> instance, will use its <code class=\"docutils literal notranslate\"><span class=\"pre\">encoding</span></code> methodto encode the unicode data into bytes.</p></div><div class=\"section\" id=\"contents\"><h2>Contents<a class=\"headerlink\" href=\"#contents\" title=\"Permalink to this headline\">\u00b6</a></h2><div class=\"toctree-wrapper compound\"><ul><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api.html\">python-hl7 API</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"mllp_send.html\"><code class=\"docutils literal notranslate\"><span class=\"pre\">mllp_send</span></code> - MLLP network client</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"mllp.html\">MLLP using asyncio</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"accessors.html\">Message Accessor</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"contribute.html\">Contributing</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"changelog.html\">Changelog</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"authors.html\">Authors</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"license.html\">License</a></li></ul></div></div><div class=\"section\" id=\"install\"><h2>Install<a class=\"headerlink\" href=\"#install\" title=\"Permalink to this headline\">\u00b6</a></h2><p>python-hl7 is available on <a class=\"reference external\" href=\"http://pypi.python.org/pypi/hl7\">PyPi</a>via <code class=\"docutils literal notranslate\"><span class=\"pre\">pip</span></code> or <code class=\"docutils literal notranslate\"><span class=\"pre\">easy_install</span></code>:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">pip</span> <span class=\"n\">install</span> <span class=\"o\">-</span><span class=\"n\">U</span> <span class=\"n\">hl7</span></pre></div></div><p>For recent versions of Debian and Ubuntu, the <em>python-hl7</em> package isavailable:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">sudo</span> <span class=\"n\">apt</span><span class=\"o\">-</span><span class=\"n\">get</span> <span class=\"n\">install</span> <span class=\"n\">python</span><span class=\"o\">-</span><span class=\"n\">hl7</span></pre></div></div></div><div class=\"section\" id=\"links\"><h2>Links<a class=\"headerlink\" href=\"#links\" title=\"Permalink to this headline\">\u00b6</a></h2><ul class=\"simple\"><li><p>Documentation: <a class=\"reference external\" href=\"http://python-hl7.readthedocs.org\">http://python-hl7.readthedocs.org</a></p></li><li><p>Source Code: <a class=\"reference external\" href=\"http://github.com/johnpaulett/python-hl7\">http://github.com/johnpaulett/python-hl7</a></p></li><li><p>PyPi: <a class=\"reference external\" href=\"http://pypi.python.org/pypi/hl7\">http://pypi.python.org/pypi/hl7</a></p></li></ul><p>HL7 References:</p><ul class=\"simple\"><li><p><a class=\"reference external\" href=\"http://en.wikipedia.org/wiki/HL7\">Health Level 7 - Wikipedia</a></p></li><li><p><a class=\"reference external\" href=\"http://nule.org/wp/?page_id=99\">nule.org\u2019s Introduction to HL7</a></p></li><li><p><a class=\"reference external\" href=\"http://www.hl7.org/\">hl7.org</a></p></li><li><p><a class=\"reference external\" href=\"http://openmrs.org/wiki/HL7\">OpenMRS\u2019s HL7 documentation</a></p></li><li><p><a class=\"reference external\" href=\"http://www.hl7.org/v3ballot/html/infrastructure/transport/transport-mllp.html\">Transport Specification: MLLP</a></p></li><li><p><a class=\"reference external\" href=\"http://wiki.medical-objects.com.au/index.php/Hl7v2_parsing\">HL7v2 Parsing</a></p></li><li><p><a class=\"reference external\" href=\"http://hl7book.net/index.php?title=HL7_version_2\">HL7 Book</a></p></li></ul></div></div>          </div>                  </div>      </div>      <div class=\"sphinxsidebar\" role=\"navigation\" aria-label=\"main navigation\">        <div class=\"sphinxsidebarwrapper\"><h1 class=\"logo\"><a href=\"#\">python-hl7</a></h1><p class=\"blurb\">Easy HL7 v2.x parsing</p><p><iframe src=\"https://ghbtns.com/github-btn.html?user=johnpaulett&repo=python-hl7&type=watch&count=true&size=large&v=2\"  allowtransparency=\"true\" frameborder=\"0\" scrolling=\"0\" width=\"200px\" height=\"35px\"></iframe></p>    <p><a class=\"badge\" href=\"https://codecov.io/github/johnpaulett/python-hl7\">    <img    alt=\"https://codecov.io/github/johnpaulett/python-hl7/coverage.svg?branch=main\"    src=\"https://codecov.io/github/johnpaulett/python-hl7/coverage.svg?branch=main\"    /></a></p><h3>Navigation</h3><ul><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"api.html\">python-hl7 API</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"mllp_send.html\"><code class=\"docutils literal notranslate\"><span class=\"pre\">mllp_send</span></code> - MLLP network client</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"mllp.html\">MLLP using asyncio</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"accessors.html\">Message Accessor</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"contribute.html\">Contributing</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"changelog.html\">Changelog</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"authors.html\">Authors</a></li><li class=\"toctree-l1\"><a class=\"reference internal\" href=\"license.html\">License</a></li></ul><div class=\"relations\"><h3>Related Topics</h3><ul>  <li><a href=\"#\">Documentation overview</a><ul>      <li>Next: <a href=\"api.html\" title=\"next chapter\">python-hl7 API</a></li>  </ul></li></ul></div><div id=\"searchbox\" style=\"display: none\" role=\"search\">  <h3 id=\"searchlabel\">Quick search</h3>    <div class=\"searchformwrapper\">    <form class=\"search\" action=\"search.html\" method=\"get\">      <input type=\"text\" name=\"q\" aria-labelledby=\"searchlabel\" />      <input type=\"submit\" value=\"Go\" />    </form>    </div></div><script>$('#searchbox').show(0);</script>        </div>      </div>      <div class=\"clearer\"></div>    </div>    <div class=\"footer\">      &copy;2011-2021, John Paulett.            |      Powered by <a href=\"http://sphinx-doc.org/\">Sphinx 2.4.1</a>      &amp; <a href=\"https://github.com/bitprophet/alabaster\">Alabaster 0.7.12</a>            |      <a href=\"_sources/index.rst.txt\"          rel=\"nofollow\">Page source</a>    </div>        <a href=\"https://github.com/johnpaulett/python-hl7\" class=\"github\">        <img style=\"position: absolute; top: 0; right: 0; border: 0;\" src=\"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png\" alt=\"Fork me on GitHub\"  class=\"github\"/>    </a>          </body></html>",
  "embeddings": []
}