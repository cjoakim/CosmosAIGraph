{
  "libtype": "pypi",
  "libname": "pytest-bdd",
  "url": "https://pytest-bdd.readthedocs.io/",
  "html": "<!DOCTYPE html><html lang=\"en\" data-content_root=\"./\">  <head>    <meta charset=\"utf-8\" />    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />    <title>Welcome to Pytest-BDD\u2019s documentation! &#8212; Pytest-BDD 7.1.1 documentation</title>    <link rel=\"stylesheet\" type=\"text/css\" href=\"_static/pygments.css?v=fa44fd50\" />    <link rel=\"stylesheet\" type=\"text/css\" href=\"_static/classic.css?v=514cf933\" />    <link rel=\"stylesheet\" type=\"text/css\" href=\"/_/static/css/badge_only.css\" />        <script src=\"_static/documentation_options.js?v=3a48702f\"></script>    <script src=\"_static/doctools.js?v=888ff710\"></script>    <script src=\"_static/sphinx_highlight.js?v=dc90522c\"></script>    <script async=\"async\" src=\"/_/static/javascript/readthedocs-doc-embed.js\"></script>        <link rel=\"index\" title=\"Index\" href=\"genindex.html\" />    <link rel=\"search\" title=\"Search\" href=\"search.html\" />   <!-- RTD Extra Head --><link rel=\"stylesheet\" href=\"/_/static/css/readthedocs-doc-embed.css\" type=\"text/css\" /><script type=\"application/json\" id=\"READTHEDOCS_DATA\">{\"ad_free\": false, \"api_host\": \"https://readthedocs.org\", \"builder\": \"sphinx\", \"canonical_url\": null, \"docroot\": \"/docs/\", \"features\": {\"docsearch_disabled\": false}, \"global_analytics_code\": \"UA-17997319-1\", \"language\": \"en\", \"page\": \"index\", \"programming_language\": \"py\", \"project\": \"pytest-bdd\", \"proxied_api_host\": \"/_\", \"source_suffix\": \".rst\", \"subprojects\": {}, \"theme\": \"default\", \"user_analytics_code\": \"\", \"version\": \"stable\"}</script><!--Using this variable directly instead of using `JSON.parse` is deprecated.The READTHEDOCS_DATA global variable will be removed in the future.--><script type=\"text/javascript\">READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);</script><script type=\"text/javascript\" src=\"/_/static/javascript/readthedocs-analytics.js\" async=\"async\"></script><!-- end RTD <extrahead> --></head><body>    <div class=\"related\" role=\"navigation\" aria-label=\"related navigation\">      <h3>Navigation</h3>      <ul>        <li class=\"right\" style=\"margin-right: 10px\">          <a href=\"genindex.html\" title=\"General Index\"             accesskey=\"I\">index</a></li>        <li class=\"nav-item nav-item-0\"><a href=\"#\">Pytest-BDD 7.1.1 documentation</a> &#187;</li>        <li class=\"nav-item nav-item-this\"><a href=\"\">Welcome to Pytest-BDD\u2019s documentation!</a></li>       </ul>    </div>      <div class=\"document\">      <div class=\"documentwrapper\">        <div class=\"bodywrapper\">          <div class=\"body\" role=\"main\">              <section id=\"welcome-to-pytest-bdd-s-documentation\"><h1><a class=\"toc-backref\" href=\"#id122\" role=\"doc-backlink\">Welcome to Pytest-BDD\u2019s documentation!</a><a class=\"headerlink\" href=\"#welcome-to-pytest-bdd-s-documentation\" title=\"Link to this heading\">\u00b6</a></h1><nav class=\"contents\" id=\"contents\"><p class=\"topic-title\">Contents</p><ul class=\"simple\"><li><p><a class=\"reference internal\" href=\"#welcome-to-pytest-bdd-s-documentation\" id=\"id122\">Welcome to Pytest-BDD\u2019s documentation!</a></p></li><li><p><a class=\"reference internal\" href=\"#bdd-library-for-the-pytest-runner\" id=\"id123\">BDD library for the pytest runner</a></p><ul><li><p><a class=\"reference internal\" href=\"#install-pytest-bdd\" id=\"id124\">Install pytest-bdd</a></p></li><li><p><a class=\"reference internal\" href=\"#example\" id=\"id125\">Example</a></p></li><li><p><a class=\"reference internal\" href=\"#scenario-decorator\" id=\"id126\">Scenario decorator</a></p></li><li><p><a class=\"reference internal\" href=\"#step-aliases\" id=\"id127\">Step aliases</a></p></li><li><p><a class=\"reference internal\" href=\"#step-arguments\" id=\"id128\">Step arguments</a></p></li><li><p><a class=\"reference internal\" href=\"#override-fixtures-via-given-steps\" id=\"id129\">Override fixtures via given steps</a></p></li><li><p><a class=\"reference internal\" href=\"#multiline-steps\" id=\"id130\">Multiline steps</a></p></li><li><p><a class=\"reference internal\" href=\"#scenarios-shortcut\" id=\"id131\">Scenarios shortcut</a></p></li><li><p><a class=\"reference internal\" href=\"#scenario-outlines\" id=\"id132\">Scenario outlines</a></p></li><li><p><a class=\"reference internal\" href=\"#organizing-your-scenarios\" id=\"id133\">Organizing your scenarios</a></p></li><li><p><a class=\"reference internal\" href=\"#test-setup\" id=\"id134\">Test setup</a></p></li><li><p><a class=\"reference internal\" href=\"#backgrounds\" id=\"id135\">Backgrounds</a></p></li><li><p><a class=\"reference internal\" href=\"#reusing-fixtures\" id=\"id136\">Reusing fixtures</a></p></li><li><p><a class=\"reference internal\" href=\"#reusing-steps\" id=\"id137\">Reusing steps</a></p></li><li><p><a class=\"reference internal\" href=\"#default-steps\" id=\"id138\">Default steps</a></p></li><li><p><a class=\"reference internal\" href=\"#feature-file-paths\" id=\"id139\">Feature file paths</a></p></li><li><p><a class=\"reference internal\" href=\"#avoid-retyping-the-feature-file-name\" id=\"id140\">Avoid retyping the feature file name</a></p></li><li><p><a class=\"reference internal\" href=\"#programmatic-step-generation\" id=\"id141\">Programmatic step generation</a></p></li><li><p><a class=\"reference internal\" href=\"#hooks\" id=\"id142\">Hooks</a></p></li><li><p><a class=\"reference internal\" href=\"#browser-testing\" id=\"id143\">Browser testing</a></p></li><li><p><a class=\"reference internal\" href=\"#reporting\" id=\"id144\">Reporting</a></p></li><li><p><a class=\"reference internal\" href=\"#test-code-generation-helpers\" id=\"id145\">Test code generation helpers</a></p></li><li><p><a class=\"reference internal\" href=\"#advanced-code-generation\" id=\"id146\">Advanced code generation</a></p></li><li><p><a class=\"reference internal\" href=\"#migration-of-your-tests-from-versions-5-x-x\" id=\"id147\">Migration of your tests from versions 5.x.x</a></p><ul><li><p><a class=\"reference internal\" href=\"#removal-of-the-feature-examples\" id=\"id148\">Removal of the feature examples</a></p></li><li><p><a class=\"reference internal\" href=\"#removal-of-the-vertical-examples\" id=\"id149\">Removal of the vertical examples</a></p></li><li><p><a class=\"reference internal\" href=\"#step-arguments-are-no-longer-fixtures\" id=\"id150\">Step arguments are no longer fixtures</a></p></li><li><p><a class=\"reference internal\" href=\"#variable-templates-in-steps-are-only-parsed-for-scenario-outlines\" id=\"id151\">Variable templates in steps are only parsed for Scenario Outlines</a></p></li></ul></li><li><p><a class=\"reference internal\" href=\"#migration-of-your-tests-from-versions-4-x-x\" id=\"id152\">Migration of your tests from versions 4.x.x</a></p><ul><li><p><a class=\"reference internal\" href=\"#replace-usage-of-parameter-inside-step-definitions-with-parsed-parameter\" id=\"id153\">Replace usage of &lt;parameter&gt; inside step definitions with parsed {parameter}</a></p></li><li><p><a class=\"reference internal\" href=\"#refuse-combining-scenario-outline-and-pytest-parametrization\" id=\"id154\">Refuse combining scenario outline and pytest parametrization</a></p></li></ul></li><li><p><a class=\"reference internal\" href=\"#migration-of-your-tests-from-versions-3-x-x\" id=\"id155\">Migration of your tests from versions 3.x.x</a></p></li><li><p><a class=\"reference internal\" href=\"#license\" id=\"id156\">License</a></p></li></ul></li><li><p><a class=\"reference internal\" href=\"#authors\" id=\"id157\">Authors</a></p></li><li><p><a class=\"reference internal\" href=\"#changelog\" id=\"id158\">Changelog</a></p><ul><li><p><a class=\"reference internal\" href=\"#unreleased\" id=\"id159\">Unreleased</a></p></li><li><p><a class=\"reference internal\" href=\"#id2\" id=\"id160\">7.1.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id3\" id=\"id161\">7.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id5\" id=\"id162\">7.0.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id8\" id=\"id163\">7.0.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id14\" id=\"id164\">6.1.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id16\" id=\"id165\">6.1.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id28\" id=\"id166\">6.0.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id31\" id=\"id167\">6.0.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id43\" id=\"id168\">5.0.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id44\" id=\"id169\">4.1.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id45\" id=\"id170\">4.0.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id46\" id=\"id171\">4.0.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id47\" id=\"id172\">4.0.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id48\" id=\"id173\">3.4.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id49\" id=\"id174\">3.3.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id50\" id=\"id175\">3.2.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id51\" id=\"id176\">3.2.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id52\" id=\"id177\">3.1.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id53\" id=\"id178\">3.1.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id54\" id=\"id179\">3.0.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id55\" id=\"id180\">3.0.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id56\" id=\"id181\">3.0.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id57\" id=\"id182\">2.21.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id58\" id=\"id183\">2.20.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id59\" id=\"id184\">2.19.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id60\" id=\"id185\">2.18.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id61\" id=\"id186\">2.18.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id62\" id=\"id187\">2.18.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id63\" id=\"id188\">2.17.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id64\" id=\"id189\">2.17.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id65\" id=\"id190\">2.17.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id66\" id=\"id191\">2.16.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id67\" id=\"id192\">2.16.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id68\" id=\"id193\">2.15.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id69\" id=\"id194\">2.14.5</a></p></li><li><p><a class=\"reference internal\" href=\"#id70\" id=\"id195\">2.14.3</a></p></li><li><p><a class=\"reference internal\" href=\"#id71\" id=\"id196\">2.14.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id72\" id=\"id197\">2.14.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id73\" id=\"id198\">2.13.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id74\" id=\"id199\">2.13.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id75\" id=\"id200\">2.12.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id76\" id=\"id201\">2.11.3</a></p></li><li><p><a class=\"reference internal\" href=\"#id77\" id=\"id202\">2.11.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id78\" id=\"id203\">2.11.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id79\" id=\"id204\">2.10.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id80\" id=\"id205\">2.9.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id81\" id=\"id206\">2.9.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id82\" id=\"id207\">2.8.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id83\" id=\"id208\">2.7.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id84\" id=\"id209\">2.7.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id85\" id=\"id210\">2.7.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id86\" id=\"id211\">2.6.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id87\" id=\"id212\">2.6.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id88\" id=\"id213\">2.5.3</a></p></li><li><p><a class=\"reference internal\" href=\"#id89\" id=\"id214\">2.5.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id90\" id=\"id215\">2.5.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id91\" id=\"id216\">2.5.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id92\" id=\"id217\">2.4.5</a></p></li><li><p><a class=\"reference internal\" href=\"#id93\" id=\"id218\">2.4.3</a></p></li><li><p><a class=\"reference internal\" href=\"#id94\" id=\"id219\">2.4.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id95\" id=\"id220\">2.4.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id96\" id=\"id221\">2.4.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id97\" id=\"id222\">2.3.3</a></p></li><li><p><a class=\"reference internal\" href=\"#id98\" id=\"id223\">2.3.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id99\" id=\"id224\">2.3.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id100\" id=\"id225\">2.1.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id101\" id=\"id226\">2.1.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id102\" id=\"id227\">2.1.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id103\" id=\"id228\">2.0.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id104\" id=\"id229\">2.0.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id105\" id=\"id230\">1.0.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id106\" id=\"id231\">0.6.11</a></p></li><li><p><a class=\"reference internal\" href=\"#id107\" id=\"id232\">0.6.9</a></p></li><li><p><a class=\"reference internal\" href=\"#id108\" id=\"id233\">0.6.8</a></p></li><li><p><a class=\"reference internal\" href=\"#id109\" id=\"id234\">0.6.6</a></p></li><li><p><a class=\"reference internal\" href=\"#id110\" id=\"id235\">0.6.5</a></p></li><li><p><a class=\"reference internal\" href=\"#id111\" id=\"id236\">0.6.4</a></p></li><li><p><a class=\"reference internal\" href=\"#id112\" id=\"id237\">0.6.3</a></p></li><li><p><a class=\"reference internal\" href=\"#id113\" id=\"id238\">0.6.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id114\" id=\"id239\">0.6.1</a></p></li><li><p><a class=\"reference internal\" href=\"#id115\" id=\"id240\">0.6.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id116\" id=\"id241\">0.5.2</a></p></li><li><p><a class=\"reference internal\" href=\"#id117\" id=\"id242\">0.5.0</a></p></li><li><p><a class=\"reference internal\" href=\"#id118\" id=\"id243\">0.4.7</a></p></li><li><p><a class=\"reference internal\" href=\"#id119\" id=\"id244\">0.4.6</a></p></li><li><p><a class=\"reference internal\" href=\"#id120\" id=\"id245\">0.4.5</a></p></li><li><p><a class=\"reference internal\" href=\"#id121\" id=\"id246\">0.4.3</a></p></li></ul></li></ul></nav></section><section id=\"bdd-library-for-the-pytest-runner\"><h1><a class=\"toc-backref\" href=\"#id123\" role=\"doc-backlink\">BDD library for the pytest runner</a><a class=\"headerlink\" href=\"#bdd-library-for-the-pytest-runner\" title=\"Link to this heading\">\u00b6</a></h1><a class=\"reference external image-reference\" href=\"https://pypi.python.org/pypi/pytest-bdd\"><img alt=\"http://img.shields.io/pypi/v/pytest-bdd.svg\" src=\"http://img.shields.io/pypi/v/pytest-bdd.svg\" /></a><a class=\"reference external image-reference\" href=\"https://codecov.io/gh/pytest-dev/pytest-bdd\"><img alt=\"https://codecov.io/gh/pytest-dev/pytest-bdd/branch/master/graph/badge.svg\" src=\"https://codecov.io/gh/pytest-dev/pytest-bdd/branch/master/graph/badge.svg\" /></a><a class=\"reference external image-reference\" href=\"https://travis-ci.org/pytest-dev/pytest-bdd\"><img alt=\"https://travis-ci.org/pytest-dev/pytest-bdd.svg?branch=master\" src=\"https://travis-ci.org/pytest-dev/pytest-bdd.svg?branch=master\" /></a><a class=\"reference external image-reference\" href=\"https://readthedocs.org/projects/pytest-bdd/\"><img alt=\"Documentation Status\" src=\"https://readthedocs.org/projects/pytest-bdd/badge/?version=stable\" /></a><p>pytest-bdd implements a subset of the Gherkin language to enable automating projectrequirements testing and to facilitate behavioral driven development.</p><p>Unlike many other BDD tools, it does not require a separate runner and benefits fromthe power and flexibility of pytest. It enables unifying unit and functionaltests, reduces the burden of continuous integration server configuration and allows the reuse oftest setups.</p><p>Pytest fixtures written for unit tests can be reused for setup and actionsmentioned in feature steps with dependency injection. This allows a true BDDjust-enough specification of the requirements without maintaining any context objectcontaining the side effects of Gherkin imperative declarations.</p><section id=\"install-pytest-bdd\"><h2><a class=\"toc-backref\" href=\"#id124\" role=\"doc-backlink\">Install pytest-bdd</a><a class=\"headerlink\" href=\"#install-pytest-bdd\" title=\"Link to this heading\">\u00b6</a></h2><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">pip</span> <span class=\"n\">install</span> <span class=\"n\">pytest</span><span class=\"o\">-</span><span class=\"n\">bdd</span></pre></div></div></section><section id=\"example\"><h2><a class=\"toc-backref\" href=\"#id125\" role=\"doc-backlink\">Example</a><a class=\"headerlink\" href=\"#example\" title=\"Link to this heading\">\u00b6</a></h2><p>An example test for a blog hosting software could look like this.Note that <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-splinter\">pytest-splinter</a> is used to get the browser fixture.</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c\"># content of publish_article.feature</span><span class=\"k\">Feature:</span><span class=\"nf\"> Blog</span><span class=\"nf\">    A site where you can publish your articles.</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Publishing the article</span><span class=\"k\">        Given </span><span class=\"nf\">I&#39;m an author user</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">I have an article</span><span class=\"nf\">        </span><span class=\"k\">When </span><span class=\"nf\">I go to the article page</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">I press the publish button</span><span class=\"nf\">        </span><span class=\"k\">Then </span><span class=\"nf\">I should not see the error message</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">the article should be published  # Note: will query the database</span></pre></div></div><p>Note that only one feature is allowed per feature file.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># content of test_publish_article.py</span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenario</span><span class=\"p\">,</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"p\">,</span> <span class=\"n\">then</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s1\">&#39;publish_article.feature&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Publishing the article&#39;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_publish</span><span class=\"p\">():</span>    <span class=\"k\">pass</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;I&#39;m an author user&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">author_user</span><span class=\"p\">(</span><span class=\"n\">auth</span><span class=\"p\">,</span> <span class=\"n\">author</span><span class=\"p\">):</span>    <span class=\"n\">auth</span><span class=\"p\">[</span><span class=\"s1\">&#39;user&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">author</span><span class=\"o\">.</span><span class=\"n\">user</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;I have an article&quot;</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">article</span><span class=\"p\">(</span><span class=\"n\">author</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"n\">create_test_article</span><span class=\"p\">(</span><span class=\"n\">author</span><span class=\"o\">=</span><span class=\"n\">author</span><span class=\"p\">)</span><span class=\"nd\">@when</span><span class=\"p\">(</span><span class=\"s2\">&quot;I go to the article page&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">go_to_article</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">,</span> <span class=\"n\">browser</span><span class=\"p\">):</span>    <span class=\"n\">browser</span><span class=\"o\">.</span><span class=\"n\">visit</span><span class=\"p\">(</span><span class=\"n\">urljoin</span><span class=\"p\">(</span><span class=\"n\">browser</span><span class=\"o\">.</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"s1\">&#39;/manage/articles/</span><span class=\"si\">{0}</span><span class=\"s1\">/&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">)))</span><span class=\"nd\">@when</span><span class=\"p\">(</span><span class=\"s2\">&quot;I press the publish button&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">publish_article</span><span class=\"p\">(</span><span class=\"n\">browser</span><span class=\"p\">):</span>    <span class=\"n\">browser</span><span class=\"o\">.</span><span class=\"n\">find_by_css</span><span class=\"p\">(</span><span class=\"s1\">&#39;button[name=publish]&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">first</span><span class=\"o\">.</span><span class=\"n\">click</span><span class=\"p\">()</span><span class=\"nd\">@then</span><span class=\"p\">(</span><span class=\"s2\">&quot;I should not see the error message&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">no_error_message</span><span class=\"p\">(</span><span class=\"n\">browser</span><span class=\"p\">):</span>    <span class=\"k\">with</span> <span class=\"n\">pytest</span><span class=\"o\">.</span><span class=\"n\">raises</span><span class=\"p\">(</span><span class=\"n\">ElementDoesNotExist</span><span class=\"p\">):</span>        <span class=\"n\">browser</span><span class=\"o\">.</span><span class=\"n\">find_by_css</span><span class=\"p\">(</span><span class=\"s1\">&#39;.message.error&#39;</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">first</span><span class=\"nd\">@then</span><span class=\"p\">(</span><span class=\"s2\">&quot;the article should be published&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">article_is_published</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">):</span>    <span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">refresh</span><span class=\"p\">()</span>  <span class=\"c1\"># Refresh the object in the SQLAlchemy session</span>    <span class=\"k\">assert</span> <span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">is_published</span></pre></div></div></section><section id=\"scenario-decorator\"><h2><a class=\"toc-backref\" href=\"#id126\" role=\"doc-backlink\">Scenario decorator</a><a class=\"headerlink\" href=\"#scenario-decorator\" title=\"Link to this heading\">\u00b6</a></h2><p>Functions decorated with the <cite>scenario</cite> decorator behave like a normal test function,and they will be executed after all scenario steps.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenario</span><span class=\"p\">,</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"p\">,</span> <span class=\"n\">then</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s1\">&#39;publish_article.feature&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Publishing the article&#39;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_publish</span><span class=\"p\">(</span><span class=\"n\">browser</span><span class=\"p\">):</span>    <span class=\"k\">assert</span> <span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">title</span> <span class=\"ow\">in</span> <span class=\"n\">browser</span><span class=\"o\">.</span><span class=\"n\">html</span></pre></div></div><div class=\"admonition note\"><p class=\"admonition-title\">Note</p><p>It is however encouraged to try as much as possible to have your logic only inside the Given, When, Then steps.</p></div></section><section id=\"step-aliases\"><h2><a class=\"toc-backref\" href=\"#id127\" role=\"doc-backlink\">Step aliases</a><a class=\"headerlink\" href=\"#step-aliases\" title=\"Link to this heading\">\u00b6</a></h2><p>Sometimes, one has to declare the same fixtures or steps withdifferent names for better readability. In order to use the same stepfunction with multiple step names simply decorate it multiple times:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;I have an article&quot;</span><span class=\"p\">)</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;there&#39;s an article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">article</span><span class=\"p\">(</span><span class=\"n\">author</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;article&quot;</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"n\">create_test_article</span><span class=\"p\">(</span><span class=\"n\">author</span><span class=\"o\">=</span><span class=\"n\">author</span><span class=\"p\">)</span></pre></div></div><p>Note that the given step aliases are independent and will be executedwhen mentioned.</p><p>For example if you associate your resource to some owner or not. Adminuser can\u2019t be an author of the article, but articles should have adefault author.</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">Feature:</span><span class=\"nf\"> Resource owner</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> I&#39;m the author</span><span class=\"k\">        Given </span><span class=\"nf\">I&#39;m an author</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">I have an article</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> I&#39;m the admin</span><span class=\"k\">        Given </span><span class=\"nf\">I&#39;m the admin</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">there&#39;s an article</span></pre></div></div></section><section id=\"step-arguments\"><h2><a class=\"toc-backref\" href=\"#id128\" role=\"doc-backlink\">Step arguments</a><a class=\"headerlink\" href=\"#step-arguments\" title=\"Link to this heading\">\u00b6</a></h2><p>Often it\u2019s possible to reuse steps giving them a parameter(s).This allows to have single implementation and multiple use, so less code.Also opens the possibility to use same step twice in single scenario and with different arguments!And even more, there are several types of step parameter parsers at your disposal(idea taken from <a class=\"reference external\" href=\"https://pypi.python.org/pypi/behave\">behave</a> implementation):</p><dl class=\"simple\"><dt><strong>string</strong> (the default)</dt><dd><p>This is the default and can be considered as a <cite>null</cite> or <cite>exact</cite> parser. It parses no parametersand matches the step name by equality of strings.</p></dd><dt><strong>parse</strong> (based on: <a class=\"reference external\" href=\"http://pypi.python.org/pypi/parse\">pypi_parse</a>)</dt><dd><p>Provides a simple parser that replaces regular expressions forstep parameters with a readable syntax like <code class=\"docutils literal notranslate\"><span class=\"pre\">{param:Type}</span></code>.The syntax is inspired by the Python builtin <code class=\"docutils literal notranslate\"><span class=\"pre\">string.format()</span></code>function.Step parameters must use the named fields syntax of <a class=\"reference external\" href=\"http://pypi.python.org/pypi/parse\">pypi_parse</a>in step definitions. The named fields are extracted,optionally type converted and then used as step function arguments.Supports type conversions by using type converters passed via <cite>extra_types</cite></p></dd><dt><strong>cfparse</strong> (extends: <a class=\"reference external\" href=\"http://pypi.python.org/pypi/parse\">pypi_parse</a>, based on: <a class=\"reference external\" href=\"http://pypi.python.org/pypi/parse_type\">pypi_parse_type</a>)</dt><dd><p>Provides an extended parser with \u201cCardinality Field\u201d (CF) support.Automatically creates missing type converters for related cardinalityas long as a type converter for cardinality=1 is provided.Supports parse expressions like:* <code class=\"docutils literal notranslate\"><span class=\"pre\">{values:Type+}</span></code> (cardinality=1..N, many)* <code class=\"docutils literal notranslate\"><span class=\"pre\">{values:Type*}</span></code> (cardinality=0..N, many0)* <code class=\"docutils literal notranslate\"><span class=\"pre\">{value:Type?}</span></code>  (cardinality=0..1, optional)Supports type conversions (as above).</p></dd><dt><strong>re</strong></dt><dd><p>This uses full regular expressions to parse the clause text. You willneed to use named groups \u201c(?P&lt;name&gt;\u2026)\u201d to define the variables pulledfrom the text and passed to your <code class=\"docutils literal notranslate\"><span class=\"pre\">step()</span></code> function.Type conversion can only be done via <cite>converters</cite> step decorator argument (see example below).</p></dd></dl><p>The default parser is <cite>string</cite>, so just plain one-to-one match to the keyword definition.Parsers except <cite>string</cite>, as well as their optional arguments are specified like:</p><p>for <cite>cfparse</cite> parser</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">parsers</span><span class=\"nd\">@given</span><span class=\"p\">(</span>    <span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">cfparse</span><span class=\"p\">(</span><span class=\"s2\">&quot;there are {start:Number} cucumbers&quot;</span><span class=\"p\">,</span> <span class=\"n\">extra_types</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;Number&quot;</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">}),</span>    <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;cucumbers&quot;</span><span class=\"p\">,</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">}</span></pre></div></div><p>for <cite>re</cite> parser</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">parsers</span><span class=\"nd\">@given</span><span class=\"p\">(</span>    <span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">re</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;there are (?P&lt;start&gt;\\d+) cucumbers&quot;</span><span class=\"p\">),</span>    <span class=\"n\">converters</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">},</span>    <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;cucumbers&quot;</span><span class=\"p\">,</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">}</span></pre></div></div><p>Example:</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">Feature:</span><span class=\"nf\"> Step arguments</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Arguments for given, when, then</span><span class=\"k\">        Given </span><span class=\"nf\">there are </span><span class=\"s\">5</span><span class=\"nf\"> cucumbers</span><span class=\"nf\">        </span><span class=\"k\">When </span><span class=\"nf\">I eat </span><span class=\"s\">3</span><span class=\"nf\"> cucumbers</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">I eat </span><span class=\"s\">2</span><span class=\"nf\"> cucumbers</span><span class=\"nf\">        </span><span class=\"k\">Then </span><span class=\"nf\">I should have </span><span class=\"s\">0</span><span class=\"nf\"> cucumbers</span></pre></div></div><p>The code will look like:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenarios</span><span class=\"p\">,</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"p\">,</span> <span class=\"n\">then</span><span class=\"p\">,</span> <span class=\"n\">parsers</span><span class=\"n\">scenarios</span><span class=\"p\">(</span><span class=\"s2\">&quot;arguments.feature&quot;</span><span class=\"p\">)</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;there are </span><span class=\"si\">{start:d}</span><span class=\"s2\"> cucumbers&quot;</span><span class=\"p\">),</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;cucumbers&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">}</span><span class=\"nd\">@when</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;I eat </span><span class=\"si\">{eat:d}</span><span class=\"s2\"> cucumbers&quot;</span><span class=\"p\">))</span><span class=\"k\">def</span> <span class=\"nf\">eat_cucumbers</span><span class=\"p\">(</span><span class=\"n\">cucumbers</span><span class=\"p\">,</span> <span class=\"n\">eat</span><span class=\"p\">):</span>    <span class=\"n\">cucumbers</span><span class=\"p\">[</span><span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">]</span> <span class=\"o\">+=</span> <span class=\"n\">eat</span><span class=\"nd\">@then</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;I should have </span><span class=\"si\">{left:d}</span><span class=\"s2\"> cucumbers&quot;</span><span class=\"p\">))</span><span class=\"k\">def</span> <span class=\"nf\">should_have_left_cucumbers</span><span class=\"p\">(</span><span class=\"n\">cucumbers</span><span class=\"p\">,</span> <span class=\"n\">left</span><span class=\"p\">):</span>    <span class=\"k\">assert</span> <span class=\"n\">cucumbers</span><span class=\"p\">[</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"n\">cucumbers</span><span class=\"p\">[</span><span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"n\">left</span></pre></div></div><p>Example code also shows possibility to pass argument converters which may be useful if you need to postprocess steparguments after the parser.</p><p>You can implement your own step parser. It\u2019s interface is quite simple. The code can look like:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">import</span> <span class=\"nn\">re</span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">parsers</span><span class=\"k\">class</span> <span class=\"nc\">MyParser</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">StepParser</span><span class=\"p\">):</span><span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Custom parser.&quot;&quot;&quot;</span>    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span><span class=\"w\">        </span><span class=\"sd\">&quot;&quot;&quot;Compile regex.&quot;&quot;&quot;</span>        <span class=\"nb\">super</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">regex</span> <span class=\"o\">=</span> <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">compile</span><span class=\"p\">(</span><span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">sub</span><span class=\"p\">(</span><span class=\"s2\">&quot;%(.+)%&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;(?P&lt;</span><span class=\"se\">\\1</span><span class=\"s2\">&gt;.+)&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">),</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>    <span class=\"k\">def</span> <span class=\"nf\">parse_arguments</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">):</span><span class=\"w\">        </span><span class=\"sd\">&quot;&quot;&quot;Get step arguments.</span><span class=\"sd\">        :return: `dict` of step arguments</span><span class=\"sd\">        &quot;&quot;&quot;</span>        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">regex</span><span class=\"o\">.</span><span class=\"n\">match</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">groupdict</span><span class=\"p\">()</span>    <span class=\"k\">def</span> <span class=\"nf\">is_matching</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">):</span><span class=\"w\">        </span><span class=\"sd\">&quot;&quot;&quot;Match given name with the step name.&quot;&quot;&quot;</span>        <span class=\"k\">return</span> <span class=\"nb\">bool</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">regex</span><span class=\"o\">.</span><span class=\"n\">match</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">))</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;there are </span><span class=\"si\">%s</span><span class=\"s2\">tart</span><span class=\"si\">% c</span><span class=\"s2\">ucumbers&quot;</span><span class=\"p\">),</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;cucumbers&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">}</span></pre></div></div></section><section id=\"override-fixtures-via-given-steps\"><h2><a class=\"toc-backref\" href=\"#id129\" role=\"doc-backlink\">Override fixtures via given steps</a><a class=\"headerlink\" href=\"#override-fixtures-via-given-steps\" title=\"Link to this heading\">\u00b6</a></h2><p>Dependency injection is not a panacea if you have complex structure of your test setup data. Sometimes there\u2019s a needsuch a given step which would imperatively change the fixture only for certain test (scenario), while for other testsit will stay untouched. To allow this, special parameter <cite>target_fixture</cite> exists in the <cite>given</cite> decorator:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">given</span><span class=\"nd\">@pytest</span><span class=\"o\">.</span><span class=\"n\">fixture</span><span class=\"k\">def</span> <span class=\"nf\">foo</span><span class=\"p\">():</span>    <span class=\"k\">return</span> <span class=\"s2\">&quot;foo&quot;</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;I have injecting given&quot;</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;foo&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">injecting_given</span><span class=\"p\">():</span>    <span class=\"k\">return</span> <span class=\"s2\">&quot;injected foo&quot;</span><span class=\"nd\">@then</span><span class=\"p\">(</span><span class=\"s1\">&#39;foo should be &quot;injected foo&quot;&#39;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">foo_is_foo</span><span class=\"p\">(</span><span class=\"n\">foo</span><span class=\"p\">):</span>    <span class=\"k\">assert</span> <span class=\"n\">foo</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;injected foo&#39;</span></pre></div></div><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">Feature:</span><span class=\"nf\"> Target fixture</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Test given fixture injection</span><span class=\"k\">        Given </span><span class=\"nf\">I have injecting given</span><span class=\"nf\">        </span><span class=\"k\">Then </span><span class=\"nf\">foo should be &quot;</span><span class=\"s\">injected foo</span><span class=\"nf\">&quot;</span></pre></div></div><p>In this example, the existing fixture <cite>foo</cite> will be overridden by given step <cite>I have injecting given</cite> only for the scenario it\u2019sused in.</p><p>Sometimes it is also useful to let <cite>when</cite> and <cite>then</cite> steps provide a fixture as well.A common use case is when we have to assert the outcome of an HTTP request:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># content of test_blog.py</span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenarios</span><span class=\"p\">,</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"p\">,</span> <span class=\"n\">then</span><span class=\"kn\">from</span> <span class=\"nn\">my_app.models</span> <span class=\"kn\">import</span> <span class=\"n\">Article</span><span class=\"n\">scenarios</span><span class=\"p\">(</span><span class=\"s2\">&quot;blog.feature&quot;</span><span class=\"p\">)</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;there is an article&quot;</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">there_is_an_article</span><span class=\"p\">():</span>    <span class=\"k\">return</span> <span class=\"n\">Article</span><span class=\"p\">()</span><span class=\"nd\">@when</span><span class=\"p\">(</span><span class=\"s2\">&quot;I request the deletion of the article&quot;</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;request_result&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">there_should_be_a_new_article</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">,</span> <span class=\"n\">http_client</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"n\">http_client</span><span class=\"o\">.</span><span class=\"n\">delete</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;/articles/</span><span class=\"si\">{</span><span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">uid</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span><span class=\"nd\">@then</span><span class=\"p\">(</span><span class=\"s2\">&quot;the request should be successful&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">article_is_published</span><span class=\"p\">(</span><span class=\"n\">request_result</span><span class=\"p\">):</span>    <span class=\"k\">assert</span> <span class=\"n\">request_result</span><span class=\"o\">.</span><span class=\"n\">status_code</span> <span class=\"o\">==</span> <span class=\"mi\">200</span></pre></div></div><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c\"># content of blog.feature</span><span class=\"k\">Feature:</span><span class=\"nf\"> Blog</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Deleting the article</span><span class=\"k\">        Given </span><span class=\"nf\">there is an article</span><span class=\"nf\">        </span><span class=\"k\">When </span><span class=\"nf\">I request the deletion of the article</span><span class=\"nf\">        </span><span class=\"k\">Then </span><span class=\"nf\">the request should be successful</span></pre></div></div></section><section id=\"multiline-steps\"><h2><a class=\"toc-backref\" href=\"#id130\" role=\"doc-backlink\">Multiline steps</a><a class=\"headerlink\" href=\"#multiline-steps\" title=\"Link to this heading\">\u00b6</a></h2><p>As Gherkin, pytest-bdd supports multiline steps(a.k.a. <a class=\"reference external\" href=\"https://cucumber.io/docs/gherkin/reference/#doc-strings\">Doc Strings</a>).But in much cleaner and powerful way:</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">Feature:</span><span class=\"nf\"> Multiline steps</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Multiline step using sub indentation</span><span class=\"k\">        Given </span><span class=\"nf\">I have a step with:</span><span class=\"nf\">            Some</span><span class=\"nf\">            Extra</span><span class=\"nf\">            Lines</span><span class=\"nf\">        </span><span class=\"k\">Then </span><span class=\"nf\">the text should be parsed with correct indentation</span></pre></div></div><p>A step is considered as a multiline one, if the <strong>next</strong> line(s) after it\u2019s first line is indented relativelyto the first line. The step name is then simply extended by adding further lines with newlines.In the example above, the Given step name will be:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"s1\">&#39;I have a step with:</span><span class=\"se\">\\n</span><span class=\"s1\">Some</span><span class=\"se\">\\n</span><span class=\"s1\">Extra</span><span class=\"se\">\\n</span><span class=\"s1\">Lines&#39;</span></pre></div></div><p>You can of course register a step using the full name (including the newlines), but it seems more practical to usestep arguments and capture lines after first line (or some subset of them) into the argument:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">then</span><span class=\"p\">,</span> <span class=\"n\">scenario</span><span class=\"p\">,</span> <span class=\"n\">parsers</span><span class=\"n\">scenarios</span><span class=\"p\">(</span><span class=\"s2\">&quot;multiline.feature&quot;</span><span class=\"p\">)</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;I have a step with:</span><span class=\"se\">\\n</span><span class=\"si\">{content}</span><span class=\"s2\">&quot;</span><span class=\"p\">),</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;text&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">given_text</span><span class=\"p\">(</span><span class=\"n\">content</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"n\">content</span><span class=\"nd\">@then</span><span class=\"p\">(</span><span class=\"s2\">&quot;the text should be parsed with correct indentation&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">text_should_be_correct</span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">):</span>    <span class=\"k\">assert</span> <span class=\"n\">text</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;Some</span><span class=\"se\">\\n</span><span class=\"s2\">Extra</span><span class=\"se\">\\n</span><span class=\"s2\">Lines&quot;</span></pre></div></div></section><section id=\"scenarios-shortcut\"><h2><a class=\"toc-backref\" href=\"#id131\" role=\"doc-backlink\">Scenarios shortcut</a><a class=\"headerlink\" href=\"#scenarios-shortcut\" title=\"Link to this heading\">\u00b6</a></h2><p>If you have a relatively large set of feature files, it\u2019s boring to manually bind scenarios to the tests using the scenario decorator. Of course with the manual approach you get all the power to be able to additionally parametrize the test, give the test function a nice name, document it, etc, but in the majority of the cases you don\u2019t need that.Instead, you want to bind all the scenarios found in the <code class=\"docutils literal notranslate\"><span class=\"pre\">features</span></code> folder(s) recursively automatically, by using the <code class=\"docutils literal notranslate\"><span class=\"pre\">scenarios</span></code> helper.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenarios</span><span class=\"c1\"># assume &#39;features&#39; subfolder is in this file&#39;s directory</span><span class=\"n\">scenarios</span><span class=\"p\">(</span><span class=\"s1\">&#39;features&#39;</span><span class=\"p\">)</span></pre></div></div><p>That\u2019s all you need to do to bind all scenarios found in the <code class=\"docutils literal notranslate\"><span class=\"pre\">features</span></code> folder!Note that you can pass multiple paths, and those paths can be either feature files or feature folders.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenarios</span><span class=\"c1\"># pass multiple paths/files</span><span class=\"n\">scenarios</span><span class=\"p\">(</span><span class=\"s1\">&#39;features&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;other_features/some.feature&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;some_other_features&#39;</span><span class=\"p\">)</span></pre></div></div><p>But what if you need to manually bind a certain scenario, leaving others to be automatically bound?Just write your scenario in a \u201cnormal\u201d way, but ensure you do it <strong>before</strong> the call of <code class=\"docutils literal notranslate\"><span class=\"pre\">scenarios</span></code> helper.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenario</span><span class=\"p\">,</span> <span class=\"n\">scenarios</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s1\">&#39;features/some.feature&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Test something&#39;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_something</span><span class=\"p\">():</span>    <span class=\"k\">pass</span><span class=\"c1\"># assume &#39;features&#39; subfolder is in this file&#39;s directory</span><span class=\"n\">scenarios</span><span class=\"p\">(</span><span class=\"s1\">&#39;features&#39;</span><span class=\"p\">)</span></pre></div></div><p>In the example above, the <code class=\"docutils literal notranslate\"><span class=\"pre\">test_something</span></code> scenario binding will be kept manual, other scenarios found in the <code class=\"docutils literal notranslate\"><span class=\"pre\">features</span></code> folder will be bound automatically.</p></section><section id=\"scenario-outlines\"><h2><a class=\"toc-backref\" href=\"#id132\" role=\"doc-backlink\">Scenario outlines</a><a class=\"headerlink\" href=\"#scenario-outlines\" title=\"Link to this heading\">\u00b6</a></h2><p>Scenarios can be parametrized to cover multiple cases. These are called <a class=\"reference external\" href=\"https://cucumber.io/docs/gherkin/reference/#scenario-outline\">Scenario Outlines</a> in Gherkin, and the variable templates are written using angular brackets (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;var_name&gt;</span></code>).</p><p>Example:</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c\"># content of scenario_outlines.feature</span><span class=\"k\">Feature:</span><span class=\"nf\"> Scenario outlines</span><span class=\"nf\">    </span><span class=\"k\">Scenario Outline:</span><span class=\"nf\"> Outlined given, when, then</span><span class=\"k\">        Given </span><span class=\"nf\">there are </span><span class=\"nv\">&lt;start&gt;</span><span class=\"nf\"> cucumbers</span><span class=\"nf\">        </span><span class=\"k\">When </span><span class=\"nf\">I eat </span><span class=\"nv\">&lt;eat&gt;</span><span class=\"nf\"> cucumbers</span><span class=\"nf\">        </span><span class=\"k\">Then </span><span class=\"nf\">I should have </span><span class=\"nv\">&lt;left&gt;</span><span class=\"nf\"> cucumbers</span><span class=\"nf\">        </span><span class=\"k\">Examples:</span><span class=\"k\">        |</span><span class=\"nv\"> start</span><span class=\"k\"> |</span><span class=\"nv\"> eat</span><span class=\"k\"> |</span><span class=\"nv\"> left</span><span class=\"k\"> |</span><span class=\"k\">        |</span><span class=\"s\">  12</span><span class=\"k\">   |</span><span class=\"s\">  5</span><span class=\"k\">  |</span><span class=\"s\">  7</span><span class=\"k\">   |</span></pre></div></div><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenarios</span><span class=\"p\">,</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"p\">,</span> <span class=\"n\">then</span><span class=\"p\">,</span> <span class=\"n\">parsers</span><span class=\"n\">scenarios</span><span class=\"p\">(</span><span class=\"s2\">&quot;scenario_outlines.feature&quot;</span><span class=\"p\">)</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;there are </span><span class=\"si\">{start:d}</span><span class=\"s2\"> cucumbers&quot;</span><span class=\"p\">),</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;cucumbers&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"n\">start</span><span class=\"p\">,</span> <span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">:</span> <span class=\"mi\">0</span><span class=\"p\">}</span><span class=\"nd\">@when</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;I eat </span><span class=\"si\">{eat:d}</span><span class=\"s2\"> cucumbers&quot;</span><span class=\"p\">))</span><span class=\"k\">def</span> <span class=\"nf\">eat_cucumbers</span><span class=\"p\">(</span><span class=\"n\">cucumbers</span><span class=\"p\">,</span> <span class=\"n\">eat</span><span class=\"p\">):</span>    <span class=\"n\">cucumbers</span><span class=\"p\">[</span><span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">]</span> <span class=\"o\">+=</span> <span class=\"n\">eat</span><span class=\"nd\">@then</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;I should have </span><span class=\"si\">{left:d}</span><span class=\"s2\"> cucumbers&quot;</span><span class=\"p\">))</span><span class=\"k\">def</span> <span class=\"nf\">should_have_left_cucumbers</span><span class=\"p\">(</span><span class=\"n\">cucumbers</span><span class=\"p\">,</span> <span class=\"n\">left</span><span class=\"p\">):</span>    <span class=\"k\">assert</span> <span class=\"n\">cucumbers</span><span class=\"p\">[</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"n\">cucumbers</span><span class=\"p\">[</span><span class=\"s2\">&quot;eat&quot;</span><span class=\"p\">]</span> <span class=\"o\">==</span> <span class=\"n\">left</span></pre></div></div></section><section id=\"organizing-your-scenarios\"><h2><a class=\"toc-backref\" href=\"#id133\" role=\"doc-backlink\">Organizing your scenarios</a><a class=\"headerlink\" href=\"#organizing-your-scenarios\" title=\"Link to this heading\">\u00b6</a></h2><p>The more features and scenarios you have, the more important the question of their organization becomes.The things you can do (and that is also a recommended way):</p><ul class=\"simple\"><li><p>organize your feature files in the folders by semantic groups:</p></li></ul><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span>features\u2502\u251c\u2500\u2500frontend\u2502  \u2502\u2502  \u2514\u2500\u2500auth\u2502     \u2502\u2502     \u2514\u2500\u2500login.feature\u2514\u2500\u2500backend   \u2502   \u2514\u2500\u2500auth      \u2502      \u2514\u2500\u2500login.feature</pre></div></div><p>This looks fine, but how do you run tests only for a certain feature?As pytest-bdd uses pytest, and bdd scenarios are actually normal tests. But test filesare separate from the feature files, the mapping is up to developers, so the test files structure can lookcompletely different:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span>tests\u2502\u2514\u2500\u2500functional   \u2502   \u2514\u2500\u2500test_auth.py      \u2502      \u2514 &quot;&quot;&quot;Authentication tests.&quot;&quot;&quot;        from pytest_bdd import scenario        @scenario(&#39;frontend/auth/login.feature&#39;)        def test_logging_in_frontend():            pass        @scenario(&#39;backend/auth/login.feature&#39;)        def test_logging_in_backend():            pass</pre></div></div><p>For picking up tests to run we can use the<a class=\"reference external\" href=\"https://pytest.org/en/7.1.x/how-to/usage.html#specifying-which-tests-to-run\">tests selection</a> technique. The problem is thatyou have to know how your tests are organized, knowing only the feature files organization is not enough.Cucumber uses <a class=\"reference external\" href=\"https://cucumber.io/docs/cucumber/api/#tags\">tags</a> as a way of categorizing your featuresand scenarios, which pytest-bdd supports. For example, we could have:</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nt\">@login</span><span class=\"nf\"> </span><span class=\"nt\">@backend</span><span class=\"k\">Feature:</span><span class=\"nf\"> Login</span><span class=\"nf\">  @successful</span><span class=\"nf\">  </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Successful login</span></pre></div></div><p>pytest-bdd uses <a class=\"reference external\" href=\"http://pytest.org/latest/mark.html\">pytest markers</a> as a <cite>storage</cite> of the tags for the givenscenario test, so we can use standard test selection:</p><div class=\"highlight-bash notranslate\"><div class=\"highlight\"><pre><span></span>pytest<span class=\"w\"> </span>-m<span class=\"w\"> </span><span class=\"s2\">&quot;backend and login and successful&quot;</span></pre></div></div><p>The feature and scenario markers are not different from standard pytest markers, and the <code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;</span></code> symbol is stripped out automatically to allow test selector expressions. If you want to have bdd-related tags to be distinguishable from the other test markers, use a prefix like <code class=\"docutils literal notranslate\"><span class=\"pre\">bdd</span></code>.Note that if you use pytest with the <code class=\"docutils literal notranslate\"><span class=\"pre\">--strict</span></code> option, all bdd tags mentioned in the feature files should be also in the <code class=\"docutils literal notranslate\"><span class=\"pre\">markers</span></code> setting of the <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest.ini</span></code> config. Also for tags please use names which are python-compatible variable names, i.e. start with a non-number, only underscores or alphanumeric characters, etc. That way you can safely use tags for tests filtering.</p><p>You can customize how tags are converted to pytest marks by implementing the<code class=\"docutils literal notranslate\"><span class=\"pre\">pytest_bdd_apply_tag</span></code> hook and returning <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code> from it:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">def</span> <span class=\"nf\">pytest_bdd_apply_tag</span><span class=\"p\">(</span><span class=\"n\">tag</span><span class=\"p\">,</span> <span class=\"n\">function</span><span class=\"p\">):</span>    <span class=\"k\">if</span> <span class=\"n\">tag</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;todo&#39;</span><span class=\"p\">:</span>        <span class=\"n\">marker</span> <span class=\"o\">=</span> <span class=\"n\">pytest</span><span class=\"o\">.</span><span class=\"n\">mark</span><span class=\"o\">.</span><span class=\"n\">skip</span><span class=\"p\">(</span><span class=\"n\">reason</span><span class=\"o\">=</span><span class=\"s2\">&quot;Not implemented yet&quot;</span><span class=\"p\">)</span>        <span class=\"n\">marker</span><span class=\"p\">(</span><span class=\"n\">function</span><span class=\"p\">)</span>        <span class=\"k\">return</span> <span class=\"kc\">True</span>    <span class=\"k\">else</span><span class=\"p\">:</span>        <span class=\"c1\"># Fall back to the default behavior of pytest-bdd</span>        <span class=\"k\">return</span> <span class=\"kc\">None</span></pre></div></div></section><section id=\"test-setup\"><h2><a class=\"toc-backref\" href=\"#id134\" role=\"doc-backlink\">Test setup</a><a class=\"headerlink\" href=\"#test-setup\" title=\"Link to this heading\">\u00b6</a></h2><p>Test setup is implemented within the Given section. Even though these stepsare executed imperatively to apply possible side-effects, pytest-bdd is tryingto benefit of the PyTest fixtures which is based on the dependency injectionand makes the setup more declarative style.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;I have a beautiful article&quot;</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">article</span><span class=\"p\">():</span>    <span class=\"k\">return</span> <span class=\"n\">Article</span><span class=\"p\">(</span><span class=\"n\">is_beautiful</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span></pre></div></div><p>The target PyTest fixture \u201carticle\u201d gets the return value and any other step can depend on it.</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">Feature:</span><span class=\"nf\"> The power of PyTest</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Symbolic name across steps</span><span class=\"k\">        Given </span><span class=\"nf\">I have a beautiful article</span><span class=\"nf\">        </span><span class=\"k\">When </span><span class=\"nf\">I publish this article</span></pre></div></div><p>The When step is referencing the <code class=\"docutils literal notranslate\"><span class=\"pre\">article</span></code> to publish it.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@when</span><span class=\"p\">(</span><span class=\"s2\">&quot;I publish this article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">publish_article</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">):</span>    <span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">publish</span><span class=\"p\">()</span></pre></div></div><p>Many other BDD toolkits operate on a global context and put the side effects there.This makes it very difficult to implement the steps, because the dependenciesappear only as the side-effects during run-time and not declared in the code.The \u201cpublish article\u201d step has to trust that the article is already in the context,has to know the name of the attribute it is stored there, the type etc.</p><p>In pytest-bdd you just declare an argument of the step function that it depends onand the PyTest will make sure to provide it.</p><p>Still side effects can be applied in the imperative style by design of the BDD.</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">Feature:</span><span class=\"nf\"> News website</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Publishing an article</span><span class=\"k\">        Given </span><span class=\"nf\">I have a beautiful article</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">my article is published</span></pre></div></div><p>Functional tests can reuse your fixture libraries created for the unit-tests and upgradethem by applying the side effects.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@pytest</span><span class=\"o\">.</span><span class=\"n\">fixture</span><span class=\"k\">def</span> <span class=\"nf\">article</span><span class=\"p\">():</span>    <span class=\"k\">return</span> <span class=\"n\">Article</span><span class=\"p\">(</span><span class=\"n\">is_beautiful</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;I have a beautiful article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">i_have_a_beautiful_article</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">):</span>    <span class=\"k\">pass</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;my article is published&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">published_article</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">):</span>    <span class=\"n\">article</span><span class=\"o\">.</span><span class=\"n\">publish</span><span class=\"p\">()</span>    <span class=\"k\">return</span> <span class=\"n\">article</span></pre></div></div><p>This way side-effects were applied to our article and PyTest makes sure that allsteps that require the \u201carticle\u201d fixture will receive the same object. The valueof the \u201cpublished_article\u201d and the \u201carticle\u201d fixtures is the same object.</p><p>Fixtures are evaluated <strong>only once</strong> within the PyTest scope and their values are cached.</p></section><section id=\"backgrounds\"><h2><a class=\"toc-backref\" href=\"#id135\" role=\"doc-backlink\">Backgrounds</a><a class=\"headerlink\" href=\"#backgrounds\" title=\"Link to this heading\">\u00b6</a></h2><p>It\u2019s often the case that to cover certain feature, you\u2019ll need multiple scenarios. And it\u2019s logical that thesetup for those scenarios will have some common parts (if not equal). For this, there are <cite>backgrounds</cite>.pytest-bdd implements <a class=\"reference external\" href=\"https://cucumber.io/docs/gherkin/reference/#background\">Gherkin backgrounds</a> forfeatures.</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">Feature:</span><span class=\"nf\"> Multiple site support</span><span class=\"nf\">  </span><span class=\"k\">Background:</span><span class=\"k\">    Given </span><span class=\"nf\">a global administrator named &quot;</span><span class=\"s\">Greg</span><span class=\"nf\">&quot;</span><span class=\"nf\">    </span><span class=\"k\">And </span><span class=\"nf\">a blog named &quot;</span><span class=\"s\">Greg&#39;s anti-tax rants</span><span class=\"nf\">&quot;</span><span class=\"nf\">    </span><span class=\"k\">And </span><span class=\"nf\">a customer named &quot;</span><span class=\"s\">Wilson</span><span class=\"nf\">&quot;</span><span class=\"nf\">    </span><span class=\"k\">And </span><span class=\"nf\">a blog named &quot;</span><span class=\"s\">Expensive Therapy</span><span class=\"nf\">&quot; owned by &quot;</span><span class=\"s\">Wilson</span><span class=\"nf\">&quot;</span><span class=\"nf\">  </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Wilson posts to his own blog</span><span class=\"k\">    Given </span><span class=\"nf\">I am logged in as Wilson</span><span class=\"nf\">    </span><span class=\"k\">When </span><span class=\"nf\">I try to post to &quot;</span><span class=\"s\">Expensive Therapy</span><span class=\"nf\">&quot;</span><span class=\"nf\">    </span><span class=\"k\">Then </span><span class=\"nf\">I should see &quot;</span><span class=\"s\">Your article was published.</span><span class=\"nf\">&quot;</span><span class=\"nf\">  </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Greg posts to a client&#39;s blog</span><span class=\"k\">    Given </span><span class=\"nf\">I am logged in as Greg</span><span class=\"nf\">    </span><span class=\"k\">When </span><span class=\"nf\">I try to post to &quot;</span><span class=\"s\">Expensive Therapy</span><span class=\"nf\">&quot;</span><span class=\"nf\">    </span><span class=\"k\">Then </span><span class=\"nf\">I should see &quot;</span><span class=\"s\">Your article was published.</span><span class=\"nf\">&quot;</span></pre></div></div><p>In this example, all steps from the background will be executed before all the scenario\u2019s own givensteps, adding a possibility to prepare some common setup for multiple scenarios in a single feature.About best practices for Background, please read Gherkin\u2019s<a class=\"reference external\" href=\"https://cucumber.io/docs/gherkin/reference/#tips-for-using-background\">Tips for using Background</a>.</p><div class=\"admonition note\"><p class=\"admonition-title\">Note</p><p>Only \u201cGiven\u201d steps should be used in \u201cBackground\u201d section.Steps \u201cWhen\u201d and \u201cThen\u201d are prohibited, because their purposes arerelated to actions and consuming outcomes; that is in conflict with theaim of \u201cBackground\u201d - to prepare the system for tests or \u201cput the systemin a known state\u201d as \u201cGiven\u201d does it.The statement above applies to strict Gherkin mode, which isenabled by default.</p></div></section><section id=\"reusing-fixtures\"><h2><a class=\"toc-backref\" href=\"#id136\" role=\"doc-backlink\">Reusing fixtures</a><a class=\"headerlink\" href=\"#reusing-fixtures\" title=\"Link to this heading\">\u00b6</a></h2><p>Sometimes scenarios define new names for an existing fixture that can beinherited (reused). For example, if we have the pytest fixture:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@pytest</span><span class=\"o\">.</span><span class=\"n\">fixture</span><span class=\"k\">def</span> <span class=\"nf\">article</span><span class=\"p\">():</span><span class=\"w\">   </span><span class=\"sd\">&quot;&quot;&quot;Test article.&quot;&quot;&quot;</span>   <span class=\"k\">return</span> <span class=\"n\">Article</span><span class=\"p\">()</span></pre></div></div><p>Then this fixture can be reused with other names using given():</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s1\">&#39;I have a beautiful article&#39;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">i_have_an_article</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">):</span><span class=\"w\">   </span><span class=\"sd\">&quot;&quot;&quot;I have an article.&quot;&quot;&quot;</span></pre></div></div></section><section id=\"reusing-steps\"><h2><a class=\"toc-backref\" href=\"#id137\" role=\"doc-backlink\">Reusing steps</a><a class=\"headerlink\" href=\"#reusing-steps\" title=\"Link to this heading\">\u00b6</a></h2><p>It is possible to define some common steps in the parent <code class=\"docutils literal notranslate\"><span class=\"pre\">conftest.py</span></code> andsimply expect them in the child test file.</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c\"># content of common_steps.feature</span><span class=\"k\">Scenario:</span><span class=\"nf\"> All steps are declared in the conftest</span><span class=\"k\">    Given </span><span class=\"nf\">I have a bar</span><span class=\"nf\">    </span><span class=\"k\">Then </span><span class=\"nf\">bar should have value &quot;</span><span class=\"s\">bar</span><span class=\"nf\">&quot;</span></pre></div></div><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># content of conftest.py</span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">then</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;I have a bar&quot;</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;bar&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">bar</span><span class=\"p\">():</span>    <span class=\"k\">return</span> <span class=\"s2\">&quot;bar&quot;</span><span class=\"nd\">@then</span><span class=\"p\">(</span><span class=\"s1\">&#39;bar should have value &quot;bar&quot;&#39;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">bar_is_bar</span><span class=\"p\">(</span><span class=\"n\">bar</span><span class=\"p\">):</span>    <span class=\"k\">assert</span> <span class=\"n\">bar</span> <span class=\"o\">==</span> <span class=\"s2\">&quot;bar&quot;</span></pre></div></div><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># content of test_common.py</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s2\">&quot;common_steps.feature&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;All steps are declared in the conftest&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_conftest</span><span class=\"p\">():</span>    <span class=\"k\">pass</span></pre></div></div><p>There are no definitions of steps in the test file. They werecollected from the parent conftest.py.</p></section><section id=\"default-steps\"><h2><a class=\"toc-backref\" href=\"#id138\" role=\"doc-backlink\">Default steps</a><a class=\"headerlink\" href=\"#default-steps\" title=\"Link to this heading\">\u00b6</a></h2><p>Here is the list of steps that are implemented inside pytest-bdd:</p><dl class=\"simple\"><dt>given</dt><dd><ul class=\"simple\"><li><p>trace - enters the <cite>pdb</cite> debugger via <cite>pytest.set_trace()</cite></p></li></ul></dd><dt>when</dt><dd><ul class=\"simple\"><li><p>trace - enters the <cite>pdb</cite> debugger via <cite>pytest.set_trace()</cite></p></li></ul></dd><dt>then</dt><dd><ul class=\"simple\"><li><p>trace - enters the <cite>pdb</cite> debugger via <cite>pytest.set_trace()</cite></p></li></ul></dd></dl></section><section id=\"feature-file-paths\"><h2><a class=\"toc-backref\" href=\"#id139\" role=\"doc-backlink\">Feature file paths</a><a class=\"headerlink\" href=\"#feature-file-paths\" title=\"Link to this heading\">\u00b6</a></h2><p>By default, pytest-bdd will use the current module\u2019s path as the base path for finding feature files, but this behaviour can be changed in the pytest configuration file (i.e. <cite>pytest.ini</cite>, <cite>tox.ini</cite> or <cite>setup.cfg</cite>) by declaring the new base path in the <cite>bdd_features_base_dir</cite> key. The path is interpreted as relative to the <a class=\"reference external\" href=\"https://docs.pytest.org/en/latest/reference/customize.html#rootdir\">pytest root directory</a>.You can also override the features base path on a per-scenario basis, in order to override the path for specific tests.</p><p>pytest.ini:</p><div class=\"highlight-ini notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">[pytest]</span><span class=\"na\">bdd_features_base_dir</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">features/</span></pre></div></div><p>tests/test_publish_article.py:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">scenario</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s2\">&quot;foo.feature&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Foo feature in features/foo.feature&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_foo</span><span class=\"p\">():</span>    <span class=\"k\">pass</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span>    <span class=\"s2\">&quot;foo.feature&quot;</span><span class=\"p\">,</span>    <span class=\"s2\">&quot;Foo feature in tests/local-features/foo.feature&quot;</span><span class=\"p\">,</span>    <span class=\"n\">features_base_dir</span><span class=\"o\">=</span><span class=\"s2\">&quot;./local-features/&quot;</span><span class=\"p\">,</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_foo_local</span><span class=\"p\">():</span>    <span class=\"k\">pass</span></pre></div></div><p>The <cite>features_base_dir</cite> parameter can also be passed to the <cite>&#64;scenario</cite> decorator.</p></section><section id=\"avoid-retyping-the-feature-file-name\"><h2><a class=\"toc-backref\" href=\"#id140\" role=\"doc-backlink\">Avoid retyping the feature file name</a><a class=\"headerlink\" href=\"#avoid-retyping-the-feature-file-name\" title=\"Link to this heading\">\u00b6</a></h2><p>If you want to avoid retyping the feature file name when defining your scenarios in a test file, use <code class=\"docutils literal notranslate\"><span class=\"pre\">functools.partial</span></code>.This will make your life much easier when defining multiple scenarios in a test file. For example:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># content of test_publish_article.py</span><span class=\"kn\">from</span> <span class=\"nn\">functools</span> <span class=\"kn\">import</span> <span class=\"n\">partial</span><span class=\"kn\">import</span> <span class=\"nn\">pytest_bdd</span><span class=\"n\">scenario</span> <span class=\"o\">=</span> <span class=\"n\">partial</span><span class=\"p\">(</span><span class=\"n\">pytest_bdd</span><span class=\"o\">.</span><span class=\"n\">scenario</span><span class=\"p\">,</span> <span class=\"s2\">&quot;/path/to/publish_article.feature&quot;</span><span class=\"p\">)</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s2\">&quot;Publishing the article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_publish</span><span class=\"p\">():</span>    <span class=\"k\">pass</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s2\">&quot;Publishing the article as unprivileged user&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_publish_unprivileged</span><span class=\"p\">():</span>    <span class=\"k\">pass</span></pre></div></div><p>You can learn more about <a class=\"reference external\" href=\"https://docs.python.org/3/library/functools.html#functools.partial\">functools.partial</a>in the Python docs.</p></section><section id=\"programmatic-step-generation\"><h2><a class=\"toc-backref\" href=\"#id141\" role=\"doc-backlink\">Programmatic step generation</a><a class=\"headerlink\" href=\"#programmatic-step-generation\" title=\"Link to this heading\">\u00b6</a></h2><p>Sometimes you have step definitions that would be much easier to automate rather than writing them manually over and over again.This is common, for example, when using libraries like <a class=\"reference external\" href=\"https://pytest-factoryboy.readthedocs.io/\">pytest-factoryboy</a> that automatically creates fixtures.Writing step definitions for every model can become a tedious task.</p><p>For this reason, pytest-bdd provides a way to generate step definitions automatically.</p><p>The trick is to pass the <code class=\"docutils literal notranslate\"><span class=\"pre\">stacklevel</span></code> parameter to the <code class=\"docutils literal notranslate\"><span class=\"pre\">given</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">when</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">then</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">step</span></code> decorators. This will instruct them to inject the step fixtures in the appropriate module, rather than just injecting them in the caller frame.</p><p>Let\u2019s look at a concrete example; let\u2019s say you have a class <code class=\"docutils literal notranslate\"><span class=\"pre\">Wallet</span></code> that has some amount of each currency:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># contents of wallet.py</span><span class=\"kn\">import</span> <span class=\"nn\">dataclass</span><span class=\"nd\">@dataclass</span><span class=\"k\">class</span> <span class=\"nc\">Wallet</span><span class=\"p\">:</span>    <span class=\"n\">verified</span><span class=\"p\">:</span> <span class=\"nb\">bool</span>    <span class=\"n\">amount_eur</span><span class=\"p\">:</span> <span class=\"nb\">int</span>    <span class=\"n\">amount_usd</span><span class=\"p\">:</span> <span class=\"nb\">int</span>    <span class=\"n\">amount_gbp</span><span class=\"p\">:</span> <span class=\"nb\">int</span>    <span class=\"n\">amount_jpy</span><span class=\"p\">:</span> <span class=\"nb\">int</span></pre></div></div><p>You can use pytest-factoryboy to automatically create model fixtures for this class:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># contents of wallet_factory.py</span><span class=\"kn\">from</span> <span class=\"nn\">wallet</span> <span class=\"kn\">import</span> <span class=\"n\">Wallet</span><span class=\"kn\">import</span> <span class=\"nn\">factory</span><span class=\"kn\">from</span> <span class=\"nn\">pytest_factoryboy</span> <span class=\"kn\">import</span> <span class=\"n\">register</span><span class=\"k\">class</span> <span class=\"nc\">WalletFactory</span><span class=\"p\">(</span><span class=\"n\">factory</span><span class=\"o\">.</span><span class=\"n\">Factory</span><span class=\"p\">):</span>    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>        <span class=\"n\">model</span> <span class=\"o\">=</span> <span class=\"n\">Wallet</span>    <span class=\"n\">amount_eur</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>    <span class=\"n\">amount_usd</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>    <span class=\"n\">amount_gbp</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>    <span class=\"n\">amount_jpy</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">Wallet</span><span class=\"p\">)</span>  <span class=\"c1\"># creates the &quot;wallet&quot; fixture</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">Wallet</span><span class=\"p\">,</span> <span class=\"s2\">&quot;second_wallet&quot;</span><span class=\"p\">)</span>  <span class=\"c1\"># creates the &quot;second_wallet&quot; fixture</span></pre></div></div><p>Now we can define a function <code class=\"docutils literal notranslate\"><span class=\"pre\">generate_wallet_steps(...)</span></code> that creates the steps for any wallet fixture (in our case, it will be <code class=\"docutils literal notranslate\"><span class=\"pre\">wallet</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">second_wallet</span></code>):</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># contents of wallet_steps.py</span><span class=\"kn\">import</span> <span class=\"nn\">re</span><span class=\"kn\">from</span> <span class=\"nn\">dataclasses</span> <span class=\"kn\">import</span> <span class=\"n\">fields</span><span class=\"kn\">import</span> <span class=\"nn\">factory</span><span class=\"kn\">import</span> <span class=\"nn\">pytest</span><span class=\"kn\">from</span> <span class=\"nn\">pytest_bdd</span> <span class=\"kn\">import</span> <span class=\"n\">given</span><span class=\"p\">,</span> <span class=\"n\">when</span><span class=\"p\">,</span> <span class=\"n\">then</span><span class=\"p\">,</span> <span class=\"n\">scenarios</span><span class=\"p\">,</span> <span class=\"n\">parsers</span><span class=\"k\">def</span> <span class=\"nf\">generate_wallet_steps</span><span class=\"p\">(</span><span class=\"n\">model_name</span><span class=\"o\">=</span><span class=\"s2\">&quot;wallet&quot;</span><span class=\"p\">,</span> <span class=\"n\">stacklevel</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">):</span>    <span class=\"n\">stacklevel</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span>    <span class=\"n\">human_name</span> <span class=\"o\">=</span> <span class=\"n\">model_name</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"s2\">&quot;_&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot; &quot;</span><span class=\"p\">)</span>  <span class=\"c1\"># &quot;second_wallet&quot; -&gt; &quot;second wallet&quot;</span>    <span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;I have a </span><span class=\"si\">{</span><span class=\"n\">human_name</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"n\">model_name</span><span class=\"p\">,</span> <span class=\"n\">stacklevel</span><span class=\"o\">=</span><span class=\"n\">stacklevel</span><span class=\"p\">)</span>    <span class=\"k\">def</span> <span class=\"nf\">_</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>        <span class=\"k\">return</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">getfixturevalue</span><span class=\"p\">(</span><span class=\"n\">model_name</span><span class=\"p\">)</span>    <span class=\"c1\"># Generate steps for currency fields:</span>    <span class=\"k\">for</span> <span class=\"n\">field</span> <span class=\"ow\">in</span> <span class=\"n\">fields</span><span class=\"p\">(</span><span class=\"n\">Wallet</span><span class=\"p\">):</span>        <span class=\"n\">match</span> <span class=\"o\">=</span> <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">fullmatch</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;amount_(?P&lt;currency&gt;[a-z]</span><span class=\"si\">{3}</span><span class=\"s2\">)&quot;</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">)</span>        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">match</span><span class=\"p\">:</span>            <span class=\"k\">continue</span>        <span class=\"n\">currency</span> <span class=\"o\">=</span> <span class=\"n\">match</span><span class=\"p\">[</span><span class=\"s2\">&quot;currency&quot;</span><span class=\"p\">]</span>        <span class=\"nd\">@given</span><span class=\"p\">(</span>            <span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;I have </span><span class=\"se\">{{</span><span class=\"s2\">value:d</span><span class=\"se\">}}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"n\">currency</span><span class=\"o\">.</span><span class=\"n\">upper</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\"> in my </span><span class=\"si\">{</span><span class=\"n\">human_name</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">),</span>            <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"sa\">f</span><span class=\"s2\">&quot;</span><span class=\"si\">{</span><span class=\"n\">model_name</span><span class=\"si\">}</span><span class=\"s2\">__amount_</span><span class=\"si\">{</span><span class=\"n\">currency</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">,</span>            <span class=\"n\">stacklevel</span><span class=\"o\">=</span><span class=\"n\">stacklevel</span><span class=\"p\">,</span>        <span class=\"p\">)</span>        <span class=\"k\">def</span> <span class=\"nf\">_</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">int</span><span class=\"p\">:</span>            <span class=\"k\">return</span> <span class=\"n\">value</span>        <span class=\"nd\">@then</span><span class=\"p\">(</span>            <span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">&quot;I should have </span><span class=\"se\">{{</span><span class=\"s2\">value:d</span><span class=\"se\">}}</span><span class=\"s2\"> </span><span class=\"si\">{</span><span class=\"n\">currency</span><span class=\"o\">.</span><span class=\"n\">upper</span><span class=\"p\">()</span><span class=\"si\">}</span><span class=\"s2\"> in my </span><span class=\"si\">{</span><span class=\"n\">human_name</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">),</span>            <span class=\"n\">stacklevel</span><span class=\"o\">=</span><span class=\"n\">stacklevel</span><span class=\"p\">,</span>        <span class=\"p\">)</span>        <span class=\"k\">def</span> <span class=\"nf\">_</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">:</span> <span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">_currency</span><span class=\"o\">=</span><span class=\"n\">currency</span><span class=\"p\">,</span> <span class=\"n\">_model_name</span><span class=\"o\">=</span><span class=\"n\">model_name</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"kc\">None</span><span class=\"p\">:</span>            <span class=\"n\">wallet</span> <span class=\"o\">=</span> <span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">getfixturevalue</span><span class=\"p\">(</span><span class=\"n\">_model_name</span><span class=\"p\">)</span>            <span class=\"k\">assert</span> <span class=\"nb\">getattr</span><span class=\"p\">(</span><span class=\"n\">wallet</span><span class=\"p\">,</span> <span class=\"sa\">f</span><span class=\"s2\">&quot;amount_</span><span class=\"si\">{</span><span class=\"n\">_currency</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"n\">value</span><span class=\"c1\"># Inject the steps into the current module</span><span class=\"n\">generate_wallet_steps</span><span class=\"p\">(</span><span class=\"s2\">&quot;wallet&quot;</span><span class=\"p\">)</span><span class=\"n\">generate_wallet_steps</span><span class=\"p\">(</span><span class=\"s2\">&quot;second_wallet&quot;</span><span class=\"p\">)</span></pre></div></div><p>This last file, <code class=\"docutils literal notranslate\"><span class=\"pre\">wallet_steps.py</span></code>, now contains all the step definitions for our \u201cwallet\u201d and \u201csecond_wallet\u201d fixtures.</p><p>We can now define a scenario like this:</p><div class=\"highlight-gherkin notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c\"># contents of wallet.feature</span><span class=\"k\">Feature:</span><span class=\"nf\"> A feature</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Wallet EUR amount stays constant</span><span class=\"k\">        Given </span><span class=\"nf\">I have </span><span class=\"s\">10</span><span class=\"nf\"> EUR in my wallet</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">I have a wallet</span><span class=\"nf\">        </span><span class=\"k\">Then </span><span class=\"nf\">I should have </span><span class=\"s\">10</span><span class=\"nf\"> EUR in my wallet</span><span class=\"nf\">    </span><span class=\"k\">Scenario:</span><span class=\"nf\"> Second wallet JPY amount stays constant</span><span class=\"k\">        Given </span><span class=\"nf\">I have </span><span class=\"s\">100</span><span class=\"nf\"> JPY in my second wallet</span><span class=\"nf\">        </span><span class=\"k\">And </span><span class=\"nf\">I have a second wallet</span><span class=\"nf\">        </span><span class=\"k\">Then </span><span class=\"nf\">I should have </span><span class=\"s\">100</span><span class=\"nf\"> JPY in my second wallet</span></pre></div></div><p>and finally a test file that puts it all together and run the scenarios:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># contents of test_wallet.py</span><span class=\"kn\">from</span> <span class=\"nn\">pytest_factoryboy</span> <span class=\"kn\">import</span> <span class=\"n\">scenarios</span><span class=\"kn\">from</span> <span class=\"nn\">wallet_factory</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># import the registered fixtures &quot;wallet&quot; and &quot;second_wallet&quot;</span><span class=\"kn\">from</span> <span class=\"nn\">wallet_steps</span> <span class=\"kn\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># import all the step definitions into this test file</span><span class=\"n\">scenarios</span><span class=\"p\">(</span><span class=\"s2\">&quot;wallet.feature&quot;</span><span class=\"p\">)</span></pre></div></div></section><section id=\"hooks\"><h2><a class=\"toc-backref\" href=\"#id142\" role=\"doc-backlink\">Hooks</a><a class=\"headerlink\" href=\"#hooks\" title=\"Link to this heading\">\u00b6</a></h2><p>pytest-bdd exposes several <a class=\"reference external\" href=\"https://docs.pytest.org/en/7.1.x/reference/reference.html#hooks\">pytest hooks</a>which might be helpful building useful reporting, visualization, etc. on top of it:</p><ul class=\"simple\"><li><p><cite>pytest_bdd_before_scenario(request, feature, scenario)</cite> - Called before scenario is executed</p></li><li><p><cite>pytest_bdd_after_scenario(request, feature, scenario)</cite> - Called after scenario is executed(even if one of steps has failed)</p></li><li><p><cite>pytest_bdd_before_step(request, feature, scenario, step, step_func)</cite> - Called before step functionis executed and it\u2019s arguments evaluated</p></li><li><p><cite>pytest_bdd_before_step_call(request, feature, scenario, step, step_func, step_func_args)</cite> - Called before stepfunction is executed with evaluated arguments</p></li><li><p><cite>pytest_bdd_after_step(request, feature, scenario, step, step_func, step_func_args)</cite> - Called after step functionis successfully executed</p></li><li><p><cite>pytest_bdd_step_error(request, feature, scenario, step, step_func, step_func_args, exception)</cite> - Called when stepfunction failed to execute</p></li><li><p><cite>pytest_bdd_step_func_lookup_error(request, feature, scenario, step, exception)</cite> - Called when step lookup failed</p></li></ul></section><section id=\"browser-testing\"><h2><a class=\"toc-backref\" href=\"#id143\" role=\"doc-backlink\">Browser testing</a><a class=\"headerlink\" href=\"#browser-testing\" title=\"Link to this heading\">\u00b6</a></h2><p>Tools recommended to use for browser testing:</p><ul class=\"simple\"><li><p><a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-splinter\">pytest-splinter</a> - pytest <a class=\"reference external\" href=\"https://splinter.readthedocs.io/\">splinter</a> integration for the real browser testing</p></li></ul></section><section id=\"reporting\"><h2><a class=\"toc-backref\" href=\"#id144\" role=\"doc-backlink\">Reporting</a><a class=\"headerlink\" href=\"#reporting\" title=\"Link to this heading\">\u00b6</a></h2><p>It\u2019s important to have nice reporting out of your bdd tests. Cucumber introduced some kind of standard for<a class=\"reference external\" href=\"https://www.relishapp.com/cucumber/cucumber/docs/json-output-formatter\">json format</a>which can be used for, for example, by <a class=\"reference external\" href=\"https://plugins.jenkins.io/cucumber-testresult-plugin/\">this</a> Jenkinsplugin.</p><p>To have an output in json format:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">pytest</span> <span class=\"o\">--</span><span class=\"n\">cucumberjson</span><span class=\"o\">=&lt;</span><span class=\"n\">path</span> <span class=\"n\">to</span> <span class=\"n\">json</span> <span class=\"n\">report</span><span class=\"o\">&gt;</span></pre></div></div><p>This will output an expanded (meaning scenario outlines will be expanded to several scenarios) Cucumber format.</p><p>To enable gherkin-formatted output on terminal, use</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">pytest</span> <span class=\"o\">--</span><span class=\"n\">gherkin</span><span class=\"o\">-</span><span class=\"n\">terminal</span><span class=\"o\">-</span><span class=\"n\">reporter</span></pre></div></div></section><section id=\"test-code-generation-helpers\"><h2><a class=\"toc-backref\" href=\"#id145\" role=\"doc-backlink\">Test code generation helpers</a><a class=\"headerlink\" href=\"#test-code-generation-helpers\" title=\"Link to this heading\">\u00b6</a></h2><p>For newcomers it\u2019s sometimes hard to write all needed test code without being frustrated.To simplify their life, a simple code generator was implemented. It allows to create fully functional(but of course empty) tests and step definitions for a given feature file.It\u2019s done as a separate console script provided by pytest-bdd package:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">pytest</span><span class=\"o\">-</span><span class=\"n\">bdd</span> <span class=\"n\">generate</span> <span class=\"o\">&lt;</span><span class=\"n\">feature</span> <span class=\"n\">file</span> <span class=\"n\">name</span><span class=\"o\">&gt;</span> <span class=\"o\">..</span> <span class=\"o\">&lt;</span><span class=\"n\">feature</span> <span class=\"n\">file</span> <span class=\"n\">nameN</span><span class=\"o\">&gt;</span></pre></div></div><p>It will print the generated code to the standard output so you can easily redirect it to the file:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">pytest</span><span class=\"o\">-</span><span class=\"n\">bdd</span> <span class=\"n\">generate</span> <span class=\"n\">features</span><span class=\"o\">/</span><span class=\"n\">some</span><span class=\"o\">.</span><span class=\"n\">feature</span> <span class=\"o\">&gt;</span> <span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">functional</span><span class=\"o\">/</span><span class=\"n\">test_some</span><span class=\"o\">.</span><span class=\"n\">py</span></pre></div></div></section><section id=\"advanced-code-generation\"><h2><a class=\"toc-backref\" href=\"#id146\" role=\"doc-backlink\">Advanced code generation</a><a class=\"headerlink\" href=\"#advanced-code-generation\" title=\"Link to this heading\">\u00b6</a></h2><p>For more experienced users, there\u2019s a smart code generation/suggestion feature. It will only generate thetest code which is not yet there, checking existing tests and step definitions the same way it\u2019s done during thetest execution. The code suggestion tool is called via passing additional pytest arguments:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">pytest</span> <span class=\"o\">--</span><span class=\"n\">generate</span><span class=\"o\">-</span><span class=\"n\">missing</span> <span class=\"o\">--</span><span class=\"n\">feature</span> <span class=\"n\">features</span> <span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">functional</span></pre></div></div><p>The output will be like:</p><div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">=============================</span> <span class=\"n\">test</span> <span class=\"n\">session</span> <span class=\"n\">starts</span> <span class=\"o\">==============================</span><span class=\"n\">platform</span> <span class=\"n\">linux2</span> <span class=\"o\">--</span> <span class=\"n\">Python</span> <span class=\"mf\">2.7.6</span> <span class=\"o\">--</span> <span class=\"n\">py</span><span class=\"o\">-</span><span class=\"mf\">1.4.24</span> <span class=\"o\">--</span> <span class=\"n\">pytest</span><span class=\"o\">-</span><span class=\"mf\">2.6.2</span><span class=\"n\">plugins</span><span class=\"p\">:</span> <span class=\"n\">xdist</span><span class=\"p\">,</span> <span class=\"n\">pep8</span><span class=\"p\">,</span> <span class=\"n\">cov</span><span class=\"p\">,</span> <span class=\"n\">cache</span><span class=\"p\">,</span> <span class=\"n\">bdd</span><span class=\"p\">,</span> <span class=\"n\">bdd</span><span class=\"p\">,</span> <span class=\"n\">bdd</span><span class=\"n\">collected</span> <span class=\"mi\">2</span> <span class=\"n\">items</span><span class=\"n\">Scenario</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">bound</span> <span class=\"n\">to</span> <span class=\"nb\">any</span> <span class=\"n\">test</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Code is generated for scenarios which are not bound to any tests&quot;</span> <span class=\"ow\">in</span> <span class=\"n\">feature</span> <span class=\"s2\">&quot;Missing code generation&quot;</span> <span class=\"ow\">in</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">pytest</span><span class=\"o\">-</span><span class=\"mi\">552</span><span class=\"o\">/</span><span class=\"n\">testdir</span><span class=\"o\">/</span><span class=\"n\">test_generate_missing0</span><span class=\"o\">/</span><span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">generation</span><span class=\"o\">.</span><span class=\"n\">feature</span><span class=\"o\">--------------------------------------------------------------------------------</span><span class=\"n\">Step</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"n\">defined</span><span class=\"p\">:</span> <span class=\"s2\">&quot;I have a custom bar&quot;</span> <span class=\"ow\">in</span> <span class=\"n\">scenario</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Code is generated for scenario steps which are not yet defined(implemented)&quot;</span> <span class=\"ow\">in</span> <span class=\"n\">feature</span> <span class=\"s2\">&quot;Missing code generation&quot;</span> <span class=\"ow\">in</span> <span class=\"o\">/</span><span class=\"n\">tmp</span><span class=\"o\">/</span><span class=\"n\">pytest</span><span class=\"o\">-</span><span class=\"mi\">552</span><span class=\"o\">/</span><span class=\"n\">testdir</span><span class=\"o\">/</span><span class=\"n\">test_generate_missing0</span><span class=\"o\">/</span><span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">generation</span><span class=\"o\">.</span><span class=\"n\">feature</span><span class=\"o\">--------------------------------------------------------------------------------</span><span class=\"n\">Please</span> <span class=\"n\">place</span> <span class=\"n\">the</span> <span class=\"n\">code</span> <span class=\"n\">above</span> <span class=\"n\">to</span> <span class=\"n\">the</span> <span class=\"n\">test</span> <span class=\"n\">file</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">):</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s1\">&#39;tests/generation.feature&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;Code is generated for scenarios which are not bound to any tests&#39;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_Code_is_generated_for_scenarios_which_are_not_bound_to_any_tests</span><span class=\"p\">():</span><span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;Code is generated for scenarios which are not bound to any tests.&quot;&quot;&quot;</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;I have a custom bar&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">I_have_a_custom_bar</span><span class=\"p\">():</span><span class=\"w\">    </span><span class=\"sd\">&quot;&quot;&quot;I have a custom bar.&quot;&quot;&quot;</span></pre></div></div><p>As as side effect, the tool will validate the files for format errors, also some of the logic bugs, for example theordering of the types of the steps.</p></section><section id=\"migration-of-your-tests-from-versions-5-x-x\"><span id=\"migration-from-5-x-x\"></span><h2><a class=\"toc-backref\" href=\"#id147\" role=\"doc-backlink\">Migration of your tests from versions 5.x.x</a><a class=\"headerlink\" href=\"#migration-of-your-tests-from-versions-5-x-x\" title=\"Link to this heading\">\u00b6</a></h2><p>The primary focus of the pytest-bdd is the compatibility with the latest gherkin developmentse.g. multiple scenario outline example tables with tags support etc.</p><p>In order to provide the best compatibility, it is best to support the features described in the officialgherkin reference. This means deprecation of some non-standard features that were implemented in pytest-bdd.</p><section id=\"removal-of-the-feature-examples\"><h3><a class=\"toc-backref\" href=\"#id148\" role=\"doc-backlink\">Removal of the feature examples</a><a class=\"headerlink\" href=\"#removal-of-the-feature-examples\" title=\"Link to this heading\">\u00b6</a></h3><p>The example tables on the feature level are no longer supported. If you had examples on the feature level, you should copy them to each individual scenario.</p></section><section id=\"removal-of-the-vertical-examples\"><h3><a class=\"toc-backref\" href=\"#id149\" role=\"doc-backlink\">Removal of the vertical examples</a><a class=\"headerlink\" href=\"#removal-of-the-vertical-examples\" title=\"Link to this heading\">\u00b6</a></h3><p>Vertical example tables are no longer supported since the official gherkin doesn\u2019t support them.The example tables should have horizontal orientation.</p></section><section id=\"step-arguments-are-no-longer-fixtures\"><h3><a class=\"toc-backref\" href=\"#id150\" role=\"doc-backlink\">Step arguments are no longer fixtures</a><a class=\"headerlink\" href=\"#step-arguments-are-no-longer-fixtures\" title=\"Link to this heading\">\u00b6</a></h3><p>Step parsed arguments conflicted with the fixtures. Now they no longer define fixture.If the fixture has to be defined by the step, the target_fixture param should be used.</p></section><section id=\"variable-templates-in-steps-are-only-parsed-for-scenario-outlines\"><h3><a class=\"toc-backref\" href=\"#id151\" role=\"doc-backlink\">Variable templates in steps are only parsed for Scenario Outlines</a><a class=\"headerlink\" href=\"#variable-templates-in-steps-are-only-parsed-for-scenario-outlines\" title=\"Link to this heading\">\u00b6</a></h3><p>In previous versions of pytest, steps containing <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;variable&gt;</span></code> would be parsed both by <code class=\"docutils literal notranslate\"><span class=\"pre\">Scenario</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">Scenario</span> <span class=\"pre\">Outline</span></code>.Now they are only parsed within a <code class=\"docutils literal notranslate\"><span class=\"pre\">Scenario</span> <span class=\"pre\">Outline</span></code>.</p></section></section><section id=\"migration-of-your-tests-from-versions-4-x-x\"><span id=\"migration-from-4-x-x\"></span><h2><a class=\"toc-backref\" href=\"#id152\" role=\"doc-backlink\">Migration of your tests from versions 4.x.x</a><a class=\"headerlink\" href=\"#migration-of-your-tests-from-versions-4-x-x\" title=\"Link to this heading\">\u00b6</a></h2><section id=\"replace-usage-of-parameter-inside-step-definitions-with-parsed-parameter\"><h3><a class=\"toc-backref\" href=\"#id153\" role=\"doc-backlink\">Replace usage of &lt;parameter&gt; inside step definitions with parsed {parameter}</a><a class=\"headerlink\" href=\"#replace-usage-of-parameter-inside-step-definitions-with-parsed-parameter\" title=\"Link to this heading\">\u00b6</a></h3><p>Templated steps (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;given(&quot;there</span> <span class=\"pre\">are</span> <span class=\"pre\">&lt;start&gt;</span> <span class=\"pre\">cucumbers&quot;)</span></code>) should now the use step argument parsers in order to match the scenario outlines and get the values from the example tables. The values from the example tables are no longer passed as fixtures, although if you define your step to use a parser, the parameters will be still provided as fixtures.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># Old step definition:</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;there are &lt;start&gt; cucumbers&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">pass</span><span class=\"c1\"># New step definition:</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;there are </span><span class=\"si\">{start}</span><span class=\"s2\"> cucumbers&quot;</span><span class=\"p\">))</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">pass</span></pre></div></div><p>Scenario <cite>example_converters</cite> are removed in favor of the converters provided on the step level:</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># Old code:</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;there are &lt;start&gt; cucumbers&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"n\">start</span><span class=\"p\">}</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s2\">&quot;outline.feature&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Outlined&quot;</span><span class=\"p\">,</span> <span class=\"n\">example_converters</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"nb\">float</span><span class=\"p\">})</span><span class=\"k\">def</span> <span class=\"nf\">test_outline</span><span class=\"p\">():</span>    <span class=\"k\">pass</span><span class=\"c1\"># New code:</span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"n\">parsers</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"p\">(</span><span class=\"s2\">&quot;there are </span><span class=\"si\">{start}</span><span class=\"s2\"> cucumbers&quot;</span><span class=\"p\">),</span> <span class=\"n\">converters</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"nb\">float</span><span class=\"p\">})</span><span class=\"k\">def</span> <span class=\"nf\">given_cucumbers</span><span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">):</span>    <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;start&quot;</span><span class=\"p\">:</span> <span class=\"n\">start</span><span class=\"p\">}</span><span class=\"nd\">@scenario</span><span class=\"p\">(</span><span class=\"s2\">&quot;outline.feature&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Outlined&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">test_outline</span><span class=\"p\">():</span>    <span class=\"k\">pass</span></pre></div></div></section><section id=\"refuse-combining-scenario-outline-and-pytest-parametrization\"><h3><a class=\"toc-backref\" href=\"#id154\" role=\"doc-backlink\">Refuse combining scenario outline and pytest parametrization</a><a class=\"headerlink\" href=\"#refuse-combining-scenario-outline-and-pytest-parametrization\" title=\"Link to this heading\">\u00b6</a></h3><p>The significant downside of combining scenario outline and pytest parametrization approach was an inability to see thetest table from the feature file.</p></section></section><section id=\"migration-of-your-tests-from-versions-3-x-x\"><span id=\"migration-from-3-x-x\"></span><h2><a class=\"toc-backref\" href=\"#id155\" role=\"doc-backlink\">Migration of your tests from versions 3.x.x</a><a class=\"headerlink\" href=\"#migration-of-your-tests-from-versions-3-x-x\" title=\"Link to this heading\">\u00b6</a></h2><p>Given steps are no longer fixtures. In case it is needed to make given step setup a fixture,the target_fixture parameter should be used.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;there&#39;s an article&quot;</span><span class=\"p\">,</span> <span class=\"n\">target_fixture</span><span class=\"o\">=</span><span class=\"s2\">&quot;article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">there_is_an_article</span><span class=\"p\">():</span>    <span class=\"k\">return</span> <span class=\"n\">Article</span><span class=\"p\">()</span></pre></div></div><p>Given steps no longer have the <cite>fixture</cite> parameter. In fact the step may depend on multiple fixtures.Just normal step declaration with the dependency injection should be used.</p><div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@given</span><span class=\"p\">(</span><span class=\"s2\">&quot;there&#39;s an article&quot;</span><span class=\"p\">)</span><span class=\"k\">def</span> <span class=\"nf\">there_is_an_article</span><span class=\"p\">(</span><span class=\"n\">article</span><span class=\"p\">):</span>    <span class=\"k\">pass</span></pre></div></div><p>Strict gherkin option is removed, so the <code class=\"docutils literal notranslate\"><span class=\"pre\">strict_gherkin</span></code> parameter can be removed from the scenario decoratorsas well as <code class=\"docutils literal notranslate\"><span class=\"pre\">bdd_strict_gherkin</span></code> from the ini files.</p><p>Step validation handlers for the hook <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest_bdd_step_validation_error</span></code> should be removed.</p></section><section id=\"license\"><h2><a class=\"toc-backref\" href=\"#id156\" role=\"doc-backlink\">License</a><a class=\"headerlink\" href=\"#license\" title=\"Link to this heading\">\u00b6</a></h2><p>This software is licensed under the <a class=\"reference external\" href=\"https://opensource.org/licenses/MIT\">MIT License</a>.</p><p>\u00a9 2013 Oleg Pidsadnyi, Anatoly Bubenkov and others</p></section></section><section id=\"authors\"><h1><a class=\"toc-backref\" href=\"#id157\" role=\"doc-backlink\">Authors</a><a class=\"headerlink\" href=\"#authors\" title=\"Link to this heading\">\u00b6</a></h1><dl class=\"simple\"><dt><a class=\"reference external\" href=\"mailto:oleg&#46;pidsadnyi&#37;&#52;&#48;gmail&#46;com\">Oleg Pidsadnyi</a></dt><dd><p>original idea, initial implementation and further improvements</p></dd><dt><a class=\"reference external\" href=\"mailto:bubenkoff&#37;&#52;&#48;gmail&#46;com\">Anatoly Bubenkov</a></dt><dd><p>key implementation idea and realization, many new features and improvements</p></dd></dl><p>These people have contributed to <cite>pytest-bdd</cite>, in alphabetical order:</p><ul class=\"simple\"><li><p><a class=\"reference external\" href=\"mailto:me&#37;&#52;&#48;adamcoddington&#46;net\">Adam Coddington</a></p></li><li><p><a class=\"reference external\" href=\"mailto:albertjan&#37;&#52;&#48;curit&#46;com\">Albert-Jan Nijburg</a></p></li><li><p><a class=\"reference external\" href=\"youtux\">Alessio Bogon</a></p></li><li><p><a class=\"reference external\" href=\"mailto:andrey&#46;makhnach&#37;&#52;&#48;gmail&#46;com\">Andrey Makhnach</a></p></li><li><p><a class=\"reference external\" href=\"mailto:curzona&#37;&#52;&#48;gmail&#46;com\">Aron Curzon</a></p></li><li><p><a class=\"reference external\" href=\"mailto:dimazest&#37;&#52;&#48;gmail&#46;com\">Dmitrijs Milajevs</a></p></li><li><p><a class=\"reference external\" href=\"pauk-slon\">Dmitry Kolyagin</a></p></li><li><p><a class=\"reference external\" href=\"mailto:me&#37;&#52;&#48;the-compiler&#46;org\">Florian Bruhin</a></p></li><li><p><a class=\"reference external\" href=\"mailto:flub&#37;&#52;&#48;devork&#46;be\">Floris Bruynooghe</a></p></li><li><p><a class=\"reference external\" href=\"mailto:hvdklauw&#37;&#52;&#48;gmail&#46;com\">Harro van der Klauw</a></p></li><li><p><a class=\"reference external\" href=\"https://github.com/hugovk\">Hugo van Kemenade</a></p></li><li><p><a class=\"reference external\" href=\"mailto:l&#37;&#52;&#48;lrowe&#46;co&#46;uk\">Laurence Rowe</a></p></li><li><p><a class=\"reference external\" href=\"mailto:santagada&#37;&#52;&#48;github&#46;com\">Leonardo Santagada</a></p></li><li><p><a class=\"reference external\" href=\"sliwinski-milosz\">Milosz Sliwinski</a></p></li><li><p><a class=\"reference external\" href=\"mailto:github&#37;&#52;&#48;elfstone&#46;nl\">Michiel Holtkamp</a></p></li><li><p><a class=\"reference external\" href=\"mailto:ropez&#37;&#52;&#48;github&#46;com\">Robin Pedersen</a></p></li><li><p><a class=\"reference external\" href=\"mailto:sergejyit&#37;&#52;&#48;gmail&#46;com\">Sergey Kraynev</a></p></li></ul></section><section id=\"changelog\"><h1><a class=\"toc-backref\" href=\"#id158\" role=\"doc-backlink\">Changelog</a><a class=\"headerlink\" href=\"#changelog\" title=\"Link to this heading\">\u00b6</a></h1><section id=\"unreleased\"><h2><a class=\"toc-backref\" href=\"#id159\" role=\"doc-backlink\">Unreleased</a><a class=\"headerlink\" href=\"#unreleased\" title=\"Link to this heading\">\u00b6</a></h2></section><section id=\"id2\"><h2><a class=\"toc-backref\" href=\"#id160\" role=\"doc-backlink\">7.1.1</a><a class=\"headerlink\" href=\"#id2\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Address a bug introduced in pytest-bdd 7.1 caused by incorrect pytest version check.</p></li></ul></section><section id=\"id3\"><h2><a class=\"toc-backref\" href=\"#id161\" role=\"doc-backlink\">7.1</a><a class=\"headerlink\" href=\"#id3\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Address compatibility issue with pytest 8.1. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/666\">#666</a></p></li></ul></section><section id=\"id5\"><h2><a class=\"toc-backref\" href=\"#id162\" role=\"doc-backlink\">7.0.1</a><a class=\"headerlink\" href=\"#id5\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix errors occurring if <cite>pytest_unconfigure</cite> is called before <cite>pytest_configure</cite>. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/issues/362\">#362</a> <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/641\">#641</a></p></li></ul></section><section id=\"id8\"><h2><a class=\"toc-backref\" href=\"#id163\" role=\"doc-backlink\">7.0.0</a><a class=\"headerlink\" href=\"#id8\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>\u26a0\ufe0f Backwards incompatible: - <code class=\"docutils literal notranslate\"><span class=\"pre\">parsers.re</span></code> now does a <a class=\"reference external\" href=\"https://docs.python.org/3/library/re.html#re.fullmatch\">fullmatch</a> instead of a partial match. This is to make it work just like the other parsers, since they don\u2019t ignore non-matching characters at the end of the string. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/539\">#539</a></p></li><li><p>Drop python 3.7 compatibility, as it\u2019s no longer supported. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/627\">#627</a></p></li><li><p>Declare official support for python 3.12 <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/628\">#628</a></p></li><li><p>Improve parser performance by 15% <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/623\">#623</a> by <a class=\"reference external\" href=\"https://github.com/dcendents\">&#64;dcendents</a></p></li><li><p>Add support for Scenarios and Scenario Outlines to have descriptions. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/600\">#600</a></p></li></ul></section><section id=\"id14\"><h2><a class=\"toc-backref\" href=\"#id164\" role=\"doc-backlink\">6.1.1</a><a class=\"headerlink\" href=\"#id14\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix regression introduced in version 6.1.0 where the <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest_bdd_after_scenario</span></code> hook would be called after every step instead of after the scenario. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/577\">#577</a></p></li></ul></section><section id=\"id16\"><h2><a class=\"toc-backref\" href=\"#id165\" role=\"doc-backlink\">6.1.0</a><a class=\"headerlink\" href=\"#id16\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix bug where steps without parsers would take precedence over steps with parsers. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/534\">#534</a></p></li><li><p>Step functions can now be decorated multiple times with &#64;given, &#64;when, &#64;then. Previously every decorator would override <code class=\"docutils literal notranslate\"><span class=\"pre\">converters</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">target_fixture</span></code> every at every application. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/534\">#534</a> <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/544\">#544</a> <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/issues/525\">#525</a></p></li><li><p>Require pytest&gt;=6.2 <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/534\">#534</a></p></li><li><p>Using modern way to specify hook options to avoid deprecation warnings with pytest &gt;=7.2.</p></li><li><p>Add generic <code class=\"docutils literal notranslate\"><span class=\"pre\">step</span></code> decorator that will be used for all kind of steps <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/548\">#548</a></p></li><li><p>Add <code class=\"docutils literal notranslate\"><span class=\"pre\">stacklevel</span></code> param to <code class=\"docutils literal notranslate\"><span class=\"pre\">given</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">when</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">then</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">step</span></code> decorators. This allows for programmatic step generation <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/548\">#548</a></p></li><li><p>Hide pytest-bdd internal method in user tracebacks <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/557\">#557</a>.</p></li><li><p>Make the package PEP 561-compatible <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/issues/559\">#559</a> <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/563\">#563</a>.</p></li><li><p>Configuration option <code class=\"docutils literal notranslate\"><span class=\"pre\">bdd_features_base_dir</span></code> is interpreted as relative to the <a class=\"reference external\" href=\"https://docs.pytest.org/en/latest/reference/customize.html#rootdir\">pytest root directory</a> (previously it was relative to the current working directory). <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/573\">#573</a></p></li></ul></section><section id=\"id28\"><h2><a class=\"toc-backref\" href=\"#id166\" role=\"doc-backlink\">6.0.1</a><a class=\"headerlink\" href=\"#id28\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix regression introduced in 6.0.0 where a step function decorated multiple using a parsers times would not be executed correctly. <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/530\">#530</a> <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/issues/528\">#528</a></p></li></ul></section><section id=\"id31\"><h2><a class=\"toc-backref\" href=\"#id167\" role=\"doc-backlink\">6.0.0</a><a class=\"headerlink\" href=\"#id31\" title=\"Link to this heading\">\u00b6</a></h2><p>This release introduces breaking changes in order to be more in line with the official gherkin specification.</p><ul class=\"simple\"><li><p>Cleanup of the documentation and tests related to parametrization (elchupanebrej) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/469\">#469</a></p></li><li><p>Removed feature level examples for the gherkin compatibility (olegpidsadnyi) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/490\">#490</a></p></li><li><p>Removed vertical examples for the gherkin compatibility (olegpidsadnyi) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/492\">#492</a></p></li><li><p>Step arguments are no longer fixtures (olegpidsadnyi) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/493\">#493</a></p></li><li><p>Drop support of python 3.6, pytest 4 (elchupanebrej) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/495\">#495</a> <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/issues/504\">#504</a></p></li><li><p>Step definitions can have \u201cyield\u201d statements again (4.0 release broke it). They will be executed as normal fixtures: code after the yield is executed during teardown of the test. (youtux) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/issues/503\">#503</a></p></li><li><p>Scenario outlines unused example parameter validation is removed (olegpidsadnyi) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/499\">#499</a></p></li><li><p>Add type annotations (youtux) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/505\">#505</a></p></li><li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">pytest_bdd.parsers.StepParser</span></code> now is an Abstract Base Class. Subclasses must make sure to implement the abstract methods. (youtux) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/505\">#505</a></p></li><li><p>Angular brackets in step definitions are only parsed in \u201cScenario Outline\u201d (previously they were parsed also in normal \u201cScenario\u201ds) (youtux) <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/pull/524\">#524</a>.</p></li></ul></section><section id=\"id43\"><h2><a class=\"toc-backref\" href=\"#id168\" role=\"doc-backlink\">5.0.0</a><a class=\"headerlink\" href=\"#id43\" title=\"Link to this heading\">\u00b6</a></h2><p>This release introduces breaking changes, please refer to the <a class=\"reference internal\" href=\"#migration-from-4-x-x\"><span class=\"std std-ref\">Migration of your tests from versions 4.x.x</span></a>.</p><ul class=\"simple\"><li><p>Rewrite the logic to parse Examples for Scenario Outlines. Now the substitution of the examples is done during the parsing of Gherkin feature files. You won\u2019t need to define the steps twice like <code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;given(&quot;there</span> <span class=\"pre\">are</span> <span class=\"pre\">&lt;start&gt;</span> <span class=\"pre\">cucumbers&quot;)</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;given(parsers.parse(&quot;there</span> <span class=\"pre\">are</span> <span class=\"pre\">{start}</span> <span class=\"pre\">cucumbers&quot;))</span></code>. The latter will be enough.</p></li><li><p>Removed <code class=\"docutils literal notranslate\"><span class=\"pre\">example_converters</span></code> from <code class=\"docutils literal notranslate\"><span class=\"pre\">scenario(...)</span></code> signature. You should now use just the <code class=\"docutils literal notranslate\"><span class=\"pre\">converters</span></code> parameter for <code class=\"docutils literal notranslate\"><span class=\"pre\">given</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">when</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">then</span></code>.</p></li><li><p>Removed <code class=\"docutils literal notranslate\"><span class=\"pre\">--cucumberjson-expanded</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">--cucumber-json-expanded</span></code> options. Now the JSON report is always expanded.</p></li><li><p>Removed <code class=\"docutils literal notranslate\"><span class=\"pre\">--gherkin-terminal-reporter-expanded</span></code> option. Now the terminal report is always expanded.</p></li></ul></section><section id=\"id44\"><h2><a class=\"toc-backref\" href=\"#id169\" role=\"doc-backlink\">4.1.0</a><a class=\"headerlink\" href=\"#id44\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p><cite>when</cite> and <cite>then</cite> steps now can provide a <cite>target_fixture</cite>, just like <cite>given</cite> does. Discussion at <a class=\"reference external\" href=\"https://github.com/pytest-dev/pytest-bdd/issues/402\">https://github.com/pytest-dev/pytest-bdd/issues/402</a>.</p></li><li><p>Drop compatibility for python 2 and officially support only python &gt;= 3.6.</p></li><li><p>Fix error when using <cite>\u2013cucumber-json-expanded</cite> in combination with <cite>example_converters</cite> (marcbrossaissogeti).</p></li><li><p>Fix <cite>\u2013generate-missing</cite> not correctly recognizing steps with parsers</p></li></ul></section><section id=\"id45\"><h2><a class=\"toc-backref\" href=\"#id170\" role=\"doc-backlink\">4.0.2</a><a class=\"headerlink\" href=\"#id45\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix a bug that prevents using comments in the <code class=\"docutils literal notranslate\"><span class=\"pre\">Examples:</span></code> section. (youtux)</p></li></ul></section><section id=\"id46\"><h2><a class=\"toc-backref\" href=\"#id171\" role=\"doc-backlink\">4.0.1</a><a class=\"headerlink\" href=\"#id46\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixed performance regression introduced in 4.0.0 where collection time of tests would take way longer than before. (youtux)</p></li></ul></section><section id=\"id47\"><h2><a class=\"toc-backref\" href=\"#id172\" role=\"doc-backlink\">4.0.0</a><a class=\"headerlink\" href=\"#id47\" title=\"Link to this heading\">\u00b6</a></h2><p>This release introduces breaking changes, please refer to the <a class=\"reference internal\" href=\"#migration-from-3-x-x\"><span class=\"std std-ref\">Migration of your tests from versions 3.x.x</span></a>.</p><ul class=\"simple\"><li><p>Strict Gherkin option is removed (<code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;scenario()</span></code> does not accept the <code class=\"docutils literal notranslate\"><span class=\"pre\">strict_gherkin</span></code> parameter). (olegpidsadnyi)</p></li><li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;scenario()</span></code> does not accept the undocumented parameter <code class=\"docutils literal notranslate\"><span class=\"pre\">caller_module</span></code> anymore. (youtux)</p></li><li><p>Given step is no longer a fixture. The scope parameter is also removed. (olegpidsadnyi)</p></li><li><p>Fixture parameter is removed from the given step declaration. (olegpidsadnyi)</p></li><li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">pytest_bdd_step_validation_error</span></code> hook is removed. (olegpidsadnyi)</p></li><li><p>Fix an error with pytest-pylint plugin #374. (toracle)</p></li><li><p>Fix pytest-xdist 2.0 compatibility #369. (olegpidsadnyi)</p></li><li><p>Fix compatibility with pytest 6 <code class=\"docutils literal notranslate\"><span class=\"pre\">--import-mode=importlib</span></code> option. (youtux)</p></li></ul></section><section id=\"id48\"><h2><a class=\"toc-backref\" href=\"#id173\" role=\"doc-backlink\">3.4.0</a><a class=\"headerlink\" href=\"#id48\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Parse multiline steps according to the gherkin specification #365.</p></li></ul></section><section id=\"id49\"><h2><a class=\"toc-backref\" href=\"#id174\" role=\"doc-backlink\">3.3.0</a><a class=\"headerlink\" href=\"#id49\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Drop support for pytest &lt; 4.3.</p></li><li><p>Fix a Python 4.0 bug.</p></li><li><p>Fix <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest</span> <span class=\"pre\">--generate-missing</span></code> functionality being broken.</p></li><li><p>Fix problematic missing step definition from strings containing quotes.</p></li><li><p>Implement parsing escaped pipe characters in outline parameters (Mark90) #337.</p></li><li><p>Disable the strict Gherkin validation in the steps generation (v-buriak) #356.</p></li></ul></section><section id=\"id50\"><h2><a class=\"toc-backref\" href=\"#id175\" role=\"doc-backlink\">3.2.1</a><a class=\"headerlink\" href=\"#id50\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix regression introduced in 3.2.0 where pytest-bdd would break in presence of test items that are not functions.</p></li></ul></section><section id=\"id51\"><h2><a class=\"toc-backref\" href=\"#id176\" role=\"doc-backlink\">3.2.0</a><a class=\"headerlink\" href=\"#id51\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix Python 3.8 support</p></li><li><p>Remove code that rewrites code. This should help with the maintenance of this project and make debugging easier.</p></li></ul></section><section id=\"id52\"><h2><a class=\"toc-backref\" href=\"#id177\" role=\"doc-backlink\">3.1.1</a><a class=\"headerlink\" href=\"#id52\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Allow unicode string in <code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;given()</span></code> step names when using python2.This makes the transition of projects from python 2 to 3 easier.</p></li></ul></section><section id=\"id53\"><h2><a class=\"toc-backref\" href=\"#id178\" role=\"doc-backlink\">3.1.0</a><a class=\"headerlink\" href=\"#id53\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Drop support for pytest &lt; 3.3.2.</p></li><li><p>Step definitions generated by <code class=\"docutils literal notranslate\"><span class=\"pre\">$</span> <span class=\"pre\">pytest-bdd</span> <span class=\"pre\">generate</span></code> will now raise <code class=\"docutils literal notranslate\"><span class=\"pre\">NotImplementedError</span></code> by default.</p></li><li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;given(...)</span></code> no longer accepts regex objects. It was deprecated long ago.</p></li><li><p>Improve project testing by treating warnings as exceptions.</p></li><li><p><code class=\"docutils literal notranslate\"><span class=\"pre\">pytest_bdd_step_validation_error</span></code> will now always receive <code class=\"docutils literal notranslate\"><span class=\"pre\">step_func_args</span></code> as defined in the signature.</p></li></ul></section><section id=\"id54\"><h2><a class=\"toc-backref\" href=\"#id179\" role=\"doc-backlink\">3.0.2</a><a class=\"headerlink\" href=\"#id54\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Add compatibility with pytest 4.2 (sliwinski-milosz) #288.</p></li></ul></section><section id=\"id55\"><h2><a class=\"toc-backref\" href=\"#id180\" role=\"doc-backlink\">3.0.1</a><a class=\"headerlink\" href=\"#id55\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Minimal supported version of <cite>pytest</cite> is now 2.9.0 as lower versions do not support <cite>bool</cite> type ini options (sliwinski-milosz) #260</p></li><li><p>Fix RemovedInPytest4Warning warnings (sliwinski-milosz) #261.</p></li></ul></section><section id=\"id56\"><h2><a class=\"toc-backref\" href=\"#id181\" role=\"doc-backlink\">3.0.0</a><a class=\"headerlink\" href=\"#id56\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixtures <cite>pytestbdd_feature_base_dir</cite> and <cite>pytestbdd_strict_gherkin</cite> have been removed. Check the <a class=\"reference external\" href=\"README.rst\">Migration of your tests from versions 2.x.x</a> for more information (sliwinski-milosz) #255</p></li><li><p>Fix step definitions not being found when using parsers or converters after a change in pytest (youtux) #257</p></li></ul></section><section id=\"id57\"><h2><a class=\"toc-backref\" href=\"#id182\" role=\"doc-backlink\">2.21.0</a><a class=\"headerlink\" href=\"#id57\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Gherkin terminal reporter expanded format (pauk-slon)</p></li></ul></section><section id=\"id58\"><h2><a class=\"toc-backref\" href=\"#id183\" role=\"doc-backlink\">2.20.0</a><a class=\"headerlink\" href=\"#id58\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added support for But steps (olegpidsadnyi)</p></li><li><p>Fixed compatibility with pytest 3.3.2 (olegpidsadnyi)</p></li><li><p>MInimal required version of pytest is now 2.8.1 since it doesn\u2019t support earlier versions (olegpidsadnyi)</p></li></ul></section><section id=\"id59\"><h2><a class=\"toc-backref\" href=\"#id184\" role=\"doc-backlink\">2.19.0</a><a class=\"headerlink\" href=\"#id59\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added \u2013cucumber-json-expanded option for explicit selection of expanded format (mjholtkamp)</p></li><li><p>Step names are filled in when \u2013cucumber-json-expanded is used (mjholtkamp)</p></li></ul></section><section id=\"id60\"><h2><a class=\"toc-backref\" href=\"#id185\" role=\"doc-backlink\">2.18.2</a><a class=\"headerlink\" href=\"#id60\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix check for out section steps definitions for no strict gherkin feature</p></li></ul></section><section id=\"id61\"><h2><a class=\"toc-backref\" href=\"#id186\" role=\"doc-backlink\">2.18.1</a><a class=\"headerlink\" href=\"#id61\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Relay fixture results to recursive call of \u2018get_features\u2019 (coddingtonbear)</p></li></ul></section><section id=\"id62\"><h2><a class=\"toc-backref\" href=\"#id187\" role=\"doc-backlink\">2.18.0</a><a class=\"headerlink\" href=\"#id62\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Add gherkin terminal reporter (spinus + thedrow)</p></li></ul></section><section id=\"id63\"><h2><a class=\"toc-backref\" href=\"#id188\" role=\"doc-backlink\">2.17.2</a><a class=\"headerlink\" href=\"#id63\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix scenario lines containing an <code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;</span></code> being parsed as a tag. (The-Compiler)</p></li></ul></section><section id=\"id64\"><h2><a class=\"toc-backref\" href=\"#id189\" role=\"doc-backlink\">2.17.1</a><a class=\"headerlink\" href=\"#id64\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Add support for pytest 3.0</p></li></ul></section><section id=\"id65\"><h2><a class=\"toc-backref\" href=\"#id190\" role=\"doc-backlink\">2.17.0</a><a class=\"headerlink\" href=\"#id65\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix FixtureDef signature for newer pytest versions (The-Compiler)</p></li><li><p>Better error explanation for the steps defined outside of scenarios (olegpidsadnyi)</p></li><li><p>Add a <code class=\"docutils literal notranslate\"><span class=\"pre\">pytest_bdd_apply_tag</span></code> hook to customize handling of tags (The-Compiler)</p></li><li><p>Allow spaces in tag names. This can be useful when using the<code class=\"docutils literal notranslate\"><span class=\"pre\">pytest_bdd_apply_tag</span></code> hook with tags like <code class=\"docutils literal notranslate\"><span class=\"pre\">&#64;xfail:</span> <span class=\"pre\">Some</span> <span class=\"pre\">reason</span></code>.</p></li></ul></section><section id=\"id66\"><h2><a class=\"toc-backref\" href=\"#id191\" role=\"doc-backlink\">2.16.1</a><a class=\"headerlink\" href=\"#id66\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Cleaned up hooks of the plugin (olegpidsadnyi)</p></li><li><p>Fixed report serialization (olegpidsadnyi)</p></li></ul></section><section id=\"id67\"><h2><a class=\"toc-backref\" href=\"#id192\" role=\"doc-backlink\">2.16.0</a><a class=\"headerlink\" href=\"#id67\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixed deprecation warnings with pytest 2.8 (The-Compiler)</p></li><li><p>Fixed deprecation warnings with Python 3.5 (The-Compiler)</p></li></ul></section><section id=\"id68\"><h2><a class=\"toc-backref\" href=\"#id193\" role=\"doc-backlink\">2.15.0</a><a class=\"headerlink\" href=\"#id68\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Add examples data in the scenario report (bubenkoff)</p></li></ul></section><section id=\"id69\"><h2><a class=\"toc-backref\" href=\"#id194\" role=\"doc-backlink\">2.14.5</a><a class=\"headerlink\" href=\"#id69\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Properly parse feature description (bubenkoff)</p></li></ul></section><section id=\"id70\"><h2><a class=\"toc-backref\" href=\"#id195\" role=\"doc-backlink\">2.14.3</a><a class=\"headerlink\" href=\"#id70\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Avoid potentially random collection order for xdist compartibility (bubenkoff)</p></li></ul></section><section id=\"id71\"><h2><a class=\"toc-backref\" href=\"#id196\" role=\"doc-backlink\">2.14.1</a><a class=\"headerlink\" href=\"#id71\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Pass additional arguments to parsers (bubenkoff)</p></li></ul></section><section id=\"id72\"><h2><a class=\"toc-backref\" href=\"#id197\" role=\"doc-backlink\">2.14.0</a><a class=\"headerlink\" href=\"#id72\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Add validation check which prevents having multiple features in a single feature file (bubenkoff)</p></li></ul></section><section id=\"id73\"><h2><a class=\"toc-backref\" href=\"#id198\" role=\"doc-backlink\">2.13.1</a><a class=\"headerlink\" href=\"#id73\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Allow mixing feature example table with scenario example table (bubenkoff, olegpidsadnyi)</p></li></ul></section><section id=\"id74\"><h2><a class=\"toc-backref\" href=\"#id199\" role=\"doc-backlink\">2.13.0</a><a class=\"headerlink\" href=\"#id74\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Feature example table (bubenkoff, sureshvv)</p></li></ul></section><section id=\"id75\"><h2><a class=\"toc-backref\" href=\"#id200\" role=\"doc-backlink\">2.12.2</a><a class=\"headerlink\" href=\"#id75\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Make it possible to relax strict Gherkin scenario validation (bubenkoff)</p></li></ul></section><section id=\"id76\"><h2><a class=\"toc-backref\" href=\"#id201\" role=\"doc-backlink\">2.11.3</a><a class=\"headerlink\" href=\"#id76\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix minimal <cite>six</cite> version (bubenkoff, dustinfarris)</p></li></ul></section><section id=\"id77\"><h2><a class=\"toc-backref\" href=\"#id202\" role=\"doc-backlink\">2.11.1</a><a class=\"headerlink\" href=\"#id77\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Mention step type on step definition not found errors and in code generation (bubenkoff, lrowe)</p></li></ul></section><section id=\"id78\"><h2><a class=\"toc-backref\" href=\"#id203\" role=\"doc-backlink\">2.11.0</a><a class=\"headerlink\" href=\"#id78\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Prefix step definition fixture names to avoid name collisions (bubenkoff, lrowe)</p></li></ul></section><section id=\"id79\"><h2><a class=\"toc-backref\" href=\"#id204\" role=\"doc-backlink\">2.10.0</a><a class=\"headerlink\" href=\"#id79\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Make feature and scenario tags to be fully compartible with pytest markers (bubenkoff, kevinastone)</p></li></ul></section><section id=\"id80\"><h2><a class=\"toc-backref\" href=\"#id205\" role=\"doc-backlink\">2.9.1</a><a class=\"headerlink\" href=\"#id80\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixed FeatureError string representation to correctly support python3 (bubenkoff, lrowe)</p></li></ul></section><section id=\"id81\"><h2><a class=\"toc-backref\" href=\"#id206\" role=\"doc-backlink\">2.9.0</a><a class=\"headerlink\" href=\"#id81\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added possibility to inject fixtures from given keywords (bubenkoff)</p></li></ul></section><section id=\"id82\"><h2><a class=\"toc-backref\" href=\"#id207\" role=\"doc-backlink\">2.8.0</a><a class=\"headerlink\" href=\"#id82\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added hook before the step is executed with evaluated parameters (olegpidsadnyi)</p></li></ul></section><section id=\"id83\"><h2><a class=\"toc-backref\" href=\"#id208\" role=\"doc-backlink\">2.7.2</a><a class=\"headerlink\" href=\"#id83\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Correct base feature path lookup for python3 (bubenkoff)</p></li></ul></section><section id=\"id84\"><h2><a class=\"toc-backref\" href=\"#id209\" role=\"doc-backlink\">2.7.1</a><a class=\"headerlink\" href=\"#id84\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Allow to pass <code class=\"docutils literal notranslate\"><span class=\"pre\">scope</span></code> for <code class=\"docutils literal notranslate\"><span class=\"pre\">given</span></code> steps (bubenkoff, sureshvv)</p></li></ul></section><section id=\"id85\"><h2><a class=\"toc-backref\" href=\"#id210\" role=\"doc-backlink\">2.7.0</a><a class=\"headerlink\" href=\"#id85\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Implemented <cite>scenarios</cite> shortcut to automatically bind scenarios to tests (bubenkoff)</p></li></ul></section><section id=\"id86\"><h2><a class=\"toc-backref\" href=\"#id211\" role=\"doc-backlink\">2.6.2</a><a class=\"headerlink\" href=\"#id86\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Parse comments only in the beginning of words (santagada)</p></li></ul></section><section id=\"id87\"><h2><a class=\"toc-backref\" href=\"#id212\" role=\"doc-backlink\">2.6.1</a><a class=\"headerlink\" href=\"#id87\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Correctly handle <cite>pytest-bdd</cite> command called without the subcommand under python3 (bubenkoff, spinus)</p></li><li><p>Pluggable parsers for step definitions (bubenkoff, spinus)</p></li></ul></section><section id=\"id88\"><h2><a class=\"toc-backref\" href=\"#id213\" role=\"doc-backlink\">2.5.3</a><a class=\"headerlink\" href=\"#id88\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Add after scenario hook, document both before and after scenario hooks (bubenkoff)</p></li></ul></section><section id=\"id89\"><h2><a class=\"toc-backref\" href=\"#id214\" role=\"doc-backlink\">2.5.2</a><a class=\"headerlink\" href=\"#id89\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix code generation steps ordering (bubenkoff)</p></li></ul></section><section id=\"id90\"><h2><a class=\"toc-backref\" href=\"#id215\" role=\"doc-backlink\">2.5.1</a><a class=\"headerlink\" href=\"#id90\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix error report serialization (olegpidsadnyi)</p></li></ul></section><section id=\"id91\"><h2><a class=\"toc-backref\" href=\"#id216\" role=\"doc-backlink\">2.5.0</a><a class=\"headerlink\" href=\"#id91\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix multiline steps in the Background section (bubenkoff, arpe)</p></li><li><p>Code cleanup (olegpidsadnyi)</p></li></ul></section><section id=\"id92\"><h2><a class=\"toc-backref\" href=\"#id217\" role=\"doc-backlink\">2.4.5</a><a class=\"headerlink\" href=\"#id92\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix unicode issue with scenario name (bubenkoff, aohontsev)</p></li></ul></section><section id=\"id93\"><h2><a class=\"toc-backref\" href=\"#id218\" role=\"doc-backlink\">2.4.3</a><a class=\"headerlink\" href=\"#id93\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fix unicode regex argumented steps issue (bubenkoff, aohontsev)</p></li><li><p>Fix steps timings in the json reporting (bubenkoff)</p></li></ul></section><section id=\"id94\"><h2><a class=\"toc-backref\" href=\"#id219\" role=\"doc-backlink\">2.4.2</a><a class=\"headerlink\" href=\"#id94\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Recursion is fixed for the \u2013generate-missing and the \u2013feature parameters (bubenkoff)</p></li></ul></section><section id=\"id95\"><h2><a class=\"toc-backref\" href=\"#id220\" role=\"doc-backlink\">2.4.1</a><a class=\"headerlink\" href=\"#id95\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Better reporting of a not found scenario (bubenkoff)</p></li><li><p>Simple test code generation implemented (bubenkoff)</p></li><li><p>Correct timing values for cucumber json reporting (bubenkoff)</p></li><li><p>Validation/generation helpers (bubenkoff)</p></li></ul></section><section id=\"id96\"><h2><a class=\"toc-backref\" href=\"#id221\" role=\"doc-backlink\">2.4.0</a><a class=\"headerlink\" href=\"#id96\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Background support added (bubenkoff)</p></li><li><p>Fixed double collection of the conftest files if scenario decorator is used (ropez, bubenkoff)</p></li></ul></section><section id=\"id97\"><h2><a class=\"toc-backref\" href=\"#id222\" role=\"doc-backlink\">2.3.3</a><a class=\"headerlink\" href=\"#id97\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added timings to the cucumber json report (bubenkoff)</p></li></ul></section><section id=\"id98\"><h2><a class=\"toc-backref\" href=\"#id223\" role=\"doc-backlink\">2.3.2</a><a class=\"headerlink\" href=\"#id98\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixed incorrect error message using e.argname instead of step.name (hvdklauw)</p></li></ul></section><section id=\"id99\"><h2><a class=\"toc-backref\" href=\"#id224\" role=\"doc-backlink\">2.3.1</a><a class=\"headerlink\" href=\"#id99\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Implemented cucumber tags support (bubenkoff)</p></li><li><p>Implemented cucumber json formatter (bubenkoff, albertjan)</p></li><li><p>Added \u2018trace\u2019 keyword (bubenkoff)</p></li></ul></section><section id=\"id100\"><h2><a class=\"toc-backref\" href=\"#id225\" role=\"doc-backlink\">2.1.2</a><a class=\"headerlink\" href=\"#id100\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Latest pytest compartibility fixes (bubenkoff)</p></li></ul></section><section id=\"id101\"><h2><a class=\"toc-backref\" href=\"#id226\" role=\"doc-backlink\">2.1.1</a><a class=\"headerlink\" href=\"#id101\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Bugfixes (bubenkoff)</p></li></ul></section><section id=\"id102\"><h2><a class=\"toc-backref\" href=\"#id227\" role=\"doc-backlink\">2.1.0</a><a class=\"headerlink\" href=\"#id102\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Implemented multiline steps (bubenkoff)</p></li></ul></section><section id=\"id103\"><h2><a class=\"toc-backref\" href=\"#id228\" role=\"doc-backlink\">2.0.1</a><a class=\"headerlink\" href=\"#id103\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Allow more than one parameter per step (bubenkoff)</p></li><li><p>Allow empty example values (bubenkoff)</p></li></ul></section><section id=\"id104\"><h2><a class=\"toc-backref\" href=\"#id229\" role=\"doc-backlink\">2.0.0</a><a class=\"headerlink\" href=\"#id104\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Pure pytest parametrization for scenario outlines (bubenkoff)</p></li><li><p>Argumented steps now support converters (transformations) (bubenkoff)</p></li><li><p>scenario supports only decorator form (bubenkoff)</p></li><li><p>Code generation refactoring and cleanup (bubenkoff)</p></li></ul></section><section id=\"id105\"><h2><a class=\"toc-backref\" href=\"#id230\" role=\"doc-backlink\">1.0.0</a><a class=\"headerlink\" href=\"#id105\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Implemented scenario outlines (bubenkoff)</p></li></ul></section><section id=\"id106\"><h2><a class=\"toc-backref\" href=\"#id231\" role=\"doc-backlink\">0.6.11</a><a class=\"headerlink\" href=\"#id106\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixed step arguments conflict with the fixtures having the same name (olegpidsadnyi)</p></li></ul></section><section id=\"id107\"><h2><a class=\"toc-backref\" href=\"#id232\" role=\"doc-backlink\">0.6.9</a><a class=\"headerlink\" href=\"#id107\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Implemented support of Gherkin \u201cFeature:\u201d (olegpidsadnyi)</p></li></ul></section><section id=\"id108\"><h2><a class=\"toc-backref\" href=\"#id233\" role=\"doc-backlink\">0.6.8</a><a class=\"headerlink\" href=\"#id108\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Implemented several hooks to allow reporting/error handling (bubenkoff)</p></li></ul></section><section id=\"id109\"><h2><a class=\"toc-backref\" href=\"#id234\" role=\"doc-backlink\">0.6.6</a><a class=\"headerlink\" href=\"#id109\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixes to unnecessary mentioning of pytest-bdd package files in py.test log with -v (bubenkoff)</p></li></ul></section><section id=\"id110\"><h2><a class=\"toc-backref\" href=\"#id235\" role=\"doc-backlink\">0.6.5</a><a class=\"headerlink\" href=\"#id110\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Compartibility with recent pytest (bubenkoff)</p></li></ul></section><section id=\"id111\"><h2><a class=\"toc-backref\" href=\"#id236\" role=\"doc-backlink\">0.6.4</a><a class=\"headerlink\" href=\"#id111\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>More unicode fixes (amakhnach)</p></li></ul></section><section id=\"id112\"><h2><a class=\"toc-backref\" href=\"#id237\" role=\"doc-backlink\">0.6.3</a><a class=\"headerlink\" href=\"#id112\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added unicode support for feature files. Removed buggy module replacement for scenario. (amakhnach)</p></li></ul></section><section id=\"id113\"><h2><a class=\"toc-backref\" href=\"#id238\" role=\"doc-backlink\">0.6.2</a><a class=\"headerlink\" href=\"#id113\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Removed unnecessary mention of pytest-bdd package files in py.test log with -v (bubenkoff)</p></li></ul></section><section id=\"id114\"><h2><a class=\"toc-backref\" href=\"#id239\" role=\"doc-backlink\">0.6.1</a><a class=\"headerlink\" href=\"#id114\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Step arguments in whens when there are no given arguments used. (amakhnach, bubenkoff)</p></li></ul></section><section id=\"id115\"><h2><a class=\"toc-backref\" href=\"#id240\" role=\"doc-backlink\">0.6.0</a><a class=\"headerlink\" href=\"#id115\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added step arguments support. (curzona, olegpidsadnyi, bubenkoff)</p></li><li><p>Added checking of the step type order. (markon, olegpidsadnyi)</p></li></ul></section><section id=\"id116\"><h2><a class=\"toc-backref\" href=\"#id241\" role=\"doc-backlink\">0.5.2</a><a class=\"headerlink\" href=\"#id116\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added extra info into output when FeatureError exception raises. (amakhnach)</p></li></ul></section><section id=\"id117\"><h2><a class=\"toc-backref\" href=\"#id242\" role=\"doc-backlink\">0.5.0</a><a class=\"headerlink\" href=\"#id117\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Added parametrization to scenarios</p></li><li><p>Coveralls.io integration</p></li><li><p>Test coverage improvement/fixes</p></li><li><p>Correct wrapping of step functions to preserve function docstring</p></li></ul></section><section id=\"id118\"><h2><a class=\"toc-backref\" href=\"#id243\" role=\"doc-backlink\">0.4.7</a><a class=\"headerlink\" href=\"#id118\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixed Python 3.3 support</p></li></ul></section><section id=\"id119\"><h2><a class=\"toc-backref\" href=\"#id244\" role=\"doc-backlink\">0.4.6</a><a class=\"headerlink\" href=\"#id119\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixed a bug when py.test \u2013fixtures showed incorrect filenames for the steps.</p></li></ul></section><section id=\"id120\"><h2><a class=\"toc-backref\" href=\"#id245\" role=\"doc-backlink\">0.4.5</a><a class=\"headerlink\" href=\"#id120\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Fixed a bug with the reuse of the fixture by given steps being evaluated multiple times.</p></li></ul></section><section id=\"id121\"><h2><a class=\"toc-backref\" href=\"#id246\" role=\"doc-backlink\">0.4.3</a><a class=\"headerlink\" href=\"#id121\" title=\"Link to this heading\">\u00b6</a></h2><ul class=\"simple\"><li><p>Update the license file and PYPI related documentation.</p></li></ul></section></section>            <div class=\"clearer\"></div>          </div>        </div>      </div>      <div class=\"sphinxsidebar\" role=\"navigation\" aria-label=\"main navigation\">        <div class=\"sphinxsidebarwrapper\">  <div>    <h3><a href=\"#\">Table of Contents</a></h3>    <ul><li><a class=\"reference internal\" href=\"#\">Welcome to Pytest-BDD\u2019s documentation!</a></li><li><a class=\"reference internal\" href=\"#bdd-library-for-the-pytest-runner\">BDD library for the pytest runner</a><ul><li><a class=\"reference internal\" href=\"#install-pytest-bdd\">Install pytest-bdd</a></li><li><a class=\"reference internal\" href=\"#example\">Example</a></li><li><a class=\"reference internal\" href=\"#scenario-decorator\">Scenario decorator</a></li><li><a class=\"reference internal\" href=\"#step-aliases\">Step aliases</a></li><li><a class=\"reference internal\" href=\"#step-arguments\">Step arguments</a></li><li><a class=\"reference internal\" href=\"#override-fixtures-via-given-steps\">Override fixtures via given steps</a></li><li><a class=\"reference internal\" href=\"#multiline-steps\">Multiline steps</a></li><li><a class=\"reference internal\" href=\"#scenarios-shortcut\">Scenarios shortcut</a></li><li><a class=\"reference internal\" href=\"#scenario-outlines\">Scenario outlines</a></li><li><a class=\"reference internal\" href=\"#organizing-your-scenarios\">Organizing your scenarios</a></li><li><a class=\"reference internal\" href=\"#test-setup\">Test setup</a></li><li><a class=\"reference internal\" href=\"#backgrounds\">Backgrounds</a></li><li><a class=\"reference internal\" href=\"#reusing-fixtures\">Reusing fixtures</a></li><li><a class=\"reference internal\" href=\"#reusing-steps\">Reusing steps</a></li><li><a class=\"reference internal\" href=\"#default-steps\">Default steps</a></li><li><a class=\"reference internal\" href=\"#feature-file-paths\">Feature file paths</a></li><li><a class=\"reference internal\" href=\"#avoid-retyping-the-feature-file-name\">Avoid retyping the feature file name</a></li><li><a class=\"reference internal\" href=\"#programmatic-step-generation\">Programmatic step generation</a></li><li><a class=\"reference internal\" href=\"#hooks\">Hooks</a></li><li><a class=\"reference internal\" href=\"#browser-testing\">Browser testing</a></li><li><a class=\"reference internal\" href=\"#reporting\">Reporting</a></li><li><a class=\"reference internal\" href=\"#test-code-generation-helpers\">Test code generation helpers</a></li><li><a class=\"reference internal\" href=\"#advanced-code-generation\">Advanced code generation</a></li><li><a class=\"reference internal\" href=\"#migration-of-your-tests-from-versions-5-x-x\">Migration of your tests from versions 5.x.x</a><ul><li><a class=\"reference internal\" href=\"#removal-of-the-feature-examples\">Removal of the feature examples</a></li><li><a class=\"reference internal\" href=\"#removal-of-the-vertical-examples\">Removal of the vertical examples</a></li><li><a class=\"reference internal\" href=\"#step-arguments-are-no-longer-fixtures\">Step arguments are no longer fixtures</a></li><li><a class=\"reference internal\" href=\"#variable-templates-in-steps-are-only-parsed-for-scenario-outlines\">Variable templates in steps are only parsed for Scenario Outlines</a></li></ul></li><li><a class=\"reference internal\" href=\"#migration-of-your-tests-from-versions-4-x-x\">Migration of your tests from versions 4.x.x</a><ul><li><a class=\"reference internal\" href=\"#replace-usage-of-parameter-inside-step-definitions-with-parsed-parameter\">Replace usage of &lt;parameter&gt; inside step definitions with parsed {parameter}</a></li><li><a class=\"reference internal\" href=\"#refuse-combining-scenario-outline-and-pytest-parametrization\">Refuse combining scenario outline and pytest parametrization</a></li></ul></li><li><a class=\"reference internal\" href=\"#migration-of-your-tests-from-versions-3-x-x\">Migration of your tests from versions 3.x.x</a></li><li><a class=\"reference internal\" href=\"#license\">License</a></li></ul></li><li><a class=\"reference internal\" href=\"#authors\">Authors</a></li><li><a class=\"reference internal\" href=\"#changelog\">Changelog</a><ul><li><a class=\"reference internal\" href=\"#unreleased\">Unreleased</a></li><li><a class=\"reference internal\" href=\"#id2\">7.1.1</a></li><li><a class=\"reference internal\" href=\"#id3\">7.1</a></li><li><a class=\"reference internal\" href=\"#id5\">7.0.1</a></li><li><a class=\"reference internal\" href=\"#id8\">7.0.0</a></li><li><a class=\"reference internal\" href=\"#id14\">6.1.1</a></li><li><a class=\"reference internal\" href=\"#id16\">6.1.0</a></li><li><a class=\"reference internal\" href=\"#id28\">6.0.1</a></li><li><a class=\"reference internal\" href=\"#id31\">6.0.0</a></li><li><a class=\"reference internal\" href=\"#id43\">5.0.0</a></li><li><a class=\"reference internal\" href=\"#id44\">4.1.0</a></li><li><a class=\"reference internal\" href=\"#id45\">4.0.2</a></li><li><a class=\"reference internal\" href=\"#id46\">4.0.1</a></li><li><a class=\"reference internal\" href=\"#id47\">4.0.0</a></li><li><a class=\"reference internal\" href=\"#id48\">3.4.0</a></li><li><a class=\"reference internal\" href=\"#id49\">3.3.0</a></li><li><a class=\"reference internal\" href=\"#id50\">3.2.1</a></li><li><a class=\"reference internal\" href=\"#id51\">3.2.0</a></li><li><a class=\"reference internal\" href=\"#id52\">3.1.1</a></li><li><a class=\"reference internal\" href=\"#id53\">3.1.0</a></li><li><a class=\"reference internal\" href=\"#id54\">3.0.2</a></li><li><a class=\"reference internal\" href=\"#id55\">3.0.1</a></li><li><a class=\"reference internal\" href=\"#id56\">3.0.0</a></li><li><a class=\"reference internal\" href=\"#id57\">2.21.0</a></li><li><a class=\"reference internal\" href=\"#id58\">2.20.0</a></li><li><a class=\"reference internal\" href=\"#id59\">2.19.0</a></li><li><a class=\"reference internal\" href=\"#id60\">2.18.2</a></li><li><a class=\"reference internal\" href=\"#id61\">2.18.1</a></li><li><a class=\"reference internal\" href=\"#id62\">2.18.0</a></li><li><a class=\"reference internal\" href=\"#id63\">2.17.2</a></li><li><a class=\"reference internal\" href=\"#id64\">2.17.1</a></li><li><a class=\"reference internal\" href=\"#id65\">2.17.0</a></li><li><a class=\"reference internal\" href=\"#id66\">2.16.1</a></li><li><a class=\"reference internal\" href=\"#id67\">2.16.0</a></li><li><a class=\"reference internal\" href=\"#id68\">2.15.0</a></li><li><a class=\"reference internal\" href=\"#id69\">2.14.5</a></li><li><a class=\"reference internal\" href=\"#id70\">2.14.3</a></li><li><a class=\"reference internal\" href=\"#id71\">2.14.1</a></li><li><a class=\"reference internal\" href=\"#id72\">2.14.0</a></li><li><a class=\"reference internal\" href=\"#id73\">2.13.1</a></li><li><a class=\"reference internal\" href=\"#id74\">2.13.0</a></li><li><a class=\"reference internal\" href=\"#id75\">2.12.2</a></li><li><a class=\"reference internal\" href=\"#id76\">2.11.3</a></li><li><a class=\"reference internal\" href=\"#id77\">2.11.1</a></li><li><a class=\"reference internal\" href=\"#id78\">2.11.0</a></li><li><a class=\"reference internal\" href=\"#id79\">2.10.0</a></li><li><a class=\"reference internal\" href=\"#id80\">2.9.1</a></li><li><a class=\"reference internal\" href=\"#id81\">2.9.0</a></li><li><a class=\"reference internal\" href=\"#id82\">2.8.0</a></li><li><a class=\"reference internal\" href=\"#id83\">2.7.2</a></li><li><a class=\"reference internal\" href=\"#id84\">2.7.1</a></li><li><a class=\"reference internal\" href=\"#id85\">2.7.0</a></li><li><a class=\"reference internal\" href=\"#id86\">2.6.2</a></li><li><a class=\"reference internal\" href=\"#id87\">2.6.1</a></li><li><a class=\"reference internal\" href=\"#id88\">2.5.3</a></li><li><a class=\"reference internal\" href=\"#id89\">2.5.2</a></li><li><a class=\"reference internal\" href=\"#id90\">2.5.1</a></li><li><a class=\"reference internal\" href=\"#id91\">2.5.0</a></li><li><a class=\"reference internal\" href=\"#id92\">2.4.5</a></li><li><a class=\"reference internal\" href=\"#id93\">2.4.3</a></li><li><a class=\"reference internal\" href=\"#id94\">2.4.2</a></li><li><a class=\"reference internal\" href=\"#id95\">2.4.1</a></li><li><a class=\"reference internal\" href=\"#id96\">2.4.0</a></li><li><a class=\"reference internal\" href=\"#id97\">2.3.3</a></li><li><a class=\"reference internal\" href=\"#id98\">2.3.2</a></li><li><a class=\"reference internal\" href=\"#id99\">2.3.1</a></li><li><a class=\"reference internal\" href=\"#id100\">2.1.2</a></li><li><a class=\"reference internal\" href=\"#id101\">2.1.1</a></li><li><a class=\"reference internal\" href=\"#id102\">2.1.0</a></li><li><a class=\"reference internal\" href=\"#id103\">2.0.1</a></li><li><a class=\"reference internal\" href=\"#id104\">2.0.0</a></li><li><a class=\"reference internal\" href=\"#id105\">1.0.0</a></li><li><a class=\"reference internal\" href=\"#id106\">0.6.11</a></li><li><a class=\"reference internal\" href=\"#id107\">0.6.9</a></li><li><a class=\"reference internal\" href=\"#id108\">0.6.8</a></li><li><a class=\"reference internal\" href=\"#id109\">0.6.6</a></li><li><a class=\"reference internal\" href=\"#id110\">0.6.5</a></li><li><a class=\"reference internal\" href=\"#id111\">0.6.4</a></li><li><a class=\"reference internal\" href=\"#id112\">0.6.3</a></li><li><a class=\"reference internal\" href=\"#id113\">0.6.2</a></li><li><a class=\"reference internal\" href=\"#id114\">0.6.1</a></li><li><a class=\"reference internal\" href=\"#id115\">0.6.0</a></li><li><a class=\"reference internal\" href=\"#id116\">0.5.2</a></li><li><a class=\"reference internal\" href=\"#id117\">0.5.0</a></li><li><a class=\"reference internal\" href=\"#id118\">0.4.7</a></li><li><a class=\"reference internal\" href=\"#id119\">0.4.6</a></li><li><a class=\"reference internal\" href=\"#id120\">0.4.5</a></li><li><a class=\"reference internal\" href=\"#id121\">0.4.3</a></li></ul></li></ul>  </div>  <div role=\"note\" aria-label=\"source link\">    <h3>This Page</h3>    <ul class=\"this-page-menu\">      <li><a href=\"_sources/index.rst.txt\"            rel=\"nofollow\">Show Source</a></li>    </ul>   </div><div id=\"searchbox\" style=\"display: none\" role=\"search\">  <h3 id=\"searchlabel\">Quick search</h3>    <div class=\"searchformwrapper\">    <form class=\"search\" action=\"search.html\" method=\"get\">      <input type=\"text\" name=\"q\" aria-labelledby=\"searchlabel\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"/>      <input type=\"submit\" value=\"Go\" />    </form>    </div></div><script>document.getElementById('searchbox').style.display = \"block\"</script>        </div>      </div>      <div class=\"clearer\"></div>    </div>    <div class=\"related\" role=\"navigation\" aria-label=\"related navigation\">      <h3>Navigation</h3>      <ul>        <li class=\"right\" style=\"margin-right: 10px\">          <a href=\"genindex.html\" title=\"General Index\"             >index</a></li>        <li class=\"nav-item nav-item-0\"><a href=\"#\">Pytest-BDD 7.1.1 documentation</a> &#187;</li>        <li class=\"nav-item nav-item-this\"><a href=\"\">Welcome to Pytest-BDD\u2019s documentation!</a></li>       </ul>    </div>    <div class=\"footer\" role=\"contentinfo\">    &#169; Copyright 2013, Oleg Pidsadnyi.      Created using <a href=\"https://www.sphinx-doc.org/\">Sphinx</a> 7.2.6.    </div>  </body></html>",
  "embeddings": []
}